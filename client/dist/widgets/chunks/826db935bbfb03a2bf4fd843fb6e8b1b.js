"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_arcgis_core_layers_graphics_sources_FeatureLayerSource_js"],{

/***/ "./node_modules/@arcgis/core/chunks/mat4f64.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/chunks/mat4f64.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "I": () => (/* binding */ o),
/* harmony export */   "a": () => (/* binding */ n),
/* harmony export */   "b": () => (/* binding */ r),
/* harmony export */   "c": () => (/* binding */ e),
/* harmony export */   "f": () => (/* binding */ t),
/* harmony export */   "m": () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function t(e,r,t,n,o,a,u,c,f,l,s,i,b,_,m,p){return[e,r,t,n,o,a,u,c,f,l,s,i,b,_,m,p]}function n(e,r){return new Float64Array(e,r,16)}const o=e(),a=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ "./node_modules/@arcgis/core/chunks/vec32.js":
/*!***************************************************!*\
  !*** ./node_modules/@arcgis/core/chunks/vec32.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "a": () => (/* binding */ n),
/* harmony export */   "b": () => (/* binding */ f),
/* harmony export */   "c": () => (/* binding */ t),
/* harmony export */   "d": () => (/* binding */ i),
/* harmony export */   "e": () => (/* binding */ o),
/* harmony export */   "f": () => (/* binding */ a),
/* harmony export */   "n": () => (/* binding */ s),
/* harmony export */   "s": () => (/* binding */ u),
/* harmony export */   "t": () => (/* binding */ r),
/* harmony export */   "v": () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../geometry/support/buffer/math/common.js */ "./node_modules/@arcgis/core/geometry/support/buffer/math/common.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function t(e,t,f){r(e.typedBuffer,t.typedBuffer,f,e.typedBufferStride,t.typedBufferStride)}function r(t,r,f,n=3,o=n){if(t.length/n!==Math.ceil(r.length/o))return _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__.mathLogger.error("source and destination buffers need to have the same number of elements"),t;const u=t.length/n,i=f[0],s=f[1],a=f[2],d=f[4],c=f[5],l=f[6],p=f[8],y=f[9],h=f[10],m=f[12],B=f[13],g=f[14];let S=0,M=0;for(let e=0;e<u;e++){const e=r[S],f=r[S+1],u=r[S+2];t[M]=i*e+d*f+p*u+m,t[M+1]=s*e+c*f+y*u+B,t[M+2]=a*e+l*f+h*u+g,S+=o,M+=n}return t}function f(e,t,r){n(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function n(t,r,f,n=3,o=n){if(t.length/n!==Math.ceil(r.length/o))return void _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__.mathLogger.error("source and destination buffers need to have the same number of elements");const u=t.length/n,i=f[0],s=f[1],a=f[2],d=f[3],c=f[4],l=f[5],p=f[6],y=f[7],h=f[8];let m=0,B=0;for(let e=0;e<u;e++){const e=r[m],f=r[m+1],u=r[m+2];t[B]=i*e+d*f+p*u,t[B+1]=s*e+c*f+y*u,t[B+2]=a*e+l*f+h*u,m+=o,B+=n}}function o(e,t,r){u(e.typedBuffer,t,r,e.typedBufferStride)}function u(e,t,r,f=3){const n=Math.min(e.length/f,t.count),o=t.typedBuffer,u=t.typedBufferStride;let i=0,s=0;for(let a=0;a<n;a++)e[s]=r*o[i],e[s+1]=r*o[i+1],e[s+2]=r*o[i+2],i+=u,s+=f}function i(e,t){s(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r=3,f=r){const n=Math.min(e.length/r,t.length/f);let o=0,u=0;for(let i=0;i<n;i++){const n=t[o],i=t[o+1],s=t[o+2],a=n*n+i*i+s*s;if(a>0){const t=1/Math.sqrt(a);e[u]=t*n,e[u+1]=t*i,e[u+2]=t*s}o+=f,u+=r}}function a(e,t,r){const f=Math.min(e.count,t.count),n=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,i=t.typedBufferStride;let s=0,a=0;for(let d=0;d<f;d++)n[a]=u[s]>>r,n[a+1]=u[s+1]>>r,n[a+2]=u[s+2]>>r,s+=i,a+=o}const d=Object.freeze(Object.defineProperty({__proto__:null,normalize:s,normalizeView:i,scale:u,scaleView:o,shiftRight:a,transformMat3:n,transformMat3View:f,transformMat4:r,transformMat4View:t},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/support/MeshGeoreferencedRelativeVertexSpace.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/MeshGeoreferencedRelativeVertexSpace.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Clonable.js */ "./node_modules/@arcgis/core/core/Clonable.js");
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/JSONSupport.js */ "./node_modules/@arcgis/core/core/JSONSupport.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/enumeration.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _Point_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Point.js */ "./node_modules/@arcgis/core/geometry/Point.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let a=class extends((0,_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__.ClonableMixin)(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.JSONSupport)){constructor(e){super(e),this.type="georeferenced-relative",this.isRelative=!0,this.isGeoreferenced=!0,this.origin=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__.c)()}getOriginPoint(e){const[r,o,t]=this.origin;return new _Point_js__WEBPACK_IMPORTED_MODULE_10__["default"]({x:r,y:o,z:t,spatialReference:e})}setOriginFormPoint({x:e,y:r,z:o}){this.origin=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__.f)(e,r,o??0)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__.enumeration)({georeferencedRelative:"georeferenced-relative"},{readOnly:!0})],a.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({type:[Number],nonNullable:!0,json:{write:!0}})],a.prototype,"origin",void 0),a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.geometry.support.MeshGeoreferencedRelativeVertexSpace")],a);const m=a;


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/support/buffer/math/common.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/buffer/math/common.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "mathLogger": () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const e=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLogger("esri.views.3d.support.buffer.math");


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/support/meshUtils/External.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/meshUtils/External.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ServiceAsset": () => (/* binding */ a),
/* harmony export */   "ServiceAssetPart": () => (/* binding */ i),
/* harmony export */   "assetFormatId": () => (/* binding */ g),
/* harmony export */   "assetIsOnService": () => (/* binding */ b),
/* harmony export */   "externalIsOnService": () => (/* binding */ m),
/* harmony export */   "externalSourceToMultiPart": () => (/* binding */ N),
/* harmony export */   "externalSourcesAreEqual": () => (/* binding */ h),
/* harmony export */   "isDisplayAsset": () => (/* binding */ p),
/* harmony export */   "isDisplayExternal": () => (/* binding */ o),
/* harmony export */   "isDisplaySource": () => (/* binding */ l),
/* harmony export */   "isOriginalExternal": () => (/* binding */ A),
/* harmony export */   "sourceIsOnService": () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../layers/support/infoFor3D.js */ "./node_modules/@arcgis/core/layers/support/infoFor3D.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class a{constructor(t,r,e){this.assetName=t,this.assetMimeType=r,this.parts=e}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.equals)(this.parts,t.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t="";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:r}=this;if(1===r.length)return r[0].toBlob(t);const s=await Promise.all(r.map((r=>r.toBlob(t))));return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(t),new Blob(s)}}class i{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(r){const{data:s}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(this.partUrl,{responseType:"blob"});return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(r),s}}function o(t){return l(t?.source)}function u(t){if(!Array.isArray(t))return!1;return t.every((t=>t instanceof a))}const c=/^(model\/gltf\+json)|(model\/gltf-binary)$/,f=/\.(gltf|glb)/i;function l(t){if(!t)return!1;if(Array.isArray(t)){return t.some(p)}return p(t)}function p(t){if(t instanceof File){const{type:r,name:e}=t;return c.test(r)||f.test(e)}return c.test(t.assetMimeType)||f.test(t.assetName)}function m(t,r){if(!t)return!1;const{source:e}=t;return y(e,r)}function h(t,r){if(t===r)return!0;const{source:e}=t,{source:s}=r;if(e===s)return!0;if(u(e)&&u(s)){if(e.length!==s.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...e].sort(t),n=[...s].sort(t);for(let e=0;e<r.length;++e)if(!r[e].equals(n[e]))return!1;return!0}return!1}function y(t,r){if(Array.isArray(t)){return t.every((t=>b(t,r)))}return b(t,r)}function b(t,r){return t instanceof a&&t.isOnService(r)}function g(t,r){return t instanceof File?(0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__.getFilenameFormatId)(t.name,r)??(0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__.getMimeTypeFormatId)(t.type,r):(0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__.getMimeTypeFormatId)(t.assetMimeType,r)??(0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__.getFilenameFormatId)(t.assetName,r)}function N(t){return Array.isArray(t)?t:[t]}function A(t){return!!t.original}


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/support/meshVertexSpaceUtils.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/meshVertexSpaceUtils.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "toRelativeVertexSpace": () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/mat4.js */ "./node_modules/@arcgis/core/chunks/mat4.js");
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunks/mat4f64.js */ "./node_modules/@arcgis/core/chunks/mat4f64.js");
/* harmony import */ var _MeshGeoreferencedRelativeVertexSpace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MeshGeoreferencedRelativeVertexSpace.js */ "./node_modules/@arcgis/core/geometry/support/MeshGeoreferencedRelativeVertexSpace.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function n(t){const{vertexSpace:n}=t;if(n.isRelative)return t.clone();const{anchor:i}=t,c=i.clone(),a=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.f)(s,[-c.x,-c.y,-c.z]),m=new _MeshGeoreferencedRelativeVertexSpace_js__WEBPACK_IMPORTED_MODULE_2__["default"]({origin:[c.x,c.y,c.z]}),p=t.cloneWithVertexSpace(m),{position:f}=p.vertexAttributes;return p.vertexAttributes.position=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(new Float64Array(f.length),f,a),p.vertexAttributesChanged(),p}const s=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.c)();


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "queryCapabilities": () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const t={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ L)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../kernel.js */ "./node_modules/@arcgis/core/kernel.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../TimeExtent.js */ "./node_modules/@arcgis/core/TimeExtent.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/jsonMap.js */ "./node_modules/@arcgis/core/core/jsonMap.js");
/* harmony import */ var _core_Loadable_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/Loadable.js */ "./node_modules/@arcgis/core/core/Loadable.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_object_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/object.js */ "./node_modules/@arcgis/core/core/object.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../core/uuid.js */ "./node_modules/@arcgis/core/core/uuid.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_support_meshVertexSpaceUtils_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../geometry/support/meshVertexSpaceUtils.js */ "./node_modules/@arcgis/core/geometry/support/meshVertexSpaceUtils.js");
/* harmony import */ var _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../geometry/support/meshUtils/External.js */ "./node_modules/@arcgis/core/geometry/support/meshUtils/External.js");
/* harmony import */ var _editingSupport_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../editingSupport.js */ "./node_modules/@arcgis/core/layers/graphics/editingSupport.js");
/* harmony import */ var _support_clientSideDefaults_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./support/clientSideDefaults.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js");
/* harmony import */ var _support_QueryTask_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./support/QueryTask.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/QueryTask.js");
/* harmony import */ var _support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../support/infoFor3D.js */ "./node_modules/@arcgis/core/layers/support/infoFor3D.js");
/* harmony import */ var _rest_query_executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../rest/query/executeQueryJSON.js */ "./node_modules/@arcgis/core/rest/query/executeQueryJSON.js");
/* harmony import */ var _rest_query_operations_editsZScale_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../rest/query/operations/editsZScale.js */ "./node_modules/@arcgis/core/rest/query/operations/editsZScale.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const U=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_9__.JSONMap({originalAndCurrentFeatures:"original-and-current-features",none:"none"}),k=new Set(["Feature Layer","Oriented Imagery Layer","Table"]),Q=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_9__.JSONMap({Started:"published",Publishing:"publishing",Stopped:"unavailable"});let C=class extends _core_Loadable_js__WEBPACK_IMPORTED_MODULE_10__["default"]{constructor(){super(...arguments),this.type="feature-layer",this.refresh=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.debounce)((async()=>{await this.load();const e=this.sourceJSON.editingInfo?.lastEditDate;if(null==e)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const t=e!==this.sourceJSON.editingInfo?.lastEditDate;return{dataChanged:t,updates:t?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}})),this._ongoingAssetUploads=new Map}load(e){const t=null!=e?e.signal:null,s=this.layer.sourceJSON;return this.addResolvingPromise(this._fetchService(s,t)),Promise.resolve(this)}get queryTask(){const{capabilities:e,parsedUrl:t,dynamicDataSource:s,infoFor3D:r,gdbVersion:a,spatialReference:i,fieldsIndex:o}=this.layer,n=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("featurelayer-pbf")&&e?.query.supportsFormatPBF&&null==r,u=e?.operations?.supportsQueryAttachments??!1;return new _support_QueryTask_js__WEBPACK_IMPORTED_MODULE_27__["default"]({url:t.path,pbfSupported:n,fieldsIndex:o,infoFor3D:r,dynamicDataSource:s,gdbVersion:a,sourceSpatialReference:i,queryAttachmentsSupported:u})}async addAttachment(e,t){await this.load();const s=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+"/"+s+"/addAttachment",i=this._getLayerRequestOptions(),o=this._getFormDataForAttachment(t,i.query);try{const e=await (0,_request_js__WEBPACK_IMPORTED_MODULE_4__["default"])(a,{body:o});return this._createFeatureEditResult(e.data.addAttachmentResult)}catch(n){throw this._createAttachmentErrorResult(s,n)}}async updateAttachment(e,t,s){await this.load();const a=e.attributes[this.layer.objectIdField],i=this.layer.parsedUrl.path+"/"+a+"/updateAttachment",o=this._getLayerRequestOptions({query:{attachmentId:t}}),n=this._getFormDataForAttachment(s,o.query);try{const e=await (0,_request_js__WEBPACK_IMPORTED_MODULE_4__["default"])(i,{body:n});return this._createFeatureEditResult(e.data.updateAttachmentResult)}catch(u){throw this._createAttachmentErrorResult(a,u)}}async applyEdits(e,t){await this.load();const{layer:a}=this,o=a.infoFor3D,n=null!=o,u=n||(t?.globalIdUsed??!1),l=n?await this._uploadMeshesAndGetAssetMapEditsJSON(e):null,d=e.addFeatures?.map((e=>this._getFeatureJSON(e,o)))??[],c=(await Promise.all(d)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__.isSome),p=e.updateFeatures?.map((e=>this._getFeatureJSON(e,o)))??[],h=(await Promise.all(p)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__.isSome),y=this._getFeatureIds(e.deleteFeatures,u);(0,_rest_query_operations_editsZScale_js__WEBPACK_IMPORTED_MODULE_31__.unapplyEditsZUnitScaling)(c,h,a.spatialReference);const m=await this._getAttachmentEditsJSON(e),f=a.capabilities.editing.supportsAsyncApplyEdits&&n,g={gdbVersion:t?.gdbVersion||a.gdbVersion,rollbackOnFailure:t?.rollbackOnFailureEnabled,useGlobalIds:u,returnEditMoment:t?.returnEditMoment,usePreviousEditMoment:t?.usePreviousEditMoment,sessionId:t?.sessionId,async:f};t?.returnServiceEditsOption?(g.edits=JSON.stringify([{id:a.layerId,adds:c,updates:h,deletes:y,attachments:m,assetMaps:l}]),g.returnServiceEditsOption=U.toJSON(t?.returnServiceEditsOption),g.returnServiceEditsInSourceSR=t?.returnServiceEditsInSourceSR):(g.adds=c.length?JSON.stringify(c):null,g.updates=h.length?JSON.stringify(h):null,g.deletes=y.length?u?JSON.stringify(y):y.join(","):null,g.attachments=m&&JSON.stringify(m),g.assetMaps=null!=l?JSON.stringify(l):void 0);const R=this._getLayerRequestOptions({method:"post",query:g}),S=t?.returnServiceEditsOption?a.url:a.parsedUrl.path,b=f?await this._asyncApplyEdits(S+"/applyEdits",R):await (0,_request_js__WEBPACK_IMPORTED_MODULE_4__["default"])(S+"/applyEdits",R);if(!a.capabilities.operations?.supportsEditing&&a.effectiveCapabilities?.operations?.supportsEditing){const e=_kernel_js__WEBPACK_IMPORTED_MODULE_3__.id?.findCredential(a.url);await(e?.refreshToken())}return this._createEditsResult(b)}async deleteAttachments(e,t){await this.load();const s=e.attributes[this.layer.objectIdField],a=this.layer.parsedUrl.path+"/"+s+"/deleteAttachments";try{return(await (0,_request_js__WEBPACK_IMPORTED_MODULE_4__["default"])(a,this._getLayerRequestOptions({query:{attachmentIds:t.join(",")},method:"post"}))).data.deleteAttachmentResults.map(this._createFeatureEditResult)}catch(i){throw this._createAttachmentErrorResult(s,i)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:s,url:i}=this.layer,{data:o}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_4__["default"])(`${i}/${s}`,t),{id:n,extent:u,fullExtent:l,timeExtent:d}=o,c=u||l;return{id:n,fullExtent:c&&_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_20__["default"].fromJSON(c),timeExtent:d&&_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"].fromJSON({start:d[0],end:d[1]})}}))}async queryAttachments(e,t={}){await this.load();const s=this._getLayerRequestOptions(t);return this.queryTask.executeAttachmentQuery(e,s)}async queryFeatures(e,t){return await this.load(),this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}async fetchPublishingStatus(){if(!(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_28__.isHostedAgolService)(this.layer.url))return"unavailable";const e=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_15__.join)(this.layer.url,"status"),t=await (0,_request_js__WEBPACK_IMPORTED_MODULE_4__["default"])(e,{query:{f:"json"}});return Q.fromJSON(t.data.status)}async uploadAssets(e,t){const{uploadAssets:s}=await __webpack_require__.e(/*! import() */ "node_modules_arcgis_core_layers_graphics_sources_support_uploadAssets_js").then(__webpack_require__.bind(__webpack_require__, /*! ./support/uploadAssets.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/uploadAssets.js"));return s(e,{layer:this.layer,ongoingUploads:this._ongoingAssetUploads},t)}async _asyncApplyEdits(e,t){const s=(await (0,_request_js__WEBPACK_IMPORTED_MODULE_4__["default"])(e,t)).data.statusUrl;for(;;){const e=(await (0,_request_js__WEBPACK_IMPORTED_MODULE_4__["default"])(s,{query:{f:"json"},responseType:"json"})).data;switch(e.status){case"Completed":return (0,_request_js__WEBPACK_IMPORTED_MODULE_4__["default"])(e.resultUrl,{query:{f:"json"},responseType:"json"});case"CompletedWithErrors":throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_7__["default"]("async-applyEdits-failed","asynchronous applyEdits call failed.");case"Failed ImportChanges":case"InProgress":case"Pending":case"ExportAttachments":case"ExportChanges":case"ExportingData":case"ExportingSnapshot":case"ImportAttachments":case"ProvisioningReplica":case"UnRegisteringReplica":break;default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_7__["default"]("async-applyEdits-failed","asynchronous applyEdits call failed (undefined response status)")}await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.after)(D)}}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...e?.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const{data:s}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_4__["default"])(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("featurelayer-advanced-symbols")?{returnAdvancedSymbols:!0}:{},signal:t}));e=s}this.sourceJSON=await this._patchServiceJSON(e,t);const s=e.type;if(!k.has(s))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_7__["default"]("feature-layer-source:unsupported-type",`Source type "${s}" is not supported`)}async _patchServiceJSON(e,t){if("Table"!==e.type&&e.geometryType&&!e?.drawingInfo?.renderer&&!e.defaultSymbol){const t=(0,_support_clientSideDefaults_js__WEBPACK_IMPORTED_MODULE_26__.createDrawingInfo)(e.geometryType).renderer;(0,_core_object_js__WEBPACK_IMPORTED_MODULE_12__.setDeepValue)("drawingInfo.renderer",t,e)}if("esriGeometryMultiPatch"===e.geometryType&&e.infoFor3D&&(e.geometryType="mesh"),null==e.extent)try{const{data:s}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_4__["default"])(this.layer.url,this._getLayerRequestOptions({signal:t}));s.spatialReference&&(e.extent={xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:s.spatialReference})}catch(s){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.throwIfAbortError)(s)}return e}async _getFeatureJSON(e,t){const{geometry:s}=e,r={...e.attributes};if(null!=t&&"mesh"===s?.type){const{transformFieldRoles:e}=t,{origin:a,spatialReference:i,transform:o}=s,n=this.layer.spatialReference;await (0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_21__.initializeProjection)(i,n);const u=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_21__.project)(a,n);if(r[e.originX]=u.x,r[e.originY]=u.y,r[e.originZ]=u.z??0,null!=o){const{translation:t,scale:a,rotation:u}=o,{vertexSpace:l}=s,d=l.isGeoreferenced?1:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_14__.getMetersPerCartesianUnitForSR)(i)/(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_14__.getMetersPerCartesianUnitForSR)(n);r[e.translationX]=t[0]*d,r[e.translationY]=-t[2]*d,r[e.translationZ]=t[1]*d,r[e.scaleX]=a[0],r[e.scaleY]=a[2],r[e.scaleZ]=a[1],r[e.rotationX]=u[0],r[e.rotationY]=u[2],r[e.rotationZ]=u[1],r[e.rotationDeg]=u[3]}return{geometry:null,attributes:r}}return null==s?{attributes:r}:"mesh"===s.type||"extent"===s.type?null:{geometry:s.toJSON(),attributes:r}}async _getAttachmentEditsJSON(e){const t=await Promise.all((e.addAttachments??[]).map((e=>this._getAttachmentEditJSON(e)))),s=await Promise.all((e.updateAttachments??[]).map((e=>this._getAttachmentEditJSON(e)))),r=e.deleteAttachments??[];return t.length||s.length||r.length?{adds:t,updates:s,deletes:[...r]}:null}async _getAttachmentEditJSON(e){const{feature:t,attachment:s}=e,{globalId:r,name:a,contentType:i,data:o,uploadId:n}=s,u={globalId:r,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null};if(t&&(u.parentGlobalId="attributes"in t?t.attributes&&t.attributes[this.layer.globalIdField]:t.globalId),n)u.uploadId=n;else if(o){const e=await (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_15__.parseData)(o);e&&(u.contentType=e.mediaType,u.data=e.data),o instanceof File&&(u.name=o.name)}return a&&(u.name=a),i&&(u.contentType=i),u}async _uploadMeshesAndGetAssetMapEditsJSON(e){const{addAssetFeatures:t}=e;if(!t?.length)return null;const s=await this._filterRedundantAssetMaps(t);if(!t?.length)return null;const r=new Array,a=new Map;for(const i of s){const{geometry:e}=i,{vertexSpace:t}=e;if(t.isRelative)r.push(e);else{const t=(0,_geometry_support_meshVertexSpaceUtils_js__WEBPACK_IMPORTED_MODULE_23__.toRelativeVertexSpace)(e);a.set(t,e),i.geometry=t,r.push(t)}}await this.uploadAssets(r);for(const[i,o]of a)o.addExternalSources(i.metadata.externalSources.items);return{adds:this._getAssetMapEditsJSON(s),updates:[],deletes:[]}}_getAssetMapEditsJSON(e){const t=new Array,s=this.layer.globalIdField,r=this.layer.parsedUrl;for(const a of e){const e=a.geometry,{metadata:i}=e,o=i.getExternalSourcesOnService(r),n=a.getAttribute(s);if(0===o.length){_core_Logger_js__WEBPACK_IMPORTED_MODULE_11__["default"].getLogger(this).error(`Skipping feature ${n}. The mesh it is associated with has not been uploaded to the service and cannot be mapped to it.`);continue}const{source:u}=o.find(_geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_24__.isOriginalExternal)??o[0],{vertexSpace:d}=e,c=d.isGeoreferenced?["PROJECT_VERTICES"]:[];for(const s of u)1===s.parts.length?t.push({globalId:(0,_core_uuid_js__WEBPACK_IMPORTED_MODULE_16__.generateBracedUUID)(),parentGlobalId:n,assetName:s.assetName,assetHash:s.parts[0].partHash,flags:c}):_core_Logger_js__WEBPACK_IMPORTED_MODULE_11__["default"].getLogger(this).error(`Skipping asset ${s.assetName}. It does not have exactly one part, so we cannot map it to a feature.`)}return t}_getFeatureIds(e,t){if(!e||0===e.length)return[];if(t&&(0,_editingSupport_js__WEBPACK_IMPORTED_MODULE_25__.isFeatureIdentifierArrayWithGlobalId)(e))return e.map((e=>e.globalId));if((0,_editingSupport_js__WEBPACK_IMPORTED_MODULE_25__.isFeatureIdentifierArrayWithObjectId)(e))return e.map((e=>e.objectId));const{layer:s}=this,r=t?s.globalIdField:s.objectIdField;return r?e.map((e=>e.getAttribute(r))):[]}_createEditsResult(e){const t=e.data,{layerId:s}=this.layer,r=[];let a=null;if(Array.isArray(t))for(const u of t)r.push({id:u.id,editedFeatures:u.editedFeatures}),u.id===s&&(a={addResults:u.addResults??[],updateResults:u.updateResults??[],deleteResults:u.deleteResults??[],attachments:u.attachments,editMoment:u.editMoment});else a=t;const i=a?.assetMaps;if(i){for(const e of i.addResults)e.success||_core_Logger_js__WEBPACK_IMPORTED_MODULE_11__["default"].getLogger(this).error(`Failed to map asset to feature with globalId ${e.globalId}.`);for(const e of i.updateResults)e.success||_core_Logger_js__WEBPACK_IMPORTED_MODULE_11__["default"].getLogger(this).error(`Failed to map asset to feature with globalId ${e.globalId}.`)}const o=a?.attachments,n={addFeatureResults:a?.addResults?.map(this._createFeatureEditResult,this)??[],updateFeatureResults:a?.updateResults?.map(this._createFeatureEditResult,this)??[],deleteFeatureResults:a?.deleteResults?.map(this._createFeatureEditResult,this)??[],addAttachmentResults:o&&o.addResults?o.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:o&&o.updateResults?o.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:o&&o.deleteResults?o.deleteResults.map(this._createFeatureEditResult,this):[]};if(a?.editMoment&&(n.editMoment=a.editMoment),r.length>0){n.editedFeatureResults=[];for(const e of r){const{editedFeatures:t}=e,s=t?.spatialReference?new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_33__["default"](t.spatialReference):null;n.editedFeatureResults.push({layerId:e.id,editedFeatures:{adds:t?.adds?.map((e=>this._createEditedFeature(e,s)))||[],updates:t?.updates?.map((e=>({original:this._createEditedFeature(e[0],s),current:this._createEditedFeature(e[1],s)})))||[],deletes:t?.deletes?.map((e=>this._createEditedFeature(e,s)))||[],spatialReference:s}})}}return n}_createEditedFeature(e,s){return new _Graphic_js__WEBPACK_IMPORTED_MODULE_2__["default"]({attributes:e.attributes,geometry:(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_22__.fromJSON)({...e.geometry,spatialReference:s})})}_createFeatureEditResult(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new _core_Error_js__WEBPACK_IMPORTED_MODULE_7__["default"]("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_createAttachmentErrorResult(e,t){const s=t.details.messages&&t.details.messages[0]||t.message,r=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new _core_Error_js__WEBPACK_IMPORTED_MODULE_7__["default"]("feature-layer-source:attachment-failure",s,{code:r})}}_getFormDataForAttachment(e,t){const s=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(s)for(const r in t){const e=t[r];null!=e&&(s.set?s.set(r,e):s.append(r,e))}return s}_getLayerRequestOptions(e={}){const{parsedUrl:t,gdbVersion:s,dynamicDataSource:r}=this.layer;return{...e,query:{gdbVersion:s,layer:r?JSON.stringify({source:r}):void 0,...t.query,f:"json",...this._createRequestQueryOptions(e)},responseType:"json"}}async _filterRedundantAssetMaps(e){const{layer:t}=this,{globalIdField:s,infoFor3D:r,parsedUrl:a}=t;if(null==r||null==s)return e;const o=(0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_29__.getAssetMapTable)(r);if(null==o)return e;const n=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_15__.join)(a.path,`../${o.id}`),u=new Array,l=new Array;for(const i of e)i.geometry.metadata.getExternalSourcesOnService(a).length>0?l.push(i):u.push(i);const d=l.map((e=>e.getAttribute(s))).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__.isSome);if(0===d.length)return e;const{assetMapFieldRoles:{parentGlobalId:c,assetHash:p}}=r,h=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_32__["default"];h.where=`${c} IN (${d.map((e=>`'${e}'`))})`,h.outFields=[p,c],h.returnGeometry=!1;const y=await (0,_rest_query_executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_30__.executeQueryJSON)(n,h),{features:f}=y;return 0===f.length?e:[...u,...l.filter((e=>{const t=e.getAttribute(s);if(!t)return!0;const{metadata:r}=e.geometry,i=f.filter((e=>e.getAttribute(c)===t));if(0===i.length)return!0;const o=i.map((e=>e.getAttribute(p)));return r.getExternalSourcesOnService(a).flatMap((({source:e})=>e.flatMap((e=>e.parts.map((e=>e.partHash)))))).some((e=>o.every((t=>e!==t))))}))]}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],C.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)({constructOnly:!0})],C.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)({readOnly:!0})],C.prototype,"queryTask",null),C=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_19__.subclass)("esri.layers.graphics.sources.FeatureLayerSource")],C);const D=1e3,L=C;


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createCapabilities": () => (/* binding */ c),
/* harmony export */   "createDefaultAttributesFunction": () => (/* binding */ i),
/* harmony export */   "createDefaultTemplate": () => (/* binding */ a),
/* harmony export */   "createDrawingInfo": () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _data_QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../data/QueryEngineCapabilities.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js");
/* harmony import */ var _symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../symbols/support/defaultsJSON.js */ "./node_modules/@arcgis/core/symbols/support/defaultsJSON.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function o(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?_symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_3__.defaultPointSymbolJSON:"esriGeometryPolyline"===t?_symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_3__.defaultPolylineSymbolJSON:_symbols_support_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_3__.defaultPolygonSymbolJSON}}}const u=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let n=1;function i(t,s){if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-csp-restrictions"))return()=>({[s]:null,...t});try{let r=`this.${s} = null;`;for(const s in t){r+=`this${u.test(s)?`.${s}`:`["${s}"]`} = ${JSON.stringify(t[s])};`}const e=new Function(`\n      return class AttributesClass$${n++} {\n        constructor() {\n          ${r};\n        }\n      }\n    `)();return()=>new e}catch(r){return()=>({[s]:null,...t})}}function a(s={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(s)}}]}function c(t,r){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:r,supportsDelete:r,supportsEditing:r,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:r,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:_data_QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_2__.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:r,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1}}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvODI2ZGI5MzViYmZiMDNhMmJmNGZkODQzZmI2ZThiMWIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHdDQUF3QyxjQUFjLDhGQUE4Riw0Q0FBNEMsd0NBQXdDLGdCQUFnQixnQ0FBZ0MsbURBQW1ELHFFQUFxRSxxQkFBcUIsZUFBZSxHQUFxRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0p0ZjtBQUNBO0FBQ0E7QUFDQTtBQUN1RSxrQkFBa0IseUVBQXlFLDBCQUEwQiw2Q0FBNkMscUZBQU8sOEVBQThFLDJHQUEyRyxZQUFZLFlBQVksSUFBSSxLQUFLLCtCQUErQix1RUFBdUUsU0FBUyxrQkFBa0IseUVBQXlFLDBCQUEwQixrREFBa0QscUZBQU8sNEVBQTRFLGtGQUFrRixZQUFZLFlBQVksSUFBSSxLQUFLLCtCQUErQixrRUFBa0Usa0JBQWtCLHlDQUF5QyxzQkFBc0IsMkVBQTJFLFlBQVksWUFBWSxJQUFJLDBEQUEwRCxnQkFBZ0IsdUVBQXVFLHdCQUF3Qix3Q0FBd0MsWUFBWSxZQUFZLElBQUksS0FBSyw2Q0FBNkMsUUFBUSx1QkFBdUIsK0JBQStCLFdBQVcsa0JBQWtCLDhHQUE4RyxZQUFZLFlBQVksSUFBSSw2REFBNkQsNkNBQTZDLG9KQUFvSixxQkFBcUIsZUFBZSxHQUFpRjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKdGpFO0FBQ0E7QUFDQTtBQUNBO0FBQ29rQixvQkFBb0IsZ0VBQUMsQ0FBQyw2REFBQyxHQUFHLGVBQWUsbUdBQW1HLHFEQUFDLEdBQUcsa0JBQWtCLHlCQUF5QixXQUFXLGtEQUFDLEVBQUUsK0JBQStCLEVBQUUsb0JBQW9CLFlBQVksRUFBRSxZQUFZLHFEQUFDLGFBQWEsdURBQUMsRUFBRSw0RkFBQyxFQUFFLCtDQUErQyxFQUFFLFlBQVksOEJBQThCLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxtQ0FBbUMsVUFBVSxrQ0FBa0MsdURB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REFBd0QsZ0JBQXFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSjdtaEI7QUFDQTtBQUNBO0FBQ0E7QUFDc1QsY0FBYyxPQUFPLFVBQVUsMkVBQTJFLG9GQUFDLDRCQUE0Qix1RkFBQyxDQUFDLHNGQUFDLEdBQUcscUNBQXFDLFFBQVEsZ0JBQWdCLEdBQUcsd0RBQUcsc0NBQXNDLGNBQWMsRUFBRSxJQUFJLGNBQWMsR0FBRyxPQUFPLEVBQUUsa0JBQWtCLFVBQVUsY0FBYyxFQUFFLE9BQU8sRUFBRSxLQUFLLElBQUksc0JBQXNCLEVBQUUsNkRBQTZELE1BQU0seUJBQXlCLGNBQWMsR0FBRyxXQUFXLFNBQVMsV0FBVyxnQkFBZ0IsU0FBUyxZQUFZLGNBQWMsR0FBRyxlQUFlLEVBQUUsUUFBUSw2Q0FBNkMsV0FBVyxvREFBQyxLQUFLLEVBQUUsZ0JBQWdCLE9BQU8sV0FBVyxxQkFBcUIsdUJBQXVCLDhEQUE4RCxXQUFXLG1DQUFtQyxhQUFhLHdXQUF3VyxPQUFPLCtFQUFDLGVBQWUsK0VBQStFLG1CQUFtQixxQkFBcUIsVUFBVSxpVUFBd2IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jaHVua3MvbWF0NGY2NC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jaHVua3MvdmVjMzIuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvc3VwcG9ydC9NZXNoR2VvcmVmZXJlbmNlZFJlbGF0aXZlVmVydGV4U3BhY2UuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvc3VwcG9ydC9idWZmZXIvbWF0aC9jb21tb24uanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvc3VwcG9ydC9tZXNoVXRpbHMvRXh0ZXJuYWwuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvc3VwcG9ydC9tZXNoVmVydGV4U3BhY2VVdGlscy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvZGF0YS9RdWVyeUVuZ2luZUNhcGFiaWxpdGllcy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3Mvc291cmNlcy9GZWF0dXJlTGF5ZXJTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL3NvdXJjZXMvc3VwcG9ydC9jbGllbnRTaWRlRGVmYXVsdHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIGUoKXtyZXR1cm5bMSwwLDAsMCwwLDEsMCwwLDAsMCwxLDAsMCwwLDAsMV19ZnVuY3Rpb24gcihlKXtyZXR1cm5bZVswXSxlWzFdLGVbMl0sZVszXSxlWzRdLGVbNV0sZVs2XSxlWzddLGVbOF0sZVs5XSxlWzEwXSxlWzExXSxlWzEyXSxlWzEzXSxlWzE0XSxlWzE1XV19ZnVuY3Rpb24gdChlLHIsdCxuLG8sYSx1LGMsZixsLHMsaSxiLF8sbSxwKXtyZXR1cm5bZSxyLHQsbixvLGEsdSxjLGYsbCxzLGksYixfLG0scF19ZnVuY3Rpb24gbihlLHIpe3JldHVybiBuZXcgRmxvYXQ2NEFycmF5KGUsciwxNil9Y29uc3Qgbz1lKCksYT1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsSURFTlRJVFk6byxjbG9uZTpyLGNyZWF0ZTplLGNyZWF0ZVZpZXc6bixmcm9tVmFsdWVzOnR9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pKTtleHBvcnR7byBhcyBJLG4gYXMgYSxyIGFzIGIsZSBhcyBjLHQgYXMgZixhIGFzIG19O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHttYXRoTG9nZ2VyIGFzIGV9ZnJvbVwiLi4vZ2VvbWV0cnkvc3VwcG9ydC9idWZmZXIvbWF0aC9jb21tb24uanNcIjtmdW5jdGlvbiB0KGUsdCxmKXtyKGUudHlwZWRCdWZmZXIsdC50eXBlZEJ1ZmZlcixmLGUudHlwZWRCdWZmZXJTdHJpZGUsdC50eXBlZEJ1ZmZlclN0cmlkZSl9ZnVuY3Rpb24gcih0LHIsZixuPTMsbz1uKXtpZih0Lmxlbmd0aC9uIT09TWF0aC5jZWlsKHIubGVuZ3RoL28pKXJldHVybiBlLmVycm9yKFwic291cmNlIGFuZCBkZXN0aW5hdGlvbiBidWZmZXJzIG5lZWQgdG8gaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2YgZWxlbWVudHNcIiksdDtjb25zdCB1PXQubGVuZ3RoL24saT1mWzBdLHM9ZlsxXSxhPWZbMl0sZD1mWzRdLGM9Zls1XSxsPWZbNl0scD1mWzhdLHk9Zls5XSxoPWZbMTBdLG09ZlsxMl0sQj1mWzEzXSxnPWZbMTRdO2xldCBTPTAsTT0wO2ZvcihsZXQgZT0wO2U8dTtlKyspe2NvbnN0IGU9cltTXSxmPXJbUysxXSx1PXJbUysyXTt0W01dPWkqZStkKmYrcCp1K20sdFtNKzFdPXMqZStjKmYreSp1K0IsdFtNKzJdPWEqZStsKmYraCp1K2csUys9byxNKz1ufXJldHVybiB0fWZ1bmN0aW9uIGYoZSx0LHIpe24oZS50eXBlZEJ1ZmZlcix0LnR5cGVkQnVmZmVyLHIsZS50eXBlZEJ1ZmZlclN0cmlkZSx0LnR5cGVkQnVmZmVyU3RyaWRlKX1mdW5jdGlvbiBuKHQscixmLG49MyxvPW4pe2lmKHQubGVuZ3RoL24hPT1NYXRoLmNlaWwoci5sZW5ndGgvbykpcmV0dXJuIHZvaWQgZS5lcnJvcihcInNvdXJjZSBhbmQgZGVzdGluYXRpb24gYnVmZmVycyBuZWVkIHRvIGhhdmUgdGhlIHNhbWUgbnVtYmVyIG9mIGVsZW1lbnRzXCIpO2NvbnN0IHU9dC5sZW5ndGgvbixpPWZbMF0scz1mWzFdLGE9ZlsyXSxkPWZbM10sYz1mWzRdLGw9Zls1XSxwPWZbNl0seT1mWzddLGg9Zls4XTtsZXQgbT0wLEI9MDtmb3IobGV0IGU9MDtlPHU7ZSsrKXtjb25zdCBlPXJbbV0sZj1yW20rMV0sdT1yW20rMl07dFtCXT1pKmUrZCpmK3AqdSx0W0IrMV09cyplK2MqZit5KnUsdFtCKzJdPWEqZStsKmYraCp1LG0rPW8sQis9bn19ZnVuY3Rpb24gbyhlLHQscil7dShlLnR5cGVkQnVmZmVyLHQscixlLnR5cGVkQnVmZmVyU3RyaWRlKX1mdW5jdGlvbiB1KGUsdCxyLGY9Myl7Y29uc3Qgbj1NYXRoLm1pbihlLmxlbmd0aC9mLHQuY291bnQpLG89dC50eXBlZEJ1ZmZlcix1PXQudHlwZWRCdWZmZXJTdHJpZGU7bGV0IGk9MCxzPTA7Zm9yKGxldCBhPTA7YTxuO2ErKyllW3NdPXIqb1tpXSxlW3MrMV09cipvW2krMV0sZVtzKzJdPXIqb1tpKzJdLGkrPXUscys9Zn1mdW5jdGlvbiBpKGUsdCl7cyhlLnR5cGVkQnVmZmVyLHQudHlwZWRCdWZmZXIsZS50eXBlZEJ1ZmZlclN0cmlkZSx0LnR5cGVkQnVmZmVyU3RyaWRlKX1mdW5jdGlvbiBzKGUsdCxyPTMsZj1yKXtjb25zdCBuPU1hdGgubWluKGUubGVuZ3RoL3IsdC5sZW5ndGgvZik7bGV0IG89MCx1PTA7Zm9yKGxldCBpPTA7aTxuO2krKyl7Y29uc3Qgbj10W29dLGk9dFtvKzFdLHM9dFtvKzJdLGE9bipuK2kqaStzKnM7aWYoYT4wKXtjb25zdCB0PTEvTWF0aC5zcXJ0KGEpO2VbdV09dCpuLGVbdSsxXT10KmksZVt1KzJdPXQqc31vKz1mLHUrPXJ9fWZ1bmN0aW9uIGEoZSx0LHIpe2NvbnN0IGY9TWF0aC5taW4oZS5jb3VudCx0LmNvdW50KSxuPWUudHlwZWRCdWZmZXIsbz1lLnR5cGVkQnVmZmVyU3RyaWRlLHU9dC50eXBlZEJ1ZmZlcixpPXQudHlwZWRCdWZmZXJTdHJpZGU7bGV0IHM9MCxhPTA7Zm9yKGxldCBkPTA7ZDxmO2QrKyluW2FdPXVbc10+PnIsblthKzFdPXVbcysxXT4+cixuW2ErMl09dVtzKzJdPj5yLHMrPWksYSs9b31jb25zdCBkPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxub3JtYWxpemU6cyxub3JtYWxpemVWaWV3Omksc2NhbGU6dSxzY2FsZVZpZXc6byxzaGlmdFJpZ2h0OmEsdHJhbnNmb3JtTWF0MzpuLHRyYW5zZm9ybU1hdDNWaWV3OmYsdHJhbnNmb3JtTWF0NDpyLHRyYW5zZm9ybU1hdDRWaWV3OnR9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pKTtleHBvcnR7biBhcyBhLGYgYXMgYix0IGFzIGMsaSBhcyBkLG8gYXMgZSxhIGFzIGYscyBhcyBuLHUgYXMgcyxyIGFzIHQsZCBhcyB2fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnR7Q2xvbmFibGVNaXhpbiBhcyByfWZyb21cIi4uLy4uL2NvcmUvQ2xvbmFibGUuanNcIjtpbXBvcnR7SlNPTlN1cHBvcnQgYXMgb31mcm9tXCIuLi8uLi9jb3JlL0pTT05TdXBwb3J0LmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHR9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtlbnVtZXJhdGlvbiBhcyBzfWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvZW51bWVyYXRpb24uanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgaX1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2MgYXMgcCxmIGFzIGN9ZnJvbVwiLi4vLi4vY2h1bmtzL3ZlYzNmNjQuanNcIjtpbXBvcnQgbiBmcm9tXCIuLi9Qb2ludC5qc1wiO2xldCBhPWNsYXNzIGV4dGVuZHMocihvKSl7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy50eXBlPVwiZ2VvcmVmZXJlbmNlZC1yZWxhdGl2ZVwiLHRoaXMuaXNSZWxhdGl2ZT0hMCx0aGlzLmlzR2VvcmVmZXJlbmNlZD0hMCx0aGlzLm9yaWdpbj1wKCl9Z2V0T3JpZ2luUG9pbnQoZSl7Y29uc3RbcixvLHRdPXRoaXMub3JpZ2luO3JldHVybiBuZXcgbih7eDpyLHk6byx6OnQsc3BhdGlhbFJlZmVyZW5jZTplfSl9c2V0T3JpZ2luRm9ybVBvaW50KHt4OmUseTpyLHo6b30pe3RoaXMub3JpZ2luPWMoZSxyLG8/PzApfX07ZShbcyh7Z2VvcmVmZXJlbmNlZFJlbGF0aXZlOlwiZ2VvcmVmZXJlbmNlZC1yZWxhdGl2ZVwifSx7cmVhZE9ubHk6ITB9KV0sYS5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSxlKFt0KHt0eXBlOltOdW1iZXJdLG5vbk51bGxhYmxlOiEwLGpzb246e3dyaXRlOiEwfX0pXSxhLnByb3RvdHlwZSxcIm9yaWdpblwiLHZvaWQgMCksYT1lKFtpKFwiZXNyaS5nZW9tZXRyeS5zdXBwb3J0Lk1lc2hHZW9yZWZlcmVuY2VkUmVsYXRpdmVWZXJ0ZXhTcGFjZVwiKV0sYSk7Y29uc3QgbT1hO2V4cG9ydHttIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCByIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7Y29uc3QgZT1yLmdldExvZ2dlcihcImVzcmkudmlld3MuM2Quc3VwcG9ydC5idWZmZXIubWF0aFwiKTtleHBvcnR7ZSBhcyBtYXRoTG9nZ2VyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0e2VxdWFscyBhcyByfWZyb21cIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydHt0aHJvd0lmQWJvcnRlZCBhcyBlfWZyb21cIi4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e2dldEZpbGVuYW1lRm9ybWF0SWQgYXMgcyxnZXRNaW1lVHlwZUZvcm1hdElkIGFzIG59ZnJvbVwiLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvaW5mb0ZvcjNELmpzXCI7Y2xhc3MgYXtjb25zdHJ1Y3Rvcih0LHIsZSl7dGhpcy5hc3NldE5hbWU9dCx0aGlzLmFzc2V0TWltZVR5cGU9cix0aGlzLnBhcnRzPWV9ZXF1YWxzKHQpe3JldHVybiB0aGlzPT09dHx8dGhpcy5hc3NldE5hbWU9PT10LmFzc2V0TmFtZSYmdGhpcy5hc3NldE1pbWVUeXBlPT09dC5hc3NldE1pbWVUeXBlJiZyKHRoaXMucGFydHMsdC5wYXJ0cywoKHQscik9PnQuZXF1YWxzKHIpKSl9aXNPblNlcnZpY2UodCl7cmV0dXJuIHRoaXMucGFydHMuZXZlcnkoKHI9PnIuaXNPblNlcnZpY2UodCkpKX1tYWtlSGFzaCgpe2xldCB0PVwiXCI7Zm9yKGNvbnN0IHIgb2YgdGhpcy5wYXJ0cyl0Kz1yLnBhcnRIYXNoO3JldHVybiB0fWFzeW5jIHRvQmxvYih0KXtjb25zdHtwYXJ0czpyfT10aGlzO2lmKDE9PT1yLmxlbmd0aClyZXR1cm4gclswXS50b0Jsb2IodCk7Y29uc3Qgcz1hd2FpdCBQcm9taXNlLmFsbChyLm1hcCgocj0+ci50b0Jsb2IodCkpKSk7cmV0dXJuIGUodCksbmV3IEJsb2Iocyl9fWNsYXNzIGl7Y29uc3RydWN0b3IodCxyKXt0aGlzLnBhcnRVcmw9dCx0aGlzLnBhcnRIYXNoPXJ9ZXF1YWxzKHQpe3JldHVybiB0aGlzPT09dHx8dGhpcy5wYXJ0VXJsPT09dC5wYXJ0VXJsJiZ0aGlzLnBhcnRIYXNoPT09dC5wYXJ0SGFzaH1pc09uU2VydmljZSh0KXtyZXR1cm4gdGhpcy5wYXJ0VXJsLnN0YXJ0c1dpdGgoYCR7dC5wYXRofS9hc3NldHMvYCl9YXN5bmMgdG9CbG9iKHIpe2NvbnN0e2RhdGE6c309YXdhaXQgdCh0aGlzLnBhcnRVcmwse3Jlc3BvbnNlVHlwZTpcImJsb2JcIn0pO3JldHVybiBlKHIpLHN9fWZ1bmN0aW9uIG8odCl7cmV0dXJuIGwodD8uc291cmNlKX1mdW5jdGlvbiB1KHQpe2lmKCFBcnJheS5pc0FycmF5KHQpKXJldHVybiExO3JldHVybiB0LmV2ZXJ5KCh0PT50IGluc3RhbmNlb2YgYSkpfWNvbnN0IGM9L14obW9kZWxcXC9nbHRmXFwranNvbil8KG1vZGVsXFwvZ2x0Zi1iaW5hcnkpJC8sZj0vXFwuKGdsdGZ8Z2xiKS9pO2Z1bmN0aW9uIGwodCl7aWYoIXQpcmV0dXJuITE7aWYoQXJyYXkuaXNBcnJheSh0KSl7cmV0dXJuIHQuc29tZShwKX1yZXR1cm4gcCh0KX1mdW5jdGlvbiBwKHQpe2lmKHQgaW5zdGFuY2VvZiBGaWxlKXtjb25zdHt0eXBlOnIsbmFtZTplfT10O3JldHVybiBjLnRlc3Qocil8fGYudGVzdChlKX1yZXR1cm4gYy50ZXN0KHQuYXNzZXRNaW1lVHlwZSl8fGYudGVzdCh0LmFzc2V0TmFtZSl9ZnVuY3Rpb24gbSh0LHIpe2lmKCF0KXJldHVybiExO2NvbnN0e3NvdXJjZTplfT10O3JldHVybiB5KGUscil9ZnVuY3Rpb24gaCh0LHIpe2lmKHQ9PT1yKXJldHVybiEwO2NvbnN0e3NvdXJjZTplfT10LHtzb3VyY2U6c309cjtpZihlPT09cylyZXR1cm4hMDtpZih1KGUpJiZ1KHMpKXtpZihlLmxlbmd0aCE9PXMubGVuZ3RoKXJldHVybiExO2NvbnN0IHQ9KHQscik9PnQuYXNzZXROYW1lPHIuYXNzZXROYW1lPy0xOnQuYXNzZXROYW1lPnIuYXNzZXROYW1lPzE6MCxyPVsuLi5lXS5zb3J0KHQpLG49Wy4uLnNdLnNvcnQodCk7Zm9yKGxldCBlPTA7ZTxyLmxlbmd0aDsrK2UpaWYoIXJbZV0uZXF1YWxzKG5bZV0pKXJldHVybiExO3JldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIHkodCxyKXtpZihBcnJheS5pc0FycmF5KHQpKXtyZXR1cm4gdC5ldmVyeSgodD0+Yih0LHIpKSl9cmV0dXJuIGIodCxyKX1mdW5jdGlvbiBiKHQscil7cmV0dXJuIHQgaW5zdGFuY2VvZiBhJiZ0LmlzT25TZXJ2aWNlKHIpfWZ1bmN0aW9uIGcodCxyKXtyZXR1cm4gdCBpbnN0YW5jZW9mIEZpbGU/cyh0Lm5hbWUscik/P24odC50eXBlLHIpOm4odC5hc3NldE1pbWVUeXBlLHIpPz9zKHQuYXNzZXROYW1lLHIpfWZ1bmN0aW9uIE4odCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dDpbdF19ZnVuY3Rpb24gQSh0KXtyZXR1cm4hIXQub3JpZ2luYWx9ZXhwb3J0e2EgYXMgU2VydmljZUFzc2V0LGkgYXMgU2VydmljZUFzc2V0UGFydCxnIGFzIGFzc2V0Rm9ybWF0SWQsYiBhcyBhc3NldElzT25TZXJ2aWNlLG0gYXMgZXh0ZXJuYWxJc09uU2VydmljZSxOIGFzIGV4dGVybmFsU291cmNlVG9NdWx0aVBhcnQsaCBhcyBleHRlcm5hbFNvdXJjZXNBcmVFcXVhbCxwIGFzIGlzRGlzcGxheUFzc2V0LG8gYXMgaXNEaXNwbGF5RXh0ZXJuYWwsbCBhcyBpc0Rpc3BsYXlTb3VyY2UsQSBhcyBpc09yaWdpbmFsRXh0ZXJuYWwseSBhcyBzb3VyY2VJc09uU2VydmljZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2YgYXMgZX1mcm9tXCIuLi8uLi9jaHVua3MvbWF0NC5qc1wiO2ltcG9ydHtjIGFzIHR9ZnJvbVwiLi4vLi4vY2h1bmtzL21hdDRmNjQuanNcIjtpbXBvcnQgciBmcm9tXCIuL01lc2hHZW9yZWZlcmVuY2VkUmVsYXRpdmVWZXJ0ZXhTcGFjZS5qc1wiO2ltcG9ydHt0IGFzIG99ZnJvbVwiLi4vLi4vY2h1bmtzL3ZlYzMyLmpzXCI7ZnVuY3Rpb24gbih0KXtjb25zdHt2ZXJ0ZXhTcGFjZTpufT10O2lmKG4uaXNSZWxhdGl2ZSlyZXR1cm4gdC5jbG9uZSgpO2NvbnN0e2FuY2hvcjppfT10LGM9aS5jbG9uZSgpLGE9ZShzLFstYy54LC1jLnksLWMuel0pLG09bmV3IHIoe29yaWdpbjpbYy54LGMueSxjLnpdfSkscD10LmNsb25lV2l0aFZlcnRleFNwYWNlKG0pLHtwb3NpdGlvbjpmfT1wLnZlcnRleEF0dHJpYnV0ZXM7cmV0dXJuIHAudmVydGV4QXR0cmlidXRlcy5wb3NpdGlvbj1vKG5ldyBGbG9hdDY0QXJyYXkoZi5sZW5ndGgpLGYsYSkscC52ZXJ0ZXhBdHRyaWJ1dGVzQ2hhbmdlZCgpLHB9Y29uc3Qgcz10KCk7ZXhwb3J0e24gYXMgdG9SZWxhdGl2ZVZlcnRleFNwYWNlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCB0PXtzdXBwb3J0c1N0YXRpc3RpY3M6ITAsc3VwcG9ydHNQZXJjZW50aWxlU3RhdGlzdGljczohMCxzdXBwb3J0c1NwYXRpYWxBZ2dyZWdhdGlvblN0YXRpc3RpY3M6ITEsc3VwcG9ydGVkU3BhdGlhbEFnZ3JlZ2F0aW9uU3RhdGlzdGljczp7ZW52ZWxvcGU6ITEsY2VudHJvaWQ6ITEsY29udmV4SHVsbDohMX0sc3VwcG9ydHNDZW50cm9pZDohMCxzdXBwb3J0c0NhY2hlSGludDohMSxzdXBwb3J0c0Rpc3RhbmNlOiEwLHN1cHBvcnRzRGlzdGluY3Q6ITAsc3VwcG9ydHNFeHRlbnQ6ITAsc3VwcG9ydHNHZW9tZXRyeVByb3BlcnRpZXM6ITEsc3VwcG9ydHNIYXZpbmdDbGF1c2U6ITAsc3VwcG9ydHNPcmRlckJ5OiEwLHN1cHBvcnRzUGFnaW5hdGlvbjohMCxzdXBwb3J0c1F1YW50aXphdGlvbjohMCxzdXBwb3J0c1F1YW50aXphdGlvbkVkaXRNb2RlOiExLHN1cHBvcnRzUXVlcnlHZW9tZXRyeTohMCxzdXBwb3J0c1Jlc3VsdFR5cGU6ITEsc3VwcG9ydHNTcWxFeHByZXNzaW9uOiEwLHN1cHBvcnRzTWF4UmVjb3JkQ291bnRGYWN0b3I6ITEsc3VwcG9ydHNTdGFuZGFyZGl6ZWRRdWVyaWVzT25seTohMCxzdXBwb3J0c1RvcEZlYXR1cmVzUXVlcnk6ITEsc3VwcG9ydHNRdWVyeUJ5T3RoZXJzOiEwLHN1cHBvcnRzSGlzdG9yaWNNb21lbnQ6ITEsc3VwcG9ydHNGb3JtYXRQQkY6ITEsc3VwcG9ydHNEaXNqb2ludFNwYXRpYWxSZWxhdGlvbnNoaXA6ITAsc3VwcG9ydHNEZWZhdWx0U3BhdGlhbFJlZmVyZW5jZTohMSxzdXBwb3J0c0Z1bGxUZXh0U2VhcmNoOiExLHN1cHBvcnRzQ29tcGFjdEdlb21ldHJ5OiExLG1heFJlY29yZENvdW50RmFjdG9yOnZvaWQgMCxtYXhSZWNvcmRDb3VudDp2b2lkIDAsc3RhbmRhcmRNYXhSZWNvcmRDb3VudDp2b2lkIDAsdGlsZU1heFJlY29yZENvdW50OnZvaWQgMH07ZXhwb3J0e3QgYXMgcXVlcnlDYXBhYmlsaXRpZXN9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vZ2VvbWV0cnkuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi9HcmFwaGljLmpzXCI7aW1wb3J0e2lkIGFzIHN9ZnJvbVwiLi4vLi4vLi4va2VybmVsLmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vLi4vLi4vcmVxdWVzdC5qc1wiO2ltcG9ydCBhIGZyb21cIi4uLy4uLy4uL1RpbWVFeHRlbnQuanNcIjtpbXBvcnR7aXNTb21lIGFzIGl9ZnJvbVwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCBoYXMgZnJvbVwiLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7SlNPTk1hcCBhcyBufWZyb21cIi4uLy4uLy4uL2NvcmUvanNvbk1hcC5qc1wiO2ltcG9ydCB1IGZyb21cIi4uLy4uLy4uL2NvcmUvTG9hZGFibGUuanNcIjtpbXBvcnQgbCBmcm9tXCIuLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtzZXREZWVwVmFsdWUgYXMgZH1mcm9tXCIuLi8uLi8uLi9jb3JlL29iamVjdC5qc1wiO2ltcG9ydHtkZWJvdW5jZSBhcyBjLGFmdGVyIGFzIHAsdGhyb3dJZkFib3J0RXJyb3IgYXMgaH1mcm9tXCIuLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtnZXRNZXRlcnNQZXJDYXJ0ZXNpYW5Vbml0Rm9yU1IgYXMgeX1mcm9tXCIuLi8uLi8uLi9jb3JlL3VuaXRVdGlscy5qc1wiO2ltcG9ydHtqb2luIGFzIG0scGFyc2VEYXRhIGFzIGZ9ZnJvbVwiLi4vLi4vLi4vY29yZS91cmxVdGlscy5qc1wiO2ltcG9ydHtnZW5lcmF0ZUJyYWNlZFVVSUQgYXMgZ31mcm9tXCIuLi8uLi8uLi9jb3JlL3V1aWQuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgUn1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIFN9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydCBiIGZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L0V4dGVudC5qc1wiO2ltcG9ydHtpbml0aWFsaXplUHJvamVjdGlvbiBhcyBGLHByb2plY3QgYXMgRX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uLmpzXCI7aW1wb3J0e2Zyb21KU09OIGFzIHd9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9qc29uVXRpbHMuanNcIjtpbXBvcnR7dG9SZWxhdGl2ZVZlcnRleFNwYWNlIGFzIHF9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9tZXNoVmVydGV4U3BhY2VVdGlscy5qc1wiO2ltcG9ydHtpc09yaWdpbmFsRXh0ZXJuYWwgYXMgX31mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L21lc2hVdGlscy9FeHRlcm5hbC5qc1wiO2ltcG9ydHtpc0ZlYXR1cmVJZGVudGlmaWVyQXJyYXlXaXRoR2xvYmFsSWQgYXMgTyxpc0ZlYXR1cmVJZGVudGlmaWVyQXJyYXlXaXRoT2JqZWN0SWQgYXMgQX1mcm9tXCIuLi9lZGl0aW5nU3VwcG9ydC5qc1wiO2ltcG9ydHtjcmVhdGVEcmF3aW5nSW5mbyBhcyBJfWZyb21cIi4vc3VwcG9ydC9jbGllbnRTaWRlRGVmYXVsdHMuanNcIjtpbXBvcnQgaiBmcm9tXCIuL3N1cHBvcnQvUXVlcnlUYXNrLmpzXCI7aW1wb3J0e2lzSG9zdGVkQWdvbFNlcnZpY2UgYXMgeH1mcm9tXCIuLi8uLi9zdXBwb3J0L2FyY2dpc0xheWVyVXJsLmpzXCI7aW1wb3J0e2dldEFzc2V0TWFwVGFibGUgYXMgVH1mcm9tXCIuLi8uLi9zdXBwb3J0L2luZm9Gb3IzRC5qc1wiO2ltcG9ydHtleGVjdXRlUXVlcnlKU09OIGFzIE59ZnJvbVwiLi4vLi4vLi4vcmVzdC9xdWVyeS9leGVjdXRlUXVlcnlKU09OLmpzXCI7aW1wb3J0e3VuYXBwbHlFZGl0c1pVbml0U2NhbGluZyBhcyB2fWZyb21cIi4uLy4uLy4uL3Jlc3QvcXVlcnkvb3BlcmF0aW9ucy9lZGl0c1pTY2FsZS5qc1wiO2ltcG9ydCBKIGZyb21cIi4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9RdWVyeS5qc1wiO2ltcG9ydCBNIGZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L1NwYXRpYWxSZWZlcmVuY2UuanNcIjtjb25zdCBVPW5ldyBuKHtvcmlnaW5hbEFuZEN1cnJlbnRGZWF0dXJlczpcIm9yaWdpbmFsLWFuZC1jdXJyZW50LWZlYXR1cmVzXCIsbm9uZTpcIm5vbmVcIn0pLGs9bmV3IFNldChbXCJGZWF0dXJlIExheWVyXCIsXCJPcmllbnRlZCBJbWFnZXJ5IExheWVyXCIsXCJUYWJsZVwiXSksUT1uZXcgbih7U3RhcnRlZDpcInB1Ymxpc2hlZFwiLFB1Ymxpc2hpbmc6XCJwdWJsaXNoaW5nXCIsU3RvcHBlZDpcInVuYXZhaWxhYmxlXCJ9KTtsZXQgQz1jbGFzcyBleHRlbmRzIHV7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMudHlwZT1cImZlYXR1cmUtbGF5ZXJcIix0aGlzLnJlZnJlc2g9YygoYXN5bmMoKT0+e2F3YWl0IHRoaXMubG9hZCgpO2NvbnN0IGU9dGhpcy5zb3VyY2VKU09OLmVkaXRpbmdJbmZvPy5sYXN0RWRpdERhdGU7aWYobnVsbD09ZSlyZXR1cm57ZGF0YUNoYW5nZWQ6ITAsdXBkYXRlczp7fX07dHJ5e2F3YWl0IHRoaXMuX2ZldGNoU2VydmljZShudWxsKX1jYXRjaHtyZXR1cm57ZGF0YUNoYW5nZWQ6ITAsdXBkYXRlczp7fX19Y29uc3QgdD1lIT09dGhpcy5zb3VyY2VKU09OLmVkaXRpbmdJbmZvPy5sYXN0RWRpdERhdGU7cmV0dXJue2RhdGFDaGFuZ2VkOnQsdXBkYXRlczp0P3tlZGl0aW5nSW5mbzp0aGlzLnNvdXJjZUpTT04uZWRpdGluZ0luZm8sZXh0ZW50OnRoaXMuc291cmNlSlNPTi5leHRlbnR9Om51bGx9fSkpLHRoaXMuX29uZ29pbmdBc3NldFVwbG9hZHM9bmV3IE1hcH1sb2FkKGUpe2NvbnN0IHQ9bnVsbCE9ZT9lLnNpZ25hbDpudWxsLHM9dGhpcy5sYXllci5zb3VyY2VKU09OO3JldHVybiB0aGlzLmFkZFJlc29sdmluZ1Byb21pc2UodGhpcy5fZmV0Y2hTZXJ2aWNlKHMsdCkpLFByb21pc2UucmVzb2x2ZSh0aGlzKX1nZXQgcXVlcnlUYXNrKCl7Y29uc3R7Y2FwYWJpbGl0aWVzOmUscGFyc2VkVXJsOnQsZHluYW1pY0RhdGFTb3VyY2U6cyxpbmZvRm9yM0Q6cixnZGJWZXJzaW9uOmEsc3BhdGlhbFJlZmVyZW5jZTppLGZpZWxkc0luZGV4Om99PXRoaXMubGF5ZXIsbj1oYXMoXCJmZWF0dXJlbGF5ZXItcGJmXCIpJiZlPy5xdWVyeS5zdXBwb3J0c0Zvcm1hdFBCRiYmbnVsbD09cix1PWU/Lm9wZXJhdGlvbnM/LnN1cHBvcnRzUXVlcnlBdHRhY2htZW50cz8/ITE7cmV0dXJuIG5ldyBqKHt1cmw6dC5wYXRoLHBiZlN1cHBvcnRlZDpuLGZpZWxkc0luZGV4Om8saW5mb0ZvcjNEOnIsZHluYW1pY0RhdGFTb3VyY2U6cyxnZGJWZXJzaW9uOmEsc291cmNlU3BhdGlhbFJlZmVyZW5jZTppLHF1ZXJ5QXR0YWNobWVudHNTdXBwb3J0ZWQ6dX0pfWFzeW5jIGFkZEF0dGFjaG1lbnQoZSx0KXthd2FpdCB0aGlzLmxvYWQoKTtjb25zdCBzPWUuYXR0cmlidXRlc1t0aGlzLmxheWVyLm9iamVjdElkRmllbGRdLGE9dGhpcy5sYXllci5wYXJzZWRVcmwucGF0aCtcIi9cIitzK1wiL2FkZEF0dGFjaG1lbnRcIixpPXRoaXMuX2dldExheWVyUmVxdWVzdE9wdGlvbnMoKSxvPXRoaXMuX2dldEZvcm1EYXRhRm9yQXR0YWNobWVudCh0LGkucXVlcnkpO3RyeXtjb25zdCBlPWF3YWl0IHIoYSx7Ym9keTpvfSk7cmV0dXJuIHRoaXMuX2NyZWF0ZUZlYXR1cmVFZGl0UmVzdWx0KGUuZGF0YS5hZGRBdHRhY2htZW50UmVzdWx0KX1jYXRjaChuKXt0aHJvdyB0aGlzLl9jcmVhdGVBdHRhY2htZW50RXJyb3JSZXN1bHQocyxuKX19YXN5bmMgdXBkYXRlQXR0YWNobWVudChlLHQscyl7YXdhaXQgdGhpcy5sb2FkKCk7Y29uc3QgYT1lLmF0dHJpYnV0ZXNbdGhpcy5sYXllci5vYmplY3RJZEZpZWxkXSxpPXRoaXMubGF5ZXIucGFyc2VkVXJsLnBhdGgrXCIvXCIrYStcIi91cGRhdGVBdHRhY2htZW50XCIsbz10aGlzLl9nZXRMYXllclJlcXVlc3RPcHRpb25zKHtxdWVyeTp7YXR0YWNobWVudElkOnR9fSksbj10aGlzLl9nZXRGb3JtRGF0YUZvckF0dGFjaG1lbnQocyxvLnF1ZXJ5KTt0cnl7Y29uc3QgZT1hd2FpdCByKGkse2JvZHk6bn0pO3JldHVybiB0aGlzLl9jcmVhdGVGZWF0dXJlRWRpdFJlc3VsdChlLmRhdGEudXBkYXRlQXR0YWNobWVudFJlc3VsdCl9Y2F0Y2godSl7dGhyb3cgdGhpcy5fY3JlYXRlQXR0YWNobWVudEVycm9yUmVzdWx0KGEsdSl9fWFzeW5jIGFwcGx5RWRpdHMoZSx0KXthd2FpdCB0aGlzLmxvYWQoKTtjb25zdHtsYXllcjphfT10aGlzLG89YS5pbmZvRm9yM0Qsbj1udWxsIT1vLHU9bnx8KHQ/Lmdsb2JhbElkVXNlZD8/ITEpLGw9bj9hd2FpdCB0aGlzLl91cGxvYWRNZXNoZXNBbmRHZXRBc3NldE1hcEVkaXRzSlNPTihlKTpudWxsLGQ9ZS5hZGRGZWF0dXJlcz8ubWFwKChlPT50aGlzLl9nZXRGZWF0dXJlSlNPTihlLG8pKSk/P1tdLGM9KGF3YWl0IFByb21pc2UuYWxsKGQpKS5maWx0ZXIoaSkscD1lLnVwZGF0ZUZlYXR1cmVzPy5tYXAoKGU9PnRoaXMuX2dldEZlYXR1cmVKU09OKGUsbykpKT8/W10saD0oYXdhaXQgUHJvbWlzZS5hbGwocCkpLmZpbHRlcihpKSx5PXRoaXMuX2dldEZlYXR1cmVJZHMoZS5kZWxldGVGZWF0dXJlcyx1KTt2KGMsaCxhLnNwYXRpYWxSZWZlcmVuY2UpO2NvbnN0IG09YXdhaXQgdGhpcy5fZ2V0QXR0YWNobWVudEVkaXRzSlNPTihlKSxmPWEuY2FwYWJpbGl0aWVzLmVkaXRpbmcuc3VwcG9ydHNBc3luY0FwcGx5RWRpdHMmJm4sZz17Z2RiVmVyc2lvbjp0Py5nZGJWZXJzaW9ufHxhLmdkYlZlcnNpb24scm9sbGJhY2tPbkZhaWx1cmU6dD8ucm9sbGJhY2tPbkZhaWx1cmVFbmFibGVkLHVzZUdsb2JhbElkczp1LHJldHVybkVkaXRNb21lbnQ6dD8ucmV0dXJuRWRpdE1vbWVudCx1c2VQcmV2aW91c0VkaXRNb21lbnQ6dD8udXNlUHJldmlvdXNFZGl0TW9tZW50LHNlc3Npb25JZDp0Py5zZXNzaW9uSWQsYXN5bmM6Zn07dD8ucmV0dXJuU2VydmljZUVkaXRzT3B0aW9uPyhnLmVkaXRzPUpTT04uc3RyaW5naWZ5KFt7aWQ6YS5sYXllcklkLGFkZHM6Yyx1cGRhdGVzOmgsZGVsZXRlczp5LGF0dGFjaG1lbnRzOm0sYXNzZXRNYXBzOmx9XSksZy5yZXR1cm5TZXJ2aWNlRWRpdHNPcHRpb249VS50b0pTT04odD8ucmV0dXJuU2VydmljZUVkaXRzT3B0aW9uKSxnLnJldHVyblNlcnZpY2VFZGl0c0luU291cmNlU1I9dD8ucmV0dXJuU2VydmljZUVkaXRzSW5Tb3VyY2VTUik6KGcuYWRkcz1jLmxlbmd0aD9KU09OLnN0cmluZ2lmeShjKTpudWxsLGcudXBkYXRlcz1oLmxlbmd0aD9KU09OLnN0cmluZ2lmeShoKTpudWxsLGcuZGVsZXRlcz15Lmxlbmd0aD91P0pTT04uc3RyaW5naWZ5KHkpOnkuam9pbihcIixcIik6bnVsbCxnLmF0dGFjaG1lbnRzPW0mJkpTT04uc3RyaW5naWZ5KG0pLGcuYXNzZXRNYXBzPW51bGwhPWw/SlNPTi5zdHJpbmdpZnkobCk6dm9pZCAwKTtjb25zdCBSPXRoaXMuX2dldExheWVyUmVxdWVzdE9wdGlvbnMoe21ldGhvZDpcInBvc3RcIixxdWVyeTpnfSksUz10Py5yZXR1cm5TZXJ2aWNlRWRpdHNPcHRpb24/YS51cmw6YS5wYXJzZWRVcmwucGF0aCxiPWY/YXdhaXQgdGhpcy5fYXN5bmNBcHBseUVkaXRzKFMrXCIvYXBwbHlFZGl0c1wiLFIpOmF3YWl0IHIoUytcIi9hcHBseUVkaXRzXCIsUik7aWYoIWEuY2FwYWJpbGl0aWVzLm9wZXJhdGlvbnM/LnN1cHBvcnRzRWRpdGluZyYmYS5lZmZlY3RpdmVDYXBhYmlsaXRpZXM/Lm9wZXJhdGlvbnM/LnN1cHBvcnRzRWRpdGluZyl7Y29uc3QgZT1zPy5maW5kQ3JlZGVudGlhbChhLnVybCk7YXdhaXQoZT8ucmVmcmVzaFRva2VuKCkpfXJldHVybiB0aGlzLl9jcmVhdGVFZGl0c1Jlc3VsdChiKX1hc3luYyBkZWxldGVBdHRhY2htZW50cyhlLHQpe2F3YWl0IHRoaXMubG9hZCgpO2NvbnN0IHM9ZS5hdHRyaWJ1dGVzW3RoaXMubGF5ZXIub2JqZWN0SWRGaWVsZF0sYT10aGlzLmxheWVyLnBhcnNlZFVybC5wYXRoK1wiL1wiK3MrXCIvZGVsZXRlQXR0YWNobWVudHNcIjt0cnl7cmV0dXJuKGF3YWl0IHIoYSx0aGlzLl9nZXRMYXllclJlcXVlc3RPcHRpb25zKHtxdWVyeTp7YXR0YWNobWVudElkczp0LmpvaW4oXCIsXCIpfSxtZXRob2Q6XCJwb3N0XCJ9KSkpLmRhdGEuZGVsZXRlQXR0YWNobWVudFJlc3VsdHMubWFwKHRoaXMuX2NyZWF0ZUZlYXR1cmVFZGl0UmVzdWx0KX1jYXRjaChpKXt0aHJvdyB0aGlzLl9jcmVhdGVBdHRhY2htZW50RXJyb3JSZXN1bHQocyxpKX19ZmV0Y2hSZWNvbXB1dGVkRXh0ZW50cyhlPXt9KXtjb25zdCB0PWUuc2lnbmFsO3JldHVybiB0aGlzLmxvYWQoe3NpZ25hbDp0fSkudGhlbigoYXN5bmMoKT0+e2NvbnN0IHQ9dGhpcy5fZ2V0TGF5ZXJSZXF1ZXN0T3B0aW9ucyh7Li4uZSxxdWVyeTp7cmV0dXJuVXBkYXRlczohMH19KSx7bGF5ZXJJZDpzLHVybDppfT10aGlzLmxheWVyLHtkYXRhOm99PWF3YWl0IHIoYCR7aX0vJHtzfWAsdCkse2lkOm4sZXh0ZW50OnUsZnVsbEV4dGVudDpsLHRpbWVFeHRlbnQ6ZH09byxjPXV8fGw7cmV0dXJue2lkOm4sZnVsbEV4dGVudDpjJiZiLmZyb21KU09OKGMpLHRpbWVFeHRlbnQ6ZCYmYS5mcm9tSlNPTih7c3RhcnQ6ZFswXSxlbmQ6ZFsxXX0pfX0pKX1hc3luYyBxdWVyeUF0dGFjaG1lbnRzKGUsdD17fSl7YXdhaXQgdGhpcy5sb2FkKCk7Y29uc3Qgcz10aGlzLl9nZXRMYXllclJlcXVlc3RPcHRpb25zKHQpO3JldHVybiB0aGlzLnF1ZXJ5VGFzay5leGVjdXRlQXR0YWNobWVudFF1ZXJ5KGUscyl9YXN5bmMgcXVlcnlGZWF0dXJlcyhlLHQpe3JldHVybiBhd2FpdCB0aGlzLmxvYWQoKSx0aGlzLnF1ZXJ5VGFzay5leGVjdXRlKGUsey4uLnQscXVlcnk6dGhpcy5fY3JlYXRlUmVxdWVzdFF1ZXJ5T3B0aW9ucyh0KX0pfWFzeW5jIHF1ZXJ5RmVhdHVyZXNKU09OKGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMubG9hZCgpLHRoaXMucXVlcnlUYXNrLmV4ZWN1dGVKU09OKGUsey4uLnQscXVlcnk6dGhpcy5fY3JlYXRlUmVxdWVzdFF1ZXJ5T3B0aW9ucyh0KX0pfWFzeW5jIHF1ZXJ5T2JqZWN0SWRzKGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMubG9hZCgpLHRoaXMucXVlcnlUYXNrLmV4ZWN1dGVGb3JJZHMoZSx7Li4udCxxdWVyeTp0aGlzLl9jcmVhdGVSZXF1ZXN0UXVlcnlPcHRpb25zKHQpfSl9YXN5bmMgcXVlcnlGZWF0dXJlQ291bnQoZSx0KXtyZXR1cm4gYXdhaXQgdGhpcy5sb2FkKCksdGhpcy5xdWVyeVRhc2suZXhlY3V0ZUZvckNvdW50KGUsey4uLnQscXVlcnk6dGhpcy5fY3JlYXRlUmVxdWVzdFF1ZXJ5T3B0aW9ucyh0KX0pfWFzeW5jIHF1ZXJ5RXh0ZW50KGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMubG9hZCgpLHRoaXMucXVlcnlUYXNrLmV4ZWN1dGVGb3JFeHRlbnQoZSx7Li4udCxxdWVyeTp0aGlzLl9jcmVhdGVSZXF1ZXN0UXVlcnlPcHRpb25zKHQpfSl9YXN5bmMgcXVlcnlSZWxhdGVkRmVhdHVyZXMoZSx0KXtyZXR1cm4gYXdhaXQgdGhpcy5sb2FkKCksdGhpcy5xdWVyeVRhc2suZXhlY3V0ZVJlbGF0aW9uc2hpcFF1ZXJ5KGUsey4uLnQscXVlcnk6dGhpcy5fY3JlYXRlUmVxdWVzdFF1ZXJ5T3B0aW9ucyh0KX0pfWFzeW5jIHF1ZXJ5UmVsYXRlZEZlYXR1cmVzQ291bnQoZSx0KXtyZXR1cm4gYXdhaXQgdGhpcy5sb2FkKCksdGhpcy5xdWVyeVRhc2suZXhlY3V0ZVJlbGF0aW9uc2hpcFF1ZXJ5Rm9yQ291bnQoZSx7Li4udCxxdWVyeTp0aGlzLl9jcmVhdGVSZXF1ZXN0UXVlcnlPcHRpb25zKHQpfSl9YXN5bmMgcXVlcnlUb3BGZWF0dXJlcyhlLHQpe3JldHVybiBhd2FpdCB0aGlzLmxvYWQoKSx0aGlzLnF1ZXJ5VGFzay5leGVjdXRlVG9wRmVhdHVyZXNRdWVyeShlLHsuLi50LHF1ZXJ5OnRoaXMuX2NyZWF0ZVJlcXVlc3RRdWVyeU9wdGlvbnModCl9KX1hc3luYyBxdWVyeVRvcE9iamVjdElkcyhlLHQpe3JldHVybiBhd2FpdCB0aGlzLmxvYWQoKSx0aGlzLnF1ZXJ5VGFzay5leGVjdXRlRm9yVG9wSWRzKGUsey4uLnQscXVlcnk6dGhpcy5fY3JlYXRlUmVxdWVzdFF1ZXJ5T3B0aW9ucyh0KX0pfWFzeW5jIHF1ZXJ5VG9wRXh0ZW50cyhlLHQpe3JldHVybiBhd2FpdCB0aGlzLmxvYWQoKSx0aGlzLnF1ZXJ5VGFzay5leGVjdXRlRm9yVG9wRXh0ZW50cyhlLHsuLi50LHF1ZXJ5OnRoaXMuX2NyZWF0ZVJlcXVlc3RRdWVyeU9wdGlvbnModCl9KX1hc3luYyBxdWVyeVRvcENvdW50KGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMubG9hZCgpLHRoaXMucXVlcnlUYXNrLmV4ZWN1dGVGb3JUb3BDb3VudChlLHsuLi50LHF1ZXJ5OnRoaXMuX2NyZWF0ZVJlcXVlc3RRdWVyeU9wdGlvbnModCl9KX1hc3luYyBmZXRjaFB1Ymxpc2hpbmdTdGF0dXMoKXtpZigheCh0aGlzLmxheWVyLnVybCkpcmV0dXJuXCJ1bmF2YWlsYWJsZVwiO2NvbnN0IGU9bSh0aGlzLmxheWVyLnVybCxcInN0YXR1c1wiKSx0PWF3YWl0IHIoZSx7cXVlcnk6e2Y6XCJqc29uXCJ9fSk7cmV0dXJuIFEuZnJvbUpTT04odC5kYXRhLnN0YXR1cyl9YXN5bmMgdXBsb2FkQXNzZXRzKGUsdCl7Y29uc3R7dXBsb2FkQXNzZXRzOnN9PWF3YWl0IGltcG9ydChcIi4vc3VwcG9ydC91cGxvYWRBc3NldHMuanNcIik7cmV0dXJuIHMoZSx7bGF5ZXI6dGhpcy5sYXllcixvbmdvaW5nVXBsb2Fkczp0aGlzLl9vbmdvaW5nQXNzZXRVcGxvYWRzfSx0KX1hc3luYyBfYXN5bmNBcHBseUVkaXRzKGUsdCl7Y29uc3Qgcz0oYXdhaXQgcihlLHQpKS5kYXRhLnN0YXR1c1VybDtmb3IoOzspe2NvbnN0IGU9KGF3YWl0IHIocyx7cXVlcnk6e2Y6XCJqc29uXCJ9LHJlc3BvbnNlVHlwZTpcImpzb25cIn0pKS5kYXRhO3N3aXRjaChlLnN0YXR1cyl7Y2FzZVwiQ29tcGxldGVkXCI6cmV0dXJuIHIoZS5yZXN1bHRVcmwse3F1ZXJ5OntmOlwianNvblwifSxyZXNwb25zZVR5cGU6XCJqc29uXCJ9KTtjYXNlXCJDb21wbGV0ZWRXaXRoRXJyb3JzXCI6dGhyb3cgbmV3IG8oXCJhc3luYy1hcHBseUVkaXRzLWZhaWxlZFwiLFwiYXN5bmNocm9ub3VzIGFwcGx5RWRpdHMgY2FsbCBmYWlsZWQuXCIpO2Nhc2VcIkZhaWxlZCBJbXBvcnRDaGFuZ2VzXCI6Y2FzZVwiSW5Qcm9ncmVzc1wiOmNhc2VcIlBlbmRpbmdcIjpjYXNlXCJFeHBvcnRBdHRhY2htZW50c1wiOmNhc2VcIkV4cG9ydENoYW5nZXNcIjpjYXNlXCJFeHBvcnRpbmdEYXRhXCI6Y2FzZVwiRXhwb3J0aW5nU25hcHNob3RcIjpjYXNlXCJJbXBvcnRBdHRhY2htZW50c1wiOmNhc2VcIlByb3Zpc2lvbmluZ1JlcGxpY2FcIjpjYXNlXCJVblJlZ2lzdGVyaW5nUmVwbGljYVwiOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IG8oXCJhc3luYy1hcHBseUVkaXRzLWZhaWxlZFwiLFwiYXN5bmNocm9ub3VzIGFwcGx5RWRpdHMgY2FsbCBmYWlsZWQgKHVuZGVmaW5lZCByZXNwb25zZSBzdGF0dXMpXCIpfWF3YWl0IHAoRCl9fV9jcmVhdGVSZXF1ZXN0UXVlcnlPcHRpb25zKGUpe2NvbnN0IHQ9ey4uLnRoaXMubGF5ZXIuY3VzdG9tUGFyYW1ldGVycyx0b2tlbjp0aGlzLmxheWVyLmFwaUtleSwuLi5lPy5xdWVyeX07cmV0dXJuIHRoaXMubGF5ZXIuZGF0ZXNJblVua25vd25UaW1lem9uZSYmKHQudGltZVJlZmVyZW5jZVVua25vd25DbGllbnQ9ITApLHR9YXN5bmMgX2ZldGNoU2VydmljZShlLHQpe2lmKCFlKXtjb25zdHtkYXRhOnN9PWF3YWl0IHIodGhpcy5sYXllci5wYXJzZWRVcmwucGF0aCx0aGlzLl9nZXRMYXllclJlcXVlc3RPcHRpb25zKHtxdWVyeTpoYXMoXCJmZWF0dXJlbGF5ZXItYWR2YW5jZWQtc3ltYm9sc1wiKT97cmV0dXJuQWR2YW5jZWRTeW1ib2xzOiEwfTp7fSxzaWduYWw6dH0pKTtlPXN9dGhpcy5zb3VyY2VKU09OPWF3YWl0IHRoaXMuX3BhdGNoU2VydmljZUpTT04oZSx0KTtjb25zdCBzPWUudHlwZTtpZighay5oYXMocykpdGhyb3cgbmV3IG8oXCJmZWF0dXJlLWxheWVyLXNvdXJjZTp1bnN1cHBvcnRlZC10eXBlXCIsYFNvdXJjZSB0eXBlIFwiJHtzfVwiIGlzIG5vdCBzdXBwb3J0ZWRgKX1hc3luYyBfcGF0Y2hTZXJ2aWNlSlNPTihlLHQpe2lmKFwiVGFibGVcIiE9PWUudHlwZSYmZS5nZW9tZXRyeVR5cGUmJiFlPy5kcmF3aW5nSW5mbz8ucmVuZGVyZXImJiFlLmRlZmF1bHRTeW1ib2wpe2NvbnN0IHQ9SShlLmdlb21ldHJ5VHlwZSkucmVuZGVyZXI7ZChcImRyYXdpbmdJbmZvLnJlbmRlcmVyXCIsdCxlKX1pZihcImVzcmlHZW9tZXRyeU11bHRpUGF0Y2hcIj09PWUuZ2VvbWV0cnlUeXBlJiZlLmluZm9Gb3IzRCYmKGUuZ2VvbWV0cnlUeXBlPVwibWVzaFwiKSxudWxsPT1lLmV4dGVudCl0cnl7Y29uc3R7ZGF0YTpzfT1hd2FpdCByKHRoaXMubGF5ZXIudXJsLHRoaXMuX2dldExheWVyUmVxdWVzdE9wdGlvbnMoe3NpZ25hbDp0fSkpO3Muc3BhdGlhbFJlZmVyZW5jZSYmKGUuZXh0ZW50PXt4bWluOjAseW1pbjowLHhtYXg6MCx5bWF4OjAsc3BhdGlhbFJlZmVyZW5jZTpzLnNwYXRpYWxSZWZlcmVuY2V9KX1jYXRjaChzKXtoKHMpfXJldHVybiBlfWFzeW5jIF9nZXRGZWF0dXJlSlNPTihlLHQpe2NvbnN0e2dlb21ldHJ5OnN9PWUscj17Li4uZS5hdHRyaWJ1dGVzfTtpZihudWxsIT10JiZcIm1lc2hcIj09PXM/LnR5cGUpe2NvbnN0e3RyYW5zZm9ybUZpZWxkUm9sZXM6ZX09dCx7b3JpZ2luOmEsc3BhdGlhbFJlZmVyZW5jZTppLHRyYW5zZm9ybTpvfT1zLG49dGhpcy5sYXllci5zcGF0aWFsUmVmZXJlbmNlO2F3YWl0IEYoaSxuKTtjb25zdCB1PUUoYSxuKTtpZihyW2Uub3JpZ2luWF09dS54LHJbZS5vcmlnaW5ZXT11LnkscltlLm9yaWdpblpdPXUuej8/MCxudWxsIT1vKXtjb25zdHt0cmFuc2xhdGlvbjp0LHNjYWxlOmEscm90YXRpb246dX09byx7dmVydGV4U3BhY2U6bH09cyxkPWwuaXNHZW9yZWZlcmVuY2VkPzE6eShpKS95KG4pO3JbZS50cmFuc2xhdGlvblhdPXRbMF0qZCxyW2UudHJhbnNsYXRpb25ZXT0tdFsyXSpkLHJbZS50cmFuc2xhdGlvblpdPXRbMV0qZCxyW2Uuc2NhbGVYXT1hWzBdLHJbZS5zY2FsZVldPWFbMl0scltlLnNjYWxlWl09YVsxXSxyW2Uucm90YXRpb25YXT11WzBdLHJbZS5yb3RhdGlvblldPXVbMl0scltlLnJvdGF0aW9uWl09dVsxXSxyW2Uucm90YXRpb25EZWddPXVbM119cmV0dXJue2dlb21ldHJ5Om51bGwsYXR0cmlidXRlczpyfX1yZXR1cm4gbnVsbD09cz97YXR0cmlidXRlczpyfTpcIm1lc2hcIj09PXMudHlwZXx8XCJleHRlbnRcIj09PXMudHlwZT9udWxsOntnZW9tZXRyeTpzLnRvSlNPTigpLGF0dHJpYnV0ZXM6cn19YXN5bmMgX2dldEF0dGFjaG1lbnRFZGl0c0pTT04oZSl7Y29uc3QgdD1hd2FpdCBQcm9taXNlLmFsbCgoZS5hZGRBdHRhY2htZW50cz8/W10pLm1hcCgoZT0+dGhpcy5fZ2V0QXR0YWNobWVudEVkaXRKU09OKGUpKSkpLHM9YXdhaXQgUHJvbWlzZS5hbGwoKGUudXBkYXRlQXR0YWNobWVudHM/P1tdKS5tYXAoKGU9PnRoaXMuX2dldEF0dGFjaG1lbnRFZGl0SlNPTihlKSkpKSxyPWUuZGVsZXRlQXR0YWNobWVudHM/P1tdO3JldHVybiB0Lmxlbmd0aHx8cy5sZW5ndGh8fHIubGVuZ3RoP3thZGRzOnQsdXBkYXRlczpzLGRlbGV0ZXM6Wy4uLnJdfTpudWxsfWFzeW5jIF9nZXRBdHRhY2htZW50RWRpdEpTT04oZSl7Y29uc3R7ZmVhdHVyZTp0LGF0dGFjaG1lbnQ6c309ZSx7Z2xvYmFsSWQ6cixuYW1lOmEsY29udGVudFR5cGU6aSxkYXRhOm8sdXBsb2FkSWQ6bn09cyx1PXtnbG9iYWxJZDpyLHBhcmVudEdsb2JhbElkOm51bGwsY29udGVudFR5cGU6bnVsbCxuYW1lOm51bGwsdXBsb2FkSWQ6bnVsbCxkYXRhOm51bGx9O2lmKHQmJih1LnBhcmVudEdsb2JhbElkPVwiYXR0cmlidXRlc1wiaW4gdD90LmF0dHJpYnV0ZXMmJnQuYXR0cmlidXRlc1t0aGlzLmxheWVyLmdsb2JhbElkRmllbGRdOnQuZ2xvYmFsSWQpLG4pdS51cGxvYWRJZD1uO2Vsc2UgaWYobyl7Y29uc3QgZT1hd2FpdCBmKG8pO2UmJih1LmNvbnRlbnRUeXBlPWUubWVkaWFUeXBlLHUuZGF0YT1lLmRhdGEpLG8gaW5zdGFuY2VvZiBGaWxlJiYodS5uYW1lPW8ubmFtZSl9cmV0dXJuIGEmJih1Lm5hbWU9YSksaSYmKHUuY29udGVudFR5cGU9aSksdX1hc3luYyBfdXBsb2FkTWVzaGVzQW5kR2V0QXNzZXRNYXBFZGl0c0pTT04oZSl7Y29uc3R7YWRkQXNzZXRGZWF0dXJlczp0fT1lO2lmKCF0Py5sZW5ndGgpcmV0dXJuIG51bGw7Y29uc3Qgcz1hd2FpdCB0aGlzLl9maWx0ZXJSZWR1bmRhbnRBc3NldE1hcHModCk7aWYoIXQ/Lmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCByPW5ldyBBcnJheSxhPW5ldyBNYXA7Zm9yKGNvbnN0IGkgb2Ygcyl7Y29uc3R7Z2VvbWV0cnk6ZX09aSx7dmVydGV4U3BhY2U6dH09ZTtpZih0LmlzUmVsYXRpdmUpci5wdXNoKGUpO2Vsc2V7Y29uc3QgdD1xKGUpO2Euc2V0KHQsZSksaS5nZW9tZXRyeT10LHIucHVzaCh0KX19YXdhaXQgdGhpcy51cGxvYWRBc3NldHMocik7Zm9yKGNvbnN0W2ksb11vZiBhKW8uYWRkRXh0ZXJuYWxTb3VyY2VzKGkubWV0YWRhdGEuZXh0ZXJuYWxTb3VyY2VzLml0ZW1zKTtyZXR1cm57YWRkczp0aGlzLl9nZXRBc3NldE1hcEVkaXRzSlNPTihzKSx1cGRhdGVzOltdLGRlbGV0ZXM6W119fV9nZXRBc3NldE1hcEVkaXRzSlNPTihlKXtjb25zdCB0PW5ldyBBcnJheSxzPXRoaXMubGF5ZXIuZ2xvYmFsSWRGaWVsZCxyPXRoaXMubGF5ZXIucGFyc2VkVXJsO2Zvcihjb25zdCBhIG9mIGUpe2NvbnN0IGU9YS5nZW9tZXRyeSx7bWV0YWRhdGE6aX09ZSxvPWkuZ2V0RXh0ZXJuYWxTb3VyY2VzT25TZXJ2aWNlKHIpLG49YS5nZXRBdHRyaWJ1dGUocyk7aWYoMD09PW8ubGVuZ3RoKXtsLmdldExvZ2dlcih0aGlzKS5lcnJvcihgU2tpcHBpbmcgZmVhdHVyZSAke259LiBUaGUgbWVzaCBpdCBpcyBhc3NvY2lhdGVkIHdpdGggaGFzIG5vdCBiZWVuIHVwbG9hZGVkIHRvIHRoZSBzZXJ2aWNlIGFuZCBjYW5ub3QgYmUgbWFwcGVkIHRvIGl0LmApO2NvbnRpbnVlfWNvbnN0e3NvdXJjZTp1fT1vLmZpbmQoXyk/P29bMF0se3ZlcnRleFNwYWNlOmR9PWUsYz1kLmlzR2VvcmVmZXJlbmNlZD9bXCJQUk9KRUNUX1ZFUlRJQ0VTXCJdOltdO2Zvcihjb25zdCBzIG9mIHUpMT09PXMucGFydHMubGVuZ3RoP3QucHVzaCh7Z2xvYmFsSWQ6ZygpLHBhcmVudEdsb2JhbElkOm4sYXNzZXROYW1lOnMuYXNzZXROYW1lLGFzc2V0SGFzaDpzLnBhcnRzWzBdLnBhcnRIYXNoLGZsYWdzOmN9KTpsLmdldExvZ2dlcih0aGlzKS5lcnJvcihgU2tpcHBpbmcgYXNzZXQgJHtzLmFzc2V0TmFtZX0uIEl0IGRvZXMgbm90IGhhdmUgZXhhY3RseSBvbmUgcGFydCwgc28gd2UgY2Fubm90IG1hcCBpdCB0byBhIGZlYXR1cmUuYCl9cmV0dXJuIHR9X2dldEZlYXR1cmVJZHMoZSx0KXtpZighZXx8MD09PWUubGVuZ3RoKXJldHVybltdO2lmKHQmJk8oZSkpcmV0dXJuIGUubWFwKChlPT5lLmdsb2JhbElkKSk7aWYoQShlKSlyZXR1cm4gZS5tYXAoKGU9PmUub2JqZWN0SWQpKTtjb25zdHtsYXllcjpzfT10aGlzLHI9dD9zLmdsb2JhbElkRmllbGQ6cy5vYmplY3RJZEZpZWxkO3JldHVybiByP2UubWFwKChlPT5lLmdldEF0dHJpYnV0ZShyKSkpOltdfV9jcmVhdGVFZGl0c1Jlc3VsdChlKXtjb25zdCB0PWUuZGF0YSx7bGF5ZXJJZDpzfT10aGlzLmxheWVyLHI9W107bGV0IGE9bnVsbDtpZihBcnJheS5pc0FycmF5KHQpKWZvcihjb25zdCB1IG9mIHQpci5wdXNoKHtpZDp1LmlkLGVkaXRlZEZlYXR1cmVzOnUuZWRpdGVkRmVhdHVyZXN9KSx1LmlkPT09cyYmKGE9e2FkZFJlc3VsdHM6dS5hZGRSZXN1bHRzPz9bXSx1cGRhdGVSZXN1bHRzOnUudXBkYXRlUmVzdWx0cz8/W10sZGVsZXRlUmVzdWx0czp1LmRlbGV0ZVJlc3VsdHM/P1tdLGF0dGFjaG1lbnRzOnUuYXR0YWNobWVudHMsZWRpdE1vbWVudDp1LmVkaXRNb21lbnR9KTtlbHNlIGE9dDtjb25zdCBpPWE/LmFzc2V0TWFwcztpZihpKXtmb3IoY29uc3QgZSBvZiBpLmFkZFJlc3VsdHMpZS5zdWNjZXNzfHxsLmdldExvZ2dlcih0aGlzKS5lcnJvcihgRmFpbGVkIHRvIG1hcCBhc3NldCB0byBmZWF0dXJlIHdpdGggZ2xvYmFsSWQgJHtlLmdsb2JhbElkfS5gKTtmb3IoY29uc3QgZSBvZiBpLnVwZGF0ZVJlc3VsdHMpZS5zdWNjZXNzfHxsLmdldExvZ2dlcih0aGlzKS5lcnJvcihgRmFpbGVkIHRvIG1hcCBhc3NldCB0byBmZWF0dXJlIHdpdGggZ2xvYmFsSWQgJHtlLmdsb2JhbElkfS5gKX1jb25zdCBvPWE/LmF0dGFjaG1lbnRzLG49e2FkZEZlYXR1cmVSZXN1bHRzOmE/LmFkZFJlc3VsdHM/Lm1hcCh0aGlzLl9jcmVhdGVGZWF0dXJlRWRpdFJlc3VsdCx0aGlzKT8/W10sdXBkYXRlRmVhdHVyZVJlc3VsdHM6YT8udXBkYXRlUmVzdWx0cz8ubWFwKHRoaXMuX2NyZWF0ZUZlYXR1cmVFZGl0UmVzdWx0LHRoaXMpPz9bXSxkZWxldGVGZWF0dXJlUmVzdWx0czphPy5kZWxldGVSZXN1bHRzPy5tYXAodGhpcy5fY3JlYXRlRmVhdHVyZUVkaXRSZXN1bHQsdGhpcyk/P1tdLGFkZEF0dGFjaG1lbnRSZXN1bHRzOm8mJm8uYWRkUmVzdWx0cz9vLmFkZFJlc3VsdHMubWFwKHRoaXMuX2NyZWF0ZUZlYXR1cmVFZGl0UmVzdWx0LHRoaXMpOltdLHVwZGF0ZUF0dGFjaG1lbnRSZXN1bHRzOm8mJm8udXBkYXRlUmVzdWx0cz9vLnVwZGF0ZVJlc3VsdHMubWFwKHRoaXMuX2NyZWF0ZUZlYXR1cmVFZGl0UmVzdWx0LHRoaXMpOltdLGRlbGV0ZUF0dGFjaG1lbnRSZXN1bHRzOm8mJm8uZGVsZXRlUmVzdWx0cz9vLmRlbGV0ZVJlc3VsdHMubWFwKHRoaXMuX2NyZWF0ZUZlYXR1cmVFZGl0UmVzdWx0LHRoaXMpOltdfTtpZihhPy5lZGl0TW9tZW50JiYobi5lZGl0TW9tZW50PWEuZWRpdE1vbWVudCksci5sZW5ndGg+MCl7bi5lZGl0ZWRGZWF0dXJlUmVzdWx0cz1bXTtmb3IoY29uc3QgZSBvZiByKXtjb25zdHtlZGl0ZWRGZWF0dXJlczp0fT1lLHM9dD8uc3BhdGlhbFJlZmVyZW5jZT9uZXcgTSh0LnNwYXRpYWxSZWZlcmVuY2UpOm51bGw7bi5lZGl0ZWRGZWF0dXJlUmVzdWx0cy5wdXNoKHtsYXllcklkOmUuaWQsZWRpdGVkRmVhdHVyZXM6e2FkZHM6dD8uYWRkcz8ubWFwKChlPT50aGlzLl9jcmVhdGVFZGl0ZWRGZWF0dXJlKGUscykpKXx8W10sdXBkYXRlczp0Py51cGRhdGVzPy5tYXAoKGU9Pih7b3JpZ2luYWw6dGhpcy5fY3JlYXRlRWRpdGVkRmVhdHVyZShlWzBdLHMpLGN1cnJlbnQ6dGhpcy5fY3JlYXRlRWRpdGVkRmVhdHVyZShlWzFdLHMpfSkpKXx8W10sZGVsZXRlczp0Py5kZWxldGVzPy5tYXAoKGU9PnRoaXMuX2NyZWF0ZUVkaXRlZEZlYXR1cmUoZSxzKSkpfHxbXSxzcGF0aWFsUmVmZXJlbmNlOnN9fSl9fXJldHVybiBufV9jcmVhdGVFZGl0ZWRGZWF0dXJlKGUscyl7cmV0dXJuIG5ldyB0KHthdHRyaWJ1dGVzOmUuYXR0cmlidXRlcyxnZW9tZXRyeTp3KHsuLi5lLmdlb21ldHJ5LHNwYXRpYWxSZWZlcmVuY2U6c30pfSl9X2NyZWF0ZUZlYXR1cmVFZGl0UmVzdWx0KGUpe2NvbnN0IHQ9ITA9PT1lLnN1Y2Nlc3M/bnVsbDplLmVycm9yfHx7Y29kZTp2b2lkIDAsZGVzY3JpcHRpb246dm9pZCAwfTtyZXR1cm57b2JqZWN0SWQ6ZS5vYmplY3RJZCxnbG9iYWxJZDplLmdsb2JhbElkLGVycm9yOnQ/bmV3IG8oXCJmZWF0dXJlLWxheWVyLXNvdXJjZTplZGl0LWZhaWx1cmVcIix0LmRlc2NyaXB0aW9uLHtjb2RlOnQuY29kZX0pOm51bGx9fV9jcmVhdGVBdHRhY2htZW50RXJyb3JSZXN1bHQoZSx0KXtjb25zdCBzPXQuZGV0YWlscy5tZXNzYWdlcyYmdC5kZXRhaWxzLm1lc3NhZ2VzWzBdfHx0Lm1lc3NhZ2Uscj10LmRldGFpbHMuaHR0cFN0YXR1c3x8dC5kZXRhaWxzLm1lc3NhZ2VDb2RlO3JldHVybntvYmplY3RJZDplLGdsb2JhbElkOm51bGwsZXJyb3I6bmV3IG8oXCJmZWF0dXJlLWxheWVyLXNvdXJjZTphdHRhY2htZW50LWZhaWx1cmVcIixzLHtjb2RlOnJ9KX19X2dldEZvcm1EYXRhRm9yQXR0YWNobWVudChlLHQpe2NvbnN0IHM9ZSBpbnN0YW5jZW9mIEZvcm1EYXRhP2U6ZSYmZS5lbGVtZW50cz9uZXcgRm9ybURhdGEoZSk6bnVsbDtpZihzKWZvcihjb25zdCByIGluIHQpe2NvbnN0IGU9dFtyXTtudWxsIT1lJiYocy5zZXQ/cy5zZXQocixlKTpzLmFwcGVuZChyLGUpKX1yZXR1cm4gc31fZ2V0TGF5ZXJSZXF1ZXN0T3B0aW9ucyhlPXt9KXtjb25zdHtwYXJzZWRVcmw6dCxnZGJWZXJzaW9uOnMsZHluYW1pY0RhdGFTb3VyY2U6cn09dGhpcy5sYXllcjtyZXR1cm57Li4uZSxxdWVyeTp7Z2RiVmVyc2lvbjpzLGxheWVyOnI/SlNPTi5zdHJpbmdpZnkoe3NvdXJjZTpyfSk6dm9pZCAwLC4uLnQucXVlcnksZjpcImpzb25cIiwuLi50aGlzLl9jcmVhdGVSZXF1ZXN0UXVlcnlPcHRpb25zKGUpfSxyZXNwb25zZVR5cGU6XCJqc29uXCJ9fWFzeW5jIF9maWx0ZXJSZWR1bmRhbnRBc3NldE1hcHMoZSl7Y29uc3R7bGF5ZXI6dH09dGhpcyx7Z2xvYmFsSWRGaWVsZDpzLGluZm9Gb3IzRDpyLHBhcnNlZFVybDphfT10O2lmKG51bGw9PXJ8fG51bGw9PXMpcmV0dXJuIGU7Y29uc3Qgbz1UKHIpO2lmKG51bGw9PW8pcmV0dXJuIGU7Y29uc3Qgbj1tKGEucGF0aCxgLi4vJHtvLmlkfWApLHU9bmV3IEFycmF5LGw9bmV3IEFycmF5O2Zvcihjb25zdCBpIG9mIGUpaS5nZW9tZXRyeS5tZXRhZGF0YS5nZXRFeHRlcm5hbFNvdXJjZXNPblNlcnZpY2UoYSkubGVuZ3RoPjA/bC5wdXNoKGkpOnUucHVzaChpKTtjb25zdCBkPWwubWFwKChlPT5lLmdldEF0dHJpYnV0ZShzKSkpLmZpbHRlcihpKTtpZigwPT09ZC5sZW5ndGgpcmV0dXJuIGU7Y29uc3R7YXNzZXRNYXBGaWVsZFJvbGVzOntwYXJlbnRHbG9iYWxJZDpjLGFzc2V0SGFzaDpwfX09cixoPW5ldyBKO2gud2hlcmU9YCR7Y30gSU4gKCR7ZC5tYXAoKGU9PmAnJHtlfSdgKSl9KWAsaC5vdXRGaWVsZHM9W3AsY10saC5yZXR1cm5HZW9tZXRyeT0hMTtjb25zdCB5PWF3YWl0IE4obixoKSx7ZmVhdHVyZXM6Zn09eTtyZXR1cm4gMD09PWYubGVuZ3RoP2U6Wy4uLnUsLi4ubC5maWx0ZXIoKGU9Pntjb25zdCB0PWUuZ2V0QXR0cmlidXRlKHMpO2lmKCF0KXJldHVybiEwO2NvbnN0e21ldGFkYXRhOnJ9PWUuZ2VvbWV0cnksaT1mLmZpbHRlcigoZT0+ZS5nZXRBdHRyaWJ1dGUoYyk9PT10KSk7aWYoMD09PWkubGVuZ3RoKXJldHVybiEwO2NvbnN0IG89aS5tYXAoKGU9PmUuZ2V0QXR0cmlidXRlKHApKSk7cmV0dXJuIHIuZ2V0RXh0ZXJuYWxTb3VyY2VzT25TZXJ2aWNlKGEpLmZsYXRNYXAoKCh7c291cmNlOmV9KT0+ZS5mbGF0TWFwKChlPT5lLnBhcnRzLm1hcCgoZT0+ZS5wYXJ0SGFzaCkpKSkpKS5zb21lKChlPT5vLmV2ZXJ5KCh0PT5lIT09dCkpKSl9KSldfX07ZShbUigpXSxDLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGUoW1Ioe2NvbnN0cnVjdE9ubHk6ITB9KV0sQy5wcm90b3R5cGUsXCJsYXllclwiLHZvaWQgMCksZShbUih7cmVhZE9ubHk6ITB9KV0sQy5wcm90b3R5cGUsXCJxdWVyeVRhc2tcIixudWxsKSxDPWUoW1MoXCJlc3JpLmxheWVycy5ncmFwaGljcy5zb3VyY2VzLkZlYXR1cmVMYXllclNvdXJjZVwiKV0sQyk7Y29uc3QgRD0xZTMsTD1DO2V4cG9ydHtMIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBoYXMgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7Y2xvbmUgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2xhbmcuanNcIjtpbXBvcnR7cXVlcnlDYXBhYmlsaXRpZXMgYXMgc31mcm9tXCIuLi8uLi9kYXRhL1F1ZXJ5RW5naW5lQ2FwYWJpbGl0aWVzLmpzXCI7aW1wb3J0e2RlZmF1bHRQb2ludFN5bWJvbEpTT04gYXMgcixkZWZhdWx0UG9seWxpbmVTeW1ib2xKU09OIGFzIGUsZGVmYXVsdFBvbHlnb25TeW1ib2xKU09OIGFzIHB9ZnJvbVwiLi4vLi4vLi4vLi4vc3ltYm9scy9zdXBwb3J0L2RlZmF1bHRzSlNPTi5qc1wiO2Z1bmN0aW9uIG8odCl7cmV0dXJue3JlbmRlcmVyOnt0eXBlOlwic2ltcGxlXCIsc3ltYm9sOlwiZXNyaUdlb21ldHJ5UG9pbnRcIj09PXR8fFwiZXNyaUdlb21ldHJ5TXVsdGlwb2ludFwiPT09dD9yOlwiZXNyaUdlb21ldHJ5UG9seWxpbmVcIj09PXQ/ZTpwfX19Y29uc3QgdT0vXltfJGEtekEtWl1bXyRhLXpBLVowLTldKiQvO2xldCBuPTE7ZnVuY3Rpb24gaSh0LHMpe2lmKGhhcyhcImVzcmktY3NwLXJlc3RyaWN0aW9uc1wiKSlyZXR1cm4oKT0+KHtbc106bnVsbCwuLi50fSk7dHJ5e2xldCByPWB0aGlzLiR7c30gPSBudWxsO2A7Zm9yKGNvbnN0IHMgaW4gdCl7cis9YHRoaXMke3UudGVzdChzKT9gLiR7c31gOmBbXCIke3N9XCJdYH0gPSAke0pTT04uc3RyaW5naWZ5KHRbc10pfTtgfWNvbnN0IGU9bmV3IEZ1bmN0aW9uKGBcXG4gICAgICByZXR1cm4gY2xhc3MgQXR0cmlidXRlc0NsYXNzJCR7bisrfSB7XFxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcXG4gICAgICAgICAgJHtyfTtcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgIGApKCk7cmV0dXJuKCk9Pm5ldyBlfWNhdGNoKHIpe3JldHVybigpPT4oe1tzXTpudWxsLC4uLnR9KX19ZnVuY3Rpb24gYShzPXt9KXtyZXR1cm5be25hbWU6XCJOZXcgRmVhdHVyZVwiLGRlc2NyaXB0aW9uOlwiXCIscHJvdG90eXBlOnthdHRyaWJ1dGVzOnQocyl9fV19ZnVuY3Rpb24gYyh0LHIpe3JldHVybnthbmFseXRpY3M6e3N1cHBvcnRzQ2FjaGVIaW50OiExfSxhdHRhY2htZW50Om51bGwsZGF0YTp7aXNWZXJzaW9uZWQ6ITEsc3VwcG9ydHNBdHRhY2htZW50OiExLHN1cHBvcnRzTTohMSxzdXBwb3J0c1o6dH0sbWV0YWRhdGE6e3N1cHBvcnRzQWR2YW5jZWRGaWVsZFByb3BlcnRpZXM6ITF9LG9wZXJhdGlvbnM6e3N1cHBvcnRzQ2FsY3VsYXRlOiExLHN1cHBvcnRzVHJ1bmNhdGU6ITEsc3VwcG9ydHNWYWxpZGF0ZVNxbDohMSxzdXBwb3J0c0FkZDpyLHN1cHBvcnRzRGVsZXRlOnIsc3VwcG9ydHNFZGl0aW5nOnIsc3VwcG9ydHNDaGFuZ2VUcmFja2luZzohMSxzdXBwb3J0c1F1ZXJ5OiEwLHN1cHBvcnRzUXVlcnlBbmFseXRpY3M6ITEsc3VwcG9ydHNRdWVyeUF0dGFjaG1lbnRzOiExLHN1cHBvcnRzUXVlcnlUb3BGZWF0dXJlczohMSxzdXBwb3J0c1Jlc2l6ZUF0dGFjaG1lbnRzOiExLHN1cHBvcnRzU3luYzohMSxzdXBwb3J0c1VwZGF0ZTpyLHN1cHBvcnRzRXhjZWVkc0xpbWl0U3RhdGlzdGljczohMCxzdXBwb3J0c0FzeW5jQ29udmVydDNEOiExfSxxdWVyeTpzLHF1ZXJ5UmVsYXRlZDp7c3VwcG9ydHNDb3VudDohMCxzdXBwb3J0c09yZGVyQnk6ITAsc3VwcG9ydHNQYWdpbmF0aW9uOiEwLHN1cHBvcnRzQ2FjaGVIaW50OiExfSxxdWVyeVRvcEZlYXR1cmVzOntzdXBwb3J0c0NhY2hlSGludDohMX0sZWRpdGluZzp7c3VwcG9ydHNHZW9tZXRyeVVwZGF0ZTpyLHN1cHBvcnRzR2xvYmFsSWQ6ITEsc3VwcG9ydHNSZXR1cm5TZXJ2aWNlRWRpdHNJblNvdXJjZVNwYXRpYWxSZWZlcmVuY2U6ITEsc3VwcG9ydHNSb2xsYmFja09uRmFpbHVyZTohMSxzdXBwb3J0c1VwZGF0ZVdpdGhvdXRNOiExLHN1cHBvcnRzVXBsb2FkV2l0aEl0ZW1JZDohMSxzdXBwb3J0c0RlbGV0ZUJ5QW5vbnltb3VzOiExLHN1cHBvcnRzRGVsZXRlQnlPdGhlcnM6ITEsc3VwcG9ydHNVcGRhdGVCeUFub255bW91czohMSxzdXBwb3J0c1VwZGF0ZUJ5T3RoZXJzOiExLHN1cHBvcnRzQXN5bmNBcHBseUVkaXRzOiExfX19ZXhwb3J0e2MgYXMgY3JlYXRlQ2FwYWJpbGl0aWVzLGkgYXMgY3JlYXRlRGVmYXVsdEF0dHJpYnV0ZXNGdW5jdGlvbixhIGFzIGNyZWF0ZURlZmF1bHRUZW1wbGF0ZSxvIGFzIGNyZWF0ZURyYXdpbmdJbmZvfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==