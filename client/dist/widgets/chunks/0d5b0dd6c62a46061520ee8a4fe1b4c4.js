"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["node_modules_arcgis_core_views_2d_layers_MapNotesLayerView2D_js"],{

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "GroupContainer": () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WGLContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class r extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(){super(...arguments),this._prevFBO=void 0,this.requiresDedicatedFBO=!1}dispose(){}doRender(e){const r=this.createRenderParams(e),{context:o,painter:s,profiler:n}=r;this._prevFBO=o.getBoundFramebufferObject(),n.recordContainerStart(this.name);const i=this._getFbo(r),a=s.getRenderTarget();o.bindFramebuffer(i),s.setRenderTarget(i),o.setDepthWriteEnabled(!0),o.setColorMask(!0,!0,!0,!0),o.setClearColor(0,0,0,0),o.setClearDepth(1),o.clear(o.gl.COLOR_BUFFER_BIT|o.gl.DEPTH_BUFFER_BIT),o.setDepthWriteEnabled(!1);for(const t of this.children)t.beforeRender(e);for(const t of this.children)t.processRender(r);for(const t of this.children)t.afterRender(e);s.setRenderTarget(a),s.releaseFbo(i),o.bindFramebuffer(this._prevFBO),s.beforeRenderLayer(r,this._clippingInfos?255:0,this.computedOpacity),i.colorTexture&&(o.setStencilTestEnabled(!1),o.setStencilWriteMask(0),s.blitTexture(o,i.colorTexture,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.TextureSamplingMode.NEAREST)),s.compositeLayer(r,this.computedOpacity),n.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(e){const{context:t,painter:r}=e,{width:o,height:s}=t.getViewport();return r.acquireFbo(o,s)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _engine_Container_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../engine/Container.js */ "./node_modules/@arcgis/core/views/2d/engine/Container.js");
/* harmony import */ var _engine_webgl_GroupContainer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../engine/webgl/GroupContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./graphics/GraphicContainer.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js");
/* harmony import */ var _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./graphics/GraphicsView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const u="sublayers",f="layerView",m=Object.freeze({remove(){},pause(){},resume(){}});let w=class extends((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_12__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_15__["default"])){constructor(){super(...arguments),this._highlightIds=new Map,this.container=new _engine_webgl_GroupContainer_js__WEBPACK_IMPORTED_MODULE_11__.GroupContainer}async fetchPopupFeatures(e){return Array.from(this.graphicsViews(),(i=>i.hitTest(e).filter((e=>!!e.popupTemplate)))).flat()}*graphicsViews(){null==this._graphicsViewsFeatureCollectionMap?null==this._graphicsViews?yield*[]:yield*this._graphicsViews:yield*this._graphicsViewsFeatureCollectionMap.keys()}async hitTest(e,i){return Array.from(this.graphicsViews(),(i=>{const s=i.hitTest(e);if(null!=this._graphicsViewsFeatureCollectionMap){const e=this._graphicsViewsFeatureCollectionMap.get(i);for(const i of s)!i.popupTemplate&&e.popupTemplate&&(i.popupTemplate=e.popupTemplate),i.sourceLayer=i.layer=this.layer}return s})).flat().map((i=>({type:"graphic",graphic:i,layer:this.layer,mapPoint:e})))}highlight(e){let r;"number"==typeof e?r=[e]:e instanceof _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]?r=[e.uid]:Array.isArray(e)&&e.length>0?r="number"==typeof e[0]?e:e.map((e=>e&&e.uid)):_core_Collection_js__WEBPACK_IMPORTED_MODULE_3__["default"].isCollection(e)&&(r=e.map((e=>e&&e.uid)).toArray());const a=r?.filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__.isSome);return a?.length?(this._addHighlight(a),{remove:()=>{this._removeHighlight(a)}}):m}update(e){for(const i of this.graphicsViews())i.processUpdate(e)}attach(){const e=this.view,i=()=>this.requestUpdate(),s=this.layer.featureCollections;if(null!=s&&s.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const t of s){const s=new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_13__["default"](this.view.featuresTilingScheme),a=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_14__["default"]({view:e,graphics:t.source,renderer:t.renderer,requestUpdateCallback:i,container:s});this._graphicsViewsFeatureCollectionMap.set(a,t),this.container.addChild(a.container),this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>t.visible),(e=>a.container.visible=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>a.updating),(()=>this.notifyChange("updating")),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.initial)],f)}this._updateHighlight()}else null!=this.layer.sublayers&&this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.on)((()=>this.layer.sublayers),"change",(()=>this._createGraphicsViews()),{onListenerAdd:()=>this._createGraphicsViews(),onListenerRemove:()=>this._destroyGraphicsViews()}),u)}detach(){this._destroyGraphicsViews(),this.removeHandles(u)}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews())e.viewChange()}isUpdating(){for(const e of this.graphicsViews())if(e.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.removeHandles(f);for(const e of this.graphicsViews())e.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),null==this.layer.sublayers)return;const e=[],i=this.view,s=()=>this.requestUpdate();for(const t of this.layer.sublayers){const a=new _engine_Container_js__WEBPACK_IMPORTED_MODULE_10__.Container,o=new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_13__["default"](this.view.featuresTilingScheme);o.fadeTransitionEnabled=!0;const l=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_14__["default"]({view:i,graphics:t.graphics,requestUpdateCallback:s,container:o});this.addHandles([t.on("graphic-update",l.graphicUpdateHandler),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>t.visible),(e=>l.container.visible=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>l.updating),(()=>this.notifyChange("updating")),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.initial)],f),a.addChild(l.container),this.container.addChild(a),e.push(l)}this._graphicsViews=e,this._updateHighlight()}_addHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i);this._highlightIds.set(i,e+1)}else this._highlightIds.set(i,1);this._updateHighlight()}_removeHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i)-1;0===e?this._highlightIds.delete(i):this._highlightIds.set(i,e)}this._updateHighlight()}_updateHighlight(){const e=Array.from(this._highlightIds.keys());for(const i of this.graphicsViews())i.setHighlight(e)}};w=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.2d.layers.MapNotesLayerView2D")],w);const y=w;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BaseGraphicContainer.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/BaseGraphicContainer.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class i extends _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__["default"]{renderChildren(r){this.attributeView.update(),this.children.some((e=>e.hasData))&&(this.attributeView.bindTextures(r.context,!1),super.renderChildren(r),r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.WGLDrawPhase.MAP&&this._renderChildren(r),this.hasHighlight()&&r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.WGLDrawPhase.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvMGQ1YjBkZDZjNjJhNDYwNjE1MjBlZThhNGZlMWI0YzQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDK0YsZ0JBQWdCLHdEQUFDLENBQUMsY0FBYyxzRUFBc0UsV0FBVyxZQUFZLG9DQUFvQywrQkFBK0IsR0FBRyw4RUFBOEUsOENBQThDLDZOQUE2TiwrQ0FBK0MsZ0RBQWdELDhDQUE4QyxpUEFBaVAsd0VBQVMsbUVBQW1FLHNCQUFzQixPQUFPLHNHQUFzRyxXQUFXLE1BQU0sb0JBQW9CLElBQUksaUJBQWlCLGlCQUFpQiwwQkFBc0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKejBDO0FBQ0E7QUFDQTtBQUNBO0FBQzZ3QixtREFBbUQsVUFBVSxVQUFVLFlBQVksRUFBRSxvQkFBb0Isa0VBQUMsQ0FBQyw2REFBQyxHQUFHLGNBQWMsa0VBQWtFLDRFQUFDLENBQUMsNEJBQTRCLGdHQUFnRyxpQkFBaUIsZ0tBQWdLLG1CQUFtQiw0Q0FBNEMscUJBQXFCLGtEQUFrRCx1REFBdUQsdUhBQXVILFNBQVMsb0JBQW9CLHFEQUFxRCxJQUFJLGFBQWEsTUFBTSxzQ0FBc0MsbURBQUMsdUZBQXVGLHdFQUFjLHdDQUF3QyxrQkFBa0IsdURBQUMsRUFBRSx5Q0FBeUMsWUFBWSwwQkFBMEIsSUFBSSxVQUFVLHVEQUF1RCxTQUFTLDZFQUE2RSxzQkFBc0IsZ0RBQWdELGtCQUFrQixZQUFZLHNFQUFDLHVDQUF1QyxvRUFBQyxFQUFFLGlGQUFpRixFQUFFLHVHQUF1Ryw2REFBQyw0Q0FBNEMsMkRBQUMsRUFBRSw2REFBQyxzREFBc0QsMkRBQUMsTUFBTSx3QkFBd0IsaURBQWlELDBEQUFDLHdFQUF3RSxnR0FBZ0csS0FBSyxTQUFTLG1EQUFtRCxhQUFhLFdBQVcsYUFBYSxtREFBbUQsYUFBYSwyREFBMkQsU0FBUyx3QkFBd0IseURBQXlELGdEQUFnRCxzRUFBc0UsdUJBQXVCLGtFQUFrRSxrREFBa0QscUNBQXFDLFlBQVksNERBQUMsT0FBTyxzRUFBQyxpQ0FBaUMsMkJBQTJCLFlBQVksb0VBQUMsRUFBRSwrREFBK0QsRUFBRSwrREFBK0QsNkRBQUMsNENBQTRDLDJEQUFDLEVBQUUsNkRBQUMsc0RBQXNELDJEQUFDLG1FQUFtRSw4Q0FBOEMsaUJBQWlCLCtDQUErQyxrQ0FBa0MsOEJBQThCLGlDQUFpQyx3QkFBd0Isb0JBQW9CLCtDQUErQyxvQ0FBb0MsK0RBQStELHdCQUF3QixtQkFBbUIsOENBQThDLHdEQUF3RCxFQUFFLHVEQUFDLEVBQUUsc0ZBQUMsaURBQWlELFVBQStCOzs7Ozs7Ozs7Ozs7Ozs7OztBQ0pwMUk7QUFDQTtBQUNBO0FBQ0E7QUFDb0csZ0JBQWdCLGdFQUFDLENBQUMsa0JBQWtCLHFKQUFxSixvRUFBSyw2REFBNkQsMEVBQVcsbUZBQW1GLG9CQUFvQixNQUFNLFVBQVUseUJBQXlCLGtFQUF1RiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS93ZWJnbC9Hcm91cENvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvTWFwTm90ZXNMYXllclZpZXcyRC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvZ3JhcGhpY3MvR3JhcGhpY0NvbnRhaW5lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi9XR0xDb250YWluZXIuanNcIjtpbXBvcnR7VGV4dHVyZVNhbXBsaW5nTW9kZSBhcyB0fWZyb21cIi4uLy4uLy4uL3dlYmdsL2VudW1zLmpzXCI7Y2xhc3MgciBleHRlbmRzIGV7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX3ByZXZGQk89dm9pZCAwLHRoaXMucmVxdWlyZXNEZWRpY2F0ZWRGQk89ITF9ZGlzcG9zZSgpe31kb1JlbmRlcihlKXtjb25zdCByPXRoaXMuY3JlYXRlUmVuZGVyUGFyYW1zKGUpLHtjb250ZXh0Om8scGFpbnRlcjpzLHByb2ZpbGVyOm59PXI7dGhpcy5fcHJldkZCTz1vLmdldEJvdW5kRnJhbWVidWZmZXJPYmplY3QoKSxuLnJlY29yZENvbnRhaW5lclN0YXJ0KHRoaXMubmFtZSk7Y29uc3QgaT10aGlzLl9nZXRGYm8ociksYT1zLmdldFJlbmRlclRhcmdldCgpO28uYmluZEZyYW1lYnVmZmVyKGkpLHMuc2V0UmVuZGVyVGFyZ2V0KGkpLG8uc2V0RGVwdGhXcml0ZUVuYWJsZWQoITApLG8uc2V0Q29sb3JNYXNrKCEwLCEwLCEwLCEwKSxvLnNldENsZWFyQ29sb3IoMCwwLDAsMCksby5zZXRDbGVhckRlcHRoKDEpLG8uY2xlYXIoby5nbC5DT0xPUl9CVUZGRVJfQklUfG8uZ2wuREVQVEhfQlVGRkVSX0JJVCksby5zZXREZXB0aFdyaXRlRW5hYmxlZCghMSk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5jaGlsZHJlbil0LmJlZm9yZVJlbmRlcihlKTtmb3IoY29uc3QgdCBvZiB0aGlzLmNoaWxkcmVuKXQucHJvY2Vzc1JlbmRlcihyKTtmb3IoY29uc3QgdCBvZiB0aGlzLmNoaWxkcmVuKXQuYWZ0ZXJSZW5kZXIoZSk7cy5zZXRSZW5kZXJUYXJnZXQoYSkscy5yZWxlYXNlRmJvKGkpLG8uYmluZEZyYW1lYnVmZmVyKHRoaXMuX3ByZXZGQk8pLHMuYmVmb3JlUmVuZGVyTGF5ZXIocix0aGlzLl9jbGlwcGluZ0luZm9zPzI1NTowLHRoaXMuY29tcHV0ZWRPcGFjaXR5KSxpLmNvbG9yVGV4dHVyZSYmKG8uc2V0U3RlbmNpbFRlc3RFbmFibGVkKCExKSxvLnNldFN0ZW5jaWxXcml0ZU1hc2soMCkscy5ibGl0VGV4dHVyZShvLGkuY29sb3JUZXh0dXJlLHQuTkVBUkVTVCkpLHMuY29tcG9zaXRlTGF5ZXIocix0aGlzLmNvbXB1dGVkT3BhY2l0eSksbi5yZWNvcmRDb250YWluZXJFbmQoKX1jcmVhdGVSZW5kZXJQYXJhbXMoZSl7cmV0dXJuey4uLnN1cGVyLmNyZWF0ZVJlbmRlclBhcmFtcyhlKSxibGVuZE1vZGU6dGhpcy5ibGVuZE1vZGUsZWZmZWN0czp0aGlzLmNvbXB1dGVkRWZmZWN0cyxnbG9iYWxPcGFjaXR5OjF9fV9nZXRGYm8oZSl7Y29uc3R7Y29udGV4dDp0LHBhaW50ZXI6cn09ZSx7d2lkdGg6byxoZWlnaHQ6c309dC5nZXRWaWV3cG9ydCgpO3JldHVybiByLmFjcXVpcmVGYm8obyxzKX19ZXhwb3J0e3IgYXMgR3JvdXBDb250YWluZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uL0dyYXBoaWMuanNcIjtpbXBvcnR7aXNTb21lIGFzIHN9ZnJvbVwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vY29yZS9Db2xsZWN0aW9uLmpzXCI7aW1wb3J0e3dhdGNoIGFzIHIsb24gYXMgYSxpbml0aWFsIGFzIGh9ZnJvbVwiLi4vLi4vLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgb31mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e0NvbnRhaW5lciBhcyBufWZyb21cIi4uL2VuZ2luZS9Db250YWluZXIuanNcIjtpbXBvcnR7R3JvdXBDb250YWluZXIgYXMgbH1mcm9tXCIuLi9lbmdpbmUvd2ViZ2wvR3JvdXBDb250YWluZXIuanNcIjtpbXBvcnR7TGF5ZXJWaWV3MkRNaXhpbiBhcyBwfWZyb21cIi4vTGF5ZXJWaWV3MkQuanNcIjtpbXBvcnQgYyBmcm9tXCIuL2dyYXBoaWNzL0dyYXBoaWNDb250YWluZXIuanNcIjtpbXBvcnQgZyBmcm9tXCIuL2dyYXBoaWNzL0dyYXBoaWNzVmlldzJELmpzXCI7aW1wb3J0IGQgZnJvbVwiLi4vLi4vbGF5ZXJzL0xheWVyVmlldy5qc1wiO2NvbnN0IHU9XCJzdWJsYXllcnNcIixmPVwibGF5ZXJWaWV3XCIsbT1PYmplY3QuZnJlZXplKHtyZW1vdmUoKXt9LHBhdXNlKCl7fSxyZXN1bWUoKXt9fSk7bGV0IHc9Y2xhc3MgZXh0ZW5kcyhwKGQpKXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5faGlnaGxpZ2h0SWRzPW5ldyBNYXAsdGhpcy5jb250YWluZXI9bmV3IGx9YXN5bmMgZmV0Y2hQb3B1cEZlYXR1cmVzKGUpe3JldHVybiBBcnJheS5mcm9tKHRoaXMuZ3JhcGhpY3NWaWV3cygpLChpPT5pLmhpdFRlc3QoZSkuZmlsdGVyKChlPT4hIWUucG9wdXBUZW1wbGF0ZSkpKSkuZmxhdCgpfSpncmFwaGljc1ZpZXdzKCl7bnVsbD09dGhpcy5fZ3JhcGhpY3NWaWV3c0ZlYXR1cmVDb2xsZWN0aW9uTWFwP251bGw9PXRoaXMuX2dyYXBoaWNzVmlld3M/eWllbGQqW106eWllbGQqdGhpcy5fZ3JhcGhpY3NWaWV3czp5aWVsZCp0aGlzLl9ncmFwaGljc1ZpZXdzRmVhdHVyZUNvbGxlY3Rpb25NYXAua2V5cygpfWFzeW5jIGhpdFRlc3QoZSxpKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmdyYXBoaWNzVmlld3MoKSwoaT0+e2NvbnN0IHM9aS5oaXRUZXN0KGUpO2lmKG51bGwhPXRoaXMuX2dyYXBoaWNzVmlld3NGZWF0dXJlQ29sbGVjdGlvbk1hcCl7Y29uc3QgZT10aGlzLl9ncmFwaGljc1ZpZXdzRmVhdHVyZUNvbGxlY3Rpb25NYXAuZ2V0KGkpO2Zvcihjb25zdCBpIG9mIHMpIWkucG9wdXBUZW1wbGF0ZSYmZS5wb3B1cFRlbXBsYXRlJiYoaS5wb3B1cFRlbXBsYXRlPWUucG9wdXBUZW1wbGF0ZSksaS5zb3VyY2VMYXllcj1pLmxheWVyPXRoaXMubGF5ZXJ9cmV0dXJuIHN9KSkuZmxhdCgpLm1hcCgoaT0+KHt0eXBlOlwiZ3JhcGhpY1wiLGdyYXBoaWM6aSxsYXllcjp0aGlzLmxheWVyLG1hcFBvaW50OmV9KSkpfWhpZ2hsaWdodChlKXtsZXQgcjtcIm51bWJlclwiPT10eXBlb2YgZT9yPVtlXTplIGluc3RhbmNlb2YgaT9yPVtlLnVpZF06QXJyYXkuaXNBcnJheShlKSYmZS5sZW5ndGg+MD9yPVwibnVtYmVyXCI9PXR5cGVvZiBlWzBdP2U6ZS5tYXAoKGU9PmUmJmUudWlkKSk6dC5pc0NvbGxlY3Rpb24oZSkmJihyPWUubWFwKChlPT5lJiZlLnVpZCkpLnRvQXJyYXkoKSk7Y29uc3QgYT1yPy5maWx0ZXIocyk7cmV0dXJuIGE/Lmxlbmd0aD8odGhpcy5fYWRkSGlnaGxpZ2h0KGEpLHtyZW1vdmU6KCk9Pnt0aGlzLl9yZW1vdmVIaWdobGlnaHQoYSl9fSk6bX11cGRhdGUoZSl7Zm9yKGNvbnN0IGkgb2YgdGhpcy5ncmFwaGljc1ZpZXdzKCkpaS5wcm9jZXNzVXBkYXRlKGUpfWF0dGFjaCgpe2NvbnN0IGU9dGhpcy52aWV3LGk9KCk9PnRoaXMucmVxdWVzdFVwZGF0ZSgpLHM9dGhpcy5sYXllci5mZWF0dXJlQ29sbGVjdGlvbnM7aWYobnVsbCE9cyYmcy5sZW5ndGgpe3RoaXMuX2dyYXBoaWNzVmlld3NGZWF0dXJlQ29sbGVjdGlvbk1hcD1uZXcgTWFwO2Zvcihjb25zdCB0IG9mIHMpe2NvbnN0IHM9bmV3IGModGhpcy52aWV3LmZlYXR1cmVzVGlsaW5nU2NoZW1lKSxhPW5ldyBnKHt2aWV3OmUsZ3JhcGhpY3M6dC5zb3VyY2UscmVuZGVyZXI6dC5yZW5kZXJlcixyZXF1ZXN0VXBkYXRlQ2FsbGJhY2s6aSxjb250YWluZXI6c30pO3RoaXMuX2dyYXBoaWNzVmlld3NGZWF0dXJlQ29sbGVjdGlvbk1hcC5zZXQoYSx0KSx0aGlzLmNvbnRhaW5lci5hZGRDaGlsZChhLmNvbnRhaW5lciksdGhpcy5hZGRIYW5kbGVzKFtyKCgoKT0+dC52aXNpYmxlKSwoZT0+YS5jb250YWluZXIudmlzaWJsZT1lKSxoKSxyKCgoKT0+YS51cGRhdGluZyksKCgpPT50aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nXCIpKSxoKV0sZil9dGhpcy5fdXBkYXRlSGlnaGxpZ2h0KCl9ZWxzZSBudWxsIT10aGlzLmxheWVyLnN1YmxheWVycyYmdGhpcy5hZGRIYW5kbGVzKGEoKCgpPT50aGlzLmxheWVyLnN1YmxheWVycyksXCJjaGFuZ2VcIiwoKCk9PnRoaXMuX2NyZWF0ZUdyYXBoaWNzVmlld3MoKSkse29uTGlzdGVuZXJBZGQ6KCk9PnRoaXMuX2NyZWF0ZUdyYXBoaWNzVmlld3MoKSxvbkxpc3RlbmVyUmVtb3ZlOigpPT50aGlzLl9kZXN0cm95R3JhcGhpY3NWaWV3cygpfSksdSl9ZGV0YWNoKCl7dGhpcy5fZGVzdHJveUdyYXBoaWNzVmlld3MoKSx0aGlzLnJlbW92ZUhhbmRsZXModSl9bW92ZVN0YXJ0KCl7fW1vdmVFbmQoKXt9dmlld0NoYW5nZSgpe2Zvcihjb25zdCBlIG9mIHRoaXMuZ3JhcGhpY3NWaWV3cygpKWUudmlld0NoYW5nZSgpfWlzVXBkYXRpbmcoKXtmb3IoY29uc3QgZSBvZiB0aGlzLmdyYXBoaWNzVmlld3MoKSlpZihlLnVwZGF0aW5nKXJldHVybiEwO3JldHVybiExfV9kZXN0cm95R3JhcGhpY3NWaWV3cygpe3RoaXMuY29udGFpbmVyLnJlbW92ZUFsbENoaWxkcmVuKCksdGhpcy5yZW1vdmVIYW5kbGVzKGYpO2Zvcihjb25zdCBlIG9mIHRoaXMuZ3JhcGhpY3NWaWV3cygpKWUuZGVzdHJveSgpO3RoaXMuX2dyYXBoaWNzVmlld3M9bnVsbCx0aGlzLl9ncmFwaGljc1ZpZXdzRmVhdHVyZUNvbGxlY3Rpb25NYXA9bnVsbH1fY3JlYXRlR3JhcGhpY3NWaWV3cygpe2lmKHRoaXMuX2Rlc3Ryb3lHcmFwaGljc1ZpZXdzKCksbnVsbD09dGhpcy5sYXllci5zdWJsYXllcnMpcmV0dXJuO2NvbnN0IGU9W10saT10aGlzLnZpZXcscz0oKT0+dGhpcy5yZXF1ZXN0VXBkYXRlKCk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5sYXllci5zdWJsYXllcnMpe2NvbnN0IGE9bmV3IG4sbz1uZXcgYyh0aGlzLnZpZXcuZmVhdHVyZXNUaWxpbmdTY2hlbWUpO28uZmFkZVRyYW5zaXRpb25FbmFibGVkPSEwO2NvbnN0IGw9bmV3IGcoe3ZpZXc6aSxncmFwaGljczp0LmdyYXBoaWNzLHJlcXVlc3RVcGRhdGVDYWxsYmFjazpzLGNvbnRhaW5lcjpvfSk7dGhpcy5hZGRIYW5kbGVzKFt0Lm9uKFwiZ3JhcGhpYy11cGRhdGVcIixsLmdyYXBoaWNVcGRhdGVIYW5kbGVyKSxyKCgoKT0+dC52aXNpYmxlKSwoZT0+bC5jb250YWluZXIudmlzaWJsZT1lKSxoKSxyKCgoKT0+bC51cGRhdGluZyksKCgpPT50aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nXCIpKSxoKV0sZiksYS5hZGRDaGlsZChsLmNvbnRhaW5lciksdGhpcy5jb250YWluZXIuYWRkQ2hpbGQoYSksZS5wdXNoKGwpfXRoaXMuX2dyYXBoaWNzVmlld3M9ZSx0aGlzLl91cGRhdGVIaWdobGlnaHQoKX1fYWRkSGlnaGxpZ2h0KGUpe2Zvcihjb25zdCBpIG9mIGUpaWYodGhpcy5faGlnaGxpZ2h0SWRzLmhhcyhpKSl7Y29uc3QgZT10aGlzLl9oaWdobGlnaHRJZHMuZ2V0KGkpO3RoaXMuX2hpZ2hsaWdodElkcy5zZXQoaSxlKzEpfWVsc2UgdGhpcy5faGlnaGxpZ2h0SWRzLnNldChpLDEpO3RoaXMuX3VwZGF0ZUhpZ2hsaWdodCgpfV9yZW1vdmVIaWdobGlnaHQoZSl7Zm9yKGNvbnN0IGkgb2YgZSlpZih0aGlzLl9oaWdobGlnaHRJZHMuaGFzKGkpKXtjb25zdCBlPXRoaXMuX2hpZ2hsaWdodElkcy5nZXQoaSktMTswPT09ZT90aGlzLl9oaWdobGlnaHRJZHMuZGVsZXRlKGkpOnRoaXMuX2hpZ2hsaWdodElkcy5zZXQoaSxlKX10aGlzLl91cGRhdGVIaWdobGlnaHQoKX1fdXBkYXRlSGlnaGxpZ2h0KCl7Y29uc3QgZT1BcnJheS5mcm9tKHRoaXMuX2hpZ2hsaWdodElkcy5rZXlzKCkpO2Zvcihjb25zdCBpIG9mIHRoaXMuZ3JhcGhpY3NWaWV3cygpKWkuc2V0SGlnaGxpZ2h0KGUpfX07dz1lKFtvKFwiZXNyaS52aWV3cy4yZC5sYXllcnMuTWFwTm90ZXNMYXllclZpZXcyRFwiKV0sdyk7Y29uc3QgeT13O2V4cG9ydHt5IGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtXR0xEcmF3UGhhc2UgYXMgZX1mcm9tXCIuLi8uLi9lbmdpbmUvd2ViZ2wvZW51bXMuanNcIjtpbXBvcnQgciBmcm9tXCIuL0Jhc2VHcmFwaGljQ29udGFpbmVyLmpzXCI7Y2xhc3MgaSBleHRlbmRzIHJ7cmVuZGVyQ2hpbGRyZW4ocil7dGhpcy5hdHRyaWJ1dGVWaWV3LnVwZGF0ZSgpLHRoaXMuY2hpbGRyZW4uc29tZSgoZT0+ZS5oYXNEYXRhKSkmJih0aGlzLmF0dHJpYnV0ZVZpZXcuYmluZFRleHR1cmVzKHIuY29udGV4dCwhMSksc3VwZXIucmVuZGVyQ2hpbGRyZW4ociksci5kcmF3UGhhc2U9PT1lLk1BUCYmdGhpcy5fcmVuZGVyQ2hpbGRyZW4ociksdGhpcy5oYXNIaWdobGlnaHQoKSYmci5kcmF3UGhhc2U9PT1lLkhJR0hMSUdIVCYmdGhpcy5fcmVuZGVySGlnaGxpZ2h0KHIpLHRoaXMuX2JvdW5kc1JlbmRlcmVyJiZ0aGlzLl9ib3VuZHNSZW5kZXJlci5kb1JlbmRlcihyKSl9X3JlbmRlckhpZ2hsaWdodChlKXtjb25zdHtwYWludGVyOnJ9PWUsaT1yLmVmZmVjdHMuaGlnaGxpZ2h0O2kuYmluZChlKSx0aGlzLl9yZW5kZXJDaGlsZHJlbihlLGkuZGVmaW5lcyksaS5kcmF3KGUpLGkudW5iaW5kKCl9fWV4cG9ydHtpIGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9