"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_arcgis_core_layers_graphics_data_QueryEngine_js"],{

/***/ "./node_modules/@arcgis/core/core/sql/WhereClauseCache.js":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/sql/WhereClauseCache.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WhereClauseCache": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _LRUCache_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../LRUCache.js */ "./node_modules/@arcgis/core/core/LRUCache.js");
/* harmony import */ var _WhereClause_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WhereClause.js */ "./node_modules/@arcgis/core/core/sql/WhereClause.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class c{constructor(e,c){this._cache=new _LRUCache_js__WEBPACK_IMPORTED_MODULE_0__.LRUCache(e),this._invalidCache=new _LRUCache_js__WEBPACK_IMPORTED_MODULE_0__.LRUCache(c)}get(t,c){const i=`${c.uid}:${t}`,r=this._cache.get(i);if(r)return r;if(void 0!==this._invalidCache.get(i))return null;try{const r=_WhereClause_js__WEBPACK_IMPORTED_MODULE_1__.WhereClause.create(t,c);return this._cache.put(i,r),r}catch{return this._invalidCache.put(i,null),null}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./attributeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/layers/graphics/data/utils.js");
/* harmony import */ var _statistics_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../statistics/utils.js */ "./node_modules/@arcgis/core/statistics/utils.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class n{constructor(s,a,l){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=s.returnDistinctValues??!1,this.fieldsIndex=l,this.featureAdapter=a;const r=s.outFields;if(r&&!r.includes("*")){this.outFields=r;let s=0;for(const a of r){const r=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getExpressionFromFieldName)(a),n=this.fieldsIndex.get(r),u=n?null:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(r,l),d=n?n.name:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getAliasFromFieldName)(a)||"FIELD_EXP_"+s++;this._fieldDataCache.set(a,{alias:d,clause:u})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach((t=>this.getAttributes(t))),this._returnDistinctMap.size):t.length}getAttributes(t){const e=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(e)}getFieldValue(t,i,s){const a=s?s.name:i;let l=null;return this._fieldDataCache.has(a)?l=this._fieldDataCache.get(a)?.clause:s||(l=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(i,this.fieldsIndex),this._fieldDataCache.set(a,{alias:a,clause:l})),s?this.featureAdapter.getAttribute(t,a):l?.calculateValue(t,this.featureAdapter)}getDataValues(t,e){const i=e.normalizationType,s=e.normalizationTotal;return t.map((t=>{let r=e.field&&this.getFieldValue(t,e.field,this.fieldsIndex.get(e.field));if(e.field2&&(r=`${(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_2__.processNullValue)(r)}${e.fieldDelimiter}${(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_2__.processNullValue)(this.getFieldValue(t,e.field2,this.fieldsIndex.get(e.field2)))}`,e.field3&&(r=`${r}${e.fieldDelimiter}${(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_2__.processNullValue)(this.getFieldValue(t,e.field3,this.fieldsIndex.get(e.field3)))}`)),i&&Number.isFinite(r)){const a="field"===i&&e.normalizationField?this.getFieldValue(t,e.normalizationField,this.fieldsIndex.get(e.normalizationField)):null;r=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_2__.getNormalizedValue)(r,i,a,s)}return r}))}async getExpressionValues(t,e,i,a){const{arcadeUtils:l}=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__.loadArcade)(),n=l.hasGeometryOperations(e);n&&await l.enableGeometryOperations();const u=l.createFunction(e),d=i&&l.getViewInfo(i),o={fields:this.fieldsIndex.fields};return t.map((t=>{const e={attributes:this.featureAdapter.getAttributes(t),layer:o,geometry:n?{...(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getGeometry)(a.geometryType,a.hasZ,a.hasM,this.featureAdapter.getGeometry(t)),spatialReference:i?.spatialReference}:null},r=l.createExecContext(e,d);return l.executeFunction(u,r)}))}validateItem(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(i,this.fieldsIndex)}),this._fieldDataCache.get(i)?.clause?.testFeature(t,this.featureAdapter)??!1}validateItems(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(i,this.fieldsIndex)}),this._fieldDataCache.get(i)?.clause?.testSet(t,this.featureAdapter)??!1}_processAttributesForOutFields(t){const e=this.outFields;if(!e||!e.length)return this.featureAdapter.getAttributes(t);const i={};for(const s of e){const{alias:e,clause:a}=this._fieldDataCache.get(s);i[e]=a?a.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,e)}return i}_processAttributesForDistinctValues(t){if(null==t||!this.returnDistinctValues)return t;const e=this.outFields,i=[];if(e)for(const l of e){const{alias:e}=this._fieldDataCache.get(l);i.push(t[e])}else for(const l in t)i.push(t[l]);const s=`${(e||["*"]).join(",")}=${i.join(",")}`;let a=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++a),a>1?null:t}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Feature": () => (/* binding */ K),
/* harmony export */   "QueryEngine": () => (/* binding */ ee)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_MemCache_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/MemCache.js */ "./node_modules/@arcgis/core/core/MemCache.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../geometry/support/boundsUtils.js */ "./node_modules/@arcgis/core/geometry/support/boundsUtils.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../geometry/support/normalizeUtils.js */ "./node_modules/@arcgis/core/geometry/support/normalizeUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./attributeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js");
/* harmony import */ var _projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./QueryEngineCapabilities.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js");
/* harmony import */ var _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./QueryEngineResult.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js");
/* harmony import */ var _spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./spatialQuerySupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js");
/* harmony import */ var _timeSupport_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./timeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/timeSupport.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/layers/graphics/data/utils.js");
/* harmony import */ var _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/* harmony import */ var _views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../views/support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function $(e){return null!=e&&e.every((e=>"exceedslimit"!==e.statisticType))}const W="feature-store:unsupported-query";class K{constructor(e,t=null,i,s,r){this.attributes=e,this.geometry=i,this.centroid=s,this.filterFlags=r,this.groupId=-1,this.displayId=t}}const X=new _core_MemCache_js__WEBPACK_IMPORTED_MODULE_4__.MemCacheStorage(2e6);let Y=0;class ee{constructor(e){this._geometryQueryCache=null,this._changeHandle=null,this.capabilities={query:_QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_16__.queryCapabilities},this.geometryType=e.geometryType,this.hasM=!!e.hasM,this.hasZ=!!e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on("changed",(()=>this.clearCache())),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new _core_MemCache_js__WEBPACK_IMPORTED_MODULE_4__.MemCache(Y+++"$$",X)),this.fieldsIndex=new _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_21__["default"](e.fields),e.scheduler&&e.priority&&(this._frameTask=e.scheduler.registerTask(e.priority))}destroy(){this._frameTask=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.removeMaybe)(this._frameTask),this.clearCache(),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._geometryQueryCache),this._changeHandle=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.removeMaybe)(this._changeHandle),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this.fieldsIndex)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear(),this._allFeaturesPromise=null,this._timeExtentPromise=null}async executeQuery(e,t){try{return(await this._executeQuery(e,{},t)).createQueryResponse()}catch(i){if(i!==_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)throw i;return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult([],e,this).createQueryResponse()}}async executeQueryForCount(e={},t){try{return(await this._executeQuery(e,{returnGeometry:!1,returnCentroid:!1,outSR:null},t)).createQueryResponseForCount()}catch(i){if(i!==_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)throw i;return 0}}async executeQueryForExtent(e,t){const i=e.outSR;try{const s=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),r=s.size;if(!r)return{count:0,extent:null};return{count:r,extent:await this._getBounds(s.items,s.spatialReference,i||this.spatialReference)}}catch(s){if(s===_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw s}}async executeQueryForIds(e,t){return this.executeQueryForIdSet(e,t).then((e=>Array.from(e)))}async executeQueryForIdSet(e,t){try{const i=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),s=i.items,r=new Set;return await this._reschedule((()=>{for(const e of s)r.add(i.featureAdapter.getObjectId(e))}),t),r}catch(i){if(i===_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw i}}async executeQueryForSnapping(e,t){const{point:i,distance:s,returnEdge:r,returnVertex:a}=e;if(!r&&!a)return{candidates:[]};const n=await this._reschedule((()=>this._checkQuerySupport(e.query)),t),u=!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(i.spatialReference,this.spatialReference);u&&await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.checkProjectionSupport)(i.spatialReference,this.spatialReference);const o="number"==typeof s?s:s.x,l="number"==typeof s?s:s.y,c={xmin:i.x-o,xmax:i.x+o,ymin:i.y-l,ymax:i.y+l,spatialReference:i.spatialReference},h=u?(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.project)(c,this.spatialReference):c;if(!h)return{candidates:[]};const p=(await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_11__.normalizeCentralMeridian)((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__.fromJSON)(i),null,{signal:t}))[0],m=(await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_11__.normalizeCentralMeridian)((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__.fromJSON)(h),null,{signal:t}))[0];if(null==p||null==m)return{candidates:[]};const f=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(m.toJSON()))),t),n,this);await this._reschedule((()=>this._executeObjectIdsQuery(f)),t),await this._reschedule((()=>this._executeTimeQuery(f)),t),await this._reschedule((()=>this._executeAttributesQuery(f)),t);const d=p.toJSON(),y=u?(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.project)(d,this.spatialReference):d,_=u?Math.max(h.xmax-h.xmin,h.ymax-h.ymin)/2:s;return f.createSnappingResponse({...e,point:y,distance:_},i.spatialReference)}async executeQueryForLatestObservations(e,t){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"Missing timeInfo or timeInfo.trackIdField",{query:e,timeInfo:this.timeInfo});try{const i=await this._executeQuery(e,{},t);return await this._reschedule((()=>this._filterLatest(i)),t),i.createQueryResponse()}catch(s){if(s!==_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)throw s;return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult([],e,this).createQueryResponse()}}async executeQueryForSummaryStatistics(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createSummaryStatisticsResponse(t)}async executeQueryForUniqueValues(e={},t,i){const{field:s,field2:r,field3:a,valueExpression:n}=t;return(await this._getQueryEngineResultForStats(e,{field:s,field2:r,field3:a,valueExpression:n},i)).createUniqueValuesResponse(t)}async executeQueryForClassBreaks(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createClassBreaksResponse(t)}async executeQueryForHistogram(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createHistogramResponse(t)}async fetchRecomputedExtents(e){const[t,i]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),this.spatialReference,this.spatialReference),null!=this._timeExtentPromise?this._timeExtentPromise:this._timeExtentPromise=(0,_timeSupport_js__WEBPACK_IMPORTED_MODULE_19__.getTimeExtent)(this.timeInfo,this.featureStore)]);return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAborted)(e),{fullExtent:t,timeExtent:i}}async _getBounds(e,t,i){const s=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.set)((0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.create)(),_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(e,(e=>(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.expandWithAABB)(s,e)));const r={xmin:s[0],ymin:s[1],xmax:s[3],ymax:s[4],spatialReference:(0,_utils_js__WEBPACK_IMPORTED_MODULE_20__.cleanFromGeometryEngine)(this.spatialReference)};this.hasZ&&isFinite(s[2])&&isFinite(s[5])&&(r.zmin=s[2],r.zmax=s[5]);const a=(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.project)(r,t,i);if(a.spatialReference=(0,_utils_js__WEBPACK_IMPORTED_MODULE_20__.cleanFromGeometryEngine)(i),a.xmax-a.xmin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__.getMetersPerUnitForSR)(a.spatialReference);a.xmin-=e,a.xmax+=e}if(a.ymax-a.ymin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__.getMetersPerUnitForSR)(a.spatialReference);a.ymin-=e,a.ymax+=e}if(this.hasZ&&null!=a.zmin&&null!=a.zmax&&a.zmax-a.zmin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__.getMetersPerUnitForSR)(a.spatialReference);a.zmin-=e,a.zmax+=e}return a}async _schedule(e,t){return null!=this._frameTask?this._frameTask.schedule(e,t):e(_views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_23__.noBudget)}async _reschedule(e,t){return null!=this._frameTask?this._frameTask.reschedule(e,t):e(_views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_23__.noBudget)}async _getAllFeaturesQueryEngineResult(e){return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(await this._getAllFeatures(),e,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const e=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach((t=>e.push(t)))})().then((()=>e))}const e=this._allFeaturesPromise,t=await e;return e===this._allFeaturesPromise?t.slice():this._getAllFeatures()}async _executeQuery(e,t,i){e=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(e),e=await this._schedule((()=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_20__.normalizeQuery)(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkQuerySupport(e)),i),e={...e,...t};const r=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),a=await this._reschedule((()=>this._executeGeometryQuery(e,r,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(a)),i),await this._reschedule((()=>this._executeObjectIdsQuery(a)),i),await this._reschedule((()=>this._executeTimeQuery(a)),i),await this._reschedule((()=>this._executeAttributesQuery(a)),i),a}async _executeSceneFilterQuery(e,t){if(null==e.sceneFilter)return null;const{outSR:i,returnGeometry:s,returnCentroid:r}=e,a=this.featureStore.featureSpatialReference,n=e.sceneFilter.geometry,u=null==a||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(a,n.spatialReference)?n:(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.project)(n,a);if(!u)return null;const o=s||r,l=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.isValid)(i)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(this.spatialReference,i)&&o?async e=>this._project(e,i):e=>e,c=this.featureAdapter,h=await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(u))),t);if("disjoint"===e.sceneFilter.spatialRelationship){if(!h.length)return null;const i=new Set;for(const e of h)i.add(c.getObjectId(e));const s=await this._reschedule((()=>this._getAllFeatures()),t),r=await this._reschedule((async()=>{const r=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.getSpatialQueryOperator)("esriSpatialRelDisjoint",u,this.geometryType,this.hasZ,this.hasM),a=e=>!i.has(c.getObjectId(e))||r(c.getGeometry(e)),n=await this._runSpatialFilter(s,a,t);return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(n,e,this)}),t);return l(r)}if(!h.length)return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult([],e,this);if(this._canExecuteSinglePass(u,e))return l(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(h,e,this));const p=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.getSpatialQueryOperator)("esriSpatialRelContains",u,this.geometryType,this.hasZ,this.hasM),m=await this._runSpatialFilter(h,(e=>p(c.getGeometry(e))),t);return l(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(m,e,this))}async _executeGeometryQuery(i,s,r){if(null!=s&&0===s.items.length)return s;i=null!=s?s.query:i;const{geometry:a,outSR:n,spatialRel:u,returnGeometry:o,returnCentroid:l}=i,c=this.featureStore.featureSpatialReference,h=!a||null==c||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(c,a.spatialReference)?a:(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.project)(a,c),p=o||l,m=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.isValid)(n)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(this.spatialReference,n),f=this._geometryQueryCache&&null==s?m&&p?JSON.stringify({originalFilterGeometry:a,spatialRelationship:u,outSpatialReference:n}):JSON.stringify({originalFilterGeometry:a,spatialRelationship:u}):null,d=f?this._geometryQueryCache.get(f):null;if(null!=d)return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(d,i,this);const y=async e=>(m&&p&&await this._project(e,n),f&&this._geometryQueryCache.put(f,e.items,e.items.length+1),e);if(!h)return y(null!=s?s:await this._getAllFeaturesQueryEngineResult(i));const g=this.featureAdapter;let _=await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(a))),r);if("esriSpatialRelDisjoint"===u){if(!_.length)return y(null!=s?s:await this._getAllFeaturesQueryEngineResult(i));const e=new Set;for(const i of _)e.add(g.getObjectId(i));const t=null!=s?s.items:await this._reschedule((()=>this._getAllFeatures()),r),a=await this._reschedule((async()=>{const s=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.getSpatialQueryOperator)(u,h,this.geometryType,this.hasZ,this.hasM),a=t=>!e.has(g.getObjectId(t))||s(g.getGeometry(t)),n=await this._runSpatialFilter(t,a,r);return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(n,i,this)}),r);return y(a)}if(null!=s){const i=new _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.PositionHint;_=_.filter((e=>(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.indexOf)(s.items,e,s.items.length,i)>=0))}if(!_.length){const e=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult([],i,this);return f&&this._geometryQueryCache.put(f,e.items,1),e}if(this._canExecuteSinglePass(h,i))return y(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(_,i,this));const x=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.getSpatialQueryOperator)(u,h,this.geometryType,this.hasZ,this.hasM),w=await this._runSpatialFilter(_,(e=>x(g.getGeometry(e))),r);return y(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(w,i,this))}_executeAggregateIdsQuery(e){if(0===e.items.length||!e.query.aggregateIds||!e.query.aggregateIds.length||null==this.aggregateAdapter)return;const t=new Set;for(const s of e.query.aggregateIds){this.aggregateAdapter.getFeatureObjectIds(s).forEach((e=>t.add(e)))}const i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeObjectIdsQuery(e){if(0===e.items.length||!e.query.objectIds||!e.query.objectIds.length)return;const t=new Set(e.query.objectIds),i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeTimeQuery(e){if(0===e.items.length)return;const t=(0,_timeSupport_js__WEBPACK_IMPORTED_MODULE_19__.getTimeOperator)(this.timeInfo,e.query.timeExtent,this.featureAdapter);null!=t&&(e.items=e.items.filter(t))}_executeAttributesQuery(e){if(0===e.items.length)return;const t=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.getWhereClause)(e.query.where,this.fieldsIndex);if(t){if(!t.isStandardized)throw new TypeError("Where clause is not standardized");e.items=e.items.filter((e=>t.testFeature(e,this.featureAdapter)))}}async _runSpatialFilter(e,t,i){if(!t)return e;if(null==this._frameTask)return e.filter((e=>t(e)));let s=0;const r=new Array,a=async n=>{for(;s<e.length;){const u=e[s++];t(u)&&(r.push(u),n.madeProgress()),n.done&&await this._reschedule((e=>a(e)),i)}};return this._reschedule((e=>a(e)),i).then((()=>r))}_filterLatest(e){const{trackIdField:t,startTimeField:i,endTimeField:s}=this.timeInfo,r=s||i,a=new Map,n=this.featureAdapter.getAttribute;for(const u of e.items){const e=n(u,t),i=n(u,r),s=a.get(e);(!s||i>n(s,r))&&a.set(e,u)}e.items=Array.from(a.values())}_canExecuteSinglePass(e,t){const{spatialRel:i}=t;return (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.canQueryWithRBush)(e)&&("esriSpatialRelEnvelopeIntersects"===i||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===i||"esriSpatialRelContains"===i||"esriSpatialRelWithin"===i))}async _project(e,t){if(!t||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(this.spatialReference,t))return e;const i=this.featureAdapter,s=await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.projectMany)(e.items.map((e=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_20__.getGeometry)(this.geometryType,this.hasZ,this.hasM,i.getGeometry(e)))),this.spatialReference,t);return e.items=s.map(((t,s)=>i.cloneWithGeometry(e.items[s],(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_13__.convertFromGeometry)(t,this.hasZ,this.hasM)))),e}_getQueryBBoxes(e){if((0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.canQueryWithRBush)(e)){if((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__.isExtent)(e))return[(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__.fromValues)(e.xmin,e.ymin,e.xmax,e.ymax)];if((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__.isPolygon)(e))return e.rings.map((e=>(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__.fromValues)(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))))}return[(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_9__.getBoundsXY)((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__.create)(),e)]}async _searchFeatures(e){const t=new Set;await Promise.all(e.map((e=>this.featureStore.forEachInBounds(e,(e=>t.add(e))))));const i=Array.from(t.values());return t.clear(),i}async _checkStatisticsSupport(e,t){if((e.distance??0)<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text||e.outStatistics||e.groupByFieldsForStatistics||e.having||e.orderByFields)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"Unsupported query options",{query:e});return this._checkAttributesQuerySupport(e),Promise.all([this._checkStatisticsParamsSupport(t,e),(0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.checkSpatialQuerySupport)(e,this.geometryType,this.spatialReference),(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.checkProjectionSupport)(this.spatialReference,e.outSR)]).then((()=>e))}async _checkStatisticsParamsSupport(e,t){let s=[];if(e.valueExpression){const{arcadeUtils:t}=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_22__.loadArcade)();s=t.extractFieldNames(e.valueExpression)}if(e.field&&s.push(e.field),e.field2&&s.push(e.field2),e.field3&&s.push(e.field3),e.normalizationField&&s.push(e.normalizationField),!s.length&&!e.valueExpression)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"field or valueExpression is required",{params:e});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFields)(this.fieldsIndex,s,{errorMessage:"Cannot calculate statistics for missing fields",query:t}),(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFieldTypes)(this.fieldsIndex,s,{expressionName:"statistics",query:t})}async _checkQuerySupport(e){if((e.distance??0)<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"Unsupported query options",{query:e});return this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),Promise.all([(0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.checkSpatialQuerySupport)(e,this.geometryType,this.spatialReference),(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.checkProjectionSupport)(this.spatialReference,e.outSR)]).then((()=>e))}_checkAttributesQuerySupport(e){const{outFields:t,orderByFields:s,returnDistinctValues:r,outStatistics:a}=e,n=a?a.map((e=>e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase())).filter(Boolean):[];if(s&&s.length>0){const t=" asc",i=" desc",r=s.map((e=>{const s=e.toLowerCase();return s.includes(t)?s.split(t)[0]:s.includes(i)?s.split(i)[0]:e})).filter((e=>!n.includes(e)));(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFields)(this.fieldsIndex,r,{expressionName:"orderByFields",query:e})}if(t&&t.length>0)(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFields)(this.fieldsIndex,t,{expressionName:"outFields",query:e});else if(r)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"outFields should be specified for returnDistinctValues",{query:e});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateWhere)(this.fieldsIndex,e.where,e)}_checkStatisticsQuerySupport(e){const{outStatistics:t,groupByFieldsForStatistics:s,having:r}=e,a=s&&s.length,n=t&&t.length;if(r){if(!a||!n)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"outStatistics and groupByFieldsForStatistics should be specified with having",{query:e});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateHaving)(this.fieldsIndex,r,t,e)}if(n){if(!$(t))return;const r=t.map((e=>e.onStatisticField)).filter(Boolean);(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFields)(this.fieldsIndex,r,{expressionName:"onStatisticFields",query:e}),a&&(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFields)(this.fieldsIndex,s,{expressionName:"groupByFieldsForStatistics",query:e});const n=new Set([..._attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validNumericTypesKebabDict.jsonValues,..._attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validDateTypesKebabDict.jsonValues]),u=new Intl.ListFormat("en-US",{type:"conjunction"}).format([..._attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validNumericTypesKebabDict.apiValues,..._attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validDateTypesKebabDict.apiValues]);for(const s of t){const{onStatisticField:t,statisticType:r}=s;if(("percentile_disc"===r||"percentile_cont"===r)&&"statisticParameters"in s){const{statisticParameters:t}=s;if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"statisticParameters should be set for percentile type",{definition:s,query:e})}else if("count"!==r&&"min"!==r&&"max"!==r&&t&&(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.hasInvalidFieldType)(t,this.fieldsIndex,n))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,`outStatistics with '${r}' statistic type, only supports ${u} field types`,{definition:s,query:e})}}}async _getQueryEngineResultForStats(e,t,i){e=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(e);try{e=await this._schedule((()=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_20__.normalizeQuery)(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkStatisticsSupport(e,t)),i);const s=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),r=await this._reschedule((()=>this._executeGeometryQuery(e,s,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(r)),i),await this._reschedule((()=>this._executeObjectIdsQuery(r)),i),await this._reschedule((()=>this._executeTimeQuery(r)),i),await this._reschedule((()=>this._executeAttributesQuery(r)),i),r}catch(r){if(r!==_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)throw r;return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult([],e,this)}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "queryCapabilities": () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const t={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "QueryEngineResult": () => (/* binding */ z)
/* harmony export */ });
/* harmony import */ var _geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../geometry/support/centroid.js */ "./node_modules/@arcgis/core/geometry/support/centroid.js");
/* harmony import */ var _geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry/support/extentUtils.js */ "./node_modules/@arcgis/core/geometry/support/extentUtils.js");
/* harmony import */ var _geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry/support/quantizationUtils.js */ "./node_modules/@arcgis/core/geometry/support/quantizationUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AttributesBuilder.js */ "./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js");
/* harmony import */ var _projectionSupport_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _SnappingCandidate_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SnappingCandidate.js */ "./node_modules/@arcgis/core/layers/graphics/data/SnappingCandidate.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/layers/graphics/data/utils.js");
/* harmony import */ var _support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../statistics/utils.js */ "./node_modules/@arcgis/core/statistics/utils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class z{constructor(e,t,s){this.items=e,this.query=t,this.geometryType=s.geometryType,this.hasM=s.hasM,this.hasZ=s.hasZ,this.fieldsIndex=s.fieldsIndex,this.objectIdField=s.objectIdField,this.spatialReference=s.spatialReference,this.featureAdapter=s.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const e=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__["default"](this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return e.countDistinctValues(this.items);const{groupByFieldsForStatistics:t,having:s,outStatistics:i}=this.query,a=t?.length;if(!!!a)return 1;const r=new Map,n=new Map,l=new Set;for(const o of i){const{statisticType:i}=o,a="exceedslimit"!==i?o.onStatisticField:void 0;if(!n.has(a)){const s=[];for(const i of t){const t=this._getAttributeValues(e,i,r);s.push(t)}n.set(a,this._calculateUniqueValues(s,e.returnDistinctValues))}const u=n.get(a);for(const t in u){const{data:i,items:a}=u[t],r=i.join(",");s&&!e.validateItems(a,s)||l.add(r)}}return l.size}async createQueryResponse(){let e;if(this.query.outStatistics){e=this.query.outStatistics.some((e=>"exceedslimit"===e.statisticType))?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query)}else e=this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const t=this.query.geometry;(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__.isValid)(this.query.outSR)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__.equals)(t.spatialReference,this.query.outSR)?e.queryGeometry=(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.cleanFromGeometryEngine)({spatialReference:this.query.outSR,...(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_5__.project)(t,t.spatialReference,this.query.outSR)}):e.queryGeometry=(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.cleanFromGeometryEngine)({spatialReference:this.query.outSR,...t})}return e}createSnappingResponse(e,t){const s=this.featureAdapter,i=b(this.hasZ,this.hasM),{point:a,mode:r}=e,n="number"==typeof e.distance?e.distance:e.distance.x,o="number"==typeof e.distance?e.distance:e.distance.y,l={candidates:[]},d="esriGeometryPolygon"===this.geometryType,m=this._getPointCreator(r,this.spatialReference,t),h=new A(null,0),g=new A(null,0),f={x:0,y:0,z:0};for(const p of this.items){const t=s.getGeometry(p);if(null==t)continue;const{coords:r,lengths:y}=t;if(h.coords=r,g.coords=r,e.returnEdge){let e=0;for(let t=0;t<y.length;t++){const r=y[t];for(let t=0;t<r;t++,e+=i){const c=h;if(c.coordsIndex=e,t!==r-1){const t=g;t.coordsIndex=e+i;const r=f;R(f,a,c,t);const d=(a.x-r.x)/n,h=(a.y-r.y)/o,y=d*d+h*h;y<=1&&l.candidates.push((0,_SnappingCandidate_js__WEBPACK_IMPORTED_MODULE_6__.makeEdgeCandidate)(s.getObjectId(p),m(r),Math.sqrt(y),m(c),m(t)))}}}}if(e.returnVertex){const e=d?r.length-i:r.length;for(let t=0;t<e;t+=i){const e=h;e.coordsIndex=t;const i=(a.x-e.x)/n,r=(a.y-e.y)/o,u=i*i+r*r;u<=1&&l.candidates.push((0,_SnappingCandidate_js__WEBPACK_IMPORTED_MODULE_6__.makeVertexCandidate)(s.getObjectId(p),m(e),Math.sqrt(u)))}}}return l.candidates.sort(((e,t)=>e.distance-t.distance)),l}_getPointCreator(e,t,s){const i=null==s||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__.equals)(t,s)?e=>e:e=>(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_5__.project)(e,t,s),{hasZ:a}=this,r=0;return"3d"===e?a?({x:e,y:t,z:s})=>i({x:e,y:t,z:s}):({x:e,y:t})=>i({x:e,y:t,z:r}):({x:e,y:t})=>i({x:e,y:t})}async createSummaryStatisticsResponse(e){const{field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,minValue:n,maxValue:o,scale:l}=e,u=this.fieldsIndex.isDateField(t),c=await this._getDataValues({field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,scale:l}),d=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.isNullCountSupported)({normalizationType:a,normalizationField:i,minValue:n,maxValue:o}),m=this.fieldsIndex.get(t),h={value:.5,fieldType:m?.type},I=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_8__.isStringField)(m)?(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateStringStatistics)({values:c,supportsNullCount:d,percentileParams:h}):(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateStatistics)({values:c,minValue:n,maxValue:o,useSampleStdDev:!a,supportsNullCount:d,percentileParams:h});return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.processSummaryStatisticsResult)(I,u)}async createUniqueValuesResponse(e){const{field:t,valueExpression:s,domains:i,returnAllCodedValues:a,scale:r}=e,n=await this._getDataValues({field:t,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,valueExpression:s,scale:r}),o=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateUniqueValuesCount)(n);return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.createUVResult)(o,i,a,e.fieldDelimiter)}async createClassBreaksResponse(e){const{field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numClasses:c,scale:d}=e,m=await this._getDataValues({field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,scale:d}),h=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateClassBreaks)(m,{field:t,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numClasses:c});return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.resolveCBResult)(h,n)}async createHistogramResponse(e){const{field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numBins:c,scale:d}=e,m=await this._getDataValues({field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,scale:d});return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateHistogram)(m,{field:t,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numBins:c})}_sortFeatures(e,t,s){if(e.length>1&&t&&t.length)for(const i of t.reverse()){const t=i.split(" "),a=t[0],r=this.fieldsIndex.get(a),n=!!t[1]&&"desc"===t[1].toLowerCase(),o=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.getAttributeComparator)(r?.type,n);e.sort(((e,t)=>{const i=s(e,a,r),n=s(t,a,r);return o(i,n)}))}}_createFeatureQueryResponse(e){const t=this.items,{geometryType:s,hasM:i,hasZ:r,objectIdField:n,spatialReference:o}=this,{outFields:l,outSR:u,quantizationParameters:c,resultRecordCount:m,resultOffset:h,returnZ:g,returnM:f}=e,p=null!=m&&t.length>(h||0)+m,y=l&&(l.includes("*")?[...this.fieldsIndex.fields]:l.map((e=>this.fieldsIndex.get(e))));return{exceededTransferLimit:p,features:this._createFeatures(e,t),fields:y,geometryType:s,hasM:i&&f,hasZ:r&&g,objectIdFieldName:n,spatialReference:(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.cleanFromGeometryEngine)(u||o),transform:c&&(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.toQuantizationTransform)(c)||null}}_createFeatures(e,t){const s=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__["default"](e,this.featureAdapter,this.fieldsIndex),{hasM:i,hasZ:r}=this,{orderByFields:n,quantizationParameters:l,returnGeometry:u,returnCentroid:c,maxAllowableOffset:d,resultOffset:g,resultRecordCount:f,returnZ:p=!1,returnM:y=!1}=e,x=r&&p,I=i&&y;let T=[],V=0;const F=[...t];if(this._sortFeatures(F,n,((e,t,i)=>s.getFieldValue(e,t,i))),u||c){const e=(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.toQuantizationTransform)(l)??void 0;if(u&&!c)for(const t of F)T[V++]={attributes:s.getAttributes(t),geometry:(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.getGeometry)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),d,e,x,I)};else if(!u&&c)for(const t of F)T[V++]={attributes:s.getAttributes(t),centroid:(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.transformCentroid)(this,this.featureAdapter.getCentroid(t,this),e)};else for(const t of F)T[V++]={attributes:s.getAttributes(t),centroid:(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.transformCentroid)(this,this.featureAdapter.getCentroid(t,this),e),geometry:(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.getGeometry)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),d,e,x,I)}}else for(const a of F){const e=s.getAttributes(a);e&&(T[V++]={attributes:e})}const S=g||0;if(null!=f){const e=S+f;T=T.slice(S,Math.min(T.length,e))}return T}_createExceedsLimitQueryResponse(e){let t=!1,s=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;for(const r of e.outStatistics??[])if("exceedslimit"===r.statisticType){s=null!=r.maxPointCount?r.maxPointCount:Number.POSITIVE_INFINITY,i=null!=r.maxRecordCount?r.maxRecordCount:Number.POSITIVE_INFINITY,a=null!=r.maxVertexCount?r.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)t=this.items.length>s;else if(this.items.length>i)t=!0;else{const e=b(this.hasZ,this.hasM),s=this.featureAdapter;t=this.items.reduce(((e,t)=>{const i=s.getGeometry(t);return e+(null!=i&&i.coords.length||0)}),0)/e>a}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}}async _createStatisticsQueryResponse(e){const t={attributes:{}},s=[],i=new Map,a=new Map,r=new Map,n=new Map,l=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__["default"](e,this.featureAdapter,this.fieldsIndex),u=e.outStatistics,{groupByFieldsForStatistics:c,having:d,orderByFields:m}=e,h=c&&c.length,g=!!h,f=g?c[0]:null,p=g&&!this.fieldsIndex.get(f);for(const o of u??[]){const{outStatisticFieldName:e,statisticType:u}=o,m=o,y="exceedslimit"!==u?o.onStatisticField:void 0,x="percentile_disc"===u||"percentile_cont"===u,I="EnvelopeAggregate"===u||"CentroidAggregate"===u||"ConvexHullAggregate"===u,T=g&&1===h&&(y===f||p)&&"count"===u;if(g){if(!r.has(y)){const e=[];for(const t of c){const s=this._getAttributeValues(l,t,i);e.push(s)}r.set(y,this._calculateUniqueValues(e,!I&&l.returnDistinctValues))}const t=r.get(y);for(const s in t){const{count:a,data:r,items:o,itemPositions:u}=t[s],h=r.join(",");if(!d||l.validateItems(o,d)){const t=n.get(h)||{attributes:{}};if(I){t.aggregateGeometries||(t.aggregateGeometries={});const{aggregateGeometries:e,outStatisticFieldName:s}=await this._getAggregateGeometry(m,o);t.aggregateGeometries[s]=e}else{let s=null;if(T)s=a;else{const e=this._getAttributeValues(l,y,i),t=u.map((t=>e[t]));s=x&&"statisticParameters"in m?this._getPercentileValue(m,t):this._getStatisticValue(m,t,null,l.returnDistinctValues)}t.attributes[e]=s}let s=0;c.forEach(((e,i)=>t.attributes[this.fieldsIndex.get(e)?e:"EXPR_"+ ++s]=r[i])),n.set(h,t)}}}else if(I){t.aggregateGeometries||(t.aggregateGeometries={});const{aggregateGeometries:e,outStatisticFieldName:s}=await this._getAggregateGeometry(m,this.items);t.aggregateGeometries[s]=e}else{const s=this._getAttributeValues(l,y,i);t.attributes[e]=x&&"statisticParameters"in m?this._getPercentileValue(m,s):this._getStatisticValue(m,s,a,l.returnDistinctValues)}s.push({name:e,alias:e,type:"esriFieldTypeDouble"})}const y=g?Array.from(n.values()):[t];return this._sortFeatures(y,m,((e,t)=>e.attributes[t])),{fields:s,features:y}}async _getAggregateGeometry(a,r){const{convexHull:n,union:o}=await Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_arcgis_core_chunks_geometryEngineBase_js"), __webpack_require__.e("node_modules_arcgis_core_geometry_geometryEngineJSON_js-_997e1")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../geometry/geometryEngineJSON.js */ "./node_modules/@arcgis/core/geometry/geometryEngineJSON.js")),{statisticType:l,outStatisticFieldName:u}=a,{featureAdapter:c,spatialReference:d,geometryType:h,hasZ:g,hasM:f}=this,p=r.map((e=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.getGeometry)(h,g,f,c.getGeometry(e)))),y=n(d,p,!0)[0],x={aggregateGeometries:null,outStatisticFieldName:null};if("EnvelopeAggregate"===l){const e=y?(0,_geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_1__.getPolygonExtent)(y):(0,_geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_1__.getGeometryExtent)(o(d,p));x.aggregateGeometries={...e,spatialReference:d},x.outStatisticFieldName=u||"extent"}else if("CentroidAggregate"===l){const s=y?(0,_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_0__.polygonCentroid)(y):(0,_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_0__.extentCentroid)((0,_geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_1__.getGeometryExtent)(o(d,p)));x.aggregateGeometries={x:s[0],y:s[1],spatialReference:d},x.outStatisticFieldName=u||"centroid"}else"ConvexHullAggregate"===l&&(x.aggregateGeometries=y,x.outStatisticFieldName=u||"convexHull");return x}_getStatisticValue(e,t,s,i){const{onStatisticField:a,statisticType:r}=e;let n=null;n=s?.has(a)?s.get(a):(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_8__.isStringField)(this.fieldsIndex.get(a))?(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateStringStatistics)({values:t,returnDistinct:i}):(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateStatistics)({values:i?[...new Set(t)]:t,minValue:null,maxValue:null,useSampleStdDev:!0}),s&&s.set(a,n);return n["var"===r?"variance":r]}_getPercentileValue(e,t){const{onStatisticField:s,statisticParameters:i,statisticType:a}=e,{value:r,orderBy:n}=i,o=this.fieldsIndex.get(s);return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculatePercentile)(t,{value:r,orderBy:n,fieldType:o?.type,isDiscrete:"percentile_disc"===a})}_getAttributeValues(e,t,s){if(s.has(t))return s.get(t);const i=this.fieldsIndex.get(t),a=this.items.map((s=>e.getFieldValue(s,t,i)));return s.set(t,a),a}_calculateUniqueValues(e,t){const s={},i=this.items,a=i.length;for(let r=0;r<a;r++){const a=i[r],n=[];for(const t of e)n.push(t[r]);const o=n.join(",");null==s[o]?s[o]={count:1,data:n,items:[a],itemPositions:[r]}:(t||s[o].count++,s[o].items.push(a),s[o].itemPositions.push(r))}return s}async _getDataValues(e){const t=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__["default"](this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:s,scale:i}=e,a=s?{viewingMode:"map",scale:i,spatialReference:this.query.outSR||this.spatialReference}:null;return s?t.getExpressionValues(this.items,s,a,{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM}):t.getDataValues(this.items,{field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,normalizationField:e.normalizationField,normalizationType:e.normalizationType,normalizationTotal:e.normalizationTotal})}}function R(e,t,s,i){const a=i.x-s.x,r=i.y-s.y,n=a*a+r*r,o=(t.x-s.x)*a+(t.y-s.y)*r,l=Math.min(1,Math.max(0,o/n));e.x=s.x+a*l,e.y=s.y+r*l}function b(e,t){return e?t?4:3:t?3:2}class A{constructor(e,t){this.coords=e,this.coordsIndex=t}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/SnappingCandidate.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/SnappingCandidate.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "makeEdgeCandidate": () => (/* binding */ e),
/* harmony export */   "makeVertexCandidate": () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function t(t,e,r){return{objectId:t,target:e,distance:r,type:"vertex"}}function e(t,e,r,n,d,a=!1){return{objectId:t,target:e,distance:r,type:"edge",start:n,end:d,draped:a}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getAliasFromFieldName": () => (/* binding */ v),
/* harmony export */   "getExpressionFromFieldName": () => (/* binding */ w),
/* harmony export */   "getWhereClause": () => (/* binding */ y),
/* harmony export */   "hasInvalidFieldType": () => (/* binding */ F),
/* harmony export */   "validDateTypesKebabDict": () => (/* binding */ l),
/* harmony export */   "validGuidTypesKebabDict": () => (/* binding */ d),
/* harmony export */   "validNumericTypesKebabDict": () => (/* binding */ a),
/* harmony export */   "validStringTypesKebabDict": () => (/* binding */ o),
/* harmony export */   "validateFieldTypes": () => (/* binding */ x),
/* harmony export */   "validateFields": () => (/* binding */ m),
/* harmony export */   "validateHaving": () => (/* binding */ f),
/* harmony export */   "validateWhere": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/jsonMap.js */ "./node_modules/@arcgis/core/core/jsonMap.js");
/* harmony import */ var _core_sql_WhereClauseCache_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/sql/WhereClauseCache.js */ "./node_modules/@arcgis/core/core/sql/WhereClauseCache.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const n=new _core_sql_WhereClauseCache_js__WEBPACK_IMPORTED_MODULE_2__.WhereClauseCache(50,500),r="feature-store:unsupported-query",t=" as ",o=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.JSONMap({esriFieldTypeString:"string"}),a=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.JSONMap({esriFieldTypeOID:"oid",esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long"}),l=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.JSONMap({esriFieldTypeDate:"date"}),d=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.JSONMap({esriFieldTypeGUID:"guid",esriFieldTypeGlobalId:"global-id"}),p=new Set([...a.jsonValues,...l.jsonValues,...o.jsonValues,...d.jsonValues]),u=new Intl.ListFormat("en-US",{type:"conjunction"}).format([...a.apiValues,...l.apiValues,...o.apiValues,...d.apiValues]);function g(s,i,n={}){const t=y(s,i);if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](r,"invalid SQL expression",{expression:s});const o=n.expressionName||"expression";if(n.validateStandardized&&!t.isStandardized)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](r,`${o} is not standard`,{expression:s});if(n.validateAggregate&&!t.isAggregate)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](r,`${o} does not contain a valid aggregate function`,{expression:s});return t.fieldNames}function c(e,s,i){if(!s)return!0;const n="where clause",r=g(s,e,{validateStandardized:!0,expressionName:n});return m(e,r,{expressionName:n,query:i}),x(e,r,{expressionName:n,query:i}),!0}function f(s,i,t,o){if(!i)return!0;const a="having",l=g(i,s,{validateAggregate:!0,expressionName:a});m(s,l,{expressionName:a,query:o}),x(s,l,{expressionName:a,query:o});const d=n.get(i,s),p=d?.getExpressions().every((e=>{const{aggregateType:i,field:n}=e,r=s.get(n)?.name;return t.some((e=>{const{onStatisticField:n,statisticType:t}=e,o=s.get(n)?.name;return o===r&&t.toLowerCase().trim()===i}))}));if(!p)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](r,"expressions in having should also exist in outStatistics",{having:i});return!0}function y(e,s){return e?n.get(e,s):null}function m(e,s,i={}){i.errorMessage||(i.errorMessage=i.expressionName?`${i.expressionName} contains invalid fields`:"Fields are invalid"),h(e,s,((e,s)=>s.has(e)),i)}function x(e,s,i={}){i.errorMessage||(i.errorMessage=i.expressionName?`${i.expressionName} only supports ${u} field types`:`Only ${u} field types are supported`),h(e,s,((e,s)=>!F(e,s)),i)}function h(s,i,n,t={}){const o=t.verifyExpression??!0,a=[];for(const e of i){const i=n(e,s);if("*"!==e&&!i)if(o){const i=w(e);try{h(s,g(i,s,{validateStandardized:!0}),n,t)}catch(l){const s=l?.details;if(s?.expression)throw l;s?.invalidFields?a.push(...s.invalidFields):a.push(e)}}else a.push(e)}if(a.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](r,t.errorMessage,{invalidFields:a,query:t.query})}function w(e){return e.split(t)[0]}function v(e){return e.split(t)[1]}function F(e,s,i=p){const n=s.get(e);return!!n&&!i.has(n.type)}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvNWUyNGFhNDExODdlZjExOTBmMzAwM2EyNmM5NDhhYWMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDeUYsUUFBUSxpQkFBaUIsZ0JBQWdCLGtEQUFDLDJCQUEyQixrREFBQyxJQUFJLFNBQVMsV0FBVyxNQUFNLEdBQUcsRUFBRSx1QkFBdUIsY0FBYyxrREFBa0QsSUFBSSxRQUFRLCtEQUFRLE1BQU0sOEJBQThCLE1BQU0sNkNBQTJFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSmxhO0FBQ0E7QUFDQTtBQUNBO0FBQ21ULFFBQVEsbUJBQW1CLDJKQUEySixvQkFBb0Isd0JBQXdCLGlCQUFpQixRQUFRLGtCQUFrQixRQUFRLGdGQUFDLHVDQUF1QyxvRUFBQyxpQkFBaUIsMkVBQUMsc0JBQXNCLDRCQUE0QixpQkFBaUIsSUFBSSx1QkFBdUIsK0dBQStHLGlCQUFpQiwrQ0FBK0MsbURBQW1ELHFCQUFxQixtQkFBbUIsV0FBVywrRUFBK0Usb0VBQUMsaURBQWlELGlCQUFpQixvRkFBb0YsbUJBQW1CLG1EQUFtRCxrQkFBa0IsMkVBQTJFLG1CQUFtQixzRUFBQyxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsc0VBQUMsZ0VBQWdFLGtCQUFrQixFQUFFLEVBQUUsaUJBQWlCLEVBQUUsc0VBQUMsZ0VBQWdFLDJCQUEyQixxSUFBcUksRUFBRSx3RUFBQyxVQUFVLFNBQVMsR0FBRyxtQ0FBbUMsTUFBTSxjQUFjLE9BQU8sc0VBQUMsZ0NBQWdDLHNDQUFzQyxxREFBcUQsZ0NBQWdDLGtCQUFrQixTQUFTLG9FQUFvRSxHQUFHLHNEQUFDLHVHQUF1RyxNQUFNLDRCQUE0Qiw4QkFBOEIsR0FBRyxrQkFBa0IsZ0VBQWdFLGVBQWUsb0VBQUMscUJBQXFCLDhFQUE4RSxtQkFBbUIsZ0VBQWdFLGVBQWUsb0VBQUMscUJBQXFCLDBFQUEwRSxrQ0FBa0MsdUJBQXVCLDZEQUE2RCxXQUFXLGtCQUFrQixNQUFNLGlCQUFpQiw2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QkFBZ0IsR0FBRyxxQkFBcUIsR0FBRyxzREFBc0QscUJBQXFCLEVBQUUsb0NBQW9DLGtCQUFrQixlQUFlLHFCQUFxQixhQUFhLElBQUksV0FBVyx3QkFBd0IsT0FBTyxTQUFTLG1CQUFtQix5QkFBeUIsdURBQXVELGVBQWUsc0JBQXNCLHNEQUFDLG1CQUFtQiw4QkFBOEIsRUFBRSxjQUFjLHFCQUFxQixjQUFjLHFCQUFxQixvQkFBb0IsaUJBQWlCLDBCQUFzViIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2NvcmUvc3FsL1doZXJlQ2xhdXNlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL2RhdGEvQXR0cmlidXRlc0J1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL2RhdGEvUXVlcnlFbmdpbmUuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL2RhdGEvUXVlcnlFbmdpbmVDYXBhYmlsaXRpZXMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL2RhdGEvUXVlcnlFbmdpbmVSZXN1bHQuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL2RhdGEvU25hcHBpbmdDYW5kaWRhdGUuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL2RhdGEvYXR0cmlidXRlU3VwcG9ydC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e0xSVUNhY2hlIGFzIHR9ZnJvbVwiLi4vTFJVQ2FjaGUuanNcIjtpbXBvcnR7V2hlcmVDbGF1c2UgYXMgZX1mcm9tXCIuL1doZXJlQ2xhdXNlLmpzXCI7Y2xhc3MgY3tjb25zdHJ1Y3RvcihlLGMpe3RoaXMuX2NhY2hlPW5ldyB0KGUpLHRoaXMuX2ludmFsaWRDYWNoZT1uZXcgdChjKX1nZXQodCxjKXtjb25zdCBpPWAke2MudWlkfToke3R9YCxyPXRoaXMuX2NhY2hlLmdldChpKTtpZihyKXJldHVybiByO2lmKHZvaWQgMCE9PXRoaXMuX2ludmFsaWRDYWNoZS5nZXQoaSkpcmV0dXJuIG51bGw7dHJ5e2NvbnN0IHI9ZS5jcmVhdGUodCxjKTtyZXR1cm4gdGhpcy5fY2FjaGUucHV0KGkscikscn1jYXRjaHtyZXR1cm4gdGhpcy5faW52YWxpZENhY2hlLnB1dChpLG51bGwpLG51bGx9fX1leHBvcnR7YyBhcyBXaGVyZUNsYXVzZUNhY2hlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Z2V0RXhwcmVzc2lvbkZyb21GaWVsZE5hbWUgYXMgdCxnZXRXaGVyZUNsYXVzZSBhcyBlLGdldEFsaWFzRnJvbUZpZWxkTmFtZSBhcyBpfWZyb21cIi4vYXR0cmlidXRlU3VwcG9ydC5qc1wiO2ltcG9ydHtnZXRHZW9tZXRyeSBhcyBzfWZyb21cIi4vdXRpbHMuanNcIjtpbXBvcnR7cHJvY2Vzc051bGxWYWx1ZSBhcyBhLGdldE5vcm1hbGl6ZWRWYWx1ZSBhcyBsfWZyb21cIi4uLy4uLy4uL3N0YXRpc3RpY3MvdXRpbHMuanNcIjtpbXBvcnR7bG9hZEFyY2FkZSBhcyByfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvYXJjYWRlT25EZW1hbmQuanNcIjtjbGFzcyBue2NvbnN0cnVjdG9yKHMsYSxsKXt0aGlzLl9maWVsZERhdGFDYWNoZT1uZXcgTWFwLHRoaXMuX3JldHVybkRpc3RpbmN0TWFwPW5ldyBNYXAsdGhpcy5yZXR1cm5EaXN0aW5jdFZhbHVlcz1zLnJldHVybkRpc3RpbmN0VmFsdWVzPz8hMSx0aGlzLmZpZWxkc0luZGV4PWwsdGhpcy5mZWF0dXJlQWRhcHRlcj1hO2NvbnN0IHI9cy5vdXRGaWVsZHM7aWYociYmIXIuaW5jbHVkZXMoXCIqXCIpKXt0aGlzLm91dEZpZWxkcz1yO2xldCBzPTA7Zm9yKGNvbnN0IGEgb2Ygcil7Y29uc3Qgcj10KGEpLG49dGhpcy5maWVsZHNJbmRleC5nZXQociksdT1uP251bGw6ZShyLGwpLGQ9bj9uLm5hbWU6aShhKXx8XCJGSUVMRF9FWFBfXCIrcysrO3RoaXMuX2ZpZWxkRGF0YUNhY2hlLnNldChhLHthbGlhczpkLGNsYXVzZTp1fSl9fX1jb3VudERpc3RpbmN0VmFsdWVzKHQpe3JldHVybiB0aGlzLnJldHVybkRpc3RpbmN0VmFsdWVzPyh0LmZvckVhY2goKHQ9PnRoaXMuZ2V0QXR0cmlidXRlcyh0KSkpLHRoaXMuX3JldHVybkRpc3RpbmN0TWFwLnNpemUpOnQubGVuZ3RofWdldEF0dHJpYnV0ZXModCl7Y29uc3QgZT10aGlzLl9wcm9jZXNzQXR0cmlidXRlc0Zvck91dEZpZWxkcyh0KTtyZXR1cm4gdGhpcy5fcHJvY2Vzc0F0dHJpYnV0ZXNGb3JEaXN0aW5jdFZhbHVlcyhlKX1nZXRGaWVsZFZhbHVlKHQsaSxzKXtjb25zdCBhPXM/cy5uYW1lOmk7bGV0IGw9bnVsbDtyZXR1cm4gdGhpcy5fZmllbGREYXRhQ2FjaGUuaGFzKGEpP2w9dGhpcy5fZmllbGREYXRhQ2FjaGUuZ2V0KGEpPy5jbGF1c2U6c3x8KGw9ZShpLHRoaXMuZmllbGRzSW5kZXgpLHRoaXMuX2ZpZWxkRGF0YUNhY2hlLnNldChhLHthbGlhczphLGNsYXVzZTpsfSkpLHM/dGhpcy5mZWF0dXJlQWRhcHRlci5nZXRBdHRyaWJ1dGUodCxhKTpsPy5jYWxjdWxhdGVWYWx1ZSh0LHRoaXMuZmVhdHVyZUFkYXB0ZXIpfWdldERhdGFWYWx1ZXModCxlKXtjb25zdCBpPWUubm9ybWFsaXphdGlvblR5cGUscz1lLm5vcm1hbGl6YXRpb25Ub3RhbDtyZXR1cm4gdC5tYXAoKHQ9PntsZXQgcj1lLmZpZWxkJiZ0aGlzLmdldEZpZWxkVmFsdWUodCxlLmZpZWxkLHRoaXMuZmllbGRzSW5kZXguZ2V0KGUuZmllbGQpKTtpZihlLmZpZWxkMiYmKHI9YCR7YShyKX0ke2UuZmllbGREZWxpbWl0ZXJ9JHthKHRoaXMuZ2V0RmllbGRWYWx1ZSh0LGUuZmllbGQyLHRoaXMuZmllbGRzSW5kZXguZ2V0KGUuZmllbGQyKSkpfWAsZS5maWVsZDMmJihyPWAke3J9JHtlLmZpZWxkRGVsaW1pdGVyfSR7YSh0aGlzLmdldEZpZWxkVmFsdWUodCxlLmZpZWxkMyx0aGlzLmZpZWxkc0luZGV4LmdldChlLmZpZWxkMykpKX1gKSksaSYmTnVtYmVyLmlzRmluaXRlKHIpKXtjb25zdCBhPVwiZmllbGRcIj09PWkmJmUubm9ybWFsaXphdGlvbkZpZWxkP3RoaXMuZ2V0RmllbGRWYWx1ZSh0LGUubm9ybWFsaXphdGlvbkZpZWxkLHRoaXMuZmllbGRzSW5kZXguZ2V0KGUubm9ybWFsaXphdGlvbkZpZWxkKSk6bnVsbDtyPWwocixpLGEscyl9cmV0dXJuIHJ9KSl9YXN5bmMgZ2V0RXhwcmVzc2lvblZhbHVlcyh0LGUsaSxhKXtjb25zdHthcmNhZGVVdGlsczpsfT1hd2FpdCByKCksbj1sLmhhc0dlb21ldHJ5T3BlcmF0aW9ucyhlKTtuJiZhd2FpdCBsLmVuYWJsZUdlb21ldHJ5T3BlcmF0aW9ucygpO2NvbnN0IHU9bC5jcmVhdGVGdW5jdGlvbihlKSxkPWkmJmwuZ2V0Vmlld0luZm8oaSksbz17ZmllbGRzOnRoaXMuZmllbGRzSW5kZXguZmllbGRzfTtyZXR1cm4gdC5tYXAoKHQ9Pntjb25zdCBlPXthdHRyaWJ1dGVzOnRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0QXR0cmlidXRlcyh0KSxsYXllcjpvLGdlb21ldHJ5Om4/ey4uLnMoYS5nZW9tZXRyeVR5cGUsYS5oYXNaLGEuaGFzTSx0aGlzLmZlYXR1cmVBZGFwdGVyLmdldEdlb21ldHJ5KHQpKSxzcGF0aWFsUmVmZXJlbmNlOmk/LnNwYXRpYWxSZWZlcmVuY2V9Om51bGx9LHI9bC5jcmVhdGVFeGVjQ29udGV4dChlLGQpO3JldHVybiBsLmV4ZWN1dGVGdW5jdGlvbih1LHIpfSkpfXZhbGlkYXRlSXRlbSh0LGkpe3JldHVybiB0aGlzLl9maWVsZERhdGFDYWNoZS5oYXMoaSl8fHRoaXMuX2ZpZWxkRGF0YUNhY2hlLnNldChpLHthbGlhczppLGNsYXVzZTplKGksdGhpcy5maWVsZHNJbmRleCl9KSx0aGlzLl9maWVsZERhdGFDYWNoZS5nZXQoaSk/LmNsYXVzZT8udGVzdEZlYXR1cmUodCx0aGlzLmZlYXR1cmVBZGFwdGVyKT8/ITF9dmFsaWRhdGVJdGVtcyh0LGkpe3JldHVybiB0aGlzLl9maWVsZERhdGFDYWNoZS5oYXMoaSl8fHRoaXMuX2ZpZWxkRGF0YUNhY2hlLnNldChpLHthbGlhczppLGNsYXVzZTplKGksdGhpcy5maWVsZHNJbmRleCl9KSx0aGlzLl9maWVsZERhdGFDYWNoZS5nZXQoaSk/LmNsYXVzZT8udGVzdFNldCh0LHRoaXMuZmVhdHVyZUFkYXB0ZXIpPz8hMX1fcHJvY2Vzc0F0dHJpYnV0ZXNGb3JPdXRGaWVsZHModCl7Y29uc3QgZT10aGlzLm91dEZpZWxkcztpZighZXx8IWUubGVuZ3RoKXJldHVybiB0aGlzLmZlYXR1cmVBZGFwdGVyLmdldEF0dHJpYnV0ZXModCk7Y29uc3QgaT17fTtmb3IoY29uc3QgcyBvZiBlKXtjb25zdHthbGlhczplLGNsYXVzZTphfT10aGlzLl9maWVsZERhdGFDYWNoZS5nZXQocyk7aVtlXT1hP2EuY2FsY3VsYXRlVmFsdWUodCx0aGlzLmZlYXR1cmVBZGFwdGVyKTp0aGlzLmZlYXR1cmVBZGFwdGVyLmdldEF0dHJpYnV0ZSh0LGUpfXJldHVybiBpfV9wcm9jZXNzQXR0cmlidXRlc0ZvckRpc3RpbmN0VmFsdWVzKHQpe2lmKG51bGw9PXR8fCF0aGlzLnJldHVybkRpc3RpbmN0VmFsdWVzKXJldHVybiB0O2NvbnN0IGU9dGhpcy5vdXRGaWVsZHMsaT1bXTtpZihlKWZvcihjb25zdCBsIG9mIGUpe2NvbnN0e2FsaWFzOmV9PXRoaXMuX2ZpZWxkRGF0YUNhY2hlLmdldChsKTtpLnB1c2godFtlXSl9ZWxzZSBmb3IoY29uc3QgbCBpbiB0KWkucHVzaCh0W2xdKTtjb25zdCBzPWAkeyhlfHxbXCIqXCJdKS5qb2luKFwiLFwiKX09JHtpLmpvaW4oXCIsXCIpfWA7bGV0IGE9dGhpcy5fcmV0dXJuRGlzdGluY3RNYXAuZ2V0KHMpfHwwO3JldHVybiB0aGlzLl9yZXR1cm5EaXN0aW5jdE1hcC5zZXQocywrK2EpLGE+MT9udWxsOnR9fWV4cG9ydHtuIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtQb3NpdGlvbkhpbnQgYXMgZSxpbmRleE9mIGFzIHR9ZnJvbVwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0IGkgZnJvbVwiLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHtjbG9uZSBhcyBzfWZyb21cIi4uLy4uLy4uL2NvcmUvbGFuZy5qc1wiO2ltcG9ydHtyZW1vdmVNYXliZSBhcyByLGRlc3Ryb3lNYXliZSBhcyBhfWZyb21cIi4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7TWVtQ2FjaGVTdG9yYWdlIGFzIG4sTWVtQ2FjaGUgYXMgdX1mcm9tXCIuLi8uLi8uLi9jb3JlL01lbUNhY2hlLmpzXCI7aW1wb3J0e3Rocm93SWZBYm9ydGVkIGFzIG99ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7Z2V0TWV0ZXJzUGVyVW5pdEZvclNSIGFzIGx9ZnJvbVwiLi4vLi4vLi4vY29yZS91bml0VXRpbHMuanNcIjtpbXBvcnR7c2V0IGFzIGMsTkVHQVRJVkVfSU5GSU5JVFkgYXMgaCxjcmVhdGUgYXMgcCxleHBhbmRXaXRoQUFCQiBhcyBtfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ0JveC5qc1wiO2ltcG9ydHtmcm9tVmFsdWVzIGFzIGYsY3JlYXRlIGFzIGR9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nUmVjdC5qc1wiO2ltcG9ydHtnZXRCb3VuZHNYWSBhcyB5fWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYm91bmRzVXRpbHMuanNcIjtpbXBvcnR7ZnJvbUpTT04gYXMgZyxpc0V4dGVudCBhcyBfLGlzUG9seWdvbiBhcyB4fWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvanNvblV0aWxzLmpzXCI7aW1wb3J0e25vcm1hbGl6ZUNlbnRyYWxNZXJpZGlhbiBhcyB3fWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvbm9ybWFsaXplVXRpbHMuanNcIjtpbXBvcnR7ZXF1YWxzIGFzIFMsaXNWYWxpZCBhcyBGfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvc3BhdGlhbFJlZmVyZW5jZVV0aWxzLmpzXCI7aW1wb3J0e2NvbnZlcnRGcm9tR2VvbWV0cnkgYXMgUn1mcm9tXCIuLi9mZWF0dXJlQ29udmVyc2lvblV0aWxzLmpzXCI7aW1wb3J0e2dldFdoZXJlQ2xhdXNlIGFzIFEsdmFsaWRhdGVGaWVsZHMgYXMgSSx2YWxpZGF0ZUZpZWxkVHlwZXMgYXMgaix2YWxpZGF0ZVdoZXJlIGFzIEUsdmFsaWRhdGVIYXZpbmcgYXMgQSx2YWxpZE51bWVyaWNUeXBlc0tlYmFiRGljdCBhcyBiLHZhbGlkRGF0ZVR5cGVzS2ViYWJEaWN0IGFzIHEsaGFzSW52YWxpZEZpZWxkVHlwZSBhcyBDfWZyb21cIi4vYXR0cmlidXRlU3VwcG9ydC5qc1wiO2ltcG9ydHtjaGVja1Byb2plY3Rpb25TdXBwb3J0IGFzIFAscHJvamVjdCBhcyBULHByb2plY3RNYW55IGFzIEJ9ZnJvbVwiLi9wcm9qZWN0aW9uU3VwcG9ydC5qc1wiO2ltcG9ydHtxdWVyeUNhcGFiaWxpdGllcyBhcyBrfWZyb21cIi4vUXVlcnlFbmdpbmVDYXBhYmlsaXRpZXMuanNcIjtpbXBvcnR7UXVlcnlFbmdpbmVSZXN1bHQgYXMgdn1mcm9tXCIuL1F1ZXJ5RW5naW5lUmVzdWx0LmpzXCI7aW1wb3J0e2dldFNwYXRpYWxRdWVyeU9wZXJhdG9yIGFzIHosY2FuUXVlcnlXaXRoUkJ1c2ggYXMgTyxjaGVja1NwYXRpYWxRdWVyeVN1cHBvcnQgYXMgR31mcm9tXCIuL3NwYXRpYWxRdWVyeVN1cHBvcnQuanNcIjtpbXBvcnR7Z2V0VGltZUV4dGVudCBhcyBNLGdldFRpbWVPcGVyYXRvciBhcyBVfWZyb21cIi4vdGltZVN1cHBvcnQuanNcIjtpbXBvcnR7UVVFUllfRU5HSU5FX0VNUFRZX1JFU1VMVCBhcyBOLGNsZWFuRnJvbUdlb21ldHJ5RW5naW5lIGFzIFosbm9ybWFsaXplUXVlcnkgYXMgVixnZXRHZW9tZXRyeSBhcyBIfWZyb21cIi4vdXRpbHMuanNcIjtpbXBvcnQgTCBmcm9tXCIuLi8uLi9zdXBwb3J0L0ZpZWxkc0luZGV4LmpzXCI7aW1wb3J0e2xvYWRBcmNhZGUgYXMgRH1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L2FyY2FkZU9uRGVtYW5kLmpzXCI7aW1wb3J0e25vQnVkZ2V0IGFzIEp9ZnJvbVwiLi4vLi4vLi4vdmlld3Mvc3VwcG9ydC9TY2hlZHVsZXIuanNcIjtmdW5jdGlvbiAkKGUpe3JldHVybiBudWxsIT1lJiZlLmV2ZXJ5KChlPT5cImV4Y2VlZHNsaW1pdFwiIT09ZS5zdGF0aXN0aWNUeXBlKSl9Y29uc3QgVz1cImZlYXR1cmUtc3RvcmU6dW5zdXBwb3J0ZWQtcXVlcnlcIjtjbGFzcyBLe2NvbnN0cnVjdG9yKGUsdD1udWxsLGkscyxyKXt0aGlzLmF0dHJpYnV0ZXM9ZSx0aGlzLmdlb21ldHJ5PWksdGhpcy5jZW50cm9pZD1zLHRoaXMuZmlsdGVyRmxhZ3M9cix0aGlzLmdyb3VwSWQ9LTEsdGhpcy5kaXNwbGF5SWQ9dH19Y29uc3QgWD1uZXcgbigyZTYpO2xldCBZPTA7Y2xhc3MgZWV7Y29uc3RydWN0b3IoZSl7dGhpcy5fZ2VvbWV0cnlRdWVyeUNhY2hlPW51bGwsdGhpcy5fY2hhbmdlSGFuZGxlPW51bGwsdGhpcy5jYXBhYmlsaXRpZXM9e3F1ZXJ5Omt9LHRoaXMuZ2VvbWV0cnlUeXBlPWUuZ2VvbWV0cnlUeXBlLHRoaXMuaGFzTT0hIWUuaGFzTSx0aGlzLmhhc1o9ISFlLmhhc1osdGhpcy5vYmplY3RJZEZpZWxkPWUub2JqZWN0SWRGaWVsZCx0aGlzLnNwYXRpYWxSZWZlcmVuY2U9ZS5zcGF0aWFsUmVmZXJlbmNlLHRoaXMuZGVmaW5pdGlvbkV4cHJlc3Npb249ZS5kZWZpbml0aW9uRXhwcmVzc2lvbix0aGlzLmZlYXR1cmVTdG9yZT1lLmZlYXR1cmVTdG9yZSx0aGlzLmFnZ3JlZ2F0ZUFkYXB0ZXI9ZS5hZ2dyZWdhdGVBZGFwdGVyLHRoaXMuX2NoYW5nZUhhbmRsZT10aGlzLmZlYXR1cmVTdG9yZS5ldmVudHMub24oXCJjaGFuZ2VkXCIsKCgpPT50aGlzLmNsZWFyQ2FjaGUoKSkpLHRoaXMudGltZUluZm89ZS50aW1lSW5mbyxlLmNhY2hlU3BhdGlhbFF1ZXJpZXMmJih0aGlzLl9nZW9tZXRyeVF1ZXJ5Q2FjaGU9bmV3IHUoWSsrK1wiJCRcIixYKSksdGhpcy5maWVsZHNJbmRleD1uZXcgTChlLmZpZWxkcyksZS5zY2hlZHVsZXImJmUucHJpb3JpdHkmJih0aGlzLl9mcmFtZVRhc2s9ZS5zY2hlZHVsZXIucmVnaXN0ZXJUYXNrKGUucHJpb3JpdHkpKX1kZXN0cm95KCl7dGhpcy5fZnJhbWVUYXNrPXIodGhpcy5fZnJhbWVUYXNrKSx0aGlzLmNsZWFyQ2FjaGUoKSxhKHRoaXMuX2dlb21ldHJ5UXVlcnlDYWNoZSksdGhpcy5fY2hhbmdlSGFuZGxlPXIodGhpcy5fY2hhbmdlSGFuZGxlKSxhKHRoaXMuZmllbGRzSW5kZXgpfWdldCBmZWF0dXJlQWRhcHRlcigpe3JldHVybiB0aGlzLmZlYXR1cmVTdG9yZS5mZWF0dXJlQWRhcHRlcn1jbGVhckNhY2hlKCl7dGhpcy5fZ2VvbWV0cnlRdWVyeUNhY2hlPy5jbGVhcigpLHRoaXMuX2FsbEZlYXR1cmVzUHJvbWlzZT1udWxsLHRoaXMuX3RpbWVFeHRlbnRQcm9taXNlPW51bGx9YXN5bmMgZXhlY3V0ZVF1ZXJ5KGUsdCl7dHJ5e3JldHVybihhd2FpdCB0aGlzLl9leGVjdXRlUXVlcnkoZSx7fSx0KSkuY3JlYXRlUXVlcnlSZXNwb25zZSgpfWNhdGNoKGkpe2lmKGkhPT1OKXRocm93IGk7cmV0dXJuIG5ldyB2KFtdLGUsdGhpcykuY3JlYXRlUXVlcnlSZXNwb25zZSgpfX1hc3luYyBleGVjdXRlUXVlcnlGb3JDb3VudChlPXt9LHQpe3RyeXtyZXR1cm4oYXdhaXQgdGhpcy5fZXhlY3V0ZVF1ZXJ5KGUse3JldHVybkdlb21ldHJ5OiExLHJldHVybkNlbnRyb2lkOiExLG91dFNSOm51bGx9LHQpKS5jcmVhdGVRdWVyeVJlc3BvbnNlRm9yQ291bnQoKX1jYXRjaChpKXtpZihpIT09Til0aHJvdyBpO3JldHVybiAwfX1hc3luYyBleGVjdXRlUXVlcnlGb3JFeHRlbnQoZSx0KXtjb25zdCBpPWUub3V0U1I7dHJ5e2NvbnN0IHM9YXdhaXQgdGhpcy5fZXhlY3V0ZVF1ZXJ5KGUse3JldHVybkdlb21ldHJ5OiEwLHJldHVybkNlbnRyb2lkOiExLG91dFNSOm51bGx9LHQpLHI9cy5zaXplO2lmKCFyKXJldHVybntjb3VudDowLGV4dGVudDpudWxsfTtyZXR1cm57Y291bnQ6cixleHRlbnQ6YXdhaXQgdGhpcy5fZ2V0Qm91bmRzKHMuaXRlbXMscy5zcGF0aWFsUmVmZXJlbmNlLGl8fHRoaXMuc3BhdGlhbFJlZmVyZW5jZSl9fWNhdGNoKHMpe2lmKHM9PT1OKXJldHVybntjb3VudDowLGV4dGVudDpudWxsfTt0aHJvdyBzfX1hc3luYyBleGVjdXRlUXVlcnlGb3JJZHMoZSx0KXtyZXR1cm4gdGhpcy5leGVjdXRlUXVlcnlGb3JJZFNldChlLHQpLnRoZW4oKGU9PkFycmF5LmZyb20oZSkpKX1hc3luYyBleGVjdXRlUXVlcnlGb3JJZFNldChlLHQpe3RyeXtjb25zdCBpPWF3YWl0IHRoaXMuX2V4ZWN1dGVRdWVyeShlLHtyZXR1cm5HZW9tZXRyeTohMCxyZXR1cm5DZW50cm9pZDohMSxvdXRTUjpudWxsfSx0KSxzPWkuaXRlbXMscj1uZXcgU2V0O3JldHVybiBhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+e2Zvcihjb25zdCBlIG9mIHMpci5hZGQoaS5mZWF0dXJlQWRhcHRlci5nZXRPYmplY3RJZChlKSl9KSx0KSxyfWNhdGNoKGkpe2lmKGk9PT1OKXJldHVybiBuZXcgU2V0O3Rocm93IGl9fWFzeW5jIGV4ZWN1dGVRdWVyeUZvclNuYXBwaW5nKGUsdCl7Y29uc3R7cG9pbnQ6aSxkaXN0YW5jZTpzLHJldHVybkVkZ2U6cixyZXR1cm5WZXJ0ZXg6YX09ZTtpZighciYmIWEpcmV0dXJue2NhbmRpZGF0ZXM6W119O2NvbnN0IG49YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2NoZWNrUXVlcnlTdXBwb3J0KGUucXVlcnkpKSx0KSx1PSFTKGkuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpO3UmJmF3YWl0IFAoaS5zcGF0aWFsUmVmZXJlbmNlLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSk7Y29uc3Qgbz1cIm51bWJlclwiPT10eXBlb2Ygcz9zOnMueCxsPVwibnVtYmVyXCI9PXR5cGVvZiBzP3M6cy55LGM9e3htaW46aS54LW8seG1heDppLngrbyx5bWluOmkueS1sLHltYXg6aS55K2wsc3BhdGlhbFJlZmVyZW5jZTppLnNwYXRpYWxSZWZlcmVuY2V9LGg9dT9UKGMsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKTpjO2lmKCFoKXJldHVybntjYW5kaWRhdGVzOltdfTtjb25zdCBwPShhd2FpdCB3KGcoaSksbnVsbCx7c2lnbmFsOnR9KSlbMF0sbT0oYXdhaXQgdyhnKGgpLG51bGwse3NpZ25hbDp0fSkpWzBdO2lmKG51bGw9PXB8fG51bGw9PW0pcmV0dXJue2NhbmRpZGF0ZXM6W119O2NvbnN0IGY9bmV3IHYoYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX3NlYXJjaEZlYXR1cmVzKHRoaXMuX2dldFF1ZXJ5QkJveGVzKG0udG9KU09OKCkpKSksdCksbix0aGlzKTthd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZU9iamVjdElkc1F1ZXJ5KGYpKSx0KSxhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZVRpbWVRdWVyeShmKSksdCksYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVBdHRyaWJ1dGVzUXVlcnkoZikpLHQpO2NvbnN0IGQ9cC50b0pTT04oKSx5PXU/VChkLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSk6ZCxfPXU/TWF0aC5tYXgoaC54bWF4LWgueG1pbixoLnltYXgtaC55bWluKS8yOnM7cmV0dXJuIGYuY3JlYXRlU25hcHBpbmdSZXNwb25zZSh7Li4uZSxwb2ludDp5LGRpc3RhbmNlOl99LGkuc3BhdGlhbFJlZmVyZW5jZSl9YXN5bmMgZXhlY3V0ZVF1ZXJ5Rm9yTGF0ZXN0T2JzZXJ2YXRpb25zKGUsdCl7aWYoIXRoaXMudGltZUluZm98fCF0aGlzLnRpbWVJbmZvLnRyYWNrSWRGaWVsZCl0aHJvdyBuZXcgaShXLFwiTWlzc2luZyB0aW1lSW5mbyBvciB0aW1lSW5mby50cmFja0lkRmllbGRcIix7cXVlcnk6ZSx0aW1lSW5mbzp0aGlzLnRpbWVJbmZvfSk7dHJ5e2NvbnN0IGk9YXdhaXQgdGhpcy5fZXhlY3V0ZVF1ZXJ5KGUse30sdCk7cmV0dXJuIGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9maWx0ZXJMYXRlc3QoaSkpLHQpLGkuY3JlYXRlUXVlcnlSZXNwb25zZSgpfWNhdGNoKHMpe2lmKHMhPT1OKXRocm93IHM7cmV0dXJuIG5ldyB2KFtdLGUsdGhpcykuY3JlYXRlUXVlcnlSZXNwb25zZSgpfX1hc3luYyBleGVjdXRlUXVlcnlGb3JTdW1tYXJ5U3RhdGlzdGljcyhlPXt9LHQsaSl7Y29uc3R7ZmllbGQ6cyxub3JtYWxpemF0aW9uRmllbGQ6cix2YWx1ZUV4cHJlc3Npb246YX09dDtyZXR1cm4oYXdhaXQgdGhpcy5fZ2V0UXVlcnlFbmdpbmVSZXN1bHRGb3JTdGF0cyhlLHtmaWVsZDpzLG5vcm1hbGl6YXRpb25GaWVsZDpyLHZhbHVlRXhwcmVzc2lvbjphfSxpKSkuY3JlYXRlU3VtbWFyeVN0YXRpc3RpY3NSZXNwb25zZSh0KX1hc3luYyBleGVjdXRlUXVlcnlGb3JVbmlxdWVWYWx1ZXMoZT17fSx0LGkpe2NvbnN0e2ZpZWxkOnMsZmllbGQyOnIsZmllbGQzOmEsdmFsdWVFeHByZXNzaW9uOm59PXQ7cmV0dXJuKGF3YWl0IHRoaXMuX2dldFF1ZXJ5RW5naW5lUmVzdWx0Rm9yU3RhdHMoZSx7ZmllbGQ6cyxmaWVsZDI6cixmaWVsZDM6YSx2YWx1ZUV4cHJlc3Npb246bn0saSkpLmNyZWF0ZVVuaXF1ZVZhbHVlc1Jlc3BvbnNlKHQpfWFzeW5jIGV4ZWN1dGVRdWVyeUZvckNsYXNzQnJlYWtzKGU9e30sdCxpKXtjb25zdHtmaWVsZDpzLG5vcm1hbGl6YXRpb25GaWVsZDpyLHZhbHVlRXhwcmVzc2lvbjphfT10O3JldHVybihhd2FpdCB0aGlzLl9nZXRRdWVyeUVuZ2luZVJlc3VsdEZvclN0YXRzKGUse2ZpZWxkOnMsbm9ybWFsaXphdGlvbkZpZWxkOnIsdmFsdWVFeHByZXNzaW9uOmF9LGkpKS5jcmVhdGVDbGFzc0JyZWFrc1Jlc3BvbnNlKHQpfWFzeW5jIGV4ZWN1dGVRdWVyeUZvckhpc3RvZ3JhbShlPXt9LHQsaSl7Y29uc3R7ZmllbGQ6cyxub3JtYWxpemF0aW9uRmllbGQ6cix2YWx1ZUV4cHJlc3Npb246YX09dDtyZXR1cm4oYXdhaXQgdGhpcy5fZ2V0UXVlcnlFbmdpbmVSZXN1bHRGb3JTdGF0cyhlLHtmaWVsZDpzLG5vcm1hbGl6YXRpb25GaWVsZDpyLHZhbHVlRXhwcmVzc2lvbjphfSxpKSkuY3JlYXRlSGlzdG9ncmFtUmVzcG9uc2UodCl9YXN5bmMgZmV0Y2hSZWNvbXB1dGVkRXh0ZW50cyhlKXtjb25zdFt0LGldPWF3YWl0IFByb21pc2UuYWxsKFtcImdldEZ1bGxFeHRlbnRcImluIHRoaXMuZmVhdHVyZVN0b3JlJiZ0aGlzLmZlYXR1cmVTdG9yZS5nZXRGdWxsRXh0ZW50P1Byb21pc2UucmVzb2x2ZSh0aGlzLmZlYXR1cmVTdG9yZS5nZXRGdWxsRXh0ZW50KHRoaXMuc3BhdGlhbFJlZmVyZW5jZSkpOnRoaXMuX2dldEJvdW5kcyhhd2FpdCB0aGlzLl9nZXRBbGxGZWF0dXJlcygpLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpLG51bGwhPXRoaXMuX3RpbWVFeHRlbnRQcm9taXNlP3RoaXMuX3RpbWVFeHRlbnRQcm9taXNlOnRoaXMuX3RpbWVFeHRlbnRQcm9taXNlPU0odGhpcy50aW1lSW5mbyx0aGlzLmZlYXR1cmVTdG9yZSldKTtyZXR1cm4gbyhlKSx7ZnVsbEV4dGVudDp0LHRpbWVFeHRlbnQ6aX19YXN5bmMgX2dldEJvdW5kcyhlLHQsaSl7Y29uc3Qgcz1jKHAoKSxoKTthd2FpdCB0aGlzLmZlYXR1cmVTdG9yZS5mb3JFYWNoQm91bmRzKGUsKGU9Pm0ocyxlKSkpO2NvbnN0IHI9e3htaW46c1swXSx5bWluOnNbMV0seG1heDpzWzNdLHltYXg6c1s0XSxzcGF0aWFsUmVmZXJlbmNlOloodGhpcy5zcGF0aWFsUmVmZXJlbmNlKX07dGhpcy5oYXNaJiZpc0Zpbml0ZShzWzJdKSYmaXNGaW5pdGUoc1s1XSkmJihyLnptaW49c1syXSxyLnptYXg9c1s1XSk7Y29uc3QgYT1UKHIsdCxpKTtpZihhLnNwYXRpYWxSZWZlcmVuY2U9WihpKSxhLnhtYXgtYS54bWluPT0wKXtjb25zdCBlPWwoYS5zcGF0aWFsUmVmZXJlbmNlKTthLnhtaW4tPWUsYS54bWF4Kz1lfWlmKGEueW1heC1hLnltaW49PTApe2NvbnN0IGU9bChhLnNwYXRpYWxSZWZlcmVuY2UpO2EueW1pbi09ZSxhLnltYXgrPWV9aWYodGhpcy5oYXNaJiZudWxsIT1hLnptaW4mJm51bGwhPWEuem1heCYmYS56bWF4LWEuem1pbj09MCl7Y29uc3QgZT1sKGEuc3BhdGlhbFJlZmVyZW5jZSk7YS56bWluLT1lLGEuem1heCs9ZX1yZXR1cm4gYX1hc3luYyBfc2NoZWR1bGUoZSx0KXtyZXR1cm4gbnVsbCE9dGhpcy5fZnJhbWVUYXNrP3RoaXMuX2ZyYW1lVGFzay5zY2hlZHVsZShlLHQpOmUoSil9YXN5bmMgX3Jlc2NoZWR1bGUoZSx0KXtyZXR1cm4gbnVsbCE9dGhpcy5fZnJhbWVUYXNrP3RoaXMuX2ZyYW1lVGFzay5yZXNjaGVkdWxlKGUsdCk6ZShKKX1hc3luYyBfZ2V0QWxsRmVhdHVyZXNRdWVyeUVuZ2luZVJlc3VsdChlKXtyZXR1cm4gbmV3IHYoYXdhaXQgdGhpcy5fZ2V0QWxsRmVhdHVyZXMoKSxlLHRoaXMpfWFzeW5jIF9nZXRBbGxGZWF0dXJlcygpe2lmKG51bGw9PXRoaXMuX2FsbEZlYXR1cmVzUHJvbWlzZSl7Y29uc3QgZT1bXTt0aGlzLl9hbGxGZWF0dXJlc1Byb21pc2U9KGFzeW5jKCk9Pnthd2FpdCB0aGlzLmZlYXR1cmVTdG9yZS5mb3JFYWNoKCh0PT5lLnB1c2godCkpKX0pKCkudGhlbigoKCk9PmUpKX1jb25zdCBlPXRoaXMuX2FsbEZlYXR1cmVzUHJvbWlzZSx0PWF3YWl0IGU7cmV0dXJuIGU9PT10aGlzLl9hbGxGZWF0dXJlc1Byb21pc2U/dC5zbGljZSgpOnRoaXMuX2dldEFsbEZlYXR1cmVzKCl9YXN5bmMgX2V4ZWN1dGVRdWVyeShlLHQsaSl7ZT1zKGUpLGU9YXdhaXQgdGhpcy5fc2NoZWR1bGUoKCgpPT5WKGUsdGhpcy5kZWZpbml0aW9uRXhwcmVzc2lvbix0aGlzLnNwYXRpYWxSZWZlcmVuY2UpKSxpKSxlPWF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9jaGVja1F1ZXJ5U3VwcG9ydChlKSksaSksZT17Li4uZSwuLi50fTtjb25zdCByPWF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlU2NlbmVGaWx0ZXJRdWVyeShlLGkpKSxpKSxhPWF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlR2VvbWV0cnlRdWVyeShlLHIsaSkpLGkpO3JldHVybiBhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZUFnZ3JlZ2F0ZUlkc1F1ZXJ5KGEpKSxpKSxhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZU9iamVjdElkc1F1ZXJ5KGEpKSxpKSxhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZVRpbWVRdWVyeShhKSksaSksYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVBdHRyaWJ1dGVzUXVlcnkoYSkpLGkpLGF9YXN5bmMgX2V4ZWN1dGVTY2VuZUZpbHRlclF1ZXJ5KGUsdCl7aWYobnVsbD09ZS5zY2VuZUZpbHRlcilyZXR1cm4gbnVsbDtjb25zdHtvdXRTUjppLHJldHVybkdlb21ldHJ5OnMscmV0dXJuQ2VudHJvaWQ6cn09ZSxhPXRoaXMuZmVhdHVyZVN0b3JlLmZlYXR1cmVTcGF0aWFsUmVmZXJlbmNlLG49ZS5zY2VuZUZpbHRlci5nZW9tZXRyeSx1PW51bGw9PWF8fFMoYSxuLnNwYXRpYWxSZWZlcmVuY2UpP246VChuLGEpO2lmKCF1KXJldHVybiBudWxsO2NvbnN0IG89c3x8cixsPUYoaSkmJiFTKHRoaXMuc3BhdGlhbFJlZmVyZW5jZSxpKSYmbz9hc3luYyBlPT50aGlzLl9wcm9qZWN0KGUsaSk6ZT0+ZSxjPXRoaXMuZmVhdHVyZUFkYXB0ZXIsaD1hd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fc2VhcmNoRmVhdHVyZXModGhpcy5fZ2V0UXVlcnlCQm94ZXModSkpKSx0KTtpZihcImRpc2pvaW50XCI9PT1lLnNjZW5lRmlsdGVyLnNwYXRpYWxSZWxhdGlvbnNoaXApe2lmKCFoLmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCBpPW5ldyBTZXQ7Zm9yKGNvbnN0IGUgb2YgaClpLmFkZChjLmdldE9iamVjdElkKGUpKTtjb25zdCBzPWF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9nZXRBbGxGZWF0dXJlcygpKSx0KSxyPWF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKGFzeW5jKCk9Pntjb25zdCByPWF3YWl0IHooXCJlc3JpU3BhdGlhbFJlbERpc2pvaW50XCIsdSx0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLmhhc1osdGhpcy5oYXNNKSxhPWU9PiFpLmhhcyhjLmdldE9iamVjdElkKGUpKXx8cihjLmdldEdlb21ldHJ5KGUpKSxuPWF3YWl0IHRoaXMuX3J1blNwYXRpYWxGaWx0ZXIocyxhLHQpO3JldHVybiBuZXcgdihuLGUsdGhpcyl9KSx0KTtyZXR1cm4gbChyKX1pZighaC5sZW5ndGgpcmV0dXJuIG5ldyB2KFtdLGUsdGhpcyk7aWYodGhpcy5fY2FuRXhlY3V0ZVNpbmdsZVBhc3ModSxlKSlyZXR1cm4gbChuZXcgdihoLGUsdGhpcykpO2NvbnN0IHA9YXdhaXQgeihcImVzcmlTcGF0aWFsUmVsQ29udGFpbnNcIix1LHRoaXMuZ2VvbWV0cnlUeXBlLHRoaXMuaGFzWix0aGlzLmhhc00pLG09YXdhaXQgdGhpcy5fcnVuU3BhdGlhbEZpbHRlcihoLChlPT5wKGMuZ2V0R2VvbWV0cnkoZSkpKSx0KTtyZXR1cm4gbChuZXcgdihtLGUsdGhpcykpfWFzeW5jIF9leGVjdXRlR2VvbWV0cnlRdWVyeShpLHMscil7aWYobnVsbCE9cyYmMD09PXMuaXRlbXMubGVuZ3RoKXJldHVybiBzO2k9bnVsbCE9cz9zLnF1ZXJ5Omk7Y29uc3R7Z2VvbWV0cnk6YSxvdXRTUjpuLHNwYXRpYWxSZWw6dSxyZXR1cm5HZW9tZXRyeTpvLHJldHVybkNlbnRyb2lkOmx9PWksYz10aGlzLmZlYXR1cmVTdG9yZS5mZWF0dXJlU3BhdGlhbFJlZmVyZW5jZSxoPSFhfHxudWxsPT1jfHxTKGMsYS5zcGF0aWFsUmVmZXJlbmNlKT9hOlQoYSxjKSxwPW98fGwsbT1GKG4pJiYhUyh0aGlzLnNwYXRpYWxSZWZlcmVuY2UsbiksZj10aGlzLl9nZW9tZXRyeVF1ZXJ5Q2FjaGUmJm51bGw9PXM/bSYmcD9KU09OLnN0cmluZ2lmeSh7b3JpZ2luYWxGaWx0ZXJHZW9tZXRyeTphLHNwYXRpYWxSZWxhdGlvbnNoaXA6dSxvdXRTcGF0aWFsUmVmZXJlbmNlOm59KTpKU09OLnN0cmluZ2lmeSh7b3JpZ2luYWxGaWx0ZXJHZW9tZXRyeTphLHNwYXRpYWxSZWxhdGlvbnNoaXA6dX0pOm51bGwsZD1mP3RoaXMuX2dlb21ldHJ5UXVlcnlDYWNoZS5nZXQoZik6bnVsbDtpZihudWxsIT1kKXJldHVybiBuZXcgdihkLGksdGhpcyk7Y29uc3QgeT1hc3luYyBlPT4obSYmcCYmYXdhaXQgdGhpcy5fcHJvamVjdChlLG4pLGYmJnRoaXMuX2dlb21ldHJ5UXVlcnlDYWNoZS5wdXQoZixlLml0ZW1zLGUuaXRlbXMubGVuZ3RoKzEpLGUpO2lmKCFoKXJldHVybiB5KG51bGwhPXM/czphd2FpdCB0aGlzLl9nZXRBbGxGZWF0dXJlc1F1ZXJ5RW5naW5lUmVzdWx0KGkpKTtjb25zdCBnPXRoaXMuZmVhdHVyZUFkYXB0ZXI7bGV0IF89YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX3NlYXJjaEZlYXR1cmVzKHRoaXMuX2dldFF1ZXJ5QkJveGVzKGEpKSkscik7aWYoXCJlc3JpU3BhdGlhbFJlbERpc2pvaW50XCI9PT11KXtpZighXy5sZW5ndGgpcmV0dXJuIHkobnVsbCE9cz9zOmF3YWl0IHRoaXMuX2dldEFsbEZlYXR1cmVzUXVlcnlFbmdpbmVSZXN1bHQoaSkpO2NvbnN0IGU9bmV3IFNldDtmb3IoY29uc3QgaSBvZiBfKWUuYWRkKGcuZ2V0T2JqZWN0SWQoaSkpO2NvbnN0IHQ9bnVsbCE9cz9zLml0ZW1zOmF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9nZXRBbGxGZWF0dXJlcygpKSxyKSxhPWF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKGFzeW5jKCk9Pntjb25zdCBzPWF3YWl0IHoodSxoLHRoaXMuZ2VvbWV0cnlUeXBlLHRoaXMuaGFzWix0aGlzLmhhc00pLGE9dD0+IWUuaGFzKGcuZ2V0T2JqZWN0SWQodCkpfHxzKGcuZ2V0R2VvbWV0cnkodCkpLG49YXdhaXQgdGhpcy5fcnVuU3BhdGlhbEZpbHRlcih0LGEscik7cmV0dXJuIG5ldyB2KG4saSx0aGlzKX0pLHIpO3JldHVybiB5KGEpfWlmKG51bGwhPXMpe2NvbnN0IGk9bmV3IGU7Xz1fLmZpbHRlcigoZT0+dChzLml0ZW1zLGUscy5pdGVtcy5sZW5ndGgsaSk+PTApKX1pZighXy5sZW5ndGgpe2NvbnN0IGU9bmV3IHYoW10saSx0aGlzKTtyZXR1cm4gZiYmdGhpcy5fZ2VvbWV0cnlRdWVyeUNhY2hlLnB1dChmLGUuaXRlbXMsMSksZX1pZih0aGlzLl9jYW5FeGVjdXRlU2luZ2xlUGFzcyhoLGkpKXJldHVybiB5KG5ldyB2KF8saSx0aGlzKSk7Y29uc3QgeD1hd2FpdCB6KHUsaCx0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLmhhc1osdGhpcy5oYXNNKSx3PWF3YWl0IHRoaXMuX3J1blNwYXRpYWxGaWx0ZXIoXywoZT0+eChnLmdldEdlb21ldHJ5KGUpKSkscik7cmV0dXJuIHkobmV3IHYodyxpLHRoaXMpKX1fZXhlY3V0ZUFnZ3JlZ2F0ZUlkc1F1ZXJ5KGUpe2lmKDA9PT1lLml0ZW1zLmxlbmd0aHx8IWUucXVlcnkuYWdncmVnYXRlSWRzfHwhZS5xdWVyeS5hZ2dyZWdhdGVJZHMubGVuZ3RofHxudWxsPT10aGlzLmFnZ3JlZ2F0ZUFkYXB0ZXIpcmV0dXJuO2NvbnN0IHQ9bmV3IFNldDtmb3IoY29uc3QgcyBvZiBlLnF1ZXJ5LmFnZ3JlZ2F0ZUlkcyl7dGhpcy5hZ2dyZWdhdGVBZGFwdGVyLmdldEZlYXR1cmVPYmplY3RJZHMocykuZm9yRWFjaCgoZT0+dC5hZGQoZSkpKX1jb25zdCBpPXRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0T2JqZWN0SWQ7ZS5pdGVtcz1lLml0ZW1zLmZpbHRlcigoZT0+dC5oYXMoaShlKSkpKX1fZXhlY3V0ZU9iamVjdElkc1F1ZXJ5KGUpe2lmKDA9PT1lLml0ZW1zLmxlbmd0aHx8IWUucXVlcnkub2JqZWN0SWRzfHwhZS5xdWVyeS5vYmplY3RJZHMubGVuZ3RoKXJldHVybjtjb25zdCB0PW5ldyBTZXQoZS5xdWVyeS5vYmplY3RJZHMpLGk9dGhpcy5mZWF0dXJlQWRhcHRlci5nZXRPYmplY3RJZDtlLml0ZW1zPWUuaXRlbXMuZmlsdGVyKChlPT50LmhhcyhpKGUpKSkpfV9leGVjdXRlVGltZVF1ZXJ5KGUpe2lmKDA9PT1lLml0ZW1zLmxlbmd0aClyZXR1cm47Y29uc3QgdD1VKHRoaXMudGltZUluZm8sZS5xdWVyeS50aW1lRXh0ZW50LHRoaXMuZmVhdHVyZUFkYXB0ZXIpO251bGwhPXQmJihlLml0ZW1zPWUuaXRlbXMuZmlsdGVyKHQpKX1fZXhlY3V0ZUF0dHJpYnV0ZXNRdWVyeShlKXtpZigwPT09ZS5pdGVtcy5sZW5ndGgpcmV0dXJuO2NvbnN0IHQ9UShlLnF1ZXJ5LndoZXJlLHRoaXMuZmllbGRzSW5kZXgpO2lmKHQpe2lmKCF0LmlzU3RhbmRhcmRpemVkKXRocm93IG5ldyBUeXBlRXJyb3IoXCJXaGVyZSBjbGF1c2UgaXMgbm90IHN0YW5kYXJkaXplZFwiKTtlLml0ZW1zPWUuaXRlbXMuZmlsdGVyKChlPT50LnRlc3RGZWF0dXJlKGUsdGhpcy5mZWF0dXJlQWRhcHRlcikpKX19YXN5bmMgX3J1blNwYXRpYWxGaWx0ZXIoZSx0LGkpe2lmKCF0KXJldHVybiBlO2lmKG51bGw9PXRoaXMuX2ZyYW1lVGFzaylyZXR1cm4gZS5maWx0ZXIoKGU9PnQoZSkpKTtsZXQgcz0wO2NvbnN0IHI9bmV3IEFycmF5LGE9YXN5bmMgbj0+e2Zvcig7czxlLmxlbmd0aDspe2NvbnN0IHU9ZVtzKytdO3QodSkmJihyLnB1c2godSksbi5tYWRlUHJvZ3Jlc3MoKSksbi5kb25lJiZhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKChlPT5hKGUpKSxpKX19O3JldHVybiB0aGlzLl9yZXNjaGVkdWxlKChlPT5hKGUpKSxpKS50aGVuKCgoKT0+cikpfV9maWx0ZXJMYXRlc3QoZSl7Y29uc3R7dHJhY2tJZEZpZWxkOnQsc3RhcnRUaW1lRmllbGQ6aSxlbmRUaW1lRmllbGQ6c309dGhpcy50aW1lSW5mbyxyPXN8fGksYT1uZXcgTWFwLG49dGhpcy5mZWF0dXJlQWRhcHRlci5nZXRBdHRyaWJ1dGU7Zm9yKGNvbnN0IHUgb2YgZS5pdGVtcyl7Y29uc3QgZT1uKHUsdCksaT1uKHUscikscz1hLmdldChlKTsoIXN8fGk+bihzLHIpKSYmYS5zZXQoZSx1KX1lLml0ZW1zPUFycmF5LmZyb20oYS52YWx1ZXMoKSl9X2NhbkV4ZWN1dGVTaW5nbGVQYXNzKGUsdCl7Y29uc3R7c3BhdGlhbFJlbDppfT10O3JldHVybiBPKGUpJiYoXCJlc3JpU3BhdGlhbFJlbEVudmVsb3BlSW50ZXJzZWN0c1wiPT09aXx8XCJlc3JpR2VvbWV0cnlQb2ludFwiPT09dGhpcy5nZW9tZXRyeVR5cGUmJihcImVzcmlTcGF0aWFsUmVsSW50ZXJzZWN0c1wiPT09aXx8XCJlc3JpU3BhdGlhbFJlbENvbnRhaW5zXCI9PT1pfHxcImVzcmlTcGF0aWFsUmVsV2l0aGluXCI9PT1pKSl9YXN5bmMgX3Byb2plY3QoZSx0KXtpZighdHx8Uyh0aGlzLnNwYXRpYWxSZWZlcmVuY2UsdCkpcmV0dXJuIGU7Y29uc3QgaT10aGlzLmZlYXR1cmVBZGFwdGVyLHM9YXdhaXQgQihlLml0ZW1zLm1hcCgoZT0+SCh0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLmhhc1osdGhpcy5oYXNNLGkuZ2V0R2VvbWV0cnkoZSkpKSksdGhpcy5zcGF0aWFsUmVmZXJlbmNlLHQpO3JldHVybiBlLml0ZW1zPXMubWFwKCgodCxzKT0+aS5jbG9uZVdpdGhHZW9tZXRyeShlLml0ZW1zW3NdLFIodCx0aGlzLmhhc1osdGhpcy5oYXNNKSkpKSxlfV9nZXRRdWVyeUJCb3hlcyhlKXtpZihPKGUpKXtpZihfKGUpKXJldHVybltmKGUueG1pbixlLnltaW4sZS54bWF4LGUueW1heCldO2lmKHgoZSkpcmV0dXJuIGUucmluZ3MubWFwKChlPT5mKE1hdGgubWluKGVbMF1bMF0sZVsyXVswXSksTWF0aC5taW4oZVswXVsxXSxlWzJdWzFdKSxNYXRoLm1heChlWzBdWzBdLGVbMl1bMF0pLE1hdGgubWF4KGVbMF1bMV0sZVsyXVsxXSkpKSl9cmV0dXJuW3koZCgpLGUpXX1hc3luYyBfc2VhcmNoRmVhdHVyZXMoZSl7Y29uc3QgdD1uZXcgU2V0O2F3YWl0IFByb21pc2UuYWxsKGUubWFwKChlPT50aGlzLmZlYXR1cmVTdG9yZS5mb3JFYWNoSW5Cb3VuZHMoZSwoZT0+dC5hZGQoZSkpKSkpKTtjb25zdCBpPUFycmF5LmZyb20odC52YWx1ZXMoKSk7cmV0dXJuIHQuY2xlYXIoKSxpfWFzeW5jIF9jaGVja1N0YXRpc3RpY3NTdXBwb3J0KGUsdCl7aWYoKGUuZGlzdGFuY2U/PzApPDB8fG51bGwhPWUuZ2VvbWV0cnlQcmVjaXNpb258fGUubXVsdGlwYXRjaE9wdGlvbnx8ZS5waXhlbFNpemV8fGUucmVsYXRpb25QYXJhbXx8ZS50ZXh0fHxlLm91dFN0YXRpc3RpY3N8fGUuZ3JvdXBCeUZpZWxkc0ZvclN0YXRpc3RpY3N8fGUuaGF2aW5nfHxlLm9yZGVyQnlGaWVsZHMpdGhyb3cgbmV3IGkoVyxcIlVuc3VwcG9ydGVkIHF1ZXJ5IG9wdGlvbnNcIix7cXVlcnk6ZX0pO3JldHVybiB0aGlzLl9jaGVja0F0dHJpYnV0ZXNRdWVyeVN1cHBvcnQoZSksUHJvbWlzZS5hbGwoW3RoaXMuX2NoZWNrU3RhdGlzdGljc1BhcmFtc1N1cHBvcnQodCxlKSxHKGUsdGhpcy5nZW9tZXRyeVR5cGUsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKSxQKHRoaXMuc3BhdGlhbFJlZmVyZW5jZSxlLm91dFNSKV0pLnRoZW4oKCgpPT5lKSl9YXN5bmMgX2NoZWNrU3RhdGlzdGljc1BhcmFtc1N1cHBvcnQoZSx0KXtsZXQgcz1bXTtpZihlLnZhbHVlRXhwcmVzc2lvbil7Y29uc3R7YXJjYWRlVXRpbHM6dH09YXdhaXQgRCgpO3M9dC5leHRyYWN0RmllbGROYW1lcyhlLnZhbHVlRXhwcmVzc2lvbil9aWYoZS5maWVsZCYmcy5wdXNoKGUuZmllbGQpLGUuZmllbGQyJiZzLnB1c2goZS5maWVsZDIpLGUuZmllbGQzJiZzLnB1c2goZS5maWVsZDMpLGUubm9ybWFsaXphdGlvbkZpZWxkJiZzLnB1c2goZS5ub3JtYWxpemF0aW9uRmllbGQpLCFzLmxlbmd0aCYmIWUudmFsdWVFeHByZXNzaW9uKXRocm93IG5ldyBpKFcsXCJmaWVsZCBvciB2YWx1ZUV4cHJlc3Npb24gaXMgcmVxdWlyZWRcIix7cGFyYW1zOmV9KTtJKHRoaXMuZmllbGRzSW5kZXgscyx7ZXJyb3JNZXNzYWdlOlwiQ2Fubm90IGNhbGN1bGF0ZSBzdGF0aXN0aWNzIGZvciBtaXNzaW5nIGZpZWxkc1wiLHF1ZXJ5OnR9KSxqKHRoaXMuZmllbGRzSW5kZXgscyx7ZXhwcmVzc2lvbk5hbWU6XCJzdGF0aXN0aWNzXCIscXVlcnk6dH0pfWFzeW5jIF9jaGVja1F1ZXJ5U3VwcG9ydChlKXtpZigoZS5kaXN0YW5jZT8/MCk8MHx8bnVsbCE9ZS5nZW9tZXRyeVByZWNpc2lvbnx8ZS5tdWx0aXBhdGNoT3B0aW9ufHxlLnBpeGVsU2l6ZXx8ZS5yZWxhdGlvblBhcmFtfHxlLnRleHQpdGhyb3cgbmV3IGkoVyxcIlVuc3VwcG9ydGVkIHF1ZXJ5IG9wdGlvbnNcIix7cXVlcnk6ZX0pO3JldHVybiB0aGlzLl9jaGVja0F0dHJpYnV0ZXNRdWVyeVN1cHBvcnQoZSksdGhpcy5fY2hlY2tTdGF0aXN0aWNzUXVlcnlTdXBwb3J0KGUpLFByb21pc2UuYWxsKFtHKGUsdGhpcy5nZW9tZXRyeVR5cGUsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKSxQKHRoaXMuc3BhdGlhbFJlZmVyZW5jZSxlLm91dFNSKV0pLnRoZW4oKCgpPT5lKSl9X2NoZWNrQXR0cmlidXRlc1F1ZXJ5U3VwcG9ydChlKXtjb25zdHtvdXRGaWVsZHM6dCxvcmRlckJ5RmllbGRzOnMscmV0dXJuRGlzdGluY3RWYWx1ZXM6cixvdXRTdGF0aXN0aWNzOmF9PWUsbj1hP2EubWFwKChlPT5lLm91dFN0YXRpc3RpY0ZpZWxkTmFtZSYmZS5vdXRTdGF0aXN0aWNGaWVsZE5hbWUudG9Mb3dlckNhc2UoKSkpLmZpbHRlcihCb29sZWFuKTpbXTtpZihzJiZzLmxlbmd0aD4wKXtjb25zdCB0PVwiIGFzY1wiLGk9XCIgZGVzY1wiLHI9cy5tYXAoKGU9Pntjb25zdCBzPWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gcy5pbmNsdWRlcyh0KT9zLnNwbGl0KHQpWzBdOnMuaW5jbHVkZXMoaSk/cy5zcGxpdChpKVswXTplfSkpLmZpbHRlcigoZT0+IW4uaW5jbHVkZXMoZSkpKTtJKHRoaXMuZmllbGRzSW5kZXgscix7ZXhwcmVzc2lvbk5hbWU6XCJvcmRlckJ5RmllbGRzXCIscXVlcnk6ZX0pfWlmKHQmJnQubGVuZ3RoPjApSSh0aGlzLmZpZWxkc0luZGV4LHQse2V4cHJlc3Npb25OYW1lOlwib3V0RmllbGRzXCIscXVlcnk6ZX0pO2Vsc2UgaWYocil0aHJvdyBuZXcgaShXLFwib3V0RmllbGRzIHNob3VsZCBiZSBzcGVjaWZpZWQgZm9yIHJldHVybkRpc3RpbmN0VmFsdWVzXCIse3F1ZXJ5OmV9KTtFKHRoaXMuZmllbGRzSW5kZXgsZS53aGVyZSxlKX1fY2hlY2tTdGF0aXN0aWNzUXVlcnlTdXBwb3J0KGUpe2NvbnN0e291dFN0YXRpc3RpY3M6dCxncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljczpzLGhhdmluZzpyfT1lLGE9cyYmcy5sZW5ndGgsbj10JiZ0Lmxlbmd0aDtpZihyKXtpZighYXx8IW4pdGhyb3cgbmV3IGkoVyxcIm91dFN0YXRpc3RpY3MgYW5kIGdyb3VwQnlGaWVsZHNGb3JTdGF0aXN0aWNzIHNob3VsZCBiZSBzcGVjaWZpZWQgd2l0aCBoYXZpbmdcIix7cXVlcnk6ZX0pO0EodGhpcy5maWVsZHNJbmRleCxyLHQsZSl9aWYobil7aWYoISQodCkpcmV0dXJuO2NvbnN0IHI9dC5tYXAoKGU9PmUub25TdGF0aXN0aWNGaWVsZCkpLmZpbHRlcihCb29sZWFuKTtJKHRoaXMuZmllbGRzSW5kZXgscix7ZXhwcmVzc2lvbk5hbWU6XCJvblN0YXRpc3RpY0ZpZWxkc1wiLHF1ZXJ5OmV9KSxhJiZJKHRoaXMuZmllbGRzSW5kZXgscyx7ZXhwcmVzc2lvbk5hbWU6XCJncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljc1wiLHF1ZXJ5OmV9KTtjb25zdCBuPW5ldyBTZXQoWy4uLmIuanNvblZhbHVlcywuLi5xLmpzb25WYWx1ZXNdKSx1PW5ldyBJbnRsLkxpc3RGb3JtYXQoXCJlbi1VU1wiLHt0eXBlOlwiY29uanVuY3Rpb25cIn0pLmZvcm1hdChbLi4uYi5hcGlWYWx1ZXMsLi4ucS5hcGlWYWx1ZXNdKTtmb3IoY29uc3QgcyBvZiB0KXtjb25zdHtvblN0YXRpc3RpY0ZpZWxkOnQsc3RhdGlzdGljVHlwZTpyfT1zO2lmKChcInBlcmNlbnRpbGVfZGlzY1wiPT09cnx8XCJwZXJjZW50aWxlX2NvbnRcIj09PXIpJiZcInN0YXRpc3RpY1BhcmFtZXRlcnNcImluIHMpe2NvbnN0e3N0YXRpc3RpY1BhcmFtZXRlcnM6dH09cztpZighdCl0aHJvdyBuZXcgaShXLFwic3RhdGlzdGljUGFyYW1ldGVycyBzaG91bGQgYmUgc2V0IGZvciBwZXJjZW50aWxlIHR5cGVcIix7ZGVmaW5pdGlvbjpzLHF1ZXJ5OmV9KX1lbHNlIGlmKFwiY291bnRcIiE9PXImJlwibWluXCIhPT1yJiZcIm1heFwiIT09ciYmdCYmQyh0LHRoaXMuZmllbGRzSW5kZXgsbikpdGhyb3cgbmV3IGkoVyxgb3V0U3RhdGlzdGljcyB3aXRoICcke3J9JyBzdGF0aXN0aWMgdHlwZSwgb25seSBzdXBwb3J0cyAke3V9IGZpZWxkIHR5cGVzYCx7ZGVmaW5pdGlvbjpzLHF1ZXJ5OmV9KX19fWFzeW5jIF9nZXRRdWVyeUVuZ2luZVJlc3VsdEZvclN0YXRzKGUsdCxpKXtlPXMoZSk7dHJ5e2U9YXdhaXQgdGhpcy5fc2NoZWR1bGUoKCgpPT5WKGUsdGhpcy5kZWZpbml0aW9uRXhwcmVzc2lvbix0aGlzLnNwYXRpYWxSZWZlcmVuY2UpKSxpKSxlPWF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9jaGVja1N0YXRpc3RpY3NTdXBwb3J0KGUsdCkpLGkpO2NvbnN0IHM9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVTY2VuZUZpbHRlclF1ZXJ5KGUsaSkpLGkpLHI9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVHZW9tZXRyeVF1ZXJ5KGUscyxpKSksaSk7cmV0dXJuIGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlQWdncmVnYXRlSWRzUXVlcnkocikpLGkpLGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlT2JqZWN0SWRzUXVlcnkocikpLGkpLGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlVGltZVF1ZXJ5KHIpKSxpKSxhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZUF0dHJpYnV0ZXNRdWVyeShyKSksaSkscn1jYXRjaChyKXtpZihyIT09Til0aHJvdyByO3JldHVybiBuZXcgdihbXSxlLHRoaXMpfX19ZXhwb3J0e0sgYXMgRmVhdHVyZSxlZSBhcyBRdWVyeUVuZ2luZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgdD17c3VwcG9ydHNTdGF0aXN0aWNzOiEwLHN1cHBvcnRzUGVyY2VudGlsZVN0YXRpc3RpY3M6ITAsc3VwcG9ydHNTcGF0aWFsQWdncmVnYXRpb25TdGF0aXN0aWNzOiExLHN1cHBvcnRlZFNwYXRpYWxBZ2dyZWdhdGlvblN0YXRpc3RpY3M6e2VudmVsb3BlOiExLGNlbnRyb2lkOiExLGNvbnZleEh1bGw6ITF9LHN1cHBvcnRzQ2VudHJvaWQ6ITAsc3VwcG9ydHNDYWNoZUhpbnQ6ITEsc3VwcG9ydHNEaXN0YW5jZTohMCxzdXBwb3J0c0Rpc3RpbmN0OiEwLHN1cHBvcnRzRXh0ZW50OiEwLHN1cHBvcnRzR2VvbWV0cnlQcm9wZXJ0aWVzOiExLHN1cHBvcnRzSGF2aW5nQ2xhdXNlOiEwLHN1cHBvcnRzT3JkZXJCeTohMCxzdXBwb3J0c1BhZ2luYXRpb246ITAsc3VwcG9ydHNRdWFudGl6YXRpb246ITAsc3VwcG9ydHNRdWFudGl6YXRpb25FZGl0TW9kZTohMSxzdXBwb3J0c1F1ZXJ5R2VvbWV0cnk6ITAsc3VwcG9ydHNSZXN1bHRUeXBlOiExLHN1cHBvcnRzU3FsRXhwcmVzc2lvbjohMCxzdXBwb3J0c01heFJlY29yZENvdW50RmFjdG9yOiExLHN1cHBvcnRzU3RhbmRhcmRpemVkUXVlcmllc09ubHk6ITAsc3VwcG9ydHNUb3BGZWF0dXJlc1F1ZXJ5OiExLHN1cHBvcnRzUXVlcnlCeU90aGVyczohMCxzdXBwb3J0c0hpc3RvcmljTW9tZW50OiExLHN1cHBvcnRzRm9ybWF0UEJGOiExLHN1cHBvcnRzRGlzam9pbnRTcGF0aWFsUmVsYXRpb25zaGlwOiEwLHN1cHBvcnRzRGVmYXVsdFNwYXRpYWxSZWZlcmVuY2U6ITEsc3VwcG9ydHNGdWxsVGV4dFNlYXJjaDohMSxzdXBwb3J0c0NvbXBhY3RHZW9tZXRyeTohMSxtYXhSZWNvcmRDb3VudEZhY3Rvcjp2b2lkIDAsbWF4UmVjb3JkQ291bnQ6dm9pZCAwLHN0YW5kYXJkTWF4UmVjb3JkQ291bnQ6dm9pZCAwLHRpbGVNYXhSZWNvcmRDb3VudDp2b2lkIDB9O2V4cG9ydHt0IGFzIHF1ZXJ5Q2FwYWJpbGl0aWVzfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7cG9seWdvbkNlbnRyb2lkIGFzIGUsZXh0ZW50Q2VudHJvaWQgYXMgdH1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2NlbnRyb2lkLmpzXCI7aW1wb3J0e2dldFBvbHlnb25FeHRlbnQgYXMgcyxnZXRHZW9tZXRyeUV4dGVudCBhcyBpfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvZXh0ZW50VXRpbHMuanNcIjtpbXBvcnR7dG9RdWFudGl6YXRpb25UcmFuc2Zvcm0gYXMgYX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3F1YW50aXphdGlvblV0aWxzLmpzXCI7aW1wb3J0e2lzVmFsaWQgYXMgcixlcXVhbHMgYXMgbn1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3NwYXRpYWxSZWZlcmVuY2VVdGlscy5qc1wiO2ltcG9ydCBvIGZyb21cIi4vQXR0cmlidXRlc0J1aWxkZXIuanNcIjtpbXBvcnR7cHJvamVjdCBhcyBsfWZyb21cIi4vcHJvamVjdGlvblN1cHBvcnQuanNcIjtpbXBvcnR7bWFrZUVkZ2VDYW5kaWRhdGUgYXMgdSxtYWtlVmVydGV4Q2FuZGlkYXRlIGFzIGN9ZnJvbVwiLi9TbmFwcGluZ0NhbmRpZGF0ZS5qc1wiO2ltcG9ydHtjbGVhbkZyb21HZW9tZXRyeUVuZ2luZSBhcyBkLGdldEdlb21ldHJ5IGFzIG0sdHJhbnNmb3JtQ2VudHJvaWQgYXMgaH1mcm9tXCIuL3V0aWxzLmpzXCI7aW1wb3J0e2lzU3RyaW5nRmllbGQgYXMgZ31mcm9tXCIuLi8uLi9zdXBwb3J0L2ZpZWxkVXRpbHMuanNcIjtpbXBvcnR7aXNOdWxsQ291bnRTdXBwb3J0ZWQgYXMgZixjYWxjdWxhdGVTdHJpbmdTdGF0aXN0aWNzIGFzIHAsY2FsY3VsYXRlU3RhdGlzdGljcyBhcyB5LHByb2Nlc3NTdW1tYXJ5U3RhdGlzdGljc1Jlc3VsdCBhcyB4LGNhbGN1bGF0ZVVuaXF1ZVZhbHVlc0NvdW50IGFzIEksY3JlYXRlVVZSZXN1bHQgYXMgVCxjYWxjdWxhdGVDbGFzc0JyZWFrcyBhcyBWLHJlc29sdmVDQlJlc3VsdCBhcyBGLGNhbGN1bGF0ZUhpc3RvZ3JhbSBhcyBTLGdldEF0dHJpYnV0ZUNvbXBhcmF0b3IgYXMgXyxjYWxjdWxhdGVQZXJjZW50aWxlIGFzIHZ9ZnJvbVwiLi4vLi4vLi4vc3RhdGlzdGljcy91dGlscy5qc1wiO2NsYXNzIHp7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMuaXRlbXM9ZSx0aGlzLnF1ZXJ5PXQsdGhpcy5nZW9tZXRyeVR5cGU9cy5nZW9tZXRyeVR5cGUsdGhpcy5oYXNNPXMuaGFzTSx0aGlzLmhhc1o9cy5oYXNaLHRoaXMuZmllbGRzSW5kZXg9cy5maWVsZHNJbmRleCx0aGlzLm9iamVjdElkRmllbGQ9cy5vYmplY3RJZEZpZWxkLHRoaXMuc3BhdGlhbFJlZmVyZW5jZT1zLnNwYXRpYWxSZWZlcmVuY2UsdGhpcy5mZWF0dXJlQWRhcHRlcj1zLmZlYXR1cmVBZGFwdGVyfWdldCBzaXplKCl7cmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RofWNyZWF0ZVF1ZXJ5UmVzcG9uc2VGb3JDb3VudCgpe2NvbnN0IGU9bmV3IG8odGhpcy5xdWVyeSx0aGlzLmZlYXR1cmVBZGFwdGVyLHRoaXMuZmllbGRzSW5kZXgpO2lmKCF0aGlzLnF1ZXJ5Lm91dFN0YXRpc3RpY3MpcmV0dXJuIGUuY291bnREaXN0aW5jdFZhbHVlcyh0aGlzLml0ZW1zKTtjb25zdHtncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljczp0LGhhdmluZzpzLG91dFN0YXRpc3RpY3M6aX09dGhpcy5xdWVyeSxhPXQ/Lmxlbmd0aDtpZighISFhKXJldHVybiAxO2NvbnN0IHI9bmV3IE1hcCxuPW5ldyBNYXAsbD1uZXcgU2V0O2Zvcihjb25zdCBvIG9mIGkpe2NvbnN0e3N0YXRpc3RpY1R5cGU6aX09byxhPVwiZXhjZWVkc2xpbWl0XCIhPT1pP28ub25TdGF0aXN0aWNGaWVsZDp2b2lkIDA7aWYoIW4uaGFzKGEpKXtjb25zdCBzPVtdO2Zvcihjb25zdCBpIG9mIHQpe2NvbnN0IHQ9dGhpcy5fZ2V0QXR0cmlidXRlVmFsdWVzKGUsaSxyKTtzLnB1c2godCl9bi5zZXQoYSx0aGlzLl9jYWxjdWxhdGVVbmlxdWVWYWx1ZXMocyxlLnJldHVybkRpc3RpbmN0VmFsdWVzKSl9Y29uc3QgdT1uLmdldChhKTtmb3IoY29uc3QgdCBpbiB1KXtjb25zdHtkYXRhOmksaXRlbXM6YX09dVt0XSxyPWkuam9pbihcIixcIik7cyYmIWUudmFsaWRhdGVJdGVtcyhhLHMpfHxsLmFkZChyKX19cmV0dXJuIGwuc2l6ZX1hc3luYyBjcmVhdGVRdWVyeVJlc3BvbnNlKCl7bGV0IGU7aWYodGhpcy5xdWVyeS5vdXRTdGF0aXN0aWNzKXtlPXRoaXMucXVlcnkub3V0U3RhdGlzdGljcy5zb21lKChlPT5cImV4Y2VlZHNsaW1pdFwiPT09ZS5zdGF0aXN0aWNUeXBlKSk/dGhpcy5fY3JlYXRlRXhjZWVkc0xpbWl0UXVlcnlSZXNwb25zZSh0aGlzLnF1ZXJ5KTphd2FpdCB0aGlzLl9jcmVhdGVTdGF0aXN0aWNzUXVlcnlSZXNwb25zZSh0aGlzLnF1ZXJ5KX1lbHNlIGU9dGhpcy5fY3JlYXRlRmVhdHVyZVF1ZXJ5UmVzcG9uc2UodGhpcy5xdWVyeSk7aWYodGhpcy5xdWVyeS5yZXR1cm5RdWVyeUdlb21ldHJ5KXtjb25zdCB0PXRoaXMucXVlcnkuZ2VvbWV0cnk7cih0aGlzLnF1ZXJ5Lm91dFNSKSYmIW4odC5zcGF0aWFsUmVmZXJlbmNlLHRoaXMucXVlcnkub3V0U1IpP2UucXVlcnlHZW9tZXRyeT1kKHtzcGF0aWFsUmVmZXJlbmNlOnRoaXMucXVlcnkub3V0U1IsLi4ubCh0LHQuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLnF1ZXJ5Lm91dFNSKX0pOmUucXVlcnlHZW9tZXRyeT1kKHtzcGF0aWFsUmVmZXJlbmNlOnRoaXMucXVlcnkub3V0U1IsLi4udH0pfXJldHVybiBlfWNyZWF0ZVNuYXBwaW5nUmVzcG9uc2UoZSx0KXtjb25zdCBzPXRoaXMuZmVhdHVyZUFkYXB0ZXIsaT1iKHRoaXMuaGFzWix0aGlzLmhhc00pLHtwb2ludDphLG1vZGU6cn09ZSxuPVwibnVtYmVyXCI9PXR5cGVvZiBlLmRpc3RhbmNlP2UuZGlzdGFuY2U6ZS5kaXN0YW5jZS54LG89XCJudW1iZXJcIj09dHlwZW9mIGUuZGlzdGFuY2U/ZS5kaXN0YW5jZTplLmRpc3RhbmNlLnksbD17Y2FuZGlkYXRlczpbXX0sZD1cImVzcmlHZW9tZXRyeVBvbHlnb25cIj09PXRoaXMuZ2VvbWV0cnlUeXBlLG09dGhpcy5fZ2V0UG9pbnRDcmVhdG9yKHIsdGhpcy5zcGF0aWFsUmVmZXJlbmNlLHQpLGg9bmV3IEEobnVsbCwwKSxnPW5ldyBBKG51bGwsMCksZj17eDowLHk6MCx6OjB9O2Zvcihjb25zdCBwIG9mIHRoaXMuaXRlbXMpe2NvbnN0IHQ9cy5nZXRHZW9tZXRyeShwKTtpZihudWxsPT10KWNvbnRpbnVlO2NvbnN0e2Nvb3JkczpyLGxlbmd0aHM6eX09dDtpZihoLmNvb3Jkcz1yLGcuY29vcmRzPXIsZS5yZXR1cm5FZGdlKXtsZXQgZT0wO2ZvcihsZXQgdD0wO3Q8eS5sZW5ndGg7dCsrKXtjb25zdCByPXlbdF07Zm9yKGxldCB0PTA7dDxyO3QrKyxlKz1pKXtjb25zdCBjPWg7aWYoYy5jb29yZHNJbmRleD1lLHQhPT1yLTEpe2NvbnN0IHQ9Zzt0LmNvb3Jkc0luZGV4PWUraTtjb25zdCByPWY7UihmLGEsYyx0KTtjb25zdCBkPShhLngtci54KS9uLGg9KGEueS1yLnkpL28seT1kKmQraCpoO3k8PTEmJmwuY2FuZGlkYXRlcy5wdXNoKHUocy5nZXRPYmplY3RJZChwKSxtKHIpLE1hdGguc3FydCh5KSxtKGMpLG0odCkpKX19fX1pZihlLnJldHVyblZlcnRleCl7Y29uc3QgZT1kP3IubGVuZ3RoLWk6ci5sZW5ndGg7Zm9yKGxldCB0PTA7dDxlO3QrPWkpe2NvbnN0IGU9aDtlLmNvb3Jkc0luZGV4PXQ7Y29uc3QgaT0oYS54LWUueCkvbixyPShhLnktZS55KS9vLHU9aSppK3Iqcjt1PD0xJiZsLmNhbmRpZGF0ZXMucHVzaChjKHMuZ2V0T2JqZWN0SWQocCksbShlKSxNYXRoLnNxcnQodSkpKX19fXJldHVybiBsLmNhbmRpZGF0ZXMuc29ydCgoKGUsdCk9PmUuZGlzdGFuY2UtdC5kaXN0YW5jZSkpLGx9X2dldFBvaW50Q3JlYXRvcihlLHQscyl7Y29uc3QgaT1udWxsPT1zfHxuKHQscyk/ZT0+ZTplPT5sKGUsdCxzKSx7aGFzWjphfT10aGlzLHI9MDtyZXR1cm5cIjNkXCI9PT1lP2E/KHt4OmUseTp0LHo6c30pPT5pKHt4OmUseTp0LHo6c30pOih7eDplLHk6dH0pPT5pKHt4OmUseTp0LHo6cn0pOih7eDplLHk6dH0pPT5pKHt4OmUseTp0fSl9YXN5bmMgY3JlYXRlU3VtbWFyeVN0YXRpc3RpY3NSZXNwb25zZShlKXtjb25zdHtmaWVsZDp0LHZhbHVlRXhwcmVzc2lvbjpzLG5vcm1hbGl6YXRpb25GaWVsZDppLG5vcm1hbGl6YXRpb25UeXBlOmEsbm9ybWFsaXphdGlvblRvdGFsOnIsbWluVmFsdWU6bixtYXhWYWx1ZTpvLHNjYWxlOmx9PWUsdT10aGlzLmZpZWxkc0luZGV4LmlzRGF0ZUZpZWxkKHQpLGM9YXdhaXQgdGhpcy5fZ2V0RGF0YVZhbHVlcyh7ZmllbGQ6dCx2YWx1ZUV4cHJlc3Npb246cyxub3JtYWxpemF0aW9uRmllbGQ6aSxub3JtYWxpemF0aW9uVHlwZTphLG5vcm1hbGl6YXRpb25Ub3RhbDpyLHNjYWxlOmx9KSxkPWYoe25vcm1hbGl6YXRpb25UeXBlOmEsbm9ybWFsaXphdGlvbkZpZWxkOmksbWluVmFsdWU6bixtYXhWYWx1ZTpvfSksbT10aGlzLmZpZWxkc0luZGV4LmdldCh0KSxoPXt2YWx1ZTouNSxmaWVsZFR5cGU6bT8udHlwZX0sST1nKG0pP3Aoe3ZhbHVlczpjLHN1cHBvcnRzTnVsbENvdW50OmQscGVyY2VudGlsZVBhcmFtczpofSk6eSh7dmFsdWVzOmMsbWluVmFsdWU6bixtYXhWYWx1ZTpvLHVzZVNhbXBsZVN0ZERldjohYSxzdXBwb3J0c051bGxDb3VudDpkLHBlcmNlbnRpbGVQYXJhbXM6aH0pO3JldHVybiB4KEksdSl9YXN5bmMgY3JlYXRlVW5pcXVlVmFsdWVzUmVzcG9uc2UoZSl7Y29uc3R7ZmllbGQ6dCx2YWx1ZUV4cHJlc3Npb246cyxkb21haW5zOmkscmV0dXJuQWxsQ29kZWRWYWx1ZXM6YSxzY2FsZTpyfT1lLG49YXdhaXQgdGhpcy5fZ2V0RGF0YVZhbHVlcyh7ZmllbGQ6dCxmaWVsZDI6ZS5maWVsZDIsZmllbGQzOmUuZmllbGQzLGZpZWxkRGVsaW1pdGVyOmUuZmllbGREZWxpbWl0ZXIsdmFsdWVFeHByZXNzaW9uOnMsc2NhbGU6cn0pLG89SShuKTtyZXR1cm4gVChvLGksYSxlLmZpZWxkRGVsaW1pdGVyKX1hc3luYyBjcmVhdGVDbGFzc0JyZWFrc1Jlc3BvbnNlKGUpe2NvbnN0e2ZpZWxkOnQsdmFsdWVFeHByZXNzaW9uOnMsbm9ybWFsaXphdGlvbkZpZWxkOmksbm9ybWFsaXphdGlvblR5cGU6YSxub3JtYWxpemF0aW9uVG90YWw6cixjbGFzc2lmaWNhdGlvbk1ldGhvZDpuLHN0YW5kYXJkRGV2aWF0aW9uSW50ZXJ2YWw6byxtaW5WYWx1ZTpsLG1heFZhbHVlOnUsbnVtQ2xhc3NlczpjLHNjYWxlOmR9PWUsbT1hd2FpdCB0aGlzLl9nZXREYXRhVmFsdWVzKHtmaWVsZDp0LHZhbHVlRXhwcmVzc2lvbjpzLG5vcm1hbGl6YXRpb25GaWVsZDppLG5vcm1hbGl6YXRpb25UeXBlOmEsbm9ybWFsaXphdGlvblRvdGFsOnIsc2NhbGU6ZH0pLGg9VihtLHtmaWVsZDp0LG5vcm1hbGl6YXRpb25GaWVsZDppLG5vcm1hbGl6YXRpb25UeXBlOmEsbm9ybWFsaXphdGlvblRvdGFsOnIsY2xhc3NpZmljYXRpb25NZXRob2Q6bixzdGFuZGFyZERldmlhdGlvbkludGVydmFsOm8sbWluVmFsdWU6bCxtYXhWYWx1ZTp1LG51bUNsYXNzZXM6Y30pO3JldHVybiBGKGgsbil9YXN5bmMgY3JlYXRlSGlzdG9ncmFtUmVzcG9uc2UoZSl7Y29uc3R7ZmllbGQ6dCx2YWx1ZUV4cHJlc3Npb246cyxub3JtYWxpemF0aW9uRmllbGQ6aSxub3JtYWxpemF0aW9uVHlwZTphLG5vcm1hbGl6YXRpb25Ub3RhbDpyLGNsYXNzaWZpY2F0aW9uTWV0aG9kOm4sc3RhbmRhcmREZXZpYXRpb25JbnRlcnZhbDpvLG1pblZhbHVlOmwsbWF4VmFsdWU6dSxudW1CaW5zOmMsc2NhbGU6ZH09ZSxtPWF3YWl0IHRoaXMuX2dldERhdGFWYWx1ZXMoe2ZpZWxkOnQsdmFsdWVFeHByZXNzaW9uOnMsbm9ybWFsaXphdGlvbkZpZWxkOmksbm9ybWFsaXphdGlvblR5cGU6YSxub3JtYWxpemF0aW9uVG90YWw6cixzY2FsZTpkfSk7cmV0dXJuIFMobSx7ZmllbGQ6dCxub3JtYWxpemF0aW9uRmllbGQ6aSxub3JtYWxpemF0aW9uVHlwZTphLG5vcm1hbGl6YXRpb25Ub3RhbDpyLGNsYXNzaWZpY2F0aW9uTWV0aG9kOm4sc3RhbmRhcmREZXZpYXRpb25JbnRlcnZhbDpvLG1pblZhbHVlOmwsbWF4VmFsdWU6dSxudW1CaW5zOmN9KX1fc29ydEZlYXR1cmVzKGUsdCxzKXtpZihlLmxlbmd0aD4xJiZ0JiZ0Lmxlbmd0aClmb3IoY29uc3QgaSBvZiB0LnJldmVyc2UoKSl7Y29uc3QgdD1pLnNwbGl0KFwiIFwiKSxhPXRbMF0scj10aGlzLmZpZWxkc0luZGV4LmdldChhKSxuPSEhdFsxXSYmXCJkZXNjXCI9PT10WzFdLnRvTG93ZXJDYXNlKCksbz1fKHI/LnR5cGUsbik7ZS5zb3J0KCgoZSx0KT0+e2NvbnN0IGk9cyhlLGEsciksbj1zKHQsYSxyKTtyZXR1cm4gbyhpLG4pfSkpfX1fY3JlYXRlRmVhdHVyZVF1ZXJ5UmVzcG9uc2UoZSl7Y29uc3QgdD10aGlzLml0ZW1zLHtnZW9tZXRyeVR5cGU6cyxoYXNNOmksaGFzWjpyLG9iamVjdElkRmllbGQ6bixzcGF0aWFsUmVmZXJlbmNlOm99PXRoaXMse291dEZpZWxkczpsLG91dFNSOnUscXVhbnRpemF0aW9uUGFyYW1ldGVyczpjLHJlc3VsdFJlY29yZENvdW50Om0scmVzdWx0T2Zmc2V0OmgscmV0dXJuWjpnLHJldHVybk06Zn09ZSxwPW51bGwhPW0mJnQubGVuZ3RoPihofHwwKSttLHk9bCYmKGwuaW5jbHVkZXMoXCIqXCIpP1suLi50aGlzLmZpZWxkc0luZGV4LmZpZWxkc106bC5tYXAoKGU9PnRoaXMuZmllbGRzSW5kZXguZ2V0KGUpKSkpO3JldHVybntleGNlZWRlZFRyYW5zZmVyTGltaXQ6cCxmZWF0dXJlczp0aGlzLl9jcmVhdGVGZWF0dXJlcyhlLHQpLGZpZWxkczp5LGdlb21ldHJ5VHlwZTpzLGhhc006aSYmZixoYXNaOnImJmcsb2JqZWN0SWRGaWVsZE5hbWU6bixzcGF0aWFsUmVmZXJlbmNlOmQodXx8byksdHJhbnNmb3JtOmMmJmEoYyl8fG51bGx9fV9jcmVhdGVGZWF0dXJlcyhlLHQpe2NvbnN0IHM9bmV3IG8oZSx0aGlzLmZlYXR1cmVBZGFwdGVyLHRoaXMuZmllbGRzSW5kZXgpLHtoYXNNOmksaGFzWjpyfT10aGlzLHtvcmRlckJ5RmllbGRzOm4scXVhbnRpemF0aW9uUGFyYW1ldGVyczpsLHJldHVybkdlb21ldHJ5OnUscmV0dXJuQ2VudHJvaWQ6YyxtYXhBbGxvd2FibGVPZmZzZXQ6ZCxyZXN1bHRPZmZzZXQ6ZyxyZXN1bHRSZWNvcmRDb3VudDpmLHJldHVyblo6cD0hMSxyZXR1cm5NOnk9ITF9PWUseD1yJiZwLEk9aSYmeTtsZXQgVD1bXSxWPTA7Y29uc3QgRj1bLi4udF07aWYodGhpcy5fc29ydEZlYXR1cmVzKEYsbiwoKGUsdCxpKT0+cy5nZXRGaWVsZFZhbHVlKGUsdCxpKSkpLHV8fGMpe2NvbnN0IGU9YShsKT8/dm9pZCAwO2lmKHUmJiFjKWZvcihjb25zdCB0IG9mIEYpVFtWKytdPXthdHRyaWJ1dGVzOnMuZ2V0QXR0cmlidXRlcyh0KSxnZW9tZXRyeTptKHRoaXMuZ2VvbWV0cnlUeXBlLHRoaXMuaGFzWix0aGlzLmhhc00sdGhpcy5mZWF0dXJlQWRhcHRlci5nZXRHZW9tZXRyeSh0KSxkLGUseCxJKX07ZWxzZSBpZighdSYmYylmb3IoY29uc3QgdCBvZiBGKVRbVisrXT17YXR0cmlidXRlczpzLmdldEF0dHJpYnV0ZXModCksY2VudHJvaWQ6aCh0aGlzLHRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0Q2VudHJvaWQodCx0aGlzKSxlKX07ZWxzZSBmb3IoY29uc3QgdCBvZiBGKVRbVisrXT17YXR0cmlidXRlczpzLmdldEF0dHJpYnV0ZXModCksY2VudHJvaWQ6aCh0aGlzLHRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0Q2VudHJvaWQodCx0aGlzKSxlKSxnZW9tZXRyeTptKHRoaXMuZ2VvbWV0cnlUeXBlLHRoaXMuaGFzWix0aGlzLmhhc00sdGhpcy5mZWF0dXJlQWRhcHRlci5nZXRHZW9tZXRyeSh0KSxkLGUseCxJKX19ZWxzZSBmb3IoY29uc3QgYSBvZiBGKXtjb25zdCBlPXMuZ2V0QXR0cmlidXRlcyhhKTtlJiYoVFtWKytdPXthdHRyaWJ1dGVzOmV9KX1jb25zdCBTPWd8fDA7aWYobnVsbCE9Zil7Y29uc3QgZT1TK2Y7VD1ULnNsaWNlKFMsTWF0aC5taW4oVC5sZW5ndGgsZSkpfXJldHVybiBUfV9jcmVhdGVFeGNlZWRzTGltaXRRdWVyeVJlc3BvbnNlKGUpe2xldCB0PSExLHM9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGk9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGE9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO2Zvcihjb25zdCByIG9mIGUub3V0U3RhdGlzdGljcz8/W10paWYoXCJleGNlZWRzbGltaXRcIj09PXIuc3RhdGlzdGljVHlwZSl7cz1udWxsIT1yLm1heFBvaW50Q291bnQ/ci5tYXhQb2ludENvdW50Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxpPW51bGwhPXIubWF4UmVjb3JkQ291bnQ/ci5tYXhSZWNvcmRDb3VudDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksYT1udWxsIT1yLm1heFZlcnRleENvdW50P3IubWF4VmVydGV4Q291bnQ6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO2JyZWFrfWlmKFwiZXNyaUdlb21ldHJ5UG9pbnRcIj09PXRoaXMuZ2VvbWV0cnlUeXBlKXQ9dGhpcy5pdGVtcy5sZW5ndGg+cztlbHNlIGlmKHRoaXMuaXRlbXMubGVuZ3RoPmkpdD0hMDtlbHNle2NvbnN0IGU9Yih0aGlzLmhhc1osdGhpcy5oYXNNKSxzPXRoaXMuZmVhdHVyZUFkYXB0ZXI7dD10aGlzLml0ZW1zLnJlZHVjZSgoKGUsdCk9Pntjb25zdCBpPXMuZ2V0R2VvbWV0cnkodCk7cmV0dXJuIGUrKG51bGwhPWkmJmkuY29vcmRzLmxlbmd0aHx8MCl9KSwwKS9lPmF9cmV0dXJue2ZpZWxkczpbe25hbWU6XCJleGNlZWRzbGltaXRcIix0eXBlOlwiZXNyaUZpZWxkVHlwZUludGVnZXJcIixhbGlhczpcImV4Y2VlZHNsaW1pdFwiLHNxbFR5cGU6XCJzcWxUeXBlSW50ZWdlclwiLGRvbWFpbjpudWxsLGRlZmF1bHRWYWx1ZTpudWxsfV0sZmVhdHVyZXM6W3thdHRyaWJ1dGVzOntleGNlZWRzbGltaXQ6TnVtYmVyKHQpfX1dfX1hc3luYyBfY3JlYXRlU3RhdGlzdGljc1F1ZXJ5UmVzcG9uc2UoZSl7Y29uc3QgdD17YXR0cmlidXRlczp7fX0scz1bXSxpPW5ldyBNYXAsYT1uZXcgTWFwLHI9bmV3IE1hcCxuPW5ldyBNYXAsbD1uZXcgbyhlLHRoaXMuZmVhdHVyZUFkYXB0ZXIsdGhpcy5maWVsZHNJbmRleCksdT1lLm91dFN0YXRpc3RpY3Mse2dyb3VwQnlGaWVsZHNGb3JTdGF0aXN0aWNzOmMsaGF2aW5nOmQsb3JkZXJCeUZpZWxkczptfT1lLGg9YyYmYy5sZW5ndGgsZz0hIWgsZj1nP2NbMF06bnVsbCxwPWcmJiF0aGlzLmZpZWxkc0luZGV4LmdldChmKTtmb3IoY29uc3QgbyBvZiB1Pz9bXSl7Y29uc3R7b3V0U3RhdGlzdGljRmllbGROYW1lOmUsc3RhdGlzdGljVHlwZTp1fT1vLG09byx5PVwiZXhjZWVkc2xpbWl0XCIhPT11P28ub25TdGF0aXN0aWNGaWVsZDp2b2lkIDAseD1cInBlcmNlbnRpbGVfZGlzY1wiPT09dXx8XCJwZXJjZW50aWxlX2NvbnRcIj09PXUsST1cIkVudmVsb3BlQWdncmVnYXRlXCI9PT11fHxcIkNlbnRyb2lkQWdncmVnYXRlXCI9PT11fHxcIkNvbnZleEh1bGxBZ2dyZWdhdGVcIj09PXUsVD1nJiYxPT09aCYmKHk9PT1mfHxwKSYmXCJjb3VudFwiPT09dTtpZihnKXtpZighci5oYXMoeSkpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgb2YgYyl7Y29uc3Qgcz10aGlzLl9nZXRBdHRyaWJ1dGVWYWx1ZXMobCx0LGkpO2UucHVzaChzKX1yLnNldCh5LHRoaXMuX2NhbGN1bGF0ZVVuaXF1ZVZhbHVlcyhlLCFJJiZsLnJldHVybkRpc3RpbmN0VmFsdWVzKSl9Y29uc3QgdD1yLmdldCh5KTtmb3IoY29uc3QgcyBpbiB0KXtjb25zdHtjb3VudDphLGRhdGE6cixpdGVtczpvLGl0ZW1Qb3NpdGlvbnM6dX09dFtzXSxoPXIuam9pbihcIixcIik7aWYoIWR8fGwudmFsaWRhdGVJdGVtcyhvLGQpKXtjb25zdCB0PW4uZ2V0KGgpfHx7YXR0cmlidXRlczp7fX07aWYoSSl7dC5hZ2dyZWdhdGVHZW9tZXRyaWVzfHwodC5hZ2dyZWdhdGVHZW9tZXRyaWVzPXt9KTtjb25zdHthZ2dyZWdhdGVHZW9tZXRyaWVzOmUsb3V0U3RhdGlzdGljRmllbGROYW1lOnN9PWF3YWl0IHRoaXMuX2dldEFnZ3JlZ2F0ZUdlb21ldHJ5KG0sbyk7dC5hZ2dyZWdhdGVHZW9tZXRyaWVzW3NdPWV9ZWxzZXtsZXQgcz1udWxsO2lmKFQpcz1hO2Vsc2V7Y29uc3QgZT10aGlzLl9nZXRBdHRyaWJ1dGVWYWx1ZXMobCx5LGkpLHQ9dS5tYXAoKHQ9PmVbdF0pKTtzPXgmJlwic3RhdGlzdGljUGFyYW1ldGVyc1wiaW4gbT90aGlzLl9nZXRQZXJjZW50aWxlVmFsdWUobSx0KTp0aGlzLl9nZXRTdGF0aXN0aWNWYWx1ZShtLHQsbnVsbCxsLnJldHVybkRpc3RpbmN0VmFsdWVzKX10LmF0dHJpYnV0ZXNbZV09c31sZXQgcz0wO2MuZm9yRWFjaCgoKGUsaSk9PnQuYXR0cmlidXRlc1t0aGlzLmZpZWxkc0luZGV4LmdldChlKT9lOlwiRVhQUl9cIisgKytzXT1yW2ldKSksbi5zZXQoaCx0KX19fWVsc2UgaWYoSSl7dC5hZ2dyZWdhdGVHZW9tZXRyaWVzfHwodC5hZ2dyZWdhdGVHZW9tZXRyaWVzPXt9KTtjb25zdHthZ2dyZWdhdGVHZW9tZXRyaWVzOmUsb3V0U3RhdGlzdGljRmllbGROYW1lOnN9PWF3YWl0IHRoaXMuX2dldEFnZ3JlZ2F0ZUdlb21ldHJ5KG0sdGhpcy5pdGVtcyk7dC5hZ2dyZWdhdGVHZW9tZXRyaWVzW3NdPWV9ZWxzZXtjb25zdCBzPXRoaXMuX2dldEF0dHJpYnV0ZVZhbHVlcyhsLHksaSk7dC5hdHRyaWJ1dGVzW2VdPXgmJlwic3RhdGlzdGljUGFyYW1ldGVyc1wiaW4gbT90aGlzLl9nZXRQZXJjZW50aWxlVmFsdWUobSxzKTp0aGlzLl9nZXRTdGF0aXN0aWNWYWx1ZShtLHMsYSxsLnJldHVybkRpc3RpbmN0VmFsdWVzKX1zLnB1c2goe25hbWU6ZSxhbGlhczplLHR5cGU6XCJlc3JpRmllbGRUeXBlRG91YmxlXCJ9KX1jb25zdCB5PWc/QXJyYXkuZnJvbShuLnZhbHVlcygpKTpbdF07cmV0dXJuIHRoaXMuX3NvcnRGZWF0dXJlcyh5LG0sKChlLHQpPT5lLmF0dHJpYnV0ZXNbdF0pKSx7ZmllbGRzOnMsZmVhdHVyZXM6eX19YXN5bmMgX2dldEFnZ3JlZ2F0ZUdlb21ldHJ5KGEscil7Y29uc3R7Y29udmV4SHVsbDpuLHVuaW9uOm99PWF3YWl0IGltcG9ydChcIi4uLy4uLy4uL2dlb21ldHJ5L2dlb21ldHJ5RW5naW5lSlNPTi5qc1wiKSx7c3RhdGlzdGljVHlwZTpsLG91dFN0YXRpc3RpY0ZpZWxkTmFtZTp1fT1hLHtmZWF0dXJlQWRhcHRlcjpjLHNwYXRpYWxSZWZlcmVuY2U6ZCxnZW9tZXRyeVR5cGU6aCxoYXNaOmcsaGFzTTpmfT10aGlzLHA9ci5tYXAoKGU9Pm0oaCxnLGYsYy5nZXRHZW9tZXRyeShlKSkpKSx5PW4oZCxwLCEwKVswXSx4PXthZ2dyZWdhdGVHZW9tZXRyaWVzOm51bGwsb3V0U3RhdGlzdGljRmllbGROYW1lOm51bGx9O2lmKFwiRW52ZWxvcGVBZ2dyZWdhdGVcIj09PWwpe2NvbnN0IGU9eT9zKHkpOmkobyhkLHApKTt4LmFnZ3JlZ2F0ZUdlb21ldHJpZXM9ey4uLmUsc3BhdGlhbFJlZmVyZW5jZTpkfSx4Lm91dFN0YXRpc3RpY0ZpZWxkTmFtZT11fHxcImV4dGVudFwifWVsc2UgaWYoXCJDZW50cm9pZEFnZ3JlZ2F0ZVwiPT09bCl7Y29uc3Qgcz15P2UoeSk6dChpKG8oZCxwKSkpO3guYWdncmVnYXRlR2VvbWV0cmllcz17eDpzWzBdLHk6c1sxXSxzcGF0aWFsUmVmZXJlbmNlOmR9LHgub3V0U3RhdGlzdGljRmllbGROYW1lPXV8fFwiY2VudHJvaWRcIn1lbHNlXCJDb252ZXhIdWxsQWdncmVnYXRlXCI9PT1sJiYoeC5hZ2dyZWdhdGVHZW9tZXRyaWVzPXkseC5vdXRTdGF0aXN0aWNGaWVsZE5hbWU9dXx8XCJjb252ZXhIdWxsXCIpO3JldHVybiB4fV9nZXRTdGF0aXN0aWNWYWx1ZShlLHQscyxpKXtjb25zdHtvblN0YXRpc3RpY0ZpZWxkOmEsc3RhdGlzdGljVHlwZTpyfT1lO2xldCBuPW51bGw7bj1zPy5oYXMoYSk/cy5nZXQoYSk6Zyh0aGlzLmZpZWxkc0luZGV4LmdldChhKSk/cCh7dmFsdWVzOnQscmV0dXJuRGlzdGluY3Q6aX0pOnkoe3ZhbHVlczppP1suLi5uZXcgU2V0KHQpXTp0LG1pblZhbHVlOm51bGwsbWF4VmFsdWU6bnVsbCx1c2VTYW1wbGVTdGREZXY6ITB9KSxzJiZzLnNldChhLG4pO3JldHVybiBuW1widmFyXCI9PT1yP1widmFyaWFuY2VcIjpyXX1fZ2V0UGVyY2VudGlsZVZhbHVlKGUsdCl7Y29uc3R7b25TdGF0aXN0aWNGaWVsZDpzLHN0YXRpc3RpY1BhcmFtZXRlcnM6aSxzdGF0aXN0aWNUeXBlOmF9PWUse3ZhbHVlOnIsb3JkZXJCeTpufT1pLG89dGhpcy5maWVsZHNJbmRleC5nZXQocyk7cmV0dXJuIHYodCx7dmFsdWU6cixvcmRlckJ5Om4sZmllbGRUeXBlOm8/LnR5cGUsaXNEaXNjcmV0ZTpcInBlcmNlbnRpbGVfZGlzY1wiPT09YX0pfV9nZXRBdHRyaWJ1dGVWYWx1ZXMoZSx0LHMpe2lmKHMuaGFzKHQpKXJldHVybiBzLmdldCh0KTtjb25zdCBpPXRoaXMuZmllbGRzSW5kZXguZ2V0KHQpLGE9dGhpcy5pdGVtcy5tYXAoKHM9PmUuZ2V0RmllbGRWYWx1ZShzLHQsaSkpKTtyZXR1cm4gcy5zZXQodCxhKSxhfV9jYWxjdWxhdGVVbmlxdWVWYWx1ZXMoZSx0KXtjb25zdCBzPXt9LGk9dGhpcy5pdGVtcyxhPWkubGVuZ3RoO2ZvcihsZXQgcj0wO3I8YTtyKyspe2NvbnN0IGE9aVtyXSxuPVtdO2Zvcihjb25zdCB0IG9mIGUpbi5wdXNoKHRbcl0pO2NvbnN0IG89bi5qb2luKFwiLFwiKTtudWxsPT1zW29dP3Nbb109e2NvdW50OjEsZGF0YTpuLGl0ZW1zOlthXSxpdGVtUG9zaXRpb25zOltyXX06KHR8fHNbb10uY291bnQrKyxzW29dLml0ZW1zLnB1c2goYSksc1tvXS5pdGVtUG9zaXRpb25zLnB1c2gocikpfXJldHVybiBzfWFzeW5jIF9nZXREYXRhVmFsdWVzKGUpe2NvbnN0IHQ9bmV3IG8odGhpcy5xdWVyeSx0aGlzLmZlYXR1cmVBZGFwdGVyLHRoaXMuZmllbGRzSW5kZXgpLHt2YWx1ZUV4cHJlc3Npb246cyxzY2FsZTppfT1lLGE9cz97dmlld2luZ01vZGU6XCJtYXBcIixzY2FsZTppLHNwYXRpYWxSZWZlcmVuY2U6dGhpcy5xdWVyeS5vdXRTUnx8dGhpcy5zcGF0aWFsUmVmZXJlbmNlfTpudWxsO3JldHVybiBzP3QuZ2V0RXhwcmVzc2lvblZhbHVlcyh0aGlzLml0ZW1zLHMsYSx7Z2VvbWV0cnlUeXBlOnRoaXMuZ2VvbWV0cnlUeXBlLGhhc1o6dGhpcy5oYXNaLGhhc006dGhpcy5oYXNNfSk6dC5nZXREYXRhVmFsdWVzKHRoaXMuaXRlbXMse2ZpZWxkOmUuZmllbGQsZmllbGQyOmUuZmllbGQyLGZpZWxkMzplLmZpZWxkMyxmaWVsZERlbGltaXRlcjplLmZpZWxkRGVsaW1pdGVyLG5vcm1hbGl6YXRpb25GaWVsZDplLm5vcm1hbGl6YXRpb25GaWVsZCxub3JtYWxpemF0aW9uVHlwZTplLm5vcm1hbGl6YXRpb25UeXBlLG5vcm1hbGl6YXRpb25Ub3RhbDplLm5vcm1hbGl6YXRpb25Ub3RhbH0pfX1mdW5jdGlvbiBSKGUsdCxzLGkpe2NvbnN0IGE9aS54LXMueCxyPWkueS1zLnksbj1hKmErcipyLG89KHQueC1zLngpKmErKHQueS1zLnkpKnIsbD1NYXRoLm1pbigxLE1hdGgubWF4KDAsby9uKSk7ZS54PXMueCthKmwsZS55PXMueStyKmx9ZnVuY3Rpb24gYihlLHQpe3JldHVybiBlP3Q/NDozOnQ/MzoyfWNsYXNzIEF7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmNvb3Jkcz1lLHRoaXMuY29vcmRzSW5kZXg9dH1nZXQgeCgpe3JldHVybiB0aGlzLmNvb3Jkc1t0aGlzLmNvb3Jkc0luZGV4XX1nZXQgeSgpe3JldHVybiB0aGlzLmNvb3Jkc1t0aGlzLmNvb3Jkc0luZGV4KzFdfWdldCB6KCl7cmV0dXJuIHRoaXMuY29vcmRzW3RoaXMuY29vcmRzSW5kZXgrMl19fWV4cG9ydHt6IGFzIFF1ZXJ5RW5naW5lUmVzdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiB0KHQsZSxyKXtyZXR1cm57b2JqZWN0SWQ6dCx0YXJnZXQ6ZSxkaXN0YW5jZTpyLHR5cGU6XCJ2ZXJ0ZXhcIn19ZnVuY3Rpb24gZSh0LGUscixuLGQsYT0hMSl7cmV0dXJue29iamVjdElkOnQsdGFyZ2V0OmUsZGlzdGFuY2U6cix0eXBlOlwiZWRnZVwiLHN0YXJ0Om4sZW5kOmQsZHJhcGVkOmF9fWV4cG9ydHtlIGFzIG1ha2VFZGdlQ2FuZGlkYXRlLHQgYXMgbWFrZVZlcnRleENhbmRpZGF0ZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHtKU09OTWFwIGFzIHN9ZnJvbVwiLi4vLi4vLi4vY29yZS9qc29uTWFwLmpzXCI7aW1wb3J0e1doZXJlQ2xhdXNlQ2FjaGUgYXMgaX1mcm9tXCIuLi8uLi8uLi9jb3JlL3NxbC9XaGVyZUNsYXVzZUNhY2hlLmpzXCI7Y29uc3Qgbj1uZXcgaSg1MCw1MDApLHI9XCJmZWF0dXJlLXN0b3JlOnVuc3VwcG9ydGVkLXF1ZXJ5XCIsdD1cIiBhcyBcIixvPW5ldyBzKHtlc3JpRmllbGRUeXBlU3RyaW5nOlwic3RyaW5nXCJ9KSxhPW5ldyBzKHtlc3JpRmllbGRUeXBlT0lEOlwib2lkXCIsZXNyaUZpZWxkVHlwZVNtYWxsSW50ZWdlcjpcInNtYWxsLWludGVnZXJcIixlc3JpRmllbGRUeXBlSW50ZWdlcjpcImludGVnZXJcIixlc3JpRmllbGRUeXBlU2luZ2xlOlwic2luZ2xlXCIsZXNyaUZpZWxkVHlwZURvdWJsZTpcImRvdWJsZVwiLGVzcmlGaWVsZFR5cGVMb25nOlwibG9uZ1wifSksbD1uZXcgcyh7ZXNyaUZpZWxkVHlwZURhdGU6XCJkYXRlXCJ9KSxkPW5ldyBzKHtlc3JpRmllbGRUeXBlR1VJRDpcImd1aWRcIixlc3JpRmllbGRUeXBlR2xvYmFsSWQ6XCJnbG9iYWwtaWRcIn0pLHA9bmV3IFNldChbLi4uYS5qc29uVmFsdWVzLC4uLmwuanNvblZhbHVlcywuLi5vLmpzb25WYWx1ZXMsLi4uZC5qc29uVmFsdWVzXSksdT1uZXcgSW50bC5MaXN0Rm9ybWF0KFwiZW4tVVNcIix7dHlwZTpcImNvbmp1bmN0aW9uXCJ9KS5mb3JtYXQoWy4uLmEuYXBpVmFsdWVzLC4uLmwuYXBpVmFsdWVzLC4uLm8uYXBpVmFsdWVzLC4uLmQuYXBpVmFsdWVzXSk7ZnVuY3Rpb24gZyhzLGksbj17fSl7Y29uc3QgdD15KHMsaSk7aWYoIXQpdGhyb3cgbmV3IGUocixcImludmFsaWQgU1FMIGV4cHJlc3Npb25cIix7ZXhwcmVzc2lvbjpzfSk7Y29uc3Qgbz1uLmV4cHJlc3Npb25OYW1lfHxcImV4cHJlc3Npb25cIjtpZihuLnZhbGlkYXRlU3RhbmRhcmRpemVkJiYhdC5pc1N0YW5kYXJkaXplZCl0aHJvdyBuZXcgZShyLGAke299IGlzIG5vdCBzdGFuZGFyZGAse2V4cHJlc3Npb246c30pO2lmKG4udmFsaWRhdGVBZ2dyZWdhdGUmJiF0LmlzQWdncmVnYXRlKXRocm93IG5ldyBlKHIsYCR7b30gZG9lcyBub3QgY29udGFpbiBhIHZhbGlkIGFnZ3JlZ2F0ZSBmdW5jdGlvbmAse2V4cHJlc3Npb246c30pO3JldHVybiB0LmZpZWxkTmFtZXN9ZnVuY3Rpb24gYyhlLHMsaSl7aWYoIXMpcmV0dXJuITA7Y29uc3Qgbj1cIndoZXJlIGNsYXVzZVwiLHI9ZyhzLGUse3ZhbGlkYXRlU3RhbmRhcmRpemVkOiEwLGV4cHJlc3Npb25OYW1lOm59KTtyZXR1cm4gbShlLHIse2V4cHJlc3Npb25OYW1lOm4scXVlcnk6aX0pLHgoZSxyLHtleHByZXNzaW9uTmFtZTpuLHF1ZXJ5Oml9KSwhMH1mdW5jdGlvbiBmKHMsaSx0LG8pe2lmKCFpKXJldHVybiEwO2NvbnN0IGE9XCJoYXZpbmdcIixsPWcoaSxzLHt2YWxpZGF0ZUFnZ3JlZ2F0ZTohMCxleHByZXNzaW9uTmFtZTphfSk7bShzLGwse2V4cHJlc3Npb25OYW1lOmEscXVlcnk6b30pLHgocyxsLHtleHByZXNzaW9uTmFtZTphLHF1ZXJ5Om99KTtjb25zdCBkPW4uZ2V0KGkscykscD1kPy5nZXRFeHByZXNzaW9ucygpLmV2ZXJ5KChlPT57Y29uc3R7YWdncmVnYXRlVHlwZTppLGZpZWxkOm59PWUscj1zLmdldChuKT8ubmFtZTtyZXR1cm4gdC5zb21lKChlPT57Y29uc3R7b25TdGF0aXN0aWNGaWVsZDpuLHN0YXRpc3RpY1R5cGU6dH09ZSxvPXMuZ2V0KG4pPy5uYW1lO3JldHVybiBvPT09ciYmdC50b0xvd2VyQ2FzZSgpLnRyaW0oKT09PWl9KSl9KSk7aWYoIXApdGhyb3cgbmV3IGUocixcImV4cHJlc3Npb25zIGluIGhhdmluZyBzaG91bGQgYWxzbyBleGlzdCBpbiBvdXRTdGF0aXN0aWNzXCIse2hhdmluZzppfSk7cmV0dXJuITB9ZnVuY3Rpb24geShlLHMpe3JldHVybiBlP24uZ2V0KGUscyk6bnVsbH1mdW5jdGlvbiBtKGUscyxpPXt9KXtpLmVycm9yTWVzc2FnZXx8KGkuZXJyb3JNZXNzYWdlPWkuZXhwcmVzc2lvbk5hbWU/YCR7aS5leHByZXNzaW9uTmFtZX0gY29udGFpbnMgaW52YWxpZCBmaWVsZHNgOlwiRmllbGRzIGFyZSBpbnZhbGlkXCIpLGgoZSxzLCgoZSxzKT0+cy5oYXMoZSkpLGkpfWZ1bmN0aW9uIHgoZSxzLGk9e30pe2kuZXJyb3JNZXNzYWdlfHwoaS5lcnJvck1lc3NhZ2U9aS5leHByZXNzaW9uTmFtZT9gJHtpLmV4cHJlc3Npb25OYW1lfSBvbmx5IHN1cHBvcnRzICR7dX0gZmllbGQgdHlwZXNgOmBPbmx5ICR7dX0gZmllbGQgdHlwZXMgYXJlIHN1cHBvcnRlZGApLGgoZSxzLCgoZSxzKT0+IUYoZSxzKSksaSl9ZnVuY3Rpb24gaChzLGksbix0PXt9KXtjb25zdCBvPXQudmVyaWZ5RXhwcmVzc2lvbj8/ITAsYT1bXTtmb3IoY29uc3QgZSBvZiBpKXtjb25zdCBpPW4oZSxzKTtpZihcIipcIiE9PWUmJiFpKWlmKG8pe2NvbnN0IGk9dyhlKTt0cnl7aChzLGcoaSxzLHt2YWxpZGF0ZVN0YW5kYXJkaXplZDohMH0pLG4sdCl9Y2F0Y2gobCl7Y29uc3Qgcz1sPy5kZXRhaWxzO2lmKHM/LmV4cHJlc3Npb24pdGhyb3cgbDtzPy5pbnZhbGlkRmllbGRzP2EucHVzaCguLi5zLmludmFsaWRGaWVsZHMpOmEucHVzaChlKX19ZWxzZSBhLnB1c2goZSl9aWYoYS5sZW5ndGgpdGhyb3cgbmV3IGUocix0LmVycm9yTWVzc2FnZSx7aW52YWxpZEZpZWxkczphLHF1ZXJ5OnQucXVlcnl9KX1mdW5jdGlvbiB3KGUpe3JldHVybiBlLnNwbGl0KHQpWzBdfWZ1bmN0aW9uIHYoZSl7cmV0dXJuIGUuc3BsaXQodClbMV19ZnVuY3Rpb24gRihlLHMsaT1wKXtjb25zdCBuPXMuZ2V0KGUpO3JldHVybiEhbiYmIWkuaGFzKG4udHlwZSl9ZXhwb3J0e3YgYXMgZ2V0QWxpYXNGcm9tRmllbGROYW1lLHcgYXMgZ2V0RXhwcmVzc2lvbkZyb21GaWVsZE5hbWUseSBhcyBnZXRXaGVyZUNsYXVzZSxGIGFzIGhhc0ludmFsaWRGaWVsZFR5cGUsbCBhcyB2YWxpZERhdGVUeXBlc0tlYmFiRGljdCxkIGFzIHZhbGlkR3VpZFR5cGVzS2ViYWJEaWN0LGEgYXMgdmFsaWROdW1lcmljVHlwZXNLZWJhYkRpY3QsbyBhcyB2YWxpZFN0cmluZ1R5cGVzS2ViYWJEaWN0LHggYXMgdmFsaWRhdGVGaWVsZFR5cGVzLG0gYXMgdmFsaWRhdGVGaWVsZHMsZiBhcyB2YWxpZGF0ZUhhdmluZyxjIGFzIHZhbGlkYXRlV2hlcmV9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9