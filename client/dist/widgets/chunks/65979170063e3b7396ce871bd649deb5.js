"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_arcgis_core_symbols_support_jsonUtils_js-node_modules_arcgis_core_symbol-0d30ee"],{

/***/ "./node_modules/@arcgis/core/support/featureFlags.js":
/*!***********************************************************!*\
  !*** ./node_modules/@arcgis/core/support/featureFlags.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "direct3DObjectFeatureLayerDisplayEnabled": () => (/* binding */ a),
/* harmony export */   "disableDirect3DObjectFeatureLayerDisplay": () => (/* binding */ i),
/* harmony export */   "disableI3SPatching": () => (/* binding */ c),
/* harmony export */   "disableIDBCache": () => (/* binding */ b),
/* harmony export */   "disableSceneLayerEditing": () => (/* binding */ s),
/* harmony export */   "enableDirect3DObjectFeatureLayerDisplay": () => (/* binding */ t),
/* harmony export */   "enableI3SPatching": () => (/* binding */ d),
/* harmony export */   "enableSceneLayerEditing": () => (/* binding */ l),
/* harmony export */   "enableWebStyleForceWOSR": () => (/* binding */ e),
/* harmony export */   "i3sPatchingEnabled": () => (/* binding */ r),
/* harmony export */   "sceneLayerEditingEnabled": () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const e=()=>!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("enable-feature:force-wosr"),a=()=>!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("enable-feature:direct-3d-object-feature-layer-display"),t=()=>_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"].add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),i=()=>_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"].add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),r=()=>!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("enable-i3s-patching"),d=()=>_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"].add("enable-i3s-patching",!0,!0,!0),c=()=>_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"].add("enable-i3s-patching",!1,!0,!0),n=()=>!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("enable-feature:SceneLayer-editing"),l=(e="i3s-patching")=>{switch(c(),i(),_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"].add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":t();break;case"i3s-patching":d()}},s=()=>{c(),i(),_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"].add("enable-feature:SceneLayer-editing",!1,!0,!0)},b=()=>_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"].add("disable-feature:idb-cache",!0,!0,!0);l("i3s-patching");


/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/support/jsonUtils.js":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/support/jsonUtils.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fromJSON": () => (/* binding */ b),
/* harmony export */   "write": () => (/* binding */ l),
/* harmony export */   "writeLabelSymbol": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../symbols.js */ "./node_modules/@arcgis/core/symbols.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../layers/support/layerUtils.js */ "./node_modules/@arcgis/core/layers/support/layerUtils.js");
/* harmony import */ var _Symbol3D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Symbol3D.js */ "./node_modules/@arcgis/core/symbols/Symbol3D.js");
/* harmony import */ var _symbolConversion_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./symbolConversion.js */ "./node_modules/@arcgis/core/symbols/support/symbolConversion.js");
/* harmony import */ var _WebStyleSymbol_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../WebStyleSymbol.js */ "./node_modules/@arcgis/core/symbols/WebStyleSymbol.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function l(o,e,n,t){const s=a(o,{},{context:t,isLabelSymbol:!1});null!=s&&(e[n]=s)}function i(o,e,n,t){const s=a(o,{},{context:t,isLabelSymbol:!0});null!=s&&(e[n]=s)}function m(o){return o instanceof _Symbol3D_js__WEBPACK_IMPORTED_MODULE_3__["default"]||o instanceof _WebStyleSymbol_js__WEBPACK_IMPORTED_MODULE_5__["default"]}function a(o,t,r){if(null==o)return null;const{context:l,isLabelSymbol:i}=r,a=l?.origin,b=l?.messages;if("web-scene"===a&&!m(o)){const n=(0,_symbolConversion_js__WEBPACK_IMPORTED_MODULE_4__.to3D)(o,{retainCIM:!0,hasLabelingContext:i});return null!=n.symbol?n.symbol.write(t,l):(b?.push(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("symbol:unsupported",`Symbols of type '${o.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:o,context:l,error:n.error})),null)}return("web-map"===a||"portal-item"===a&&!(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_2__.isSceneServiceLayer)(l?.layer))&&m(o)?(b?.push(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("symbol:unsupported",`Symbols of type '${o.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:o,context:l})),null):o.write(t,l)}function b(e,n){return (0,_symbols_js__WEBPACK_IMPORTED_MODULE_0__.readSymbol)(e,null,n)}


/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/support/styleUtils.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/support/styleUtils.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Style2DUrlTemplate": () => (/* binding */ w),
/* harmony export */   "cachedStyles": () => (/* binding */ u),
/* harmony export */   "cleanupStyleUtilsCache": () => (/* binding */ m),
/* harmony export */   "fetchStyle": () => (/* binding */ c),
/* harmony export */   "makeCIMSymbolRef": () => (/* binding */ p),
/* harmony export */   "requestJSON": () => (/* binding */ b),
/* harmony export */   "symbolUrlFromStyleItem": () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../portal/Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/* harmony import */ var _portal_PortalQueryParams_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../portal/PortalQueryParams.js */ "./node_modules/@arcgis/core/portal/PortalQueryParams.js");
/* harmony import */ var _support_featureFlags_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../support/featureFlags.js */ "./node_modules/@arcgis/core/support/featureFlags.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let u={};async function f(e,t){try{return{data:(await b(e,t)).data,baseUrl:(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.removeFile)(e),styleUrl:e}}catch(o){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAbortError)(o),null}}function i(e,t,r){const o=null!=t.portal?t.portal:_portal_Portal_js__WEBPACK_IMPORTED_MODULE_4__["default"].getDefault();let s;const l=`${o.url} - ${o.user&&o.user.username} - ${e}`;return u[l]||(u[l]=y(e,o,r).then((e=>(s=e,e.fetchData()))).then((t=>({data:t,baseUrl:s.itemUrl??"",styleName:e})))),u[l]}function m(){u&&(u={})}function y(e,r,o){return r.load(o).then((()=>{const t=new _portal_PortalQueryParams_js__WEBPACK_IMPORTED_MODULE_5__["default"]({disableExtraQuery:!0,query:`owner:${h} AND type:${j} AND typekeywords:"${e}"`});return r.queryItems(t,o)})).then((({results:r})=>{let s=null;const n=e.toLowerCase();if(r&&Array.isArray(r))for(const e of r){const t=e.typeKeywords?.some((e=>e.toLowerCase()===n));if(t&&e.type===j&&e.owner===h){s=e;break}}if(!s)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(o)}))}function c(e,r,o){return e&&null!=e.styleUrl?f(e.styleUrl,o):e&&null!=e.styleName?i(e.styleName,r,o):Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function p(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function d(e,t,r=["gltf"]){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!(0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_6__.enableWebStyleForceWOSR)())for(const o of r){const t=e.formatInfos.find((e=>e.type===o));if(t)return t.href}return e.webRef}function b(t,r){const s={responseType:"json",query:{f:"json"},...r};return (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.normalize)(t),s)}const h="esri_en",j="Style",w="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";


/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/support/symbolConversion.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/support/symbolConversion.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "defaultTo3DOptions": () => (/* binding */ a),
/* harmony export */   "to3D": () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../symbols.js */ "./node_modules/@arcgis/core/symbols.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _WebStyleSymbol_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../WebStyleSymbol.js */ "./node_modules/@arcgis/core/symbols/WebStyleSymbol.js");
/* harmony import */ var _PointSymbol3D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../PointSymbol3D.js */ "./node_modules/@arcgis/core/symbols/PointSymbol3D.js");
/* harmony import */ var _SimpleLineSymbol_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../SimpleLineSymbol.js */ "./node_modules/@arcgis/core/symbols/SimpleLineSymbol.js");
/* harmony import */ var _LineSymbol3D_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../LineSymbol3D.js */ "./node_modules/@arcgis/core/symbols/LineSymbol3D.js");
/* harmony import */ var _SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../SimpleMarkerSymbol.js */ "./node_modules/@arcgis/core/symbols/SimpleMarkerSymbol.js");
/* harmony import */ var _PictureMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../PictureMarkerSymbol.js */ "./node_modules/@arcgis/core/symbols/PictureMarkerSymbol.js");
/* harmony import */ var _SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../SimpleFillSymbol.js */ "./node_modules/@arcgis/core/symbols/SimpleFillSymbol.js");
/* harmony import */ var _MeshSymbol3D_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../MeshSymbol3D.js */ "./node_modules/@arcgis/core/symbols/MeshSymbol3D.js");
/* harmony import */ var _PolygonSymbol3D_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../PolygonSymbol3D.js */ "./node_modules/@arcgis/core/symbols/PolygonSymbol3D.js");
/* harmony import */ var _TextSymbol_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../TextSymbol.js */ "./node_modules/@arcgis/core/symbols/TextSymbol.js");
/* harmony import */ var _LabelSymbol3D_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../LabelSymbol3D.js */ "./node_modules/@arcgis/core/symbols/LabelSymbol3D.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const a={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function S(S,c=a){if(!S)return{symbol:null};const{retainId:u=a.retainId,ignoreDrivers:d=a.ignoreDrivers,hasLabelingContext:j=a.hasLabelingContext,retainCIM:D=a.retainCIM}=c;let g=null;if((0,_symbols_js__WEBPACK_IMPORTED_MODULE_0__.isSymbol3D)(S)||S instanceof _WebStyleSymbol_js__WEBPACK_IMPORTED_MODULE_2__["default"])g=S.clone();else if("cim"===S.type){const o=S.data?.symbol?.type;if("CIMPointSymbol"!==o)return{error:new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${o||"unknown"}' is unsupported in 3D`,{symbol:S})};g=D?S.clone():_PointSymbol3D_js__WEBPACK_IMPORTED_MODULE_3__["default"].fromCIMSymbol(S)}else if(S instanceof _SimpleLineSymbol_js__WEBPACK_IMPORTED_MODULE_4__["default"])g=_LineSymbol3D_js__WEBPACK_IMPORTED_MODULE_5__["default"].fromSimpleLineSymbol(S);else if(S instanceof _SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_6__["default"])g=_PointSymbol3D_js__WEBPACK_IMPORTED_MODULE_3__["default"].fromSimpleMarkerSymbol(S);else if(S instanceof _PictureMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_7__["default"])g=_PointSymbol3D_js__WEBPACK_IMPORTED_MODULE_3__["default"].fromPictureMarkerSymbol(S);else if(S instanceof _SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_8__["default"])g=c.geometryType&&"mesh"===c.geometryType?_MeshSymbol3D_js__WEBPACK_IMPORTED_MODULE_9__["default"].fromSimpleFillSymbol(S):_PolygonSymbol3D_js__WEBPACK_IMPORTED_MODULE_10__["default"].fromSimpleFillSymbol(S);else{if(!(S instanceof _TextSymbol_js__WEBPACK_IMPORTED_MODULE_11__["default"]))return{error:new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${S.type||S.declaredClass}' is unsupported in 3D`,{symbol:S})};g=j?_LabelSymbol3D_js__WEBPACK_IMPORTED_MODULE_12__["default"].fromTextSymbol(S):_PointSymbol3D_js__WEBPACK_IMPORTED_MODULE_3__["default"].fromTextSymbol(S)}return u&&g&&"cim"!==g.type&&(g.id=S.id),d&&(0,_symbols_js__WEBPACK_IMPORTED_MODULE_0__.isSymbol3D)(g)&&g.symbolLayers.forEach((o=>o.ignoreDrivers=!0)),{symbol:g}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/HandleOwner.js */ "./node_modules/@arcgis/core/core/HandleOwner.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let s=class extends _core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_1__.HandleOwner{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({readOnly:!0})],s.prototype,"supportsTileUpdates",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"remoteClient",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"service",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)()],s.prototype,"spatialReference",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"tileInfo",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"tileStore",void 0),s=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.2d.layers.features.processors.BaseProcessor")],s);const p=s;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/processors/SymbolProcessor.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/processors/SymbolProcessor.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ I)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_BidiText_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/BidiText.js */ "./node_modules/@arcgis/core/core/BidiText.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../core/accessorSupport/diffUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../engine/webgl/DisplayId.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js");
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../engine/webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _engine_webgl_mesh_MeshData_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../engine/webgl/mesh/MeshData.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/MeshData.js");
/* harmony import */ var _engine_webgl_mesh_factories_WGLMeshFactory_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../engine/webgl/mesh/factories/WGLMeshFactory.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/factories/WGLMeshFactory.js");
/* harmony import */ var _engine_webgl_mesh_templates_WGLTemplateStore_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../engine/webgl/mesh/templates/WGLTemplateStore.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLTemplateStore.js");
/* harmony import */ var _engine_webgl_util_Matcher_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../engine/webgl/util/Matcher.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/util/Matcher.js");
/* harmony import */ var _textUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../textUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/textUtils.js");
/* harmony import */ var _BaseProcessor_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./BaseProcessor.js */ "./node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js");
/* harmony import */ var _support_ResourceManagerProxy_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../support/ResourceManagerProxy.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/ResourceManagerProxy.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function b(e,t){return(!e.minScale||e.minScale>=t)&&(!e.maxScale||e.maxScale<=t)}function S(e){const t=e.message,r={message:{data:{},tileKey:t.tileKey,tileKeyOrigin:t.tileKeyOrigin,version:t.version},transferList:new Array};for(const i in t.data){const e=i,a=t.data[e];if(r.message.data[e]=null,null!=a){const t=a.stride,i=a.indices.slice(0),o=a.vertices.slice(0),n=a.records.slice(0),l={stride:t,indices:i,vertices:o,records:n,metrics:(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_5__.applySome)(a.metrics,(e=>e.slice(0)))};r.transferList.push(i,o,n),r.message.data[e]=l}}return r}let w=class extends _BaseProcessor_js__WEBPACK_IMPORTED_MODULE_19__["default"]{constructor(){super(...arguments),this.type="symbol",this._matchers={feature:null,aggregate:null},this._bufferData=new Map,this._bufferIds=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))]),this._resourceManagerProxy=new _support_ResourceManagerProxy_js__WEBPACK_IMPORTED_MODULE_20__["default"](this.remoteClient)}destroy(){this._resourceManagerProxy.destroy()}get supportsTileUpdates(){return!0}forEachBufferId(e){this._bufferIds.forEach((t=>{t.forEach(e)}))}async update(e,t){const s=t.schema.processors[0];if("symbol"!==s.type)return;const r=(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_10__.diff)(this._schema,s);((0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_10__.hasDiff)(r,"mesh")||(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_10__.hasDiff)(r,"target"))&&(e.mesh=!0,e.why?.mesh.push("Symbology changed"),this._schema=s,this._factory=this._createFactory(s),this._factory.update(s,this.tileStore.tileScheme.tileInfo))}onTileMessage(e,t,s,r){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.throwIfAborted)(r),this._onTileData(e,t,s,r)}onTileClear(e,t){const s={clear:!0,end:t};return this._bufferData.delete(e.key.id),this._bufferIds.delete(e.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:s})}onTileError(e,t,s){const r=s.signal,i={tileKey:e.id,error:t};return this.remoteClient.invoke("tileRenderer.onTileError",i,{signal:r})}onTileUpdate(e){for(const t of e.removed)this._bufferData.has(t.key.id)&&this._bufferData.delete(t.key.id),this._bufferIds.has(t.key.id)&&this._bufferIds.delete(t.key.id);for(const t of e.added)this._bufferData.forEach((e=>{for(const s of e)s.message.tileKey===t.id&&this._updateTileMesh("append",t,S(s),[],!1,!1,null)}))}_addBufferData(e,t){this._bufferData.has(e)||this._bufferData.set(e,[]),this._bufferData.get(e)?.push(S(t))}_createFactory(e){const{geometryType:t,objectIdField:r,fields:i}=this.service,a=(e,t)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",e,t),o={geometryType:t,fields:i,spatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__["default"].fromJSON(this.spatialReference)},n=new _engine_webgl_mesh_templates_WGLTemplateStore_js__WEBPACK_IMPORTED_MODULE_16__.WGLTemplateStore(a,this.tileStore.tileScheme.tileInfo),{matcher:l,aggregateMatcher:d}=e.mesh;return this._store=n,this._matchers.feature=(0,_engine_webgl_util_Matcher_js__WEBPACK_IMPORTED_MODULE_17__.createMatcher)(l,n,o,this._resourceManagerProxy),this._matchers.aggregate=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_5__.applySome)(d,(e=>(0,_engine_webgl_util_Matcher_js__WEBPACK_IMPORTED_MODULE_17__.createMatcher)(e,n,o,this._resourceManagerProxy))),new _engine_webgl_mesh_factories_WGLMeshFactory_js__WEBPACK_IMPORTED_MODULE_15__.WGLMeshFactory(t,r,n)}async _onTileData(e,t,s,r){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.throwIfAborted)(r);const{type:a,addOrUpdate:o,remove:n,clear:l,end:c}=t,d=!!this._schema.mesh.sortKey;if(!o){const t={type:a,addOrUpdate:null,remove:n,clear:l,end:c,sort:d};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},r)}const h=this._processFeatures(e,o,s,r,t.status?.version);try{const s=await h;if(null==s){const t={type:a,addOrUpdate:null,remove:n,clear:l,end:c,sort:d};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},r)}const i=[];for(const t of s){let s=!1;const r=t.message.bufferIds,a=e.key.id,o=t.message.tileKey;if(a!==o&&null!=r){if(!this.tileStore.get(o)){this._addBufferData(a,t),i.push(t);continue}let e=this._bufferIds.get(o);e||(e=new Set,this._bufferIds.set(o,e));const n=Array.from(r);for(const t of n){if(e.has(t)){s=!0;break}e.add(t)}}s||(this._addBufferData(a,t),i.push(t))}await Promise.all(i.map((s=>{const i=e.key.id===s.message.tileKey,o=i?t.remove:[],n=i&&t.end;return this._updateTileMesh(a,e,s,o,n,!!t.clear,r.signal)})))}catch(f){this._handleError(e,f,r)}}async _updateTileMesh(e,t,r,a,o,n,l){const c=e,d=r.message.tileKey,h=!!this._schema.mesh.sortKey;d!==t.key.id&&(o=!1);const f={type:c,addOrUpdate:(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_5__.applySome)(r,(e=>e.message)),remove:a,clear:n,end:o,sort:h},u={transferList:(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_5__.applySome)(r,(e=>e.transferList))||[]||0,signal:l};return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.throwIfAborted)(u),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:d,data:f},u)}async _processFeatures(e,t,s,r,a){if(null==t||!t.hasFeatures)return null;const o={transform:e.transform,hasZ:!1,hasM:!1},n=this._factory,l={viewingMode:"",scale:e.scale},c=await this._matchers.feature,d=await this._matchers.aggregate;(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.throwIfAborted)(r);const h=this._getLabelInfos(e,t);return await n.analyze(t.getCursor(),this._resourceManagerProxy,c,d,o,l),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.throwIfAborted)(r),this._writeFeatureSet(e,t,o,h,n,s,a)}_writeFeatureSet(e,t,s,r,i,a,o){const n=t.getSize(),l=this._schema.mesh.matcher.symbologyType,c=new _engine_webgl_mesh_MeshData_js__WEBPACK_IMPORTED_MODULE_14__.MeshData(e.key.id,{features:n,records:n,metrics:0},l,a,l!==_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_13__.WGLSymbologyType.HEATMAP,o),d={viewingMode:"",scale:e.scale},u=t.getCursor();for(;u.next();)try{const t=u.getDisplayId(),a=null!=r?r.get(t):null;i.writeCursor(c,u,s,d,e.level,a,this._resourceManagerProxy)}catch(g){}const m=e.tileInfoView.tileInfo.isWrappable;return c.serialize(m)}_handleError(e,t,s){if(!(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.isAbortError)(t)){const r={tileKey:e.id,error:t.message};return this.remoteClient.invoke("tileRenderer.onTileError",r,{signal:s.signal})}return Promise.resolve()}_getLabelingSchemaForScale(e){const t=this._schema.mesh.labels;if(null==t)return null;if("subtype"===t.type){const s={type:"subtype",classes:{}};let r=!1;for(const i in t.classes){const a=t.classes[i].filter((t=>b(t,e.scale)));r=r||!!a.length,s.classes[i]=a}return r?s:null}const s=t.classes.filter((t=>b(t,e.scale)));return s.length?{type:"simple",classes:s}:null}_getLabels(e,t){if("subtype"===t.type){const s=this.service.subtypeField,i=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_5__.unwrapOrThrow)(s,"Expected to find subtype Field"),a=e.readAttribute(i);return null==a?[]:t.classes[a]??[]}return t.classes}_getLabelInfos(e,s){const r=this._getLabelingSchemaForScale(e);if(null==r)return null;const i=new Map,a=s.getCursor();for(;a.next();){const e=a.getDisplayId(),s=[],o=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_12__.isAggregateId)(e),n=o&&1!==a.readAttribute("cluster_count")?"aggregate":"feature",l=this._getLabels(a,r);for(const r of l){if(r.target!==n)continue;const i=a.getStorage(),l=o&&"feature"===n?i.getComputedStringAtIndex(a.readAttribute("referenceId"),r.fieldIndex):i.getComputedStringAtIndex(e,r.fieldIndex);if(!l)continue;const c=(0,_core_BidiText_js__WEBPACK_IMPORTED_MODULE_1__.bidiText)(l.toString()),d=c[0],h=c[1];this._store.getMosaicItem(r.symbol,(0,_textUtils_js__WEBPACK_IMPORTED_MODULE_18__.codepoints)(d)).then((e=>{s[r.index]={glyphs:e.glyphMosaicItems??[],rtl:h,index:r.index}}))}i.set(e,s)}return i}};w=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.2d.layers.features.processors.SymbolProcessor")],w);const I=w;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/support/ResourceManagerProxy.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/ResourceManagerProxy.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class t{constructor(e){this._remoteClient=e,this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){}async fetchResource(t,r){const s=this._resourceMap,i=s.get(t);if(i)return i;let n=this._inFlightResourceMap.get(t);if(n)return n;try{n=this._remoteClient.invoke("tileRenderer.fetchResource",{url:t},{...r}),this._inFlightResourceMap.set(t,n),n.then((e=>(this._inFlightResourceMap.delete(t),s.set(t,e),e)))}catch(o){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.isAbortError)(o)?null:{width:0,height:0}}return n}getResource(e){return this._resourceMap.get(e)??null}loadFont(e){return Promise.resolve(null)}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvNjU5NzkxNzAwNjNlM2I3Mzk2Y2U4NzFiZDY0OWRlYjUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDZ0MsY0FBYyx3REFBRyxzQ0FBc0Msd0RBQUcsZ0VBQWdFLHdEQUFPLHlFQUF5RSx3REFBTywyRUFBMkUsd0RBQUcsOEJBQThCLHdEQUFPLHVDQUF1Qyx3REFBTyx5Q0FBeUMsd0RBQUcsNkRBQTZELGVBQWUsd0RBQU8sa0RBQWtELDZCQUE2QixNQUFNLHdCQUF3QixRQUFRLFFBQVEsd0RBQU8sK0NBQStDLE9BQU8sd0RBQU8sdUNBQXVDLGtCQUFxWDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKOW1DO0FBQ0E7QUFDQTtBQUNBO0FBQ3lRLG9CQUFvQixjQUFjLEVBQUUsMkJBQTJCLEVBQUUsa0JBQWtCLG9CQUFvQixjQUFjLEVBQUUsMkJBQTJCLEVBQUUsa0JBQWtCLGNBQWMsb0JBQW9CLG9EQUFDLGVBQWUsMERBQUMsQ0FBQyxrQkFBa0IsdUJBQXVCLE1BQU0sMEJBQTBCLDZCQUE2QiwyQkFBMkIsUUFBUSwwREFBQyxJQUFJLGtDQUFrQyxFQUFFLHVEQUF1RCxzREFBQywwQ0FBMEMsZ0JBQWdCLG1HQUFtRyxpQ0FBaUMsU0FBUywwQ0FBMEMsa0ZBQUMsK0JBQStCLHNEQUFDLDBDQUEwQyxnQkFBZ0IscUhBQXFILG1CQUFtQixzQkFBc0IsZ0JBQWdCLE9BQU8sdURBQUMsV0FBa0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKanhDO0FBQ0E7QUFDQTtBQUNBO0FBQ29XLFNBQVMsc0JBQXNCLElBQUksT0FBTyxpQ0FBaUMsNkRBQUMsZ0JBQWdCLFNBQVMsT0FBTyx3RUFBQyxVQUFVLGtCQUFrQixnQ0FBZ0Msb0VBQVksR0FBRyxNQUFNLFdBQVcsT0FBTyxJQUFJLHlCQUF5QixJQUFJLEVBQUUsRUFBRSxzRUFBc0UseUNBQXlDLFVBQVUsYUFBYSxRQUFRLEVB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LDZCQUE2QixtQ0FBbUMsMERBQUMsZUFBZSxZQUFZLG1EQUFtRCxHQUFHLFdBQVcsV0FBVyxFQUFFLHVEQUFDLEVBQUUsc0ZBQUMsaUVBQWlFLFVBQStCOzs7Ozs7Ozs7Ozs7Ozs7O0FDSjUzTztBQUNBO0FBQ0E7QUFDQTtBQUNtRSxRQUFRLGVBQWUsMElBQTBJLFdBQVcseUJBQXlCLHFDQUFxQyxjQUFjLHVDQUF1QyxjQUFjLElBQUksMERBQTBELE1BQU0sRUFBRSxLQUFLLHFHQUFxRyxTQUFTLE9BQU8sbUVBQUMsVUFBVSxrQkFBa0IsU0FBUyxlQUFlLHNDQUFzQyxZQUFZLDhCQUFtRCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3N1cHBvcnQvZmVhdHVyZUZsYWdzLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3N5bWJvbHMvc3VwcG9ydC9qc29uVXRpbHMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvc3ltYm9scy9zdXBwb3J0L3N0eWxlVXRpbHMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvc3ltYm9scy9zdXBwb3J0L3N5bWJvbENvbnZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL2ZlYXR1cmVzL3Byb2Nlc3NvcnMvQmFzZVByb2Nlc3Nvci5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvZmVhdHVyZXMvcHJvY2Vzc29ycy9TeW1ib2xQcm9jZXNzb3IuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL2ZlYXR1cmVzL3N1cHBvcnQvUmVzb3VyY2VNYW5hZ2VyUHJveHkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBoYXMgZnJvbVwiLi4vY29yZS9oYXMuanNcIjtjb25zdCBlPSgpPT4hIWhhcyhcImVuYWJsZS1mZWF0dXJlOmZvcmNlLXdvc3JcIiksYT0oKT0+ISFoYXMoXCJlbmFibGUtZmVhdHVyZTpkaXJlY3QtM2Qtb2JqZWN0LWZlYXR1cmUtbGF5ZXItZGlzcGxheVwiKSx0PSgpPT5oYXMuYWRkKFwiZW5hYmxlLWZlYXR1cmU6ZGlyZWN0LTNkLW9iamVjdC1mZWF0dXJlLWxheWVyLWRpc3BsYXlcIiwhMCwhMCwhMCksaT0oKT0+aGFzLmFkZChcImVuYWJsZS1mZWF0dXJlOmRpcmVjdC0zZC1vYmplY3QtZmVhdHVyZS1sYXllci1kaXNwbGF5XCIsITEsITAsITApLHI9KCk9PiEhaGFzKFwiZW5hYmxlLWkzcy1wYXRjaGluZ1wiKSxkPSgpPT5oYXMuYWRkKFwiZW5hYmxlLWkzcy1wYXRjaGluZ1wiLCEwLCEwLCEwKSxjPSgpPT5oYXMuYWRkKFwiZW5hYmxlLWkzcy1wYXRjaGluZ1wiLCExLCEwLCEwKSxuPSgpPT4hIWhhcyhcImVuYWJsZS1mZWF0dXJlOlNjZW5lTGF5ZXItZWRpdGluZ1wiKSxsPShlPVwiaTNzLXBhdGNoaW5nXCIpPT57c3dpdGNoKGMoKSxpKCksaGFzLmFkZChcImVuYWJsZS1mZWF0dXJlOlNjZW5lTGF5ZXItZWRpdGluZ1wiLCEwLCEwLCEwKSxlKXtjYXNlXCJmZWF0dXJlLWxheWVyLXZpZXdcIjp0KCk7YnJlYWs7Y2FzZVwiaTNzLXBhdGNoaW5nXCI6ZCgpfX0scz0oKT0+e2MoKSxpKCksaGFzLmFkZChcImVuYWJsZS1mZWF0dXJlOlNjZW5lTGF5ZXItZWRpdGluZ1wiLCExLCEwLCEwKX0sYj0oKT0+aGFzLmFkZChcImRpc2FibGUtZmVhdHVyZTppZGItY2FjaGVcIiwhMCwhMCwhMCk7bChcImkzcy1wYXRjaGluZ1wiKTtleHBvcnR7YSBhcyBkaXJlY3QzRE9iamVjdEZlYXR1cmVMYXllckRpc3BsYXlFbmFibGVkLGkgYXMgZGlzYWJsZURpcmVjdDNET2JqZWN0RmVhdHVyZUxheWVyRGlzcGxheSxjIGFzIGRpc2FibGVJM1NQYXRjaGluZyxiIGFzIGRpc2FibGVJREJDYWNoZSxzIGFzIGRpc2FibGVTY2VuZUxheWVyRWRpdGluZyx0IGFzIGVuYWJsZURpcmVjdDNET2JqZWN0RmVhdHVyZUxheWVyRGlzcGxheSxkIGFzIGVuYWJsZUkzU1BhdGNoaW5nLGwgYXMgZW5hYmxlU2NlbmVMYXllckVkaXRpbmcsZSBhcyBlbmFibGVXZWJTdHlsZUZvcmNlV09TUixyIGFzIGkzc1BhdGNoaW5nRW5hYmxlZCxuIGFzIHNjZW5lTGF5ZXJFZGl0aW5nRW5hYmxlZH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3JlYWRTeW1ib2wgYXMgb31mcm9tXCIuLi8uLi9zeW1ib2xzLmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHtpc1NjZW5lU2VydmljZUxheWVyIGFzIG59ZnJvbVwiLi4vLi4vbGF5ZXJzL3N1cHBvcnQvbGF5ZXJVdGlscy5qc1wiO2ltcG9ydCB0IGZyb21cIi4uL1N5bWJvbDNELmpzXCI7aW1wb3J0e3RvM0QgYXMgc31mcm9tXCIuL3N5bWJvbENvbnZlcnNpb24uanNcIjtpbXBvcnQgciBmcm9tXCIuLi9XZWJTdHlsZVN5bWJvbC5qc1wiO2Z1bmN0aW9uIGwobyxlLG4sdCl7Y29uc3Qgcz1hKG8se30se2NvbnRleHQ6dCxpc0xhYmVsU3ltYm9sOiExfSk7bnVsbCE9cyYmKGVbbl09cyl9ZnVuY3Rpb24gaShvLGUsbix0KXtjb25zdCBzPWEobyx7fSx7Y29udGV4dDp0LGlzTGFiZWxTeW1ib2w6ITB9KTtudWxsIT1zJiYoZVtuXT1zKX1mdW5jdGlvbiBtKG8pe3JldHVybiBvIGluc3RhbmNlb2YgdHx8byBpbnN0YW5jZW9mIHJ9ZnVuY3Rpb24gYShvLHQscil7aWYobnVsbD09bylyZXR1cm4gbnVsbDtjb25zdHtjb250ZXh0OmwsaXNMYWJlbFN5bWJvbDppfT1yLGE9bD8ub3JpZ2luLGI9bD8ubWVzc2FnZXM7aWYoXCJ3ZWItc2NlbmVcIj09PWEmJiFtKG8pKXtjb25zdCBuPXMobyx7cmV0YWluQ0lNOiEwLGhhc0xhYmVsaW5nQ29udGV4dDppfSk7cmV0dXJuIG51bGwhPW4uc3ltYm9sP24uc3ltYm9sLndyaXRlKHQsbCk6KGI/LnB1c2gobmV3IGUoXCJzeW1ib2w6dW5zdXBwb3J0ZWRcIixgU3ltYm9scyBvZiB0eXBlICcke28uZGVjbGFyZWRDbGFzc30nIGFyZSBub3Qgc3VwcG9ydGVkIGluIHNjZW5lcy4gVXNlIDNEIHN5bWJvbG9neSBpbnN0ZWFkIHdoZW4gd29ya2luZyB3aXRoIFdlYlNjZW5lIGFuZCBTY2VuZVZpZXdgLHtzeW1ib2w6byxjb250ZXh0OmwsZXJyb3I6bi5lcnJvcn0pKSxudWxsKX1yZXR1cm4oXCJ3ZWItbWFwXCI9PT1hfHxcInBvcnRhbC1pdGVtXCI9PT1hJiYhbihsPy5sYXllcikpJiZtKG8pPyhiPy5wdXNoKG5ldyBlKFwic3ltYm9sOnVuc3VwcG9ydGVkXCIsYFN5bWJvbHMgb2YgdHlwZSAnJHtvLmRlY2xhcmVkQ2xhc3N9JyBhcmUgbm90IHN1cHBvcnRlZCBpbiB3ZWIgbWFwcyBhbmQgcG9ydGFsIGl0ZW1zLiBVc2UgMkQgc3ltYm9sb2d5IGFuZCBDSU1TeW1ib2wgaW5zdGVhZCB3aGVuIHdvcmtpbmcgd2l0aCBNYXBWaWV3YCx7c3ltYm9sOm8sY29udGV4dDpsfSkpLG51bGwpOm8ud3JpdGUodCxsKX1mdW5jdGlvbiBiKGUsbil7cmV0dXJuIG8oZSxudWxsLG4pfWV4cG9ydHtiIGFzIGZyb21KU09OLGwgYXMgd3JpdGUsaSBhcyB3cml0ZUxhYmVsU3ltYm9sfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHt0aHJvd0lmQWJvcnRFcnJvciBhcyByfWZyb21cIi4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e25vcm1hbGl6ZSBhcyBvLHJlbW92ZUZpbGUgYXMgc31mcm9tXCIuLi8uLi9jb3JlL3VybFV0aWxzLmpzXCI7aW1wb3J0IG4gZnJvbVwiLi4vLi4vcG9ydGFsL1BvcnRhbC5qc1wiO2ltcG9ydCBsIGZyb21cIi4uLy4uL3BvcnRhbC9Qb3J0YWxRdWVyeVBhcmFtcy5qc1wiO2ltcG9ydHtlbmFibGVXZWJTdHlsZUZvcmNlV09TUiBhcyBhfWZyb21cIi4uLy4uL3N1cHBvcnQvZmVhdHVyZUZsYWdzLmpzXCI7bGV0IHU9e307YXN5bmMgZnVuY3Rpb24gZihlLHQpe3RyeXtyZXR1cm57ZGF0YTooYXdhaXQgYihlLHQpKS5kYXRhLGJhc2VVcmw6cyhlKSxzdHlsZVVybDplfX1jYXRjaChvKXtyZXR1cm4gcihvKSxudWxsfX1mdW5jdGlvbiBpKGUsdCxyKXtjb25zdCBvPW51bGwhPXQucG9ydGFsP3QucG9ydGFsOm4uZ2V0RGVmYXVsdCgpO2xldCBzO2NvbnN0IGw9YCR7by51cmx9IC0gJHtvLnVzZXImJm8udXNlci51c2VybmFtZX0gLSAke2V9YDtyZXR1cm4gdVtsXXx8KHVbbF09eShlLG8scikudGhlbigoZT0+KHM9ZSxlLmZldGNoRGF0YSgpKSkpLnRoZW4oKHQ9Pih7ZGF0YTp0LGJhc2VVcmw6cy5pdGVtVXJsPz9cIlwiLHN0eWxlTmFtZTplfSkpKSksdVtsXX1mdW5jdGlvbiBtKCl7dSYmKHU9e30pfWZ1bmN0aW9uIHkoZSxyLG8pe3JldHVybiByLmxvYWQobykudGhlbigoKCk9Pntjb25zdCB0PW5ldyBsKHtkaXNhYmxlRXh0cmFRdWVyeTohMCxxdWVyeTpgb3duZXI6JHtofSBBTkQgdHlwZToke2p9IEFORCB0eXBla2V5d29yZHM6XCIke2V9XCJgfSk7cmV0dXJuIHIucXVlcnlJdGVtcyh0LG8pfSkpLnRoZW4oKCh7cmVzdWx0czpyfSk9PntsZXQgcz1udWxsO2NvbnN0IG49ZS50b0xvd2VyQ2FzZSgpO2lmKHImJkFycmF5LmlzQXJyYXkocikpZm9yKGNvbnN0IGUgb2Ygcil7Y29uc3QgdD1lLnR5cGVLZXl3b3Jkcz8uc29tZSgoZT0+ZS50b0xvd2VyQ2FzZSgpPT09bikpO2lmKHQmJmUudHlwZT09PWomJmUub3duZXI9PT1oKXtzPWU7YnJlYWt9fWlmKCFzKXRocm93IG5ldyB0KFwic3ltYm9sc3R5bGV1dGlsczpzdHlsZS1ub3QtZm91bmRcIixgVGhlIHN0eWxlICcke2V9JyBjb3VsZCBub3QgYmUgZm91bmRgLHtzdHlsZU5hbWU6ZX0pO3JldHVybiBzLmxvYWQobyl9KSl9ZnVuY3Rpb24gYyhlLHIsbyl7cmV0dXJuIGUmJm51bGwhPWUuc3R5bGVVcmw/ZihlLnN0eWxlVXJsLG8pOmUmJm51bGwhPWUuc3R5bGVOYW1lP2koZS5zdHlsZU5hbWUscixvKTpQcm9taXNlLnJlamVjdChuZXcgdChcInN5bWJvbHN0eWxldXRpbHM6c3R5bGUtdXJsLWFuZC1uYW1lLW1pc3NpbmdcIixcIkVpdGhlciBzdHlsZVVybCBvciBzdHlsZU5hbWUgaXMgcmVxdWlyZWQgdG8gcmVzb2x2ZSBhIHN0eWxlXCIpKX1mdW5jdGlvbiBwKGUpe3JldHVybiBudWxsPT09ZXx8XCJDSU1TeW1ib2xSZWZlcmVuY2VcIj09PWUudHlwZT9lOnt0eXBlOlwiQ0lNU3ltYm9sUmVmZXJlbmNlXCIsc3ltYm9sOmV9fWZ1bmN0aW9uIGQoZSx0LHI9W1wiZ2x0ZlwiXSl7aWYoXCJjaW1SZWZcIj09PXQpcmV0dXJuIGUuY2ltUmVmO2lmKGUuZm9ybWF0SW5mb3MmJiFhKCkpZm9yKGNvbnN0IG8gb2Ygcil7Y29uc3QgdD1lLmZvcm1hdEluZm9zLmZpbmQoKGU9PmUudHlwZT09PW8pKTtpZih0KXJldHVybiB0LmhyZWZ9cmV0dXJuIGUud2ViUmVmfWZ1bmN0aW9uIGIodCxyKXtjb25zdCBzPXtyZXNwb25zZVR5cGU6XCJqc29uXCIscXVlcnk6e2Y6XCJqc29uXCJ9LC4uLnJ9O3JldHVybiBlKG8odCkscyl9Y29uc3QgaD1cImVzcmlfZW5cIixqPVwiU3R5bGVcIix3PVwiaHR0cHM6Ly9jZG4uYXJjZ2lzLmNvbS9zaGFyaW5nL3Jlc3QvY29udGVudC9pdGVtcy8yMjA5MzZjYzZlZDM0MmM5OTM3YWJkOGYxODBlN2QxZS9yZXNvdXJjZXMvc3R5bGVzL2NpbS97U3ltYm9sTmFtZX0uanNvbj9mPWpzb25cIjtleHBvcnR7dyBhcyBTdHlsZTJEVXJsVGVtcGxhdGUsdSBhcyBjYWNoZWRTdHlsZXMsbSBhcyBjbGVhbnVwU3R5bGVVdGlsc0NhY2hlLGMgYXMgZmV0Y2hTdHlsZSxwIGFzIG1ha2VDSU1TeW1ib2xSZWYsYiBhcyByZXF1ZXN0SlNPTixkIGFzIHN5bWJvbFVybEZyb21TdHlsZUl0ZW19O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtpc1N5bWJvbDNEIGFzIG99ZnJvbVwiLi4vLi4vc3ltYm9scy5qc1wiO2ltcG9ydCBlIGZyb21cIi4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnQgciBmcm9tXCIuLi9XZWJTdHlsZVN5bWJvbC5qc1wiO2ltcG9ydCBtIGZyb21cIi4uL1BvaW50U3ltYm9sM0QuanNcIjtpbXBvcnQgaSBmcm9tXCIuLi9TaW1wbGVMaW5lU3ltYm9sLmpzXCI7aW1wb3J0IGwgZnJvbVwiLi4vTGluZVN5bWJvbDNELmpzXCI7aW1wb3J0IHMgZnJvbVwiLi4vU2ltcGxlTWFya2VyU3ltYm9sLmpzXCI7aW1wb3J0IG4gZnJvbVwiLi4vUGljdHVyZU1hcmtlclN5bWJvbC5qc1wiO2ltcG9ydCB0IGZyb21cIi4uL1NpbXBsZUZpbGxTeW1ib2wuanNcIjtpbXBvcnQgeSBmcm9tXCIuLi9NZXNoU3ltYm9sM0QuanNcIjtpbXBvcnQgZiBmcm9tXCIuLi9Qb2x5Z29uU3ltYm9sM0QuanNcIjtpbXBvcnQgYiBmcm9tXCIuLi9UZXh0U3ltYm9sLmpzXCI7aW1wb3J0IHAgZnJvbVwiLi4vTGFiZWxTeW1ib2wzRC5qc1wiO2NvbnN0IGE9e3JldGFpbklkOiExLGlnbm9yZURyaXZlcnM6ITEsaGFzTGFiZWxpbmdDb250ZXh0OiEwfTtmdW5jdGlvbiBTKFMsYz1hKXtpZighUylyZXR1cm57c3ltYm9sOm51bGx9O2NvbnN0e3JldGFpbklkOnU9YS5yZXRhaW5JZCxpZ25vcmVEcml2ZXJzOmQ9YS5pZ25vcmVEcml2ZXJzLGhhc0xhYmVsaW5nQ29udGV4dDpqPWEuaGFzTGFiZWxpbmdDb250ZXh0LHJldGFpbkNJTTpEPWEucmV0YWluQ0lNfT1jO2xldCBnPW51bGw7aWYobyhTKXx8UyBpbnN0YW5jZW9mIHIpZz1TLmNsb25lKCk7ZWxzZSBpZihcImNpbVwiPT09Uy50eXBlKXtjb25zdCBvPVMuZGF0YT8uc3ltYm9sPy50eXBlO2lmKFwiQ0lNUG9pbnRTeW1ib2xcIiE9PW8pcmV0dXJue2Vycm9yOm5ldyBlKFwic3ltYm9sLWNvbnZlcnNpb246dW5zdXBwb3J0ZWQtY2ltLXN5bWJvbFwiLGBDSU0gc3ltYm9sIG9mIHR5cGUgJyR7b3x8XCJ1bmtub3duXCJ9JyBpcyB1bnN1cHBvcnRlZCBpbiAzRGAse3N5bWJvbDpTfSl9O2c9RD9TLmNsb25lKCk6bS5mcm9tQ0lNU3ltYm9sKFMpfWVsc2UgaWYoUyBpbnN0YW5jZW9mIGkpZz1sLmZyb21TaW1wbGVMaW5lU3ltYm9sKFMpO2Vsc2UgaWYoUyBpbnN0YW5jZW9mIHMpZz1tLmZyb21TaW1wbGVNYXJrZXJTeW1ib2woUyk7ZWxzZSBpZihTIGluc3RhbmNlb2YgbilnPW0uZnJvbVBpY3R1cmVNYXJrZXJTeW1ib2woUyk7ZWxzZSBpZihTIGluc3RhbmNlb2YgdClnPWMuZ2VvbWV0cnlUeXBlJiZcIm1lc2hcIj09PWMuZ2VvbWV0cnlUeXBlP3kuZnJvbVNpbXBsZUZpbGxTeW1ib2woUyk6Zi5mcm9tU2ltcGxlRmlsbFN5bWJvbChTKTtlbHNle2lmKCEoUyBpbnN0YW5jZW9mIGIpKXJldHVybntlcnJvcjpuZXcgZShcInN5bWJvbC1jb252ZXJzaW9uOnVuc3VwcG9ydGVkLTJkLXN5bWJvbFwiLGAyRCBzeW1ib2wgb2YgdHlwZSAnJHtTLnR5cGV8fFMuZGVjbGFyZWRDbGFzc30nIGlzIHVuc3VwcG9ydGVkIGluIDNEYCx7c3ltYm9sOlN9KX07Zz1qP3AuZnJvbVRleHRTeW1ib2woUyk6bS5mcm9tVGV4dFN5bWJvbChTKX1yZXR1cm4gdSYmZyYmXCJjaW1cIiE9PWcudHlwZSYmKGcuaWQ9Uy5pZCksZCYmbyhnKSYmZy5zeW1ib2xMYXllcnMuZm9yRWFjaCgobz0+by5pZ25vcmVEcml2ZXJzPSEwKSkse3N5bWJvbDpnfX1leHBvcnR7YSBhcyBkZWZhdWx0VG8zRE9wdGlvbnMsUyBhcyB0bzNEfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnR7SGFuZGxlT3duZXIgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL0hhbmRsZU93bmVyLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBvfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtsZXQgcz1jbGFzcyBleHRlbmRzIHJ7aW5pdGlhbGl6ZSgpe31kZXN0cm95KCl7fWdldCBzdXBwb3J0c1RpbGVVcGRhdGVzKCl7cmV0dXJuITF9Z2V0IHNwYXRpYWxSZWZlcmVuY2UoKXtjb25zdCBlPXRoaXMuZ2V0KFwidGlsZVN0b3JlLnRpbGVTY2hlbWUuc3BhdGlhbFJlZmVyZW5jZVwiKTtyZXR1cm4gZSYmZS50b0pTT04oKXx8bnVsbH19O2UoW3Qoe3JlYWRPbmx5OiEwfSldLHMucHJvdG90eXBlLFwic3VwcG9ydHNUaWxlVXBkYXRlc1wiLG51bGwpLGUoW3Qoe2NvbnN0cnVjdE9ubHk6ITB9KV0scy5wcm90b3R5cGUsXCJyZW1vdGVDbGllbnRcIix2b2lkIDApLGUoW3Qoe2NvbnN0cnVjdE9ubHk6ITB9KV0scy5wcm90b3R5cGUsXCJzZXJ2aWNlXCIsdm9pZCAwKSxlKFt0KCldLHMucHJvdG90eXBlLFwic3BhdGlhbFJlZmVyZW5jZVwiLG51bGwpLGUoW3Qoe2NvbnN0cnVjdE9ubHk6ITB9KV0scy5wcm90b3R5cGUsXCJ0aWxlSW5mb1wiLHZvaWQgMCksZShbdCh7Y29uc3RydWN0T25seTohMH0pXSxzLnByb3RvdHlwZSxcInRpbGVTdG9yZVwiLHZvaWQgMCkscz1lKFtvKFwiZXNyaS52aWV3cy4yZC5sYXllcnMuZmVhdHVyZXMucHJvY2Vzc29ycy5CYXNlUHJvY2Vzc29yXCIpXSxzKTtjb25zdCBwPXM7ZXhwb3J0e3AgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0e2JpZGlUZXh0IGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9CaWRpVGV4dC5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2FwcGx5U29tZSBhcyBzLHVud3JhcE9yVGhyb3cgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e3Rocm93SWZBYm9ydGVkIGFzIGksaXNBYm9ydEVycm9yIGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBvfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7ZGlmZiBhcyBuLGhhc0RpZmYgYXMgbH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kaWZmVXRpbHMuanNcIjtpbXBvcnQgYyBmcm9tXCIuLi8uLi8uLi8uLi8uLi9nZW9tZXRyeS9TcGF0aWFsUmVmZXJlbmNlLmpzXCI7aW1wb3J0e2lzQWdncmVnYXRlSWQgYXMgZH1mcm9tXCIuLi8uLi8uLi9lbmdpbmUvd2ViZ2wvRGlzcGxheUlkLmpzXCI7aW1wb3J0e1dHTFN5bWJvbG9neVR5cGUgYXMgaH1mcm9tXCIuLi8uLi8uLi9lbmdpbmUvd2ViZ2wvZW51bXMuanNcIjtpbXBvcnR7TWVzaERhdGEgYXMgZn1mcm9tXCIuLi8uLi8uLi9lbmdpbmUvd2ViZ2wvbWVzaC9NZXNoRGF0YS5qc1wiO2ltcG9ydHtXR0xNZXNoRmFjdG9yeSBhcyB1fWZyb21cIi4uLy4uLy4uL2VuZ2luZS93ZWJnbC9tZXNoL2ZhY3Rvcmllcy9XR0xNZXNoRmFjdG9yeS5qc1wiO2ltcG9ydHtXR0xUZW1wbGF0ZVN0b3JlIGFzIG19ZnJvbVwiLi4vLi4vLi4vZW5naW5lL3dlYmdsL21lc2gvdGVtcGxhdGVzL1dHTFRlbXBsYXRlU3RvcmUuanNcIjtpbXBvcnR7Y3JlYXRlTWF0Y2hlciBhcyBnfWZyb21cIi4uLy4uLy4uL2VuZ2luZS93ZWJnbC91dGlsL01hdGNoZXIuanNcIjtpbXBvcnR7Y29kZXBvaW50cyBhcyBwfWZyb21cIi4uL3RleHRVdGlscy5qc1wiO2ltcG9ydCB5IGZyb21cIi4vQmFzZVByb2Nlc3Nvci5qc1wiO2ltcG9ydCBfIGZyb21cIi4uL3N1cHBvcnQvUmVzb3VyY2VNYW5hZ2VyUHJveHkuanNcIjtmdW5jdGlvbiBiKGUsdCl7cmV0dXJuKCFlLm1pblNjYWxlfHxlLm1pblNjYWxlPj10KSYmKCFlLm1heFNjYWxlfHxlLm1heFNjYWxlPD10KX1mdW5jdGlvbiBTKGUpe2NvbnN0IHQ9ZS5tZXNzYWdlLHI9e21lc3NhZ2U6e2RhdGE6e30sdGlsZUtleTp0LnRpbGVLZXksdGlsZUtleU9yaWdpbjp0LnRpbGVLZXlPcmlnaW4sdmVyc2lvbjp0LnZlcnNpb259LHRyYW5zZmVyTGlzdDpuZXcgQXJyYXl9O2Zvcihjb25zdCBpIGluIHQuZGF0YSl7Y29uc3QgZT1pLGE9dC5kYXRhW2VdO2lmKHIubWVzc2FnZS5kYXRhW2VdPW51bGwsbnVsbCE9YSl7Y29uc3QgdD1hLnN0cmlkZSxpPWEuaW5kaWNlcy5zbGljZSgwKSxvPWEudmVydGljZXMuc2xpY2UoMCksbj1hLnJlY29yZHMuc2xpY2UoMCksbD17c3RyaWRlOnQsaW5kaWNlczppLHZlcnRpY2VzOm8scmVjb3JkczpuLG1ldHJpY3M6cyhhLm1ldHJpY3MsKGU9PmUuc2xpY2UoMCkpKX07ci50cmFuc2Zlckxpc3QucHVzaChpLG8sbiksci5tZXNzYWdlLmRhdGFbZV09bH19cmV0dXJuIHJ9bGV0IHc9Y2xhc3MgZXh0ZW5kcyB5e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnR5cGU9XCJzeW1ib2xcIix0aGlzLl9tYXRjaGVycz17ZmVhdHVyZTpudWxsLGFnZ3JlZ2F0ZTpudWxsfSx0aGlzLl9idWZmZXJEYXRhPW5ldyBNYXAsdGhpcy5fYnVmZmVySWRzPW5ldyBNYXB9aW5pdGlhbGl6ZSgpe3RoaXMuaGFuZGxlcy5hZGQoW3RoaXMudGlsZVN0b3JlLm9uKFwidXBkYXRlXCIsdGhpcy5vblRpbGVVcGRhdGUuYmluZCh0aGlzKSldKSx0aGlzLl9yZXNvdXJjZU1hbmFnZXJQcm94eT1uZXcgXyh0aGlzLnJlbW90ZUNsaWVudCl9ZGVzdHJveSgpe3RoaXMuX3Jlc291cmNlTWFuYWdlclByb3h5LmRlc3Ryb3koKX1nZXQgc3VwcG9ydHNUaWxlVXBkYXRlcygpe3JldHVybiEwfWZvckVhY2hCdWZmZXJJZChlKXt0aGlzLl9idWZmZXJJZHMuZm9yRWFjaCgodD0+e3QuZm9yRWFjaChlKX0pKX1hc3luYyB1cGRhdGUoZSx0KXtjb25zdCBzPXQuc2NoZW1hLnByb2Nlc3NvcnNbMF07aWYoXCJzeW1ib2xcIiE9PXMudHlwZSlyZXR1cm47Y29uc3Qgcj1uKHRoaXMuX3NjaGVtYSxzKTsobChyLFwibWVzaFwiKXx8bChyLFwidGFyZ2V0XCIpKSYmKGUubWVzaD0hMCxlLndoeT8ubWVzaC5wdXNoKFwiU3ltYm9sb2d5IGNoYW5nZWRcIiksdGhpcy5fc2NoZW1hPXMsdGhpcy5fZmFjdG9yeT10aGlzLl9jcmVhdGVGYWN0b3J5KHMpLHRoaXMuX2ZhY3RvcnkudXBkYXRlKHMsdGhpcy50aWxlU3RvcmUudGlsZVNjaGVtZS50aWxlSW5mbykpfW9uVGlsZU1lc3NhZ2UoZSx0LHMscil7cmV0dXJuIGkociksdGhpcy5fb25UaWxlRGF0YShlLHQscyxyKX1vblRpbGVDbGVhcihlLHQpe2NvbnN0IHM9e2NsZWFyOiEwLGVuZDp0fTtyZXR1cm4gdGhpcy5fYnVmZmVyRGF0YS5kZWxldGUoZS5rZXkuaWQpLHRoaXMuX2J1ZmZlcklkcy5kZWxldGUoZS5rZXkuaWQpLHRoaXMucmVtb3RlQ2xpZW50Lmludm9rZShcInRpbGVSZW5kZXJlci5vblRpbGVEYXRhXCIse3RpbGVLZXk6ZS5pZCxkYXRhOnN9KX1vblRpbGVFcnJvcihlLHQscyl7Y29uc3Qgcj1zLnNpZ25hbCxpPXt0aWxlS2V5OmUuaWQsZXJyb3I6dH07cmV0dXJuIHRoaXMucmVtb3RlQ2xpZW50Lmludm9rZShcInRpbGVSZW5kZXJlci5vblRpbGVFcnJvclwiLGkse3NpZ25hbDpyfSl9b25UaWxlVXBkYXRlKGUpe2Zvcihjb25zdCB0IG9mIGUucmVtb3ZlZCl0aGlzLl9idWZmZXJEYXRhLmhhcyh0LmtleS5pZCkmJnRoaXMuX2J1ZmZlckRhdGEuZGVsZXRlKHQua2V5LmlkKSx0aGlzLl9idWZmZXJJZHMuaGFzKHQua2V5LmlkKSYmdGhpcy5fYnVmZmVySWRzLmRlbGV0ZSh0LmtleS5pZCk7Zm9yKGNvbnN0IHQgb2YgZS5hZGRlZCl0aGlzLl9idWZmZXJEYXRhLmZvckVhY2goKGU9Pntmb3IoY29uc3QgcyBvZiBlKXMubWVzc2FnZS50aWxlS2V5PT09dC5pZCYmdGhpcy5fdXBkYXRlVGlsZU1lc2goXCJhcHBlbmRcIix0LFMocyksW10sITEsITEsbnVsbCl9KSl9X2FkZEJ1ZmZlckRhdGEoZSx0KXt0aGlzLl9idWZmZXJEYXRhLmhhcyhlKXx8dGhpcy5fYnVmZmVyRGF0YS5zZXQoZSxbXSksdGhpcy5fYnVmZmVyRGF0YS5nZXQoZSk/LnB1c2goUyh0KSl9X2NyZWF0ZUZhY3RvcnkoZSl7Y29uc3R7Z2VvbWV0cnlUeXBlOnQsb2JqZWN0SWRGaWVsZDpyLGZpZWxkczppfT10aGlzLnNlcnZpY2UsYT0oZSx0KT0+dGhpcy5yZW1vdGVDbGllbnQuaW52b2tlKFwidGlsZVJlbmRlcmVyLmdldE1hdGVyaWFsSXRlbXNcIixlLHQpLG89e2dlb21ldHJ5VHlwZTp0LGZpZWxkczppLHNwYXRpYWxSZWZlcmVuY2U6Yy5mcm9tSlNPTih0aGlzLnNwYXRpYWxSZWZlcmVuY2UpfSxuPW5ldyBtKGEsdGhpcy50aWxlU3RvcmUudGlsZVNjaGVtZS50aWxlSW5mbykse21hdGNoZXI6bCxhZ2dyZWdhdGVNYXRjaGVyOmR9PWUubWVzaDtyZXR1cm4gdGhpcy5fc3RvcmU9bix0aGlzLl9tYXRjaGVycy5mZWF0dXJlPWcobCxuLG8sdGhpcy5fcmVzb3VyY2VNYW5hZ2VyUHJveHkpLHRoaXMuX21hdGNoZXJzLmFnZ3JlZ2F0ZT1zKGQsKGU9PmcoZSxuLG8sdGhpcy5fcmVzb3VyY2VNYW5hZ2VyUHJveHkpKSksbmV3IHUodCxyLG4pfWFzeW5jIF9vblRpbGVEYXRhKGUsdCxzLHIpe2kocik7Y29uc3R7dHlwZTphLGFkZE9yVXBkYXRlOm8scmVtb3ZlOm4sY2xlYXI6bCxlbmQ6Y309dCxkPSEhdGhpcy5fc2NoZW1hLm1lc2guc29ydEtleTtpZighbyl7Y29uc3QgdD17dHlwZTphLGFkZE9yVXBkYXRlOm51bGwscmVtb3ZlOm4sY2xlYXI6bCxlbmQ6Yyxzb3J0OmR9O3JldHVybiB0aGlzLnJlbW90ZUNsaWVudC5pbnZva2UoXCJ0aWxlUmVuZGVyZXIub25UaWxlRGF0YVwiLHt0aWxlS2V5OmUuaWQsZGF0YTp0fSxyKX1jb25zdCBoPXRoaXMuX3Byb2Nlc3NGZWF0dXJlcyhlLG8scyxyLHQuc3RhdHVzPy52ZXJzaW9uKTt0cnl7Y29uc3Qgcz1hd2FpdCBoO2lmKG51bGw9PXMpe2NvbnN0IHQ9e3R5cGU6YSxhZGRPclVwZGF0ZTpudWxsLHJlbW92ZTpuLGNsZWFyOmwsZW5kOmMsc29ydDpkfTtyZXR1cm4gdGhpcy5yZW1vdGVDbGllbnQuaW52b2tlKFwidGlsZVJlbmRlcmVyLm9uVGlsZURhdGFcIix7dGlsZUtleTplLmlkLGRhdGE6dH0scil9Y29uc3QgaT1bXTtmb3IoY29uc3QgdCBvZiBzKXtsZXQgcz0hMTtjb25zdCByPXQubWVzc2FnZS5idWZmZXJJZHMsYT1lLmtleS5pZCxvPXQubWVzc2FnZS50aWxlS2V5O2lmKGEhPT1vJiZudWxsIT1yKXtpZighdGhpcy50aWxlU3RvcmUuZ2V0KG8pKXt0aGlzLl9hZGRCdWZmZXJEYXRhKGEsdCksaS5wdXNoKHQpO2NvbnRpbnVlfWxldCBlPXRoaXMuX2J1ZmZlcklkcy5nZXQobyk7ZXx8KGU9bmV3IFNldCx0aGlzLl9idWZmZXJJZHMuc2V0KG8sZSkpO2NvbnN0IG49QXJyYXkuZnJvbShyKTtmb3IoY29uc3QgdCBvZiBuKXtpZihlLmhhcyh0KSl7cz0hMDticmVha31lLmFkZCh0KX19c3x8KHRoaXMuX2FkZEJ1ZmZlckRhdGEoYSx0KSxpLnB1c2godCkpfWF3YWl0IFByb21pc2UuYWxsKGkubWFwKChzPT57Y29uc3QgaT1lLmtleS5pZD09PXMubWVzc2FnZS50aWxlS2V5LG89aT90LnJlbW92ZTpbXSxuPWkmJnQuZW5kO3JldHVybiB0aGlzLl91cGRhdGVUaWxlTWVzaChhLGUscyxvLG4sISF0LmNsZWFyLHIuc2lnbmFsKX0pKSl9Y2F0Y2goZil7dGhpcy5faGFuZGxlRXJyb3IoZSxmLHIpfX1hc3luYyBfdXBkYXRlVGlsZU1lc2goZSx0LHIsYSxvLG4sbCl7Y29uc3QgYz1lLGQ9ci5tZXNzYWdlLnRpbGVLZXksaD0hIXRoaXMuX3NjaGVtYS5tZXNoLnNvcnRLZXk7ZCE9PXQua2V5LmlkJiYobz0hMSk7Y29uc3QgZj17dHlwZTpjLGFkZE9yVXBkYXRlOnMociwoZT0+ZS5tZXNzYWdlKSkscmVtb3ZlOmEsY2xlYXI6bixlbmQ6byxzb3J0Omh9LHU9e3RyYW5zZmVyTGlzdDpzKHIsKGU9PmUudHJhbnNmZXJMaXN0KSl8fFtdfHxbXSxzaWduYWw6bH07cmV0dXJuIGkodSksdGhpcy5yZW1vdGVDbGllbnQuaW52b2tlKFwidGlsZVJlbmRlcmVyLm9uVGlsZURhdGFcIix7dGlsZUtleTpkLGRhdGE6Zn0sdSl9YXN5bmMgX3Byb2Nlc3NGZWF0dXJlcyhlLHQscyxyLGEpe2lmKG51bGw9PXR8fCF0Lmhhc0ZlYXR1cmVzKXJldHVybiBudWxsO2NvbnN0IG89e3RyYW5zZm9ybTplLnRyYW5zZm9ybSxoYXNaOiExLGhhc006ITF9LG49dGhpcy5fZmFjdG9yeSxsPXt2aWV3aW5nTW9kZTpcIlwiLHNjYWxlOmUuc2NhbGV9LGM9YXdhaXQgdGhpcy5fbWF0Y2hlcnMuZmVhdHVyZSxkPWF3YWl0IHRoaXMuX21hdGNoZXJzLmFnZ3JlZ2F0ZTtpKHIpO2NvbnN0IGg9dGhpcy5fZ2V0TGFiZWxJbmZvcyhlLHQpO3JldHVybiBhd2FpdCBuLmFuYWx5emUodC5nZXRDdXJzb3IoKSx0aGlzLl9yZXNvdXJjZU1hbmFnZXJQcm94eSxjLGQsbyxsKSxpKHIpLHRoaXMuX3dyaXRlRmVhdHVyZVNldChlLHQsbyxoLG4scyxhKX1fd3JpdGVGZWF0dXJlU2V0KGUsdCxzLHIsaSxhLG8pe2NvbnN0IG49dC5nZXRTaXplKCksbD10aGlzLl9zY2hlbWEubWVzaC5tYXRjaGVyLnN5bWJvbG9neVR5cGUsYz1uZXcgZihlLmtleS5pZCx7ZmVhdHVyZXM6bixyZWNvcmRzOm4sbWV0cmljczowfSxsLGEsbCE9PWguSEVBVE1BUCxvKSxkPXt2aWV3aW5nTW9kZTpcIlwiLHNjYWxlOmUuc2NhbGV9LHU9dC5nZXRDdXJzb3IoKTtmb3IoO3UubmV4dCgpOyl0cnl7Y29uc3QgdD11LmdldERpc3BsYXlJZCgpLGE9bnVsbCE9cj9yLmdldCh0KTpudWxsO2kud3JpdGVDdXJzb3IoYyx1LHMsZCxlLmxldmVsLGEsdGhpcy5fcmVzb3VyY2VNYW5hZ2VyUHJveHkpfWNhdGNoKGcpe31jb25zdCBtPWUudGlsZUluZm9WaWV3LnRpbGVJbmZvLmlzV3JhcHBhYmxlO3JldHVybiBjLnNlcmlhbGl6ZShtKX1faGFuZGxlRXJyb3IoZSx0LHMpe2lmKCFhKHQpKXtjb25zdCByPXt0aWxlS2V5OmUuaWQsZXJyb3I6dC5tZXNzYWdlfTtyZXR1cm4gdGhpcy5yZW1vdGVDbGllbnQuaW52b2tlKFwidGlsZVJlbmRlcmVyLm9uVGlsZUVycm9yXCIscix7c2lnbmFsOnMuc2lnbmFsfSl9cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfV9nZXRMYWJlbGluZ1NjaGVtYUZvclNjYWxlKGUpe2NvbnN0IHQ9dGhpcy5fc2NoZW1hLm1lc2gubGFiZWxzO2lmKG51bGw9PXQpcmV0dXJuIG51bGw7aWYoXCJzdWJ0eXBlXCI9PT10LnR5cGUpe2NvbnN0IHM9e3R5cGU6XCJzdWJ0eXBlXCIsY2xhc3Nlczp7fX07bGV0IHI9ITE7Zm9yKGNvbnN0IGkgaW4gdC5jbGFzc2VzKXtjb25zdCBhPXQuY2xhc3Nlc1tpXS5maWx0ZXIoKHQ9PmIodCxlLnNjYWxlKSkpO3I9cnx8ISFhLmxlbmd0aCxzLmNsYXNzZXNbaV09YX1yZXR1cm4gcj9zOm51bGx9Y29uc3Qgcz10LmNsYXNzZXMuZmlsdGVyKCh0PT5iKHQsZS5zY2FsZSkpKTtyZXR1cm4gcy5sZW5ndGg/e3R5cGU6XCJzaW1wbGVcIixjbGFzc2VzOnN9Om51bGx9X2dldExhYmVscyhlLHQpe2lmKFwic3VidHlwZVwiPT09dC50eXBlKXtjb25zdCBzPXRoaXMuc2VydmljZS5zdWJ0eXBlRmllbGQsaT1yKHMsXCJFeHBlY3RlZCB0byBmaW5kIHN1YnR5cGUgRmllbGRcIiksYT1lLnJlYWRBdHRyaWJ1dGUoaSk7cmV0dXJuIG51bGw9PWE/W106dC5jbGFzc2VzW2FdPz9bXX1yZXR1cm4gdC5jbGFzc2VzfV9nZXRMYWJlbEluZm9zKGUscyl7Y29uc3Qgcj10aGlzLl9nZXRMYWJlbGluZ1NjaGVtYUZvclNjYWxlKGUpO2lmKG51bGw9PXIpcmV0dXJuIG51bGw7Y29uc3QgaT1uZXcgTWFwLGE9cy5nZXRDdXJzb3IoKTtmb3IoO2EubmV4dCgpOyl7Y29uc3QgZT1hLmdldERpc3BsYXlJZCgpLHM9W10sbz1kKGUpLG49byYmMSE9PWEucmVhZEF0dHJpYnV0ZShcImNsdXN0ZXJfY291bnRcIik/XCJhZ2dyZWdhdGVcIjpcImZlYXR1cmVcIixsPXRoaXMuX2dldExhYmVscyhhLHIpO2Zvcihjb25zdCByIG9mIGwpe2lmKHIudGFyZ2V0IT09biljb250aW51ZTtjb25zdCBpPWEuZ2V0U3RvcmFnZSgpLGw9byYmXCJmZWF0dXJlXCI9PT1uP2kuZ2V0Q29tcHV0ZWRTdHJpbmdBdEluZGV4KGEucmVhZEF0dHJpYnV0ZShcInJlZmVyZW5jZUlkXCIpLHIuZmllbGRJbmRleCk6aS5nZXRDb21wdXRlZFN0cmluZ0F0SW5kZXgoZSxyLmZpZWxkSW5kZXgpO2lmKCFsKWNvbnRpbnVlO2NvbnN0IGM9dChsLnRvU3RyaW5nKCkpLGQ9Y1swXSxoPWNbMV07dGhpcy5fc3RvcmUuZ2V0TW9zYWljSXRlbShyLnN5bWJvbCxwKGQpKS50aGVuKChlPT57c1tyLmluZGV4XT17Z2x5cGhzOmUuZ2x5cGhNb3NhaWNJdGVtcz8/W10scnRsOmgsaW5kZXg6ci5pbmRleH19KSl9aS5zZXQoZSxzKX1yZXR1cm4gaX19O3c9ZShbbyhcImVzcmkudmlld3MuMmQubGF5ZXJzLmZlYXR1cmVzLnByb2Nlc3NvcnMuU3ltYm9sUHJvY2Vzc29yXCIpXSx3KTtjb25zdCBJPXc7ZXhwb3J0e0kgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2lzQWJvcnRFcnJvciBhcyBlfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7Y2xhc3MgdHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9yZW1vdGVDbGllbnQ9ZSx0aGlzLl9yZXNvdXJjZU1hcD1uZXcgTWFwLHRoaXMuX2luRmxpZ2h0UmVzb3VyY2VNYXA9bmV3IE1hcCx0aGlzLmdlb21ldHJ5RW5naW5lPW51bGwsdGhpcy5nZW9tZXRyeUVuZ2luZVByb21pc2U9bnVsbH1kZXN0cm95KCl7fWFzeW5jIGZldGNoUmVzb3VyY2UodCxyKXtjb25zdCBzPXRoaXMuX3Jlc291cmNlTWFwLGk9cy5nZXQodCk7aWYoaSlyZXR1cm4gaTtsZXQgbj10aGlzLl9pbkZsaWdodFJlc291cmNlTWFwLmdldCh0KTtpZihuKXJldHVybiBuO3RyeXtuPXRoaXMuX3JlbW90ZUNsaWVudC5pbnZva2UoXCJ0aWxlUmVuZGVyZXIuZmV0Y2hSZXNvdXJjZVwiLHt1cmw6dH0sey4uLnJ9KSx0aGlzLl9pbkZsaWdodFJlc291cmNlTWFwLnNldCh0LG4pLG4udGhlbigoZT0+KHRoaXMuX2luRmxpZ2h0UmVzb3VyY2VNYXAuZGVsZXRlKHQpLHMuc2V0KHQsZSksZSkpKX1jYXRjaChvKXtyZXR1cm4gZShvKT9udWxsOnt3aWR0aDowLGhlaWdodDowfX1yZXR1cm4gbn1nZXRSZXNvdXJjZShlKXtyZXR1cm4gdGhpcy5fcmVzb3VyY2VNYXAuZ2V0KGUpPz9udWxsfWxvYWRGb250KGUpe3JldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCl9fWV4cG9ydHt0IGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9