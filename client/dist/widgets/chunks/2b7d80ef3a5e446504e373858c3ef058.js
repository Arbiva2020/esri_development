"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_arcgis_core_renderers_support_heatmapUtils_js-node_modules_arcgis_core_v-c04a59"],{

/***/ "./node_modules/@arcgis/core/chunks/vec4f64.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/chunks/vec4f64.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "O": () => (/* binding */ _),
/* harmony export */   "U": () => (/* binding */ N),
/* harmony export */   "Z": () => (/* binding */ l),
/* harmony export */   "a": () => (/* binding */ u),
/* harmony export */   "b": () => (/* binding */ e),
/* harmony export */   "c": () => (/* binding */ n),
/* harmony export */   "d": () => (/* binding */ t),
/* harmony export */   "e": () => (/* binding */ i),
/* harmony export */   "f": () => (/* binding */ r),
/* harmony export */   "g": () => (/* binding */ c),
/* harmony export */   "h": () => (/* binding */ f),
/* harmony export */   "i": () => (/* binding */ O),
/* harmony export */   "j": () => (/* binding */ T),
/* harmony export */   "k": () => (/* binding */ U),
/* harmony export */   "o": () => (/* binding */ o),
/* harmony export */   "u": () => (/* binding */ s),
/* harmony export */   "v": () => (/* binding */ b),
/* harmony export */   "z": () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function n(){return[0,0,0,0]}function t(n){return[n[0],n[1],n[2],n[3]]}function r(n,t,r,e){return[n,t,r,e]}function e(t){const r=n(),e=Math.min(4,t.length);for(let n=0;n<e;++n)r[n]=t[n];return r}function u(n,t){return new Float64Array(n,t,4)}function a(){return n()}function o(){return r(1,1,1,1)}function s(){return r(1,0,0,0)}function i(){return r(0,1,0,0)}function c(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}const l=a(),_=o(),N=s(),O=i(),T=c(),U=f(),b=Object.freeze(Object.defineProperty({__proto__:null,ONES:_,UNIT_W:U,UNIT_X:N,UNIT_Y:O,UNIT_Z:T,ZEROS:l,clone:t,create:n,createView:u,fromArray:e,fromValues:r,ones:o,unitW:f,unitX:s,unitY:i,unitZ:c,zeros:a},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ "./node_modules/@arcgis/core/renderers/support/heatmapUtils.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/renderers/support/heatmapUtils.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MAGIC_KERNEL_DENSITY_RADIUS_INFLATION_FACTOR": () => (/* binding */ a),
/* harmony export */   "calculateHeatmapIntensityInfoReaders": () => (/* binding */ s),
/* harmony export */   "createHeatmapImageData": () => (/* binding */ h),
/* harmony export */   "createValueFunction": () => (/* binding */ y),
/* harmony export */   "createValueFunctionCursor": () => (/* binding */ d),
/* harmony export */   "drawHeatmap": () => (/* binding */ l),
/* harmony export */   "evaluateDensityKernel": () => (/* binding */ m),
/* harmony export */   "gaussianBlurRadiusPxToKernelDensityRadiusPt": () => (/* binding */ i),
/* harmony export */   "generateGradient": () => (/* binding */ u),
/* harmony export */   "kernelDensityRadiusPtToGaussianBlurRadiusPx": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/screenUtils.js */ "./node_modules/@arcgis/core/core/screenUtils.js");
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../chunks/vec4.js */ "./node_modules/@arcgis/core/chunks/vec4.js");
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/vec4f64.js */ "./node_modules/@arcgis/core/chunks/vec4f64.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const a=2.4;function i(t){return (0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__.px2pt)(t*a)}function c(t){return (0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__.pt2px)(t)/a}function f(r,n,e,a){let{color:i,ratio:c}=n,{color:f,ratio:u}=e;if(u===c){const t=1e-6;1===u?c-=t:u+=t}const s=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)((a-c)/(u-c),0,1);(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.l)(r,i.toArray(),f.toArray(),s)}function u(t){const r=512,n=new Uint8ClampedArray(4*r);if(t=t.filter((({ratio:t})=>t>=0&&t<=1)).sort(((t,r)=>t.ratio-r.ratio)).map((({color:t,ratio:r})=>({color:t,ratio:Math.max(r,.001)}))),t.length<1)return n;let o=t[0],a=t[0],i=1;const c=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.c)();for(let e=0;e<r;e++){const u=(e+.5)/r;for(;u>a.ratio&&i<t.length;)o=a,a=t[i++];f(c,o,a,u),n.set(c,4*e)}return n}function s(t,r,o,e){const{radius:a,fieldOffset:i,field:c}=r,f=Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__.pt2px)(a)),u=new Float64Array(o*e);let s,l=Number.NEGATIVE_INFINITY;const h=d(c,i),y=new Set;for(const n of t){const t=n.getCursor();for(;t.next();){const r=t.getObjectId();if(y.has(r))continue;y.add(r);const n=t.readLegacyPointGeometry(),a=128;if(n.x<-a||n.x>=o+a||n.y<-a||n.y>e+a)continue;const i=+h(t),c=Math.max(0,Math.round(n.x)-f),d=Math.max(0,Math.round(n.y)-f),g=Math.min(e,Math.round(n.y)+f),A=Math.min(o,Math.round(n.x)+f);for(let t=d;t<g;t++)for(let r=c;r<A;r++){const e=t*o+r,a=m(n.x-r,n.y-t,f);s=u[e]+=a*i,s>l&&(l=s)}}}return{matrix:u.buffer,max:l}}function l(t,r,n,o,e,a){t.canvas.width=t.canvas.height=r,t.clearRect(0,0,r,r);const i=t.getImageData(0,0,r,r);n&&o&&i.data.set(new Uint8ClampedArray(h(r,n,o,e,a))),t.putImageData(i,0,0)}function h(r,n,o,e,a){const i=new Uint32Array(r*r),c="buffer"in n?n:new Float64Array(n),f="buffer"in o?new Uint32Array(o.buffer):new Uint32Array(new Uint8Array(o).buffer),u=f.length/(a-e);for(let s=0;s<c.length;s++){const r=c[s],n=Math.floor((r-e)*u);i[s]=f[(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(n,0,f.length-1)]}return i.buffer}function m(t,r,n){const o=Math.sqrt(t**2+r**2)/n;return o>1?0:3/(Math.PI*n**2)*(1-o**2)**2}function y(t,r){return"function"==typeof t?t:t?"string"==typeof r?r=>-1*+r[t]:n=>+n[t]+r:()=>1}function d(t,r){return null!=t?"string"==typeof r?r=>-1*+r.readAttribute(t):n=>+n.readAttribute(t)+r:t=>1}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WGLContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js");
/* harmony import */ var _brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./brushes/WGLBrushInfo.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushInfo.js");
/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./brushes/WGLBrushStencil.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-tiles-debug")&&n.push(r.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TiledDisplayObject": () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/mat3.js */ "./node_modules/@arcgis/core/chunks/mat3.js");
/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../DisplayObject.js */ "./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class r extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__.DisplayObject{constructor(t,s,i,r,h,o,n=h,a=o){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"](t),this.resolution=s,this.x=i,this.y=r,this.width=h,this.height=o,this.rangeX=n,this.rangeY=a}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(i){const e=this.resolution/(i.resolution*i.pixelRatio),r=this.transforms.tileMat3,[h,o]=i.toScreenNoRotation([0,0],[this.x,this.y]),n=this.width/this.rangeX*e,a=this.height/this.rangeY*e;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.s)(r,n,0,0,0,a,0,h,o,1),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.m)(this.transforms.dvs,i.displayViewMat3,r)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/WMTSLayerView2D.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/WMTSLayerView2D.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _BitmapTileLayerView2D_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./BitmapTileLayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _support_imageUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./support/imageUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js");
/* harmony import */ var _tiling_TileInfoView_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../tiling/TileInfoView.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/* harmony import */ var _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../tiling/TileQueue.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileQueue.js");
/* harmony import */ var _tiling_TileStrategy_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../tiling/TileStrategy.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/* harmony import */ var _layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../layers/RefreshableLayerView.js */ "./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const d=[102113,102100,3857,3785,900913],_=[0,0];let w=class extends((0,_layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_18__["default"])((0,_BitmapTileLayerView2D_js__WEBPACK_IMPORTED_MODULE_10__.BitmapTileLayerView2D)((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_11__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_17__["default"])))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this._tileRequests=new Map,this.layer=null}get tileMatrixSet(){const e=this._getTileMatrixSetBySpatialReference(this.layer.activeLayer);return e?(e.id!==this.layer.activeLayer.tileMatrixSetId&&(this.layer.activeLayer.tileMatrixSetId=e.id),e):null}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume()}attach(){const e=this.tileMatrixSet?.tileInfo;e&&(this._tileInfoView=new _tiling_TileInfoView_js__WEBPACK_IMPORTED_MODULE_13__["default"](e),this._fetchQueue=new _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_15__["default"]({tileInfoView:this._tileInfoView,concurrency:16,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new _tiling_TileStrategy_js__WEBPACK_IMPORTED_MODULE_16__["default"]({cachePolicy:"keep",resampling:!0,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.addAttachHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.watch)((()=>[this.layer?.activeLayer?.styleId,this.tileMatrixSet]),(()=>this._refresh()))),super.attach())}detach(){super.detach(),this._tileStrategy?.destroy(),this._fetchQueue?.destroy(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once("detach",(()=>e.destroy())),this.requestUpdate()}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}async doRefresh(){!this.attached||this.updateRequested||this.suspended||this._refresh()}isUpdating(){return this._fetchQueue?.updating??!1}async fetchTile(e,t={}){const s="tilemapCache"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!s)return this._fetchImage(e,r);const l=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_14__["default"](0,0,0,0);let o;try{await s.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:r}),o=await this._fetchImage(l,r)}catch(h){if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(h))throw h;if(a<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_14__["default"](i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return (0,_support_imageUtils_js__WEBPACK_IMPORTED_MODULE_12__.resampleImage)(this._tileInfoView,r,s,e)}}throw h}return (0,_support_imageUtils_js__WEBPACK_IMPORTED_MODULE_12__.resampleImage)(this._tileInfoView,o,l,e)}canResume(){const e=super.canResume();return e?null!==this.tileMatrixSet:e}supportsSpatialReference(e){return this.layer.activeLayer.tileMatrixSets?.some((t=>(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_9__.equals)(t.tileInfo?.spatialReference,e)))??!1}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once("attach",(()=>this.requestUpdate()))}catch(s){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(s)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error(s)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchImageBitmapTile(e.level,e.row,e.col,{signal:t})}_refresh(){this._fetchQueue.reset(),this._tileStrategy.refresh((e=>{if(!e.bitmap.source)return;const t={id:e.key.id,fulfilled:!1,promise:this._fetchQueue.push(e.key).then((t=>{e.bitmap.source=t})).catch((t=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(t)||(e.bitmap.source=null)})).finally((()=>{e.requestRender(),t.fulfilled=!0}))};this._tileRequests.set(e,t)}))}_getTileMatrixSetBySpatialReference(e){const t=this.view.spatialReference;if(!e.tileMatrixSets)return null;let i=e.tileMatrixSets.find((e=>(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_9__.equals)(e.tileInfo?.spatialReference,t)));return!i&&t.isWebMercator&&(i=e.tileMatrixSets.find((e=>d.includes(e.tileInfo?.spatialReference.wkid??-1)))),i}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],w.prototype,"_fetchQueue",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],w.prototype,"tileMatrixSet",null),w=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.views.2d.layers.WMTSLayerView2D")],w);const g=w;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvMmI3ZDgwZWYzYTVlNDQ2NTA0ZTM3Mzg1OGMzZWYwNTguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGdCQUFnQixjQUFjLDRCQUE0QixvQkFBb0IsZ0JBQWdCLGNBQWMsbUNBQW1DLFlBQVksSUFBSSxjQUFjLFNBQVMsZ0JBQWdCLCtCQUErQixhQUFhLFdBQVcsYUFBYSxrQkFBa0IsYUFBYSxrQkFBa0IsYUFBYSxrQkFBa0IsYUFBYSxrQkFBa0IsYUFBYSxrQkFBa0IsaUZBQWlGLHdLQUF3SyxxQkFBcUIsZUFBZSxHQUFvSTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0p0MEI7QUFDQTtBQUNBO0FBQ0E7QUFDa00sWUFBWSxjQUFjLE9BQU8sMkRBQUMsTUFBTSxjQUFjLE9BQU8sMkRBQUMsTUFBTSxvQkFBb0IsSUFBSSxnQkFBZ0IsSUFBSSxnQkFBZ0IsR0FBRyxVQUFVLGFBQWEsZ0JBQWdCLFFBQVEseURBQUMsa0JBQWtCLGtEQUFDLDhCQUE4QixjQUFjLHlDQUF5QyxpQkFBaUIsUUFBUSxzREFBc0QsZ0JBQWdCLEtBQUssK0JBQStCLHdCQUF3QixzQkFBc0IsUUFBUSxxREFBQyxHQUFHLFlBQVksSUFBSSxLQUFLLGlCQUFpQixLQUFLLHNCQUFzQixjQUFjLHdCQUF3QixTQUFTLG9CQUFvQixNQUFNLCtCQUErQixnQkFBZ0IsMkRBQUMsNkJBQTZCLGlDQUFpQyx5QkFBeUIsa0JBQWtCLHNCQUFzQixLQUFLLFNBQVMsRUFBRSx3QkFBd0IscUJBQXFCLFNBQVMsMENBQTBDLDhDQUE4Qyw4SUFBOEksWUFBWSxJQUFJLGdCQUFnQixJQUFJLEtBQUssaUNBQWlDLHlCQUF5QixPQUFPLHVCQUF1Qix3QkFBd0Isc0RBQXNELGdDQUFnQyw0RUFBNEUsc0JBQXNCLHNLQUFzSyxZQUFZLFdBQVcsS0FBSyxtQ0FBbUMsT0FBTyx5REFBQyxrQkFBa0IsZ0JBQWdCLGtCQUFrQiwrQkFBK0IsMENBQTBDLGdCQUFnQiwrRUFBK0UsZ0JBQWdCLDBGQUFzYjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKLzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ3lNLGlJQUFpSSxnQkFBZ0Isd0RBQUMsQ0FBQyxlQUFlLDZCQUE2QiwyQkFBMkIsU0FBUyxrQkFBa0IseUVBQXlFLHNCQUFzQixNQUFNLFFBQVEsaUNBQWlDLGtKQUFrSix1QkFBdUIscUNBQXFDLG9DQUFvQyx3QkFBd0IsbUVBQUMsWUFBWSx5REFBTyxDQUFDLHVEQUFLLENBQUMsNkRBQVcsb0NBQW9DLEdBQUcsd0RBQUcsbURBQW1ELHlCQUF5QixnRUFBQyxZQUFZLHlEQUFPLDBCQUEwQixLQUFLLG1CQUFtQixxQkFBcUIsdUJBQXVCLFFBQVEsK0NBQW9FOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKaHJDO0FBQ0E7QUFDQTtBQUNBO0FBQ2lKLGdCQUFnQiw0REFBQyxDQUFDLGlDQUFpQyxnR0FBZ0csMERBQUMsK0ZBQStGLFVBQVUseURBQXlELGdCQUFnQix3TEFBd0wsa0RBQUMsc0JBQXNCLGtEQUFDLDJDQUEyRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0psdkI7QUFDQTtBQUNBO0FBQ0E7QUFDcTlCLGlEQUFpRCxvQkFBb0IsNEVBQUMsQ0FBQyxpRkFBQyxDQUFDLGtFQUFDLENBQUMsNkRBQUMsS0FBSyxjQUFjLDZHQUE2RyxvQkFBb0IseUVBQXlFLCtHQUErRyxVQUFVLCtHQUErRyxTQUFTLHFDQUFxQywyQkFBMkIsZ0VBQUMseUJBQXlCLDZEQUFDLEVBQUUsa0ZBQWtGLHlCQUF5QixnRUFBQyxFQUFFLHVJQUF1SSx3QkFBd0IsNkRBQUMscUdBQXFHLFNBQVMscUlBQXFJLFlBQVkscUJBQXFCLGFBQWEscUJBQXFCLFVBQVUscUJBQXFCLGVBQWUseUhBQXlILGVBQWUsa0RBQWtELHFQQUFxUCxrQkFBa0Isc0VBQXNFLGFBQWEsc0NBQXNDLHNCQUFzQixFQUFFLGtFQUFrRSw2QkFBNkIsR0FBRyxtQ0FBbUMsWUFBWSwyREFBQyxVQUFVLE1BQU0sSUFBSSx5REFBeUQsU0FBUyxnQ0FBZ0MsU0FBUyxHQUFHLG1FQUFDLFlBQVksUUFBUSxpREFBaUQsTUFBTSxZQUFZLDJEQUFDLDhCQUE4Qix5QkFBeUIsRUFBRSxPQUFPLHNFQUFDLDRCQUE0QixRQUFRLE9BQU8sc0VBQUMsMkJBQTJCLFlBQVksMEJBQTBCLHFDQUFxQyw0QkFBNEIsdURBQXVELGtGQUFDLHVDQUF1QywyQkFBMkIsb0NBQW9DLElBQUksMkNBQTJDLHFLQUFxSyxTQUFTLG1FQUFDLEtBQUssaUVBQVcsZ0JBQWdCLHNCQUFzQix1QkFBdUIsNERBQTRELFNBQVMsRUFBRSxXQUFXLHlEQUF5RCwyQkFBMkIsU0FBUyx3RUFBd0Usa0JBQWtCLGNBQWMsbUVBQUMsNEJBQTRCLGlCQUFpQixpQ0FBaUMsSUFBSSw0QkFBNEIsR0FBRyx1Q0FBdUMsbUNBQW1DLGlDQUFpQyxnQ0FBZ0Msa0ZBQUMsbUNBQW1DLGlIQUFpSCx1REFBQyxFQUFFLHNGQUFDLHNDQUFzQyx1REFBQyxFQUFFLHNGQUFDLEVBQUUsWUFBWSx1Q0FBdUMsdURBQUMsRUFBRSxzRkFBQyw2Q0FBNkMsVUFBK0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jaHVua3MvdmVjNGY2NC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9yZW5kZXJlcnMvc3VwcG9ydC9oZWF0bWFwVXRpbHMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3dlYmdsL1RpbGVDb250YWluZXIuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3dlYmdsL1RpbGVkRGlzcGxheU9iamVjdC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvV01UU0xheWVyVmlldzJELmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBuKCl7cmV0dXJuWzAsMCwwLDBdfWZ1bmN0aW9uIHQobil7cmV0dXJuW25bMF0sblsxXSxuWzJdLG5bM11dfWZ1bmN0aW9uIHIobix0LHIsZSl7cmV0dXJuW24sdCxyLGVdfWZ1bmN0aW9uIGUodCl7Y29uc3Qgcj1uKCksZT1NYXRoLm1pbig0LHQubGVuZ3RoKTtmb3IobGV0IG49MDtuPGU7KytuKXJbbl09dFtuXTtyZXR1cm4gcn1mdW5jdGlvbiB1KG4sdCl7cmV0dXJuIG5ldyBGbG9hdDY0QXJyYXkobix0LDQpfWZ1bmN0aW9uIGEoKXtyZXR1cm4gbigpfWZ1bmN0aW9uIG8oKXtyZXR1cm4gcigxLDEsMSwxKX1mdW5jdGlvbiBzKCl7cmV0dXJuIHIoMSwwLDAsMCl9ZnVuY3Rpb24gaSgpe3JldHVybiByKDAsMSwwLDApfWZ1bmN0aW9uIGMoKXtyZXR1cm4gcigwLDAsMSwwKX1mdW5jdGlvbiBmKCl7cmV0dXJuIHIoMCwwLDAsMSl9Y29uc3QgbD1hKCksXz1vKCksTj1zKCksTz1pKCksVD1jKCksVT1mKCksYj1PYmplY3QuZnJlZXplKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7X19wcm90b19fOm51bGwsT05FUzpfLFVOSVRfVzpVLFVOSVRfWDpOLFVOSVRfWTpPLFVOSVRfWjpULFpFUk9TOmwsY2xvbmU6dCxjcmVhdGU6bixjcmVhdGVWaWV3OnUsZnJvbUFycmF5OmUsZnJvbVZhbHVlczpyLG9uZXM6byx1bml0VzpmLHVuaXRYOnMsdW5pdFk6aSx1bml0WjpjLHplcm9zOmF9LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pKTtleHBvcnR7XyBhcyBPLE4gYXMgVSxsIGFzIFosdSBhcyBhLGUgYXMgYixuIGFzIGMsdCBhcyBkLGkgYXMgZSxyIGFzIGYsYyBhcyBnLGYgYXMgaCxPIGFzIGksVCBhcyBqLFUgYXMgayxvLHMgYXMgdSxiIGFzIHYsYSBhcyB6fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Y2xhbXAgYXMgdH1mcm9tXCIuLi8uLi9jb3JlL21hdGhVdGlscy5qc1wiO2ltcG9ydHtweDJwdCBhcyByLHB0MnB4IGFzIG59ZnJvbVwiLi4vLi4vY29yZS9zY3JlZW5VdGlscy5qc1wiO2ltcG9ydHtsIGFzIG99ZnJvbVwiLi4vLi4vY2h1bmtzL3ZlYzQuanNcIjtpbXBvcnR7YyBhcyBlfWZyb21cIi4uLy4uL2NodW5rcy92ZWM0ZjY0LmpzXCI7Y29uc3QgYT0yLjQ7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gcih0KmEpfWZ1bmN0aW9uIGModCl7cmV0dXJuIG4odCkvYX1mdW5jdGlvbiBmKHIsbixlLGEpe2xldHtjb2xvcjppLHJhdGlvOmN9PW4se2NvbG9yOmYscmF0aW86dX09ZTtpZih1PT09Yyl7Y29uc3QgdD0xZS02OzE9PT11P2MtPXQ6dSs9dH1jb25zdCBzPXQoKGEtYykvKHUtYyksMCwxKTtvKHIsaS50b0FycmF5KCksZi50b0FycmF5KCkscyl9ZnVuY3Rpb24gdSh0KXtjb25zdCByPTUxMixuPW5ldyBVaW50OENsYW1wZWRBcnJheSg0KnIpO2lmKHQ9dC5maWx0ZXIoKCh7cmF0aW86dH0pPT50Pj0wJiZ0PD0xKSkuc29ydCgoKHQscik9PnQucmF0aW8tci5yYXRpbykpLm1hcCgoKHtjb2xvcjp0LHJhdGlvOnJ9KT0+KHtjb2xvcjp0LHJhdGlvOk1hdGgubWF4KHIsLjAwMSl9KSkpLHQubGVuZ3RoPDEpcmV0dXJuIG47bGV0IG89dFswXSxhPXRbMF0saT0xO2NvbnN0IGM9ZSgpO2ZvcihsZXQgZT0wO2U8cjtlKyspe2NvbnN0IHU9KGUrLjUpL3I7Zm9yKDt1PmEucmF0aW8mJmk8dC5sZW5ndGg7KW89YSxhPXRbaSsrXTtmKGMsbyxhLHUpLG4uc2V0KGMsNCplKX1yZXR1cm4gbn1mdW5jdGlvbiBzKHQscixvLGUpe2NvbnN0e3JhZGl1czphLGZpZWxkT2Zmc2V0OmksZmllbGQ6Y309cixmPU1hdGgucm91bmQobihhKSksdT1uZXcgRmxvYXQ2NEFycmF5KG8qZSk7bGV0IHMsbD1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7Y29uc3QgaD1kKGMsaSkseT1uZXcgU2V0O2Zvcihjb25zdCBuIG9mIHQpe2NvbnN0IHQ9bi5nZXRDdXJzb3IoKTtmb3IoO3QubmV4dCgpOyl7Y29uc3Qgcj10LmdldE9iamVjdElkKCk7aWYoeS5oYXMocikpY29udGludWU7eS5hZGQocik7Y29uc3Qgbj10LnJlYWRMZWdhY3lQb2ludEdlb21ldHJ5KCksYT0xMjg7aWYobi54PC1hfHxuLng+PW8rYXx8bi55PC1hfHxuLnk+ZSthKWNvbnRpbnVlO2NvbnN0IGk9K2godCksYz1NYXRoLm1heCgwLE1hdGgucm91bmQobi54KS1mKSxkPU1hdGgubWF4KDAsTWF0aC5yb3VuZChuLnkpLWYpLGc9TWF0aC5taW4oZSxNYXRoLnJvdW5kKG4ueSkrZiksQT1NYXRoLm1pbihvLE1hdGgucm91bmQobi54KStmKTtmb3IobGV0IHQ9ZDt0PGc7dCsrKWZvcihsZXQgcj1jO3I8QTtyKyspe2NvbnN0IGU9dCpvK3IsYT1tKG4ueC1yLG4ueS10LGYpO3M9dVtlXSs9YSppLHM+bCYmKGw9cyl9fX1yZXR1cm57bWF0cml4OnUuYnVmZmVyLG1heDpsfX1mdW5jdGlvbiBsKHQscixuLG8sZSxhKXt0LmNhbnZhcy53aWR0aD10LmNhbnZhcy5oZWlnaHQ9cix0LmNsZWFyUmVjdCgwLDAscixyKTtjb25zdCBpPXQuZ2V0SW1hZ2VEYXRhKDAsMCxyLHIpO24mJm8mJmkuZGF0YS5zZXQobmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGgocixuLG8sZSxhKSkpLHQucHV0SW1hZ2VEYXRhKGksMCwwKX1mdW5jdGlvbiBoKHIsbixvLGUsYSl7Y29uc3QgaT1uZXcgVWludDMyQXJyYXkocipyKSxjPVwiYnVmZmVyXCJpbiBuP246bmV3IEZsb2F0NjRBcnJheShuKSxmPVwiYnVmZmVyXCJpbiBvP25ldyBVaW50MzJBcnJheShvLmJ1ZmZlcik6bmV3IFVpbnQzMkFycmF5KG5ldyBVaW50OEFycmF5KG8pLmJ1ZmZlciksdT1mLmxlbmd0aC8oYS1lKTtmb3IobGV0IHM9MDtzPGMubGVuZ3RoO3MrKyl7Y29uc3Qgcj1jW3NdLG49TWF0aC5mbG9vcigoci1lKSp1KTtpW3NdPWZbdChuLDAsZi5sZW5ndGgtMSldfXJldHVybiBpLmJ1ZmZlcn1mdW5jdGlvbiBtKHQscixuKXtjb25zdCBvPU1hdGguc3FydCh0KioyK3IqKjIpL247cmV0dXJuIG8+MT8wOjMvKE1hdGguUEkqbioqMikqKDEtbyoqMikqKjJ9ZnVuY3Rpb24geSh0LHIpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDp0P1wic3RyaW5nXCI9PXR5cGVvZiByP3I9Pi0xKityW3RdOm49PituW3RdK3I6KCk9PjF9ZnVuY3Rpb24gZCh0LHIpe3JldHVybiBudWxsIT10P1wic3RyaW5nXCI9PXR5cGVvZiByP3I9Pi0xKityLnJlYWRBdHRyaWJ1dGUodCk6bj0+K24ucmVhZEF0dHJpYnV0ZSh0KStyOnQ9PjF9ZXhwb3J0e2EgYXMgTUFHSUNfS0VSTkVMX0RFTlNJVFlfUkFESVVTX0lORkxBVElPTl9GQUNUT1IscyBhcyBjYWxjdWxhdGVIZWF0bWFwSW50ZW5zaXR5SW5mb1JlYWRlcnMsaCBhcyBjcmVhdGVIZWF0bWFwSW1hZ2VEYXRhLHkgYXMgY3JlYXRlVmFsdWVGdW5jdGlvbixkIGFzIGNyZWF0ZVZhbHVlRnVuY3Rpb25DdXJzb3IsbCBhcyBkcmF3SGVhdG1hcCxtIGFzIGV2YWx1YXRlRGVuc2l0eUtlcm5lbCxpIGFzIGdhdXNzaWFuQmx1clJhZGl1c1B4VG9LZXJuZWxEZW5zaXR5UmFkaXVzUHQsdSBhcyBnZW5lcmF0ZUdyYWRpZW50LGMgYXMga2VybmVsRGVuc2l0eVJhZGl1c1B0VG9HYXVzc2lhbkJsdXJSYWRpdXNQeH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGhhcyBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtXR0xEcmF3UGhhc2UgYXMgZX1mcm9tXCIuL2VudW1zLmpzXCI7aW1wb3J0IHIgZnJvbVwiLi9XR0xDb250YWluZXIuanNcIjtpbXBvcnQgcyBmcm9tXCIuL2JydXNoZXMvV0dMQnJ1c2hJbmZvLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi9icnVzaGVzL1dHTEJydXNoU3RlbmNpbC5qc1wiO2NvbnN0IG49KGUscik9PmUua2V5LmxldmVsLXIua2V5LmxldmVsIT0wP2Uua2V5LmxldmVsLXIua2V5LmxldmVsOmUua2V5LnJvdy1yLmtleS5yb3chPTA/ZS5rZXkucm93LXIua2V5LnJvdzplLmtleS5jb2wtci5rZXkuY29sO2NsYXNzIGkgZXh0ZW5kcyBye2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5fdGlsZUluZm9WaWV3PWV9Z2V0IHJlcXVpcmVzRGVkaWNhdGVkRkJPKCl7cmV0dXJuITF9cmVuZGVyQ2hpbGRyZW4oZSl7dGhpcy5zb3J0Q2hpbGRyZW4obiksdGhpcy5zZXRTdGVuY2lsUmVmZXJlbmNlKGUpLHN1cGVyLnJlbmRlckNoaWxkcmVuKGUpfWNyZWF0ZVJlbmRlclBhcmFtcyhlKXtjb25zdHtzdGF0ZTpyfT1lLHM9c3VwZXIuY3JlYXRlUmVuZGVyUGFyYW1zKGUpO3JldHVybiBzLnJlcXVpcmVkTGV2ZWw9dGhpcy5fdGlsZUluZm9WaWV3LmdldENsb3Nlc3RJbmZvRm9yU2NhbGUoci5zY2FsZSkubGV2ZWwscy5kaXNwbGF5TGV2ZWw9dGhpcy5fdGlsZUluZm9WaWV3LnRpbGVJbmZvLnNjYWxlVG9ab29tKHIuc2NhbGUpLHN9cHJlcGFyZVJlbmRlclBhc3NlcyhyKXtjb25zdCBuPXN1cGVyLnByZXBhcmVSZW5kZXJQYXNzZXMocik7cmV0dXJuIG4ucHVzaChyLnJlZ2lzdGVyUmVuZGVyUGFzcyh7bmFtZTpcInN0ZW5jaWxcIixicnVzaGVzOlt0XSxkcmF3UGhhc2U6ZS5ERUJVR3xlLk1BUHxlLkhJR0hMSUdIVCx0YXJnZXQ6KCk9PnRoaXMuZ2V0U3RlbmNpbFRhcmdldCgpfSkpLGhhcyhcImVzcmktdGlsZXMtZGVidWdcIikmJm4ucHVzaChyLnJlZ2lzdGVyUmVuZGVyUGFzcyh7bmFtZTpcInRpbGVJbmZvXCIsYnJ1c2hlczpbc10sZHJhd1BoYXNlOmUuREVCVUcsdGFyZ2V0OigpPT50aGlzLmNoaWxkcmVufSkpLG59Z2V0U3RlbmNpbFRhcmdldCgpe3JldHVybiB0aGlzLmNoaWxkcmVufXNldFN0ZW5jaWxSZWZlcmVuY2UoZSl7bGV0IHI9MTtmb3IoY29uc3QgcyBvZiB0aGlzLmNoaWxkcmVuKXMuc3RlbmNpbFJlZj1yKyt9fWV4cG9ydHtpIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtzIGFzIHQsbSBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy9tYXQzLmpzXCI7aW1wb3J0e0Rpc3BsYXlPYmplY3QgYXMgaX1mcm9tXCIuLi9EaXNwbGF5T2JqZWN0LmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vdGlsaW5nL1RpbGVLZXkuanNcIjtjbGFzcyByIGV4dGVuZHMgaXtjb25zdHJ1Y3Rvcih0LHMsaSxyLGgsbyxuPWgsYT1vKXtzdXBlcigpLHRoaXMudHJpYW5nbGVDb3VudFJlcG9ydGVkSW5EZWJ1Zz0wLHRoaXMudHJpYW5nbGVDb3VudD0wLHRoaXMudGV4dHVyZT1udWxsLHRoaXMua2V5PW5ldyBlKHQpLHRoaXMucmVzb2x1dGlvbj1zLHRoaXMueD1pLHRoaXMueT1yLHRoaXMud2lkdGg9aCx0aGlzLmhlaWdodD1vLHRoaXMucmFuZ2VYPW4sdGhpcy5yYW5nZVk9YX1kZXN0cm95KCl7dGhpcy50ZXh0dXJlJiYodGhpcy50ZXh0dXJlLmRpc3Bvc2UoKSx0aGlzLnRleHR1cmU9bnVsbCl9c2V0VHJhbnNmb3JtKGkpe2NvbnN0IGU9dGhpcy5yZXNvbHV0aW9uLyhpLnJlc29sdXRpb24qaS5waXhlbFJhdGlvKSxyPXRoaXMudHJhbnNmb3Jtcy50aWxlTWF0MyxbaCxvXT1pLnRvU2NyZWVuTm9Sb3RhdGlvbihbMCwwXSxbdGhpcy54LHRoaXMueV0pLG49dGhpcy53aWR0aC90aGlzLnJhbmdlWCplLGE9dGhpcy5oZWlnaHQvdGhpcy5yYW5nZVkqZTt0KHIsbiwwLDAsMCxhLDAsaCxvLDEpLHModGhpcy50cmFuc2Zvcm1zLmR2cyxpLmRpc3BsYXlWaWV3TWF0MyxyKX19ZXhwb3J0e3IgYXMgVGlsZWREaXNwbGF5T2JqZWN0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtpc0Fib3J0RXJyb3IgYXMgaX1mcm9tXCIuLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHt3YXRjaCBhcyBzfWZyb21cIi4uLy4uLy4uL2NvcmUvcmVhY3RpdmVVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyByfWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgYX1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2VxdWFscyBhcyBsfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvc3BhdGlhbFJlZmVyZW5jZVV0aWxzLmpzXCI7aW1wb3J0e0JpdG1hcFRpbGVMYXllclZpZXcyRCBhcyBvfWZyb21cIi4vQml0bWFwVGlsZUxheWVyVmlldzJELmpzXCI7aW1wb3J0e0xheWVyVmlldzJETWl4aW4gYXMgaH1mcm9tXCIuL0xheWVyVmlldzJELmpzXCI7aW1wb3J0e3Jlc2FtcGxlSW1hZ2UgYXMgY31mcm9tXCIuL3N1cHBvcnQvaW1hZ2VVdGlscy5qc1wiO2ltcG9ydCBuIGZyb21cIi4uL3RpbGluZy9UaWxlSW5mb1ZpZXcuanNcIjtpbXBvcnQgdSBmcm9tXCIuLi90aWxpbmcvVGlsZUtleS5qc1wiO2ltcG9ydCBwIGZyb21cIi4uL3RpbGluZy9UaWxlUXVldWUuanNcIjtpbXBvcnQgZiBmcm9tXCIuLi90aWxpbmcvVGlsZVN0cmF0ZWd5LmpzXCI7aW1wb3J0IG0gZnJvbVwiLi4vLi4vbGF5ZXJzL0xheWVyVmlldy5qc1wiO2ltcG9ydCB5IGZyb21cIi4uLy4uL2xheWVycy9SZWZyZXNoYWJsZUxheWVyVmlldy5qc1wiO2NvbnN0IGQ9WzEwMjExMywxMDIxMDAsMzg1NywzNzg1LDkwMDkxM10sXz1bMCwwXTtsZXQgdz1jbGFzcyBleHRlbmRzKHkobyhoKG0pKSkpe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLl90aWxlU3RyYXRlZ3k9bnVsbCx0aGlzLl9mZXRjaFF1ZXVlPW51bGwsdGhpcy5fdGlsZVJlcXVlc3RzPW5ldyBNYXAsdGhpcy5sYXllcj1udWxsfWdldCB0aWxlTWF0cml4U2V0KCl7Y29uc3QgZT10aGlzLl9nZXRUaWxlTWF0cml4U2V0QnlTcGF0aWFsUmVmZXJlbmNlKHRoaXMubGF5ZXIuYWN0aXZlTGF5ZXIpO3JldHVybiBlPyhlLmlkIT09dGhpcy5sYXllci5hY3RpdmVMYXllci50aWxlTWF0cml4U2V0SWQmJih0aGlzLmxheWVyLmFjdGl2ZUxheWVyLnRpbGVNYXRyaXhTZXRJZD1lLmlkKSxlKTpudWxsfXVwZGF0ZShlKXt0aGlzLl9mZXRjaFF1ZXVlLnBhdXNlKCksdGhpcy5fZmV0Y2hRdWV1ZS5zdGF0ZT1lLnN0YXRlLHRoaXMuX3RpbGVTdHJhdGVneS51cGRhdGUoZSksdGhpcy5fZmV0Y2hRdWV1ZS5yZXN1bWUoKX1hdHRhY2goKXtjb25zdCBlPXRoaXMudGlsZU1hdHJpeFNldD8udGlsZUluZm87ZSYmKHRoaXMuX3RpbGVJbmZvVmlldz1uZXcgbihlKSx0aGlzLl9mZXRjaFF1ZXVlPW5ldyBwKHt0aWxlSW5mb1ZpZXc6dGhpcy5fdGlsZUluZm9WaWV3LGNvbmN1cnJlbmN5OjE2LHByb2Nlc3M6KGUsdCk9PnRoaXMuZmV0Y2hUaWxlKGUsdCl9KSx0aGlzLl90aWxlU3RyYXRlZ3k9bmV3IGYoe2NhY2hlUG9saWN5Olwia2VlcFwiLHJlc2FtcGxpbmc6ITAsYWNxdWlyZVRpbGU6ZT0+dGhpcy5hY3F1aXJlVGlsZShlKSxyZWxlYXNlVGlsZTplPT50aGlzLnJlbGVhc2VUaWxlKGUpLHRpbGVJbmZvVmlldzp0aGlzLl90aWxlSW5mb1ZpZXd9KSx0aGlzLmFkZEF0dGFjaEhhbmRsZXMocygoKCk9Plt0aGlzLmxheWVyPy5hY3RpdmVMYXllcj8uc3R5bGVJZCx0aGlzLnRpbGVNYXRyaXhTZXRdKSwoKCk9PnRoaXMuX3JlZnJlc2goKSkpKSxzdXBlci5hdHRhY2goKSl9ZGV0YWNoKCl7c3VwZXIuZGV0YWNoKCksdGhpcy5fdGlsZVN0cmF0ZWd5Py5kZXN0cm95KCksdGhpcy5fZmV0Y2hRdWV1ZT8uZGVzdHJveSgpLHRoaXMuX2ZldGNoUXVldWU9dGhpcy5fdGlsZVN0cmF0ZWd5PXRoaXMuX3RpbGVJbmZvVmlldz1udWxsfW1vdmVTdGFydCgpe3RoaXMucmVxdWVzdFVwZGF0ZSgpfXZpZXdDaGFuZ2UoKXt0aGlzLnJlcXVlc3RVcGRhdGUoKX1tb3ZlRW5kKCl7dGhpcy5yZXF1ZXN0VXBkYXRlKCl9cmVsZWFzZVRpbGUoZSl7dGhpcy5fZmV0Y2hRdWV1ZS5hYm9ydChlLmtleS5pZCksdGhpcy5fYml0bWFwVmlldy5yZW1vdmVDaGlsZChlKSxlLm9uY2UoXCJkZXRhY2hcIiwoKCk9PmUuZGVzdHJveSgpKSksdGhpcy5yZXF1ZXN0VXBkYXRlKCl9YWNxdWlyZVRpbGUoZSl7Y29uc3QgdD10aGlzLl9iaXRtYXBWaWV3LmNyZWF0ZVRpbGUoZSksaT10LmJpdG1hcDtyZXR1cm5baS54LGkueV09dGhpcy5fdGlsZUluZm9WaWV3LmdldFRpbGVDb29yZHMoXyx0LmtleSksaS5yZXNvbHV0aW9uPXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlUmVzb2x1dGlvbih0LmtleSksW2kud2lkdGgsaS5oZWlnaHRdPXRoaXMuX3RpbGVJbmZvVmlldy50aWxlSW5mby5zaXplLHRoaXMuX2VucXVldWVUaWxlRmV0Y2godCksdGhpcy5fYml0bWFwVmlldy5hZGRDaGlsZCh0KSx0aGlzLnJlcXVlc3RVcGRhdGUoKSx0fWFzeW5jIGRvUmVmcmVzaCgpeyF0aGlzLmF0dGFjaGVkfHx0aGlzLnVwZGF0ZVJlcXVlc3RlZHx8dGhpcy5zdXNwZW5kZWR8fHRoaXMuX3JlZnJlc2goKX1pc1VwZGF0aW5nKCl7cmV0dXJuIHRoaXMuX2ZldGNoUXVldWU/LnVwZGF0aW5nPz8hMX1hc3luYyBmZXRjaFRpbGUoZSx0PXt9KXtjb25zdCBzPVwidGlsZW1hcENhY2hlXCJpbiB0aGlzLmxheWVyP3RoaXMubGF5ZXIudGlsZW1hcENhY2hlOm51bGwse3NpZ25hbDpyLHJlc2FtcGxpbmdMZXZlbDphPTB9PXQ7aWYoIXMpcmV0dXJuIHRoaXMuX2ZldGNoSW1hZ2UoZSxyKTtjb25zdCBsPW5ldyB1KDAsMCwwLDApO2xldCBvO3RyeXthd2FpdCBzLmZldGNoQXZhaWxhYmlsaXR5VXBzYW1wbGUoZS5sZXZlbCxlLnJvdyxlLmNvbCxsLHtzaWduYWw6cn0pLG89YXdhaXQgdGhpcy5fZmV0Y2hJbWFnZShsLHIpfWNhdGNoKGgpe2lmKGkoaCkpdGhyb3cgaDtpZihhPDMpe2NvbnN0IGk9dGhpcy5fdGlsZUluZm9WaWV3LmdldFRpbGVQYXJlbnRJZChlLmlkKTtpZihpKXtjb25zdCBzPW5ldyB1KGkpLHI9YXdhaXQgdGhpcy5mZXRjaFRpbGUocyx7Li4udCxyZXNhbXBsaW5nTGV2ZWw6YSsxfSk7cmV0dXJuIGModGhpcy5fdGlsZUluZm9WaWV3LHIscyxlKX19dGhyb3cgaH1yZXR1cm4gYyh0aGlzLl90aWxlSW5mb1ZpZXcsbyxsLGUpfWNhblJlc3VtZSgpe2NvbnN0IGU9c3VwZXIuY2FuUmVzdW1lKCk7cmV0dXJuIGU/bnVsbCE9PXRoaXMudGlsZU1hdHJpeFNldDplfXN1cHBvcnRzU3BhdGlhbFJlZmVyZW5jZShlKXtyZXR1cm4gdGhpcy5sYXllci5hY3RpdmVMYXllci50aWxlTWF0cml4U2V0cz8uc29tZSgodD0+bCh0LnRpbGVJbmZvPy5zcGF0aWFsUmVmZXJlbmNlLGUpKSk/PyExfWFzeW5jIF9lbnF1ZXVlVGlsZUZldGNoKGUpe2lmKCF0aGlzLl9mZXRjaFF1ZXVlLmhhcyhlLmtleS5pZCkpe3RyeXtjb25zdCB0PWF3YWl0IHRoaXMuX2ZldGNoUXVldWUucHVzaChlLmtleSk7ZS5iaXRtYXAuc291cmNlPXQsZS5iaXRtYXAud2lkdGg9dGhpcy5fdGlsZUluZm9WaWV3LnRpbGVJbmZvLnNpemVbMF0sZS5iaXRtYXAuaGVpZ2h0PXRoaXMuX3RpbGVJbmZvVmlldy50aWxlSW5mby5zaXplWzFdLGUub25jZShcImF0dGFjaFwiLCgoKT0+dGhpcy5yZXF1ZXN0VXBkYXRlKCkpKX1jYXRjaChzKXtpKHMpfHx0LmdldExvZ2dlcih0aGlzKS5lcnJvcihzKX10aGlzLnJlcXVlc3RVcGRhdGUoKX19YXN5bmMgX2ZldGNoSW1hZ2UoZSx0KXtyZXR1cm4gdGhpcy5sYXllci5mZXRjaEltYWdlQml0bWFwVGlsZShlLmxldmVsLGUucm93LGUuY29sLHtzaWduYWw6dH0pfV9yZWZyZXNoKCl7dGhpcy5fZmV0Y2hRdWV1ZS5yZXNldCgpLHRoaXMuX3RpbGVTdHJhdGVneS5yZWZyZXNoKChlPT57aWYoIWUuYml0bWFwLnNvdXJjZSlyZXR1cm47Y29uc3QgdD17aWQ6ZS5rZXkuaWQsZnVsZmlsbGVkOiExLHByb21pc2U6dGhpcy5fZmV0Y2hRdWV1ZS5wdXNoKGUua2V5KS50aGVuKCh0PT57ZS5iaXRtYXAuc291cmNlPXR9KSkuY2F0Y2goKHQ9PntpKHQpfHwoZS5iaXRtYXAuc291cmNlPW51bGwpfSkpLmZpbmFsbHkoKCgpPT57ZS5yZXF1ZXN0UmVuZGVyKCksdC5mdWxmaWxsZWQ9ITB9KSl9O3RoaXMuX3RpbGVSZXF1ZXN0cy5zZXQoZSx0KX0pKX1fZ2V0VGlsZU1hdHJpeFNldEJ5U3BhdGlhbFJlZmVyZW5jZShlKXtjb25zdCB0PXRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlO2lmKCFlLnRpbGVNYXRyaXhTZXRzKXJldHVybiBudWxsO2xldCBpPWUudGlsZU1hdHJpeFNldHMuZmluZCgoZT0+bChlLnRpbGVJbmZvPy5zcGF0aWFsUmVmZXJlbmNlLHQpKSk7cmV0dXJuIWkmJnQuaXNXZWJNZXJjYXRvciYmKGk9ZS50aWxlTWF0cml4U2V0cy5maW5kKChlPT5kLmluY2x1ZGVzKGUudGlsZUluZm8/LnNwYXRpYWxSZWZlcmVuY2Uud2tpZD8/LTEpKSkpLGl9fTtlKFtyKCldLHcucHJvdG90eXBlLFwiX2ZldGNoUXVldWVcIix2b2lkIDApLGUoW3Ioe3JlYWRPbmx5OiEwfSldLHcucHJvdG90eXBlLFwidGlsZU1hdHJpeFNldFwiLG51bGwpLHc9ZShbYShcImVzcmkudmlld3MuMmQubGF5ZXJzLldNVFNMYXllclZpZXcyRFwiKV0sdyk7Y29uc3QgZz13O2V4cG9ydHtnIGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9