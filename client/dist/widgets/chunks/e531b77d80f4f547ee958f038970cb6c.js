"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_arcgis_core_layers_graphics_sources_connections_createConnection_js"],{

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./WebSocketConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js");
/* harmony import */ var _rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../rest/query/operations/query.js */ "./node_modules/@arcgis/core/rest/query/operations/query.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const h=1e4,d={maxQueryDepth:5,maxRecordCountFactor:3};let g=class extends _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_11__.WebSocketConnection{constructor(e){super({...d,...e}),this._buddyServicesQuery=null,this._relatedFeatures=null}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){if("attributes"in e){let o;try{o=this._enrich(e),null!=this._featureZScaler&&this._featureZScaler(o.geometry)}catch(t){return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Failed to parse message",t))}this.onFeature(o)}else this.onMessage(e)}async _fetchServiceDefinition(e){const r={f:"json",...this._config.customParameters},s=(0,_request_js__WEBPACK_IMPORTED_MODULE_2__["default"])(e.path,{query:r,responseType:"json"}),o=(await s).data;return this._serviceDefinition=o,o}_fetchWebSocketUrl(e,t){const r=e[0],{urls:s,token:o}=r,n=this._inferWebSocketBaseUrl(s);return (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__.addQueryParameters)(`${n}/subscribe`,{outSR:""+t.wkid,token:o})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes("wss"))return t;return _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Unable to infer WebSocket url",e)),null}async _setFilter(e,t){const i=this._websocket;if(null==i||null==e&&null==t)return;const n=JSON.stringify({filter:this._serializeFilter(e,t)});let a=!1;const c=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.createResolver)(),u=()=>{a||(this.destroyed||this._websocket!==i||_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Server timed out when setting filter")),c.reject())},l=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Failed to set service filter",t.error)),this._set("errorString",`Could not set service filter - ${t.error}`),c.reject(t.error)),this._setWebSocketJSONParseHandler(i),a=!0,c.resolve())};return i.onmessage=l,i.send(n),setTimeout(u,h),c.promise}_serializeFilter(e,t){const o={};if(null==e&&null==t)return o;if(null!=e&&e.geometry)try{const t=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_14__.fromJSON)(e.geometry);if("extent"!==t.type)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"](`Expected extent but found type ${t.type}`);o.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(i){_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Encountered an error when setting connection geometryDefinition",i))}return null!=e&&e.where&&"1 = 1"!==e.where&&"1=1"!==e.where&&(o.where=e.where),null!=t&&(o.outFields=t.join(",")),o}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t],i=this._relatedFeatures.get(o);if(!i)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",e),e;const{attributes:n,geometry:a}=i;for(const r in n)e.attributes[r]=n[r];return a&&(e.geometry=a),e.geometry||e.centroid||_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Found malformed feature - no geometry found",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),s=this._queryArchive(t);await r;const o=await s;if(!o)return;for(const i of o.features)this.onFeature(this._enrich(i))}catch(e){_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Encountered an error when querying buddy services",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_arcgis_core_layers_effects_parser_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_renderers_support_AuthoringInfo_js-node_modules_arcgis_core_-b32925"), __webpack_require__.e("vendors-node_modules_arcgis_core_core_MultiOriginJSONSupport_js-node_modules_arcgis_core_laye-087251"), __webpack_require__.e("vendors-node_modules_arcgis_core_core_sql_js-node_modules_arcgis_core_layers_support_LabelCla-a5056f"), __webpack_require__.e("vendors-node_modules_arcgis_core_views_2d_layers_support_clusterUtils_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_renderers_ClassBreaksRenderer_js-node_modules_arcgis_core_re-9e9767"), __webpack_require__.e("vendors-node_modules_arcgis_core_renderers_support_jsonUtils_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_layers_mixins_BlendLayer_js-node_modules_arcgis_core_layers_-6ec357"), __webpack_require__.e("vendors-node_modules_arcgis_core_layers_support_featureLayerUtils_js-node_modules_arcgis_core-f22d70"), __webpack_require__.e("vendors-node_modules_arcgis_core_layers_mixins_FeatureReductionLayer_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_layers_mixins_FeatureEffectLayer_js-node_modules_arcgis_core-8d933d"), __webpack_require__.e("vendors-node_modules_arcgis_core_layers_mixins_RefreshableLayer_js-node_modules_arcgis_core_l-c20c69"), __webpack_require__.e("vendors-node_modules_arcgis_core_form_FormTemplate_js-node_modules_arcgis_core_layers_mixins_-2f335e"), __webpack_require__.e("vendors-node_modules_arcgis_core_layers_FeatureLayer_js"), __webpack_require__.e("node_modules_arcgis_core_layers_mixins_APIKeyMixin_js-node_modules_arcgis_core_layers_mixins_-b8a5d2")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../FeatureLayer.js */ "./node_modules/@arcgis/core/layers/FeatureLayer.js"))).default)({url:e}),{capabilities:r}=await t.load(),s=r.query.supportsMaxRecordCountFactor,o=r.query.supportsPagination,i=r.query.supportsCentroid,n=this._config.maxRecordCountFactor,a=t.capabilities.query.maxRecordCount,l=s?a*n:a,h=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_13__["default"];if(h.outFields=this._config.outFields??["*"],h.where=this._config.filter?.where??"1=1",h.returnGeometry=!0,h.returnExceededLimitFeatures=!0,h.outSpatialReference=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_15__["default"].fromJSON(this._config.spatialReference),i&&(h.returnCentroid=!0),s&&(h.maxRecordCountFactor=n),o)return h.num=l,t.destroy(),this._queryPages(e,h);const d=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(e,h,this._config.sourceSpatialReference);return t.destroy(),d.data}async _queryPages(e,t,r=[],s=0){t.start=null!=t.num?s*t.num:null;const{data:o}=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(e,t,this._config.sourceSpatialReference);return o.exceededTransferLimit&&s<(this._config.maxQueryDepth??0)?(o.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,s+1)):(r.forEach((e=>o.features.push(e))),o)}_addRelatedFeatures(e){const t=new Map,r=e.features,s=this._serviceDefinition.relatedFeatures.joinField;for(const o of r){const e=o.attributes[s];t.set(e,o)}this._relatedFeatures=t}};g=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__.subclass)("esri.layers.graphics.sources.connections.GeoEventConnection")],g);const y=g;


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WebSocketConnection": () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../geometry/support/zscale.js */ "./node_modules/@arcgis/core/geometry/support/zscale.js");
/* harmony import */ var _support_StreamConnection_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../support/StreamConnection.js */ "./node_modules/@arcgis/core/layers/support/StreamConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
var h;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(h||(h={}));let d=class extends _support_StreamConnection_js__WEBPACK_IMPORTED_MODULE_11__["default"]{constructor(e){super(),this._outstandingMessages=[],this.errorString=null;const{geometryType:t,spatialReference:o,sourceSpatialReference:s}=e;this._config=e,this._featureZScaler=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_10__.getGeometryZScaler)(t,s,o),this._open()}async _open(){await this._tryCreateWebSocket(),this.destroyed||await this._handshake()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return"disconnected";switch(this._websocket.readyState){case h.CONNECTING:case h.OPEN:return"connected";case h.CLOSING:case h.CLOSED:return"disconnected"}}sendMessageToSocket(e){null!=this._websocket?this._websocket.send(JSON.stringify(e)):this._outstandingMessages.push(e)}sendMessageToClient(e){this._onMessage(e)}updateCustomParameters(e){this._config.customParameters=e,null!=this._websocket&&this._websocket.close()}async _tryCreateWebSocket(e=this._config.source.path,r=1e3,i=0){try{if(this.destroyed)return;const t=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.addQueryParameters)(e,this._config.customParameters??{});this._websocket=await this._createWebSocket(t),this.notifyChange("connectionStatus")}catch(c){const n=r/1e3;return this._config.maxReconnectionAttempts&&i>=this._config.maxReconnectionAttempts?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void this.destroy()):(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection",`Failed to connect. Attempting to reconnect in ${n}s`,c)),await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.after)(r),this._tryCreateWebSocket(e,Math.min(1.5*r,1e3*this._config.maxReconnectionInterval),i+1))}}_setWebSocketJSONParseHandler(e){e.onmessage=e=>{try{const t=JSON.parse(e.data);this._onMessage(t)}catch(s){return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Failed to parse message, invalid JSON",{error:s}))}}}_createWebSocket(e){return new Promise(((t,o)=>{const s=new WebSocket(e);s.onopen=()=>{if(s.onopen=null,this.destroyed)return s.onclose=null,void s.close();s.onclose=e=>this._onClose(e),s.onerror=e=>this._onError(e),this._setWebSocketJSONParseHandler(s),t(s)},s.onclose=e=>{s.onopen=s.onclose=null,o(e)}}))}async _handshake(e=1e4){const s=this._websocket;if(null==s)return;const n=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.createResolver)(),i=s.onmessage,{filter:c,outFields:a,spatialReference:l}=this._config;return n.timeout(e),s.onmessage=e=>{let r=null;try{r=JSON.parse(e.data)}catch(h){}r&&"object"==typeof r||(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Protocol violation. Handshake failed - malformed message",e.data)),n.reject(),this.destroy()),r.spatialReference?.wkid!==l?.wkid&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${l.wkid}`,e.data)),n.reject(),this.destroy()),"json"!==r.format&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Protocol violation. Handshake failed - format is not set",e.data)),n.reject(),this.destroy()),c&&r.filter!==c&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Tried to set filter, but server doesn't support it")),a&&r.outFields!==a&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Tried to set outFields, but server doesn't support it")),s.onmessage=i;for(const t of this._outstandingMessages)s.send(JSON.stringify(t));this._outstandingMessages=[],n.resolve()},s.send(JSON.stringify({filter:c,outFields:a,format:"json",spatialReference:{wkid:l.wkid}})),n.promise}_onMessage(e){if(this.onMessage(e),"type"in e)switch(e.type){case"features":case"featureResult":for(const t of e.features)null!=this._featureZScaler&&this._featureZScaler(t.geometry),this.onFeature(t)}}_onError(e){const t="Encountered an error over WebSocket connection";this._set("errorString",t),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error("websocket-connection",t)}_onClose(e){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==e.code&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error("websocket-connection",`WebSocket closed unexpectedly with error code ${e.code}`),this.destroyed||this._open()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],d.prototype,"connectionStatus",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],d.prototype,"errorString",void 0),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.layers.graphics.sources.connections.WebSocketConnection")],d);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createConnection": () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _GeoEventConnection_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GeoEventConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js");
/* harmony import */ var _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WebSocketConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js");
/* harmony import */ var _support_ClientSideConnection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../support/ClientSideConnection.js */ "./node_modules/@arcgis/core/layers/support/ClientSideConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function o(o,r,s,i,c,a,m,p){const f={source:o,sourceSpatialReference:r,spatialReference:s,geometryType:i,filter:c,maxReconnectionAttempts:a,maxReconnectionInterval:m,customParameters:p};if(!o)return new _support_ClientSideConnection_js__WEBPACK_IMPORTED_MODULE_2__.ClientSideConnection(f);return o.path.startsWith("wss://")||o.path.startsWith("ws://")?new _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_1__.WebSocketConnection(f):new _GeoEventConnection_js__WEBPACK_IMPORTED_MODULE_0__["default"](f)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/ClientSideConnection.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/ClientSideConnection.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ClientSideConnection": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../geometry/support/zscale.js */ "./node_modules/@arcgis/core/geometry/support/zscale.js");
/* harmony import */ var _StreamConnection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./StreamConnection.js */ "./node_modules/@arcgis/core/layers/support/StreamConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let c=class extends _StreamConnection_js__WEBPACK_IMPORTED_MODULE_7__["default"]{constructor(e){super(),this.connectionStatus="connected",this.errorString=null;const{geometryType:r,spatialReference:t,sourceSpatialReference:s}=e;this._featureZScaler=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_6__.getGeometryZScaler)(r,s,t)}updateCustomParameters(e){}sendMessageToSocket(e){}sendMessageToClient(e){if("type"in e)switch(e.type){case"features":case"featureResult":for(const r of e.features)null!=this._featureZScaler&&this._featureZScaler(r.geometry),this.onFeature(r)}this.onMessage(e)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)()],c.prototype,"connectionStatus",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)()],c.prototype,"errorString",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)("esri.layers.support.ClientSideConnection")],c);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/StreamConnection.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/StreamConnection.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let c=class extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__["default"].EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("stream-connection",this.errorString):null}onFeature(r){this.emit("data-received",r)}onMessage(r){this.emit("message-received",r)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({readOnly:!0})],c.prototype,"connectionError",null),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.layers.support.StreamConnection")],c);const i=c;


/***/ }),

/***/ "./node_modules/@arcgis/core/rest/operations/urlUtils.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/operations/urlUtils.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "mapParameters": () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function t(n){const o={};for(const e in n){if("declaredClass"===e)continue;const r=n[e];if(null!=r&&"function"!=typeof r)if(Array.isArray(r)){o[e]=[];for(let n=0;n<r.length;n++)o[e][n]=t(r[n])}else"object"==typeof r?r.toJSON&&(o[e]=JSON.stringify(r)):o[e]=r}return o}


/***/ }),

/***/ "./node_modules/@arcgis/core/rest/query/operations/query.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/query/operations/query.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "encodeGeometry": () => (/* binding */ s),
/* harmony export */   "executeQuery": () => (/* binding */ m),
/* harmony export */   "executeQueryForCount": () => (/* binding */ p),
/* harmony export */   "executeQueryForExtent": () => (/* binding */ S),
/* harmony export */   "executeQueryForIds": () => (/* binding */ d),
/* harmony export */   "executeQueryPBF": () => (/* binding */ c),
/* harmony export */   "executeQueryPBFBuffer": () => (/* binding */ f),
/* harmony export */   "queryToQueryStringParameters": () => (/* binding */ y),
/* harmony export */   "runQuery": () => (/* binding */ x)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../geometry/support/normalizeUtils.js */ "./node_modules/@arcgis/core/geometry/support/normalizeUtils.js");
/* harmony import */ var _operations_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../operations/urlUtils.js */ "./node_modules/@arcgis/core/rest/operations/urlUtils.js");
/* harmony import */ var _pbfQueryUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pbfQueryUtils.js */ "./node_modules/@arcgis/core/rest/query/operations/pbfQueryUtils.js");
/* harmony import */ var _queryZScale_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./queryZScale.js */ "./node_modules/@arcgis/core/rest/query/operations/queryZScale.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const l="Layer does not support extent calculation.";function s(t,e){if(e&&"extent"===t.type)return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&"point"===t.type)return`${t.x},${t.y}`;const n=t.toJSON();return delete n.spatialReference,JSON.stringify(n)}function y(t,e){const n=t.geometry,i=t.toJSON();delete i.compactGeometryEnabled,delete i.defaultSpatialReferenceEnabled;const a=i;let o,u,l;if(null!=n&&(u=n.spatialReference,l=n.spatialReference.wkid||JSON.stringify(n.spatialReference),a.geometryType=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__.getJsonType)(n),a.geometry=s(n,t.compactGeometryEnabled),a.inSR=l),i.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(a.objectIds=i.objectIds.join(",")),i.orderByFields&&(a.orderByFields=i.orderByFields.join(",")),!i.outFields||!i.returnDistinctValues&&(e?.returnCountOnly||e?.returnExtentOnly||e?.returnIdsOnly)?delete a.outFields:i.outFields.includes("*")?a.outFields="*":a.outFields=i.outFields.join(","),i.outSR?(a.outSR=i.outSR.wkid||JSON.stringify(i.outSR),o=t.outSpatialReference):n&&(i.returnGeometry||i.returnCentroid)&&(a.outSR=a.inSR,o=u),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(a.outStatistics=JSON.stringify(i.outStatistics)),i.fullText&&(a.fullText=JSON.stringify(i.fullText)),i.pixelSize&&(a.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&null!=u&&null!=t.quantizationParameters&&null!=t.quantizationParameters.extent&&u.equals(t.quantizationParameters.extent.spatialReference)&&delete i.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(a.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(a.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(a.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const t=i.timeExtent,{start:e,end:n}=t;null==e&&null==n||(a.time=e===n?e:`${e??"null"},${n??"null"}`),delete i.timeExtent}return t.defaultSpatialReferenceEnabled&&null!=u&&null!=o&&u.equals(o)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}async function m(t,e,n,r){const i=null!=e.timeExtent&&e.timeExtent.isEmpty?{data:{features:[]}}:await x(t,e,"json",r);return (0,_queryZScale_js__WEBPACK_IMPORTED_MODULE_6__.applyFeatureSetZUnitScaling)(e,n,i.data),i}async function c(t,e,n,r){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:n.createFeatureResult()};const i=await f(t,e,r),a=i;return a.data=(0,_pbfQueryUtils_js__WEBPACK_IMPORTED_MODULE_5__.parsePBFFeatureQuery)(i.data,n),a}function f(t,e,n){return x(t,e,"pbf",n)}function d(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):x(t,e,"json",n,{returnIdsOnly:!0})}function p(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):x(t,e,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}async function S(t,e,n){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await x(t,e,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}),i=r.data;if(i.hasOwnProperty("extent"))return r;if(i.features)throw new Error(l);if(i.hasOwnProperty("count"))throw new Error(l);return r}async function x(r,o,u,l={},s={}){const m="string"==typeof r?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_1__.urlToObject)(r):r,c=o.geometry?[o.geometry]:[];l.responseType="pbf"===u?"array-buffer":"json";const f=await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_3__.normalizeCentralMeridian)(c,null,l),d=f&&f[0];null!=d&&((o=o.clone()).geometry=d);const p=(0,_operations_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.mapParameters)({...m.query,f:u,...s,...y(o,s)});return (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_1__.join)(m.path,E(o,s)?"query3d":"query"),{...l,query:{...p,...l.query}})}function E(t,e){return null!=t.formatOf3DObjects&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}


/***/ }),

/***/ "./node_modules/@arcgis/core/rest/query/operations/queryZScale.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/query/operations/queryZScale.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "applyFeatureSetZUnitScaling": () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../geometry/support/zscale.js */ "./node_modules/@arcgis/core/geometry/support/zscale.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function t(t,o,r){if(!r||!r.features||!r.hasZ)return;const f=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_0__.getGeometryZScaler)(r.geometryType,o,t.outSpatialReference);if(null!=f)for(const e of r.features)f(e.geometry)}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvZTUzMWI3N2Q4MGY0ZjU0N2VlOTU4ZjAzODk3MGNiNmMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUN5MUIsZUFBZSx3Q0FBd0Msb0JBQW9CLHlFQUFDLENBQUMsZUFBZSxPQUFPLFVBQVUsMkRBQTJELGNBQWMsZ0VBQWdFLHlCQUF5QixpRUFBVywrTEFBK0wsNEVBQTRFLGlKQUFpSixNQUFNLHFCQUFxQixjQUFjLHFDQUFxQyxjQUFjLHFCQUFxQixNQUFNLElBQUksK0VBQStFLFNBQVMsWUFBWSxpRUFBVyxpQkFBaUIsc0RBQUMscURBQXFELGtCQUFrQix1QkFBdUIsaUNBQWlDLFNBQVMsMENBQTBDLEdBQUcsdURBQUMsU0FBUyw0QkFBNEIsbUJBQW1CLG1DQUFtQyx3QkFBd0IsY0FBYyxlQUFlLG9DQUFvQyxPQUFPLHFFQUFDLElBQUksRUFBRSxhQUFhLHdCQUF3QixFQUFFLDBCQUEwQiw0QkFBNEIsK0NBQStDLE9BQU8saUVBQVcsaUJBQWlCLHNEQUFDLGdFQUFnRSxzQkFBc0Isd0JBQXdCLG9DQUFvQyx3QkFBd0Isa0NBQWtDLEVBQUUsU0FBUyxRQUFRLHFFQUFDLFVBQVUseUNBQXlDLGlFQUFXLGlCQUFpQixzREFBQyw0RUFBNEUsT0FBTywyQkFBMkIscUJBQXFCLGlFQUFXLGlCQUFpQixzREFBQywwSEFBMEgsUUFBUSwrRUFBK0UseURBQXlELHNCQUFzQixXQUFXLDZCQUE2QiwyQkFBMkIsUUFBUSx5RUFBQyxhQUFhLCtCQUErQixzREFBQyxtQ0FBbUMsT0FBTyxHQUFHLG9EQUFvRCxTQUFTLGlFQUFXLGlCQUFpQixzREFBQyw2RkFBNkYsb0hBQW9ILFdBQVcsbUNBQW1DLDJHQUEyRyxhQUFhLGlFQUFXLHNHQUFzRyxNQUFNLHdCQUF3QixHQUFHLHNDQUFzQyxpREFBaUQsaUVBQVcsaUJBQWlCLHNEQUFDLDJFQUEyRSw0QkFBNEIsSUFBSSxNQUFNLHND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QyxRQUFRLCtFQUFDLHlDQUF5QyxtREFBNEYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3Mvc291cmNlcy9jb25uZWN0aW9ucy9HZW9FdmVudENvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL3NvdXJjZXMvY29ubmVjdGlvbnMvV2ViU29ja2V0Q29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3Mvc291cmNlcy9jb25uZWN0aW9ucy9jcmVhdGVDb25uZWN0aW9uLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zdXBwb3J0L0NsaWVudFNpZGVDb25uZWN0aW9uLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zdXBwb3J0L1N0cmVhbUNvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvcmVzdC9vcGVyYXRpb25zL3VybFV0aWxzLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3Jlc3QvcXVlcnkvb3BlcmF0aW9ucy9xdWVyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9yZXN0L3F1ZXJ5L29wZXJhdGlvbnMvcXVlcnlaU2NhbGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCBzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2NyZWF0ZVJlc29sdmVyIGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7YWRkUXVlcnlQYXJhbWV0ZXJzIGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS91cmxVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBufWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7V2ViU29ja2V0Q29ubmVjdGlvbiBhcyBhfWZyb21cIi4vV2ViU29ja2V0Q29ubmVjdGlvbi5qc1wiO2ltcG9ydHtleGVjdXRlUXVlcnkgYXMgY31mcm9tXCIuLi8uLi8uLi8uLi9yZXN0L3F1ZXJ5L29wZXJhdGlvbnMvcXVlcnkuanNcIjtpbXBvcnQgdSBmcm9tXCIuLi8uLi8uLi8uLi9yZXN0L3N1cHBvcnQvUXVlcnkuanNcIjtpbXBvcnR7ZnJvbUpTT04gYXMgbH1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2pzb25VdGlscy5qc1wiO2ltcG9ydCBmIGZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L1NwYXRpYWxSZWZlcmVuY2UuanNcIjtjb25zdCBoPTFlNCxkPXttYXhRdWVyeURlcHRoOjUsbWF4UmVjb3JkQ291bnRGYWN0b3I6M307bGV0IGc9Y2xhc3MgZXh0ZW5kcyBhe2NvbnN0cnVjdG9yKGUpe3N1cGVyKHsuLi5kLC4uLmV9KSx0aGlzLl9idWRkeVNlcnZpY2VzUXVlcnk9bnVsbCx0aGlzLl9yZWxhdGVkRmVhdHVyZXM9bnVsbH1hc3luYyBfb3Blbigpe2NvbnN0IGU9YXdhaXQgdGhpcy5fZmV0Y2hTZXJ2aWNlRGVmaW5pdGlvbih0aGlzLl9jb25maWcuc291cmNlKTtlLnRpbWVJbmZvLnRyYWNrSWRGaWVsZHx8cy5nZXRMb2dnZXIodGhpcykud2FybihcIkdlb0V2ZW50IHNlcnZpY2Ugd2FzIGNvbmZpZ3VyZWQgd2l0aG91dCBhIFRyYWNrSWRGaWVsZC4gVGhpcyBtYXkgcmVzdWx0IGluIGNlcnRhaW4gZnVuY3Rpb25hbGl0eSBiZWluZyBkaXNhYmxlZC4gVGhlIHB1cmdlT3B0aW9ucy5tYXhPYnNlcnZhdGlvbnMgcHJvcGVydHkgd2lsbCBoYXZlIG5vIGVmZmVjdC5cIik7Y29uc3QgdD10aGlzLl9mZXRjaFdlYlNvY2tldFVybChlLnN0cmVhbVVybHMsdGhpcy5fY29uZmlnLnNwYXRpYWxSZWZlcmVuY2UpO3RoaXMuX2J1ZGR5U2VydmljZXNRdWVyeXx8KHRoaXMuX2J1ZGR5U2VydmljZXNRdWVyeT10aGlzLl9xdWVyeUJ1ZGR5U2VydmljZXMoKSksYXdhaXQgdGhpcy5fYnVkZHlTZXJ2aWNlc1F1ZXJ5LGF3YWl0IHRoaXMuX3RyeUNyZWF0ZVdlYlNvY2tldCh0KTtjb25zdHtmaWx0ZXI6cixvdXRGaWVsZHM6b309dGhpcy5fY29uZmlnO3RoaXMuZGVzdHJveWVkfHx0aGlzLl9zZXRGaWx0ZXIocixvKX1fb25NZXNzYWdlKGUpe2lmKFwiYXR0cmlidXRlc1wiaW4gZSl7bGV0IG87dHJ5e289dGhpcy5fZW5yaWNoKGUpLG51bGwhPXRoaXMuX2ZlYXR1cmVaU2NhbGVyJiZ0aGlzLl9mZWF0dXJlWlNjYWxlcihvLmdlb21ldHJ5KX1jYXRjaCh0KXtyZXR1cm4gdm9pZCBzLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIkZhaWxlZCB0byBwYXJzZSBtZXNzYWdlXCIsdCkpfXRoaXMub25GZWF0dXJlKG8pfWVsc2UgdGhpcy5vbk1lc3NhZ2UoZSl9YXN5bmMgX2ZldGNoU2VydmljZURlZmluaXRpb24oZSl7Y29uc3Qgcj17ZjpcImpzb25cIiwuLi50aGlzLl9jb25maWcuY3VzdG9tUGFyYW1ldGVyc30scz10KGUucGF0aCx7cXVlcnk6cixyZXNwb25zZVR5cGU6XCJqc29uXCJ9KSxvPShhd2FpdCBzKS5kYXRhO3JldHVybiB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbj1vLG99X2ZldGNoV2ViU29ja2V0VXJsKGUsdCl7Y29uc3Qgcj1lWzBdLHt1cmxzOnMsdG9rZW46b309cixuPXRoaXMuX2luZmVyV2ViU29ja2V0QmFzZVVybChzKTtyZXR1cm4gaShgJHtufS9zdWJzY3JpYmVgLHtvdXRTUjpcIlwiK3Qud2tpZCx0b2tlbjpvfSl9X2luZmVyV2ViU29ja2V0QmFzZVVybChlKXtpZigxPT09ZS5sZW5ndGgpcmV0dXJuIGVbMF07Zm9yKGNvbnN0IHQgb2YgZSlpZih0LmluY2x1ZGVzKFwid3NzXCIpKXJldHVybiB0O3JldHVybiBzLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIlVuYWJsZSB0byBpbmZlciBXZWJTb2NrZXQgdXJsXCIsZSkpLG51bGx9YXN5bmMgX3NldEZpbHRlcihlLHQpe2NvbnN0IGk9dGhpcy5fd2Vic29ja2V0O2lmKG51bGw9PWl8fG51bGw9PWUmJm51bGw9PXQpcmV0dXJuO2NvbnN0IG49SlNPTi5zdHJpbmdpZnkoe2ZpbHRlcjp0aGlzLl9zZXJpYWxpemVGaWx0ZXIoZSx0KX0pO2xldCBhPSExO2NvbnN0IGM9bygpLHU9KCk9PnthfHwodGhpcy5kZXN0cm95ZWR8fHRoaXMuX3dlYnNvY2tldCE9PWl8fHMuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyByKFwiZ2VvZXZlbnQtY29ubmVjdGlvblwiLFwiU2VydmVyIHRpbWVkIG91dCB3aGVuIHNldHRpbmcgZmlsdGVyXCIpKSxjLnJlamVjdCgpKX0sbD1lPT57Y29uc3QgdD1KU09OLnBhcnNlKGUuZGF0YSk7dC5maWx0ZXImJih0LmVycm9yJiYocy5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHIoXCJnZW9ldmVudC1jb25uZWN0aW9uXCIsXCJGYWlsZWQgdG8gc2V0IHNlcnZpY2UgZmlsdGVyXCIsdC5lcnJvcikpLHRoaXMuX3NldChcImVycm9yU3RyaW5nXCIsYENvdWxkIG5vdCBzZXQgc2VydmljZSBmaWx0ZXIgLSAke3QuZXJyb3J9YCksYy5yZWplY3QodC5lcnJvcikpLHRoaXMuX3NldFdlYlNvY2tldEpTT05QYXJzZUhhbmRsZXIoaSksYT0hMCxjLnJlc29sdmUoKSl9O3JldHVybiBpLm9ubWVzc2FnZT1sLGkuc2VuZChuKSxzZXRUaW1lb3V0KHUsaCksYy5wcm9taXNlfV9zZXJpYWxpemVGaWx0ZXIoZSx0KXtjb25zdCBvPXt9O2lmKG51bGw9PWUmJm51bGw9PXQpcmV0dXJuIG87aWYobnVsbCE9ZSYmZS5nZW9tZXRyeSl0cnl7Y29uc3QgdD1sKGUuZ2VvbWV0cnkpO2lmKFwiZXh0ZW50XCIhPT10LnR5cGUpdGhyb3cgbmV3IHIoYEV4cGVjdGVkIGV4dGVudCBidXQgZm91bmQgdHlwZSAke3QudHlwZX1gKTtvLmdlb21ldHJ5PUpTT04uc3RyaW5naWZ5KHQuc2hpZnRDZW50cmFsTWVyaWRpYW4oKSl9Y2F0Y2goaSl7cy5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHIoXCJnZW9ldmVudC1jb25uZWN0aW9uXCIsXCJFbmNvdW50ZXJlZCBhbiBlcnJvciB3aGVuIHNldHRpbmcgY29ubmVjdGlvbiBnZW9tZXRyeURlZmluaXRpb25cIixpKSl9cmV0dXJuIG51bGwhPWUmJmUud2hlcmUmJlwiMSA9IDFcIiE9PWUud2hlcmUmJlwiMT0xXCIhPT1lLndoZXJlJiYoby53aGVyZT1lLndoZXJlKSxudWxsIT10JiYoby5vdXRGaWVsZHM9dC5qb2luKFwiLFwiKSksb31fZW5yaWNoKGUpe2lmKCF0aGlzLl9yZWxhdGVkRmVhdHVyZXMpcmV0dXJuIGU7Y29uc3QgdD10aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbi5yZWxhdGVkRmVhdHVyZXMuam9pbkZpZWxkLG89ZS5hdHRyaWJ1dGVzW3RdLGk9dGhpcy5fcmVsYXRlZEZlYXR1cmVzLmdldChvKTtpZighaSlyZXR1cm4gcy5nZXRMb2dnZXIodGhpcykud2FybihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIkZlYXR1cmUgam9pbiBmYWlsZWQuIElzIHRoZSBqb2luIGZpZWxkIGNvbmZpZ3VyZWQgY29ycmVjdGx5P1wiLGUpLGU7Y29uc3R7YXR0cmlidXRlczpuLGdlb21ldHJ5OmF9PWk7Zm9yKGNvbnN0IHIgaW4gbillLmF0dHJpYnV0ZXNbcl09bltyXTtyZXR1cm4gYSYmKGUuZ2VvbWV0cnk9YSksZS5nZW9tZXRyeXx8ZS5jZW50cm9pZHx8cy5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHIoXCJnZW9ldmVudC1jb25uZWN0aW9uXCIsXCJGb3VuZCBtYWxmb3JtZWQgZmVhdHVyZSAtIG5vIGdlb21ldHJ5IGZvdW5kXCIsZSkpLGV9YXN5bmMgX3F1ZXJ5QnVkZHlTZXJ2aWNlcygpe3RyeXtjb25zdHtyZWxhdGVkRmVhdHVyZXM6ZSxrZWVwTGF0ZXN0QXJjaGl2ZTp0fT10aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbixyPXRoaXMuX3F1ZXJ5UmVsYXRlZEZlYXR1cmVzKGUpLHM9dGhpcy5fcXVlcnlBcmNoaXZlKHQpO2F3YWl0IHI7Y29uc3Qgbz1hd2FpdCBzO2lmKCFvKXJldHVybjtmb3IoY29uc3QgaSBvZiBvLmZlYXR1cmVzKXRoaXMub25GZWF0dXJlKHRoaXMuX2VucmljaChpKSl9Y2F0Y2goZSl7cy5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHIoXCJnZW9ldmVudC1jb25uZWN0aW9uXCIsXCJFbmNvdW50ZXJlZCBhbiBlcnJvciB3aGVuIHF1ZXJ5aW5nIGJ1ZGR5IHNlcnZpY2VzXCIse2Vycm9yOmV9KSl9fWFzeW5jIF9xdWVyeVJlbGF0ZWRGZWF0dXJlcyhlKXtpZighZSlyZXR1cm47Y29uc3QgdD1hd2FpdCB0aGlzLl9xdWVyeUJ1ZGR5KGUuZmVhdHVyZXNVcmwpO3RoaXMuX2FkZFJlbGF0ZWRGZWF0dXJlcyh0KX1hc3luYyBfcXVlcnlBcmNoaXZlKGUpe2lmKGUpcmV0dXJuIHRoaXMuX3F1ZXJ5QnVkZHkoZS5mZWF0dXJlc1VybCl9YXN5bmMgX3F1ZXJ5QnVkZHkoZSl7Y29uc3QgdD1uZXcoKGF3YWl0IGltcG9ydChcIi4uLy4uLy4uL0ZlYXR1cmVMYXllci5qc1wiKSkuZGVmYXVsdCkoe3VybDplfSkse2NhcGFiaWxpdGllczpyfT1hd2FpdCB0LmxvYWQoKSxzPXIucXVlcnkuc3VwcG9ydHNNYXhSZWNvcmRDb3VudEZhY3RvcixvPXIucXVlcnkuc3VwcG9ydHNQYWdpbmF0aW9uLGk9ci5xdWVyeS5zdXBwb3J0c0NlbnRyb2lkLG49dGhpcy5fY29uZmlnLm1heFJlY29yZENvdW50RmFjdG9yLGE9dC5jYXBhYmlsaXRpZXMucXVlcnkubWF4UmVjb3JkQ291bnQsbD1zP2EqbjphLGg9bmV3IHU7aWYoaC5vdXRGaWVsZHM9dGhpcy5fY29uZmlnLm91dEZpZWxkcz8/W1wiKlwiXSxoLndoZXJlPXRoaXMuX2NvbmZpZy5maWx0ZXI/LndoZXJlPz9cIjE9MVwiLGgucmV0dXJuR2VvbWV0cnk9ITAsaC5yZXR1cm5FeGNlZWRlZExpbWl0RmVhdHVyZXM9ITAsaC5vdXRTcGF0aWFsUmVmZXJlbmNlPWYuZnJvbUpTT04odGhpcy5fY29uZmlnLnNwYXRpYWxSZWZlcmVuY2UpLGkmJihoLnJldHVybkNlbnRyb2lkPSEwKSxzJiYoaC5tYXhSZWNvcmRDb3VudEZhY3Rvcj1uKSxvKXJldHVybiBoLm51bT1sLHQuZGVzdHJveSgpLHRoaXMuX3F1ZXJ5UGFnZXMoZSxoKTtjb25zdCBkPWF3YWl0IGMoZSxoLHRoaXMuX2NvbmZpZy5zb3VyY2VTcGF0aWFsUmVmZXJlbmNlKTtyZXR1cm4gdC5kZXN0cm95KCksZC5kYXRhfWFzeW5jIF9xdWVyeVBhZ2VzKGUsdCxyPVtdLHM9MCl7dC5zdGFydD1udWxsIT10Lm51bT9zKnQubnVtOm51bGw7Y29uc3R7ZGF0YTpvfT1hd2FpdCBjKGUsdCx0aGlzLl9jb25maWcuc291cmNlU3BhdGlhbFJlZmVyZW5jZSk7cmV0dXJuIG8uZXhjZWVkZWRUcmFuc2ZlckxpbWl0JiZzPCh0aGlzLl9jb25maWcubWF4UXVlcnlEZXB0aD8/MCk/KG8uZmVhdHVyZXMuZm9yRWFjaCgoZT0+ci5wdXNoKGUpKSksdGhpcy5fcXVlcnlQYWdlcyhlLHQscixzKzEpKTooci5mb3JFYWNoKChlPT5vLmZlYXR1cmVzLnB1c2goZSkpKSxvKX1fYWRkUmVsYXRlZEZlYXR1cmVzKGUpe2NvbnN0IHQ9bmV3IE1hcCxyPWUuZmVhdHVyZXMscz10aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbi5yZWxhdGVkRmVhdHVyZXMuam9pbkZpZWxkO2Zvcihjb25zdCBvIG9mIHIpe2NvbnN0IGU9by5hdHRyaWJ1dGVzW3NdO3Quc2V0KGUsbyl9dGhpcy5fcmVsYXRlZEZlYXR1cmVzPXR9fTtnPWUoW24oXCJlc3JpLmxheWVycy5ncmFwaGljcy5zb3VyY2VzLmNvbm5lY3Rpb25zLkdlb0V2ZW50Q29ubmVjdGlvblwiKV0sZyk7Y29uc3QgeT1nO2V4cG9ydHt5IGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnQgbyBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHthZnRlciBhcyBzLGNyZWF0ZVJlc29sdmVyIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7YWRkUXVlcnlQYXJhbWV0ZXJzIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS91cmxVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBpfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgY31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2dldEdlb21ldHJ5WlNjYWxlciBhcyBhfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvenNjYWxlLmpzXCI7aW1wb3J0IGwgZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9TdHJlYW1Db25uZWN0aW9uLmpzXCI7dmFyIGg7IWZ1bmN0aW9uKGUpe2VbZS5DT05ORUNUSU5HPTBdPVwiQ09OTkVDVElOR1wiLGVbZS5PUEVOPTFdPVwiT1BFTlwiLGVbZS5DTE9TSU5HPTJdPVwiQ0xPU0lOR1wiLGVbZS5DTE9TRUQ9M109XCJDTE9TRURcIn0oaHx8KGg9e30pKTtsZXQgZD1jbGFzcyBleHRlbmRzIGx7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl9vdXRzdGFuZGluZ01lc3NhZ2VzPVtdLHRoaXMuZXJyb3JTdHJpbmc9bnVsbDtjb25zdHtnZW9tZXRyeVR5cGU6dCxzcGF0aWFsUmVmZXJlbmNlOm8sc291cmNlU3BhdGlhbFJlZmVyZW5jZTpzfT1lO3RoaXMuX2NvbmZpZz1lLHRoaXMuX2ZlYXR1cmVaU2NhbGVyPWEodCxzLG8pLHRoaXMuX29wZW4oKX1hc3luYyBfb3Blbigpe2F3YWl0IHRoaXMuX3RyeUNyZWF0ZVdlYlNvY2tldCgpLHRoaXMuZGVzdHJveWVkfHxhd2FpdCB0aGlzLl9oYW5kc2hha2UoKX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLG51bGwhPXRoaXMuX3dlYnNvY2tldCYmKHRoaXMuX3dlYnNvY2tldC5vbm9wZW49bnVsbCx0aGlzLl93ZWJzb2NrZXQub25jbG9zZT1udWxsLHRoaXMuX3dlYnNvY2tldC5vbmVycm9yPW51bGwsdGhpcy5fd2Vic29ja2V0Lm9ubWVzc2FnZT1udWxsLHRoaXMuX3dlYnNvY2tldC5jbG9zZSgpKSx0aGlzLl93ZWJzb2NrZXQ9bnVsbH1nZXQgY29ubmVjdGlvblN0YXR1cygpe2lmKG51bGw9PXRoaXMuX3dlYnNvY2tldClyZXR1cm5cImRpc2Nvbm5lY3RlZFwiO3N3aXRjaCh0aGlzLl93ZWJzb2NrZXQucmVhZHlTdGF0ZSl7Y2FzZSBoLkNPTk5FQ1RJTkc6Y2FzZSBoLk9QRU46cmV0dXJuXCJjb25uZWN0ZWRcIjtjYXNlIGguQ0xPU0lORzpjYXNlIGguQ0xPU0VEOnJldHVyblwiZGlzY29ubmVjdGVkXCJ9fXNlbmRNZXNzYWdlVG9Tb2NrZXQoZSl7bnVsbCE9dGhpcy5fd2Vic29ja2V0P3RoaXMuX3dlYnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KGUpKTp0aGlzLl9vdXRzdGFuZGluZ01lc3NhZ2VzLnB1c2goZSl9c2VuZE1lc3NhZ2VUb0NsaWVudChlKXt0aGlzLl9vbk1lc3NhZ2UoZSl9dXBkYXRlQ3VzdG9tUGFyYW1ldGVycyhlKXt0aGlzLl9jb25maWcuY3VzdG9tUGFyYW1ldGVycz1lLG51bGwhPXRoaXMuX3dlYnNvY2tldCYmdGhpcy5fd2Vic29ja2V0LmNsb3NlKCl9YXN5bmMgX3RyeUNyZWF0ZVdlYlNvY2tldChlPXRoaXMuX2NvbmZpZy5zb3VyY2UucGF0aCxyPTFlMyxpPTApe3RyeXtpZih0aGlzLmRlc3Ryb3llZClyZXR1cm47Y29uc3QgdD1uKGUsdGhpcy5fY29uZmlnLmN1c3RvbVBhcmFtZXRlcnM/P3t9KTt0aGlzLl93ZWJzb2NrZXQ9YXdhaXQgdGhpcy5fY3JlYXRlV2ViU29ja2V0KHQpLHRoaXMubm90aWZ5Q2hhbmdlKFwiY29ubmVjdGlvblN0YXR1c1wiKX1jYXRjaChjKXtjb25zdCBuPXIvMWUzO3JldHVybiB0aGlzLl9jb25maWcubWF4UmVjb25uZWN0aW9uQXR0ZW1wdHMmJmk+PXRoaXMuX2NvbmZpZy5tYXhSZWNvbm5lY3Rpb25BdHRlbXB0cz8oby5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHQoXCJ3ZWJzb2NrZXQtY29ubmVjdGlvblwiLFwiRXhjZWVkZWQgbWF4UmVjb25uZWN0aW9uQXR0ZW1wdHMgYXR0ZW1wdHMuIE5vIGZ1cnRoZXIgYXR0ZW1wdHMgd2lsbCBiZSBtYWRlXCIpKSx2b2lkIHRoaXMuZGVzdHJveSgpKTooby5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHQoXCJ3ZWJzb2NrZXQtY29ubmVjdGlvblwiLGBGYWlsZWQgdG8gY29ubmVjdC4gQXR0ZW1wdGluZyB0byByZWNvbm5lY3QgaW4gJHtufXNgLGMpKSxhd2FpdCBzKHIpLHRoaXMuX3RyeUNyZWF0ZVdlYlNvY2tldChlLE1hdGgubWluKDEuNSpyLDFlMyp0aGlzLl9jb25maWcubWF4UmVjb25uZWN0aW9uSW50ZXJ2YWwpLGkrMSkpfX1fc2V0V2ViU29ja2V0SlNPTlBhcnNlSGFuZGxlcihlKXtlLm9ubWVzc2FnZT1lPT57dHJ5e2NvbnN0IHQ9SlNPTi5wYXJzZShlLmRhdGEpO3RoaXMuX29uTWVzc2FnZSh0KX1jYXRjaChzKXtyZXR1cm4gdm9pZCBvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsXCJGYWlsZWQgdG8gcGFyc2UgbWVzc2FnZSwgaW52YWxpZCBKU09OXCIse2Vycm9yOnN9KSl9fX1fY3JlYXRlV2ViU29ja2V0KGUpe3JldHVybiBuZXcgUHJvbWlzZSgoKHQsbyk9Pntjb25zdCBzPW5ldyBXZWJTb2NrZXQoZSk7cy5vbm9wZW49KCk9PntpZihzLm9ub3Blbj1udWxsLHRoaXMuZGVzdHJveWVkKXJldHVybiBzLm9uY2xvc2U9bnVsbCx2b2lkIHMuY2xvc2UoKTtzLm9uY2xvc2U9ZT0+dGhpcy5fb25DbG9zZShlKSxzLm9uZXJyb3I9ZT0+dGhpcy5fb25FcnJvcihlKSx0aGlzLl9zZXRXZWJTb2NrZXRKU09OUGFyc2VIYW5kbGVyKHMpLHQocyl9LHMub25jbG9zZT1lPT57cy5vbm9wZW49cy5vbmNsb3NlPW51bGwsbyhlKX19KSl9YXN5bmMgX2hhbmRzaGFrZShlPTFlNCl7Y29uc3Qgcz10aGlzLl93ZWJzb2NrZXQ7aWYobnVsbD09cylyZXR1cm47Y29uc3Qgbj1yKCksaT1zLm9ubWVzc2FnZSx7ZmlsdGVyOmMsb3V0RmllbGRzOmEsc3BhdGlhbFJlZmVyZW5jZTpsfT10aGlzLl9jb25maWc7cmV0dXJuIG4udGltZW91dChlKSxzLm9ubWVzc2FnZT1lPT57bGV0IHI9bnVsbDt0cnl7cj1KU09OLnBhcnNlKGUuZGF0YSl9Y2F0Y2goaCl7fXImJlwib2JqZWN0XCI9PXR5cGVvZiByfHwoby5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHQoXCJ3ZWJzb2NrZXQtY29ubmVjdGlvblwiLFwiUHJvdG9jb2wgdmlvbGF0aW9uLiBIYW5kc2hha2UgZmFpbGVkIC0gbWFsZm9ybWVkIG1lc3NhZ2VcIixlLmRhdGEpKSxuLnJlamVjdCgpLHRoaXMuZGVzdHJveSgpKSxyLnNwYXRpYWxSZWZlcmVuY2U/LndraWQhPT1sPy53a2lkJiYoby5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHQoXCJ3ZWJzb2NrZXQtY29ubmVjdGlvblwiLGBQcm90b2NvbCB2aW9sYXRpb24uIEhhbmRzaGFrZSBmYWlsZWQgLSBleHBlY3RlZCB3a2lkIG9mICR7bC53a2lkfWAsZS5kYXRhKSksbi5yZWplY3QoKSx0aGlzLmRlc3Ryb3koKSksXCJqc29uXCIhPT1yLmZvcm1hdCYmKG8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyB0KFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixcIlByb3RvY29sIHZpb2xhdGlvbi4gSGFuZHNoYWtlIGZhaWxlZCAtIGZvcm1hdCBpcyBub3Qgc2V0XCIsZS5kYXRhKSksbi5yZWplY3QoKSx0aGlzLmRlc3Ryb3koKSksYyYmci5maWx0ZXIhPT1jJiZvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsXCJUcmllZCB0byBzZXQgZmlsdGVyLCBidXQgc2VydmVyIGRvZXNuJ3Qgc3VwcG9ydCBpdFwiKSksYSYmci5vdXRGaWVsZHMhPT1hJiZvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsXCJUcmllZCB0byBzZXQgb3V0RmllbGRzLCBidXQgc2VydmVyIGRvZXNuJ3Qgc3VwcG9ydCBpdFwiKSkscy5vbm1lc3NhZ2U9aTtmb3IoY29uc3QgdCBvZiB0aGlzLl9vdXRzdGFuZGluZ01lc3NhZ2VzKXMuc2VuZChKU09OLnN0cmluZ2lmeSh0KSk7dGhpcy5fb3V0c3RhbmRpbmdNZXNzYWdlcz1bXSxuLnJlc29sdmUoKX0scy5zZW5kKEpTT04uc3RyaW5naWZ5KHtmaWx0ZXI6YyxvdXRGaWVsZHM6YSxmb3JtYXQ6XCJqc29uXCIsc3BhdGlhbFJlZmVyZW5jZTp7d2tpZDpsLndraWR9fSkpLG4ucHJvbWlzZX1fb25NZXNzYWdlKGUpe2lmKHRoaXMub25NZXNzYWdlKGUpLFwidHlwZVwiaW4gZSlzd2l0Y2goZS50eXBlKXtjYXNlXCJmZWF0dXJlc1wiOmNhc2VcImZlYXR1cmVSZXN1bHRcIjpmb3IoY29uc3QgdCBvZiBlLmZlYXR1cmVzKW51bGwhPXRoaXMuX2ZlYXR1cmVaU2NhbGVyJiZ0aGlzLl9mZWF0dXJlWlNjYWxlcih0Lmdlb21ldHJ5KSx0aGlzLm9uRmVhdHVyZSh0KX19X29uRXJyb3IoZSl7Y29uc3QgdD1cIkVuY291bnRlcmVkIGFuIGVycm9yIG92ZXIgV2ViU29ja2V0IGNvbm5lY3Rpb25cIjt0aGlzLl9zZXQoXCJlcnJvclN0cmluZ1wiLHQpLG8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIix0KX1fb25DbG9zZShlKXt0aGlzLl93ZWJzb2NrZXQ9bnVsbCx0aGlzLm5vdGlmeUNoYW5nZShcImNvbm5lY3Rpb25TdGF0dXNcIiksMWUzIT09ZS5jb2RlJiZvLmdldExvZ2dlcih0aGlzKS5lcnJvcihcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsYFdlYlNvY2tldCBjbG9zZWQgdW5leHBlY3RlZGx5IHdpdGggZXJyb3IgY29kZSAke2UuY29kZX1gKSx0aGlzLmRlc3Ryb3llZHx8dGhpcy5fb3BlbigpfX07ZShbaSgpXSxkLnByb3RvdHlwZSxcImNvbm5lY3Rpb25TdGF0dXNcIixudWxsKSxlKFtpKCldLGQucHJvdG90eXBlLFwiZXJyb3JTdHJpbmdcIix2b2lkIDApLGQ9ZShbYyhcImVzcmkubGF5ZXJzLmdyYXBoaWNzLnNvdXJjZXMuY29ubmVjdGlvbnMuV2ViU29ja2V0Q29ubmVjdGlvblwiKV0sZCk7ZXhwb3J0e2QgYXMgV2ViU29ja2V0Q29ubmVjdGlvbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi9HZW9FdmVudENvbm5lY3Rpb24uanNcIjtpbXBvcnR7V2ViU29ja2V0Q29ubmVjdGlvbiBhcyB0fWZyb21cIi4vV2ViU29ja2V0Q29ubmVjdGlvbi5qc1wiO2ltcG9ydHtDbGllbnRTaWRlQ29ubmVjdGlvbiBhcyBufWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvQ2xpZW50U2lkZUNvbm5lY3Rpb24uanNcIjtmdW5jdGlvbiBvKG8scixzLGksYyxhLG0scCl7Y29uc3QgZj17c291cmNlOm8sc291cmNlU3BhdGlhbFJlZmVyZW5jZTpyLHNwYXRpYWxSZWZlcmVuY2U6cyxnZW9tZXRyeVR5cGU6aSxmaWx0ZXI6YyxtYXhSZWNvbm5lY3Rpb25BdHRlbXB0czphLG1heFJlY29ubmVjdGlvbkludGVydmFsOm0sY3VzdG9tUGFyYW1ldGVyczpwfTtpZighbylyZXR1cm4gbmV3IG4oZik7cmV0dXJuIG8ucGF0aC5zdGFydHNXaXRoKFwid3NzOi8vXCIpfHxvLnBhdGguc3RhcnRzV2l0aChcIndzOi8vXCIpP25ldyB0KGYpOm5ldyBlKGYpfWV4cG9ydHtvIGFzIGNyZWF0ZUNvbm5lY3Rpb259O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyByfWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgdH1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2dldEdlb21ldHJ5WlNjYWxlciBhcyBvfWZyb21cIi4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvenNjYWxlLmpzXCI7aW1wb3J0IHMgZnJvbVwiLi9TdHJlYW1Db25uZWN0aW9uLmpzXCI7bGV0IGM9Y2xhc3MgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5jb25uZWN0aW9uU3RhdHVzPVwiY29ubmVjdGVkXCIsdGhpcy5lcnJvclN0cmluZz1udWxsO2NvbnN0e2dlb21ldHJ5VHlwZTpyLHNwYXRpYWxSZWZlcmVuY2U6dCxzb3VyY2VTcGF0aWFsUmVmZXJlbmNlOnN9PWU7dGhpcy5fZmVhdHVyZVpTY2FsZXI9byhyLHMsdCl9dXBkYXRlQ3VzdG9tUGFyYW1ldGVycyhlKXt9c2VuZE1lc3NhZ2VUb1NvY2tldChlKXt9c2VuZE1lc3NhZ2VUb0NsaWVudChlKXtpZihcInR5cGVcImluIGUpc3dpdGNoKGUudHlwZSl7Y2FzZVwiZmVhdHVyZXNcIjpjYXNlXCJmZWF0dXJlUmVzdWx0XCI6Zm9yKGNvbnN0IHIgb2YgZS5mZWF0dXJlcyludWxsIT10aGlzLl9mZWF0dXJlWlNjYWxlciYmdGhpcy5fZmVhdHVyZVpTY2FsZXIoci5nZW9tZXRyeSksdGhpcy5vbkZlYXR1cmUocil9dGhpcy5vbk1lc3NhZ2UoZSl9fTtlKFtyKCldLGMucHJvdG90eXBlLFwiY29ubmVjdGlvblN0YXR1c1wiLHZvaWQgMCksZShbcigpXSxjLnByb3RvdHlwZSxcImVycm9yU3RyaW5nXCIsdm9pZCAwKSxjPWUoW3QoXCJlc3JpLmxheWVycy5zdXBwb3J0LkNsaWVudFNpZGVDb25uZWN0aW9uXCIpXSxjKTtleHBvcnR7YyBhcyBDbGllbnRTaWRlQ29ubmVjdGlvbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgcn1mcm9tXCIuLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCBvIGZyb21cIi4uLy4uL2NvcmUvRXZlbnRlZC5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBzfWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgdH1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7bGV0IGM9Y2xhc3MgZXh0ZW5kcyBvLkV2ZW50ZWRBY2Nlc3NvcntkZXN0cm95KCl7dGhpcy5lbWl0KFwiZGVzdHJveVwiKX1nZXQgY29ubmVjdGlvbkVycm9yKCl7cmV0dXJuIHRoaXMuZXJyb3JTdHJpbmc/bmV3IGUoXCJzdHJlYW0tY29ubmVjdGlvblwiLHRoaXMuZXJyb3JTdHJpbmcpOm51bGx9b25GZWF0dXJlKHIpe3RoaXMuZW1pdChcImRhdGEtcmVjZWl2ZWRcIixyKX1vbk1lc3NhZ2Uocil7dGhpcy5lbWl0KFwibWVzc2FnZS1yZWNlaXZlZFwiLHIpfX07cihbcyh7cmVhZE9ubHk6ITB9KV0sYy5wcm90b3R5cGUsXCJjb25uZWN0aW9uRXJyb3JcIixudWxsKSxjPXIoW3QoXCJlc3JpLmxheWVycy5zdXBwb3J0LlN0cmVhbUNvbm5lY3Rpb25cIildLGMpO2NvbnN0IGk9YztleHBvcnR7aSBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiB0KG4pe2NvbnN0IG89e307Zm9yKGNvbnN0IGUgaW4gbil7aWYoXCJkZWNsYXJlZENsYXNzXCI9PT1lKWNvbnRpbnVlO2NvbnN0IHI9bltlXTtpZihudWxsIT1yJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiByKWlmKEFycmF5LmlzQXJyYXkocikpe29bZV09W107Zm9yKGxldCBuPTA7bjxyLmxlbmd0aDtuKyspb1tlXVtuXT10KHJbbl0pfWVsc2VcIm9iamVjdFwiPT10eXBlb2Ygcj9yLnRvSlNPTiYmKG9bZV09SlNPTi5zdHJpbmdpZnkocikpOm9bZV09cn1yZXR1cm4gb31leHBvcnR7dCBhcyBtYXBQYXJhbWV0ZXJzfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0e3VybFRvT2JqZWN0IGFzIGUsam9pbiBhcyBufWZyb21cIi4uLy4uLy4uL2NvcmUvdXJsVXRpbHMuanNcIjtpbXBvcnR7Z2V0SnNvblR5cGUgYXMgcn1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2pzb25VdGlscy5qc1wiO2ltcG9ydHtub3JtYWxpemVDZW50cmFsTWVyaWRpYW4gYXMgaX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L25vcm1hbGl6ZVV0aWxzLmpzXCI7aW1wb3J0e21hcFBhcmFtZXRlcnMgYXMgYX1mcm9tXCIuLi8uLi9vcGVyYXRpb25zL3VybFV0aWxzLmpzXCI7aW1wb3J0e3BhcnNlUEJGRmVhdHVyZVF1ZXJ5IGFzIG99ZnJvbVwiLi9wYmZRdWVyeVV0aWxzLmpzXCI7aW1wb3J0e2FwcGx5RmVhdHVyZVNldFpVbml0U2NhbGluZyBhcyB1fWZyb21cIi4vcXVlcnlaU2NhbGUuanNcIjtjb25zdCBsPVwiTGF5ZXIgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnQgY2FsY3VsYXRpb24uXCI7ZnVuY3Rpb24gcyh0LGUpe2lmKGUmJlwiZXh0ZW50XCI9PT10LnR5cGUpcmV0dXJuYCR7dC54bWlufSwke3QueW1pbn0sJHt0LnhtYXh9LCR7dC55bWF4fWA7aWYoZSYmXCJwb2ludFwiPT09dC50eXBlKXJldHVybmAke3QueH0sJHt0Lnl9YDtjb25zdCBuPXQudG9KU09OKCk7cmV0dXJuIGRlbGV0ZSBuLnNwYXRpYWxSZWZlcmVuY2UsSlNPTi5zdHJpbmdpZnkobil9ZnVuY3Rpb24geSh0LGUpe2NvbnN0IG49dC5nZW9tZXRyeSxpPXQudG9KU09OKCk7ZGVsZXRlIGkuY29tcGFjdEdlb21ldHJ5RW5hYmxlZCxkZWxldGUgaS5kZWZhdWx0U3BhdGlhbFJlZmVyZW5jZUVuYWJsZWQ7Y29uc3QgYT1pO2xldCBvLHUsbDtpZihudWxsIT1uJiYodT1uLnNwYXRpYWxSZWZlcmVuY2UsbD1uLnNwYXRpYWxSZWZlcmVuY2Uud2tpZHx8SlNPTi5zdHJpbmdpZnkobi5zcGF0aWFsUmVmZXJlbmNlKSxhLmdlb21ldHJ5VHlwZT1yKG4pLGEuZ2VvbWV0cnk9cyhuLHQuY29tcGFjdEdlb21ldHJ5RW5hYmxlZCksYS5pblNSPWwpLGkuZ3JvdXBCeUZpZWxkc0ZvclN0YXRpc3RpY3MmJihhLmdyb3VwQnlGaWVsZHNGb3JTdGF0aXN0aWNzPWkuZ3JvdXBCeUZpZWxkc0ZvclN0YXRpc3RpY3Muam9pbihcIixcIikpLGkub2JqZWN0SWRzJiYoYS5vYmplY3RJZHM9aS5vYmplY3RJZHMuam9pbihcIixcIikpLGkub3JkZXJCeUZpZWxkcyYmKGEub3JkZXJCeUZpZWxkcz1pLm9yZGVyQnlGaWVsZHMuam9pbihcIixcIikpLCFpLm91dEZpZWxkc3x8IWkucmV0dXJuRGlzdGluY3RWYWx1ZXMmJihlPy5yZXR1cm5Db3VudE9ubHl8fGU/LnJldHVybkV4dGVudE9ubHl8fGU/LnJldHVybklkc09ubHkpP2RlbGV0ZSBhLm91dEZpZWxkczppLm91dEZpZWxkcy5pbmNsdWRlcyhcIipcIik/YS5vdXRGaWVsZHM9XCIqXCI6YS5vdXRGaWVsZHM9aS5vdXRGaWVsZHMuam9pbihcIixcIiksaS5vdXRTUj8oYS5vdXRTUj1pLm91dFNSLndraWR8fEpTT04uc3RyaW5naWZ5KGkub3V0U1IpLG89dC5vdXRTcGF0aWFsUmVmZXJlbmNlKTpuJiYoaS5yZXR1cm5HZW9tZXRyeXx8aS5yZXR1cm5DZW50cm9pZCkmJihhLm91dFNSPWEuaW5TUixvPXUpLGkucmV0dXJuR2VvbWV0cnkmJmRlbGV0ZSBpLnJldHVybkdlb21ldHJ5LGkub3V0U3RhdGlzdGljcyYmKGEub3V0U3RhdGlzdGljcz1KU09OLnN0cmluZ2lmeShpLm91dFN0YXRpc3RpY3MpKSxpLmZ1bGxUZXh0JiYoYS5mdWxsVGV4dD1KU09OLnN0cmluZ2lmeShpLmZ1bGxUZXh0KSksaS5waXhlbFNpemUmJihhLnBpeGVsU2l6ZT1KU09OLnN0cmluZ2lmeShpLnBpeGVsU2l6ZSkpLGkucXVhbnRpemF0aW9uUGFyYW1ldGVycyYmKHQuZGVmYXVsdFNwYXRpYWxSZWZlcmVuY2VFbmFibGVkJiZudWxsIT11JiZudWxsIT10LnF1YW50aXphdGlvblBhcmFtZXRlcnMmJm51bGwhPXQucXVhbnRpemF0aW9uUGFyYW1ldGVycy5leHRlbnQmJnUuZXF1YWxzKHQucXVhbnRpemF0aW9uUGFyYW1ldGVycy5leHRlbnQuc3BhdGlhbFJlZmVyZW5jZSkmJmRlbGV0ZSBpLnF1YW50aXphdGlvblBhcmFtZXRlcnMuZXh0ZW50LnNwYXRpYWxSZWZlcmVuY2UsYS5xdWFudGl6YXRpb25QYXJhbWV0ZXJzPUpTT04uc3RyaW5naWZ5KGkucXVhbnRpemF0aW9uUGFyYW1ldGVycykpLGkucGFyYW1ldGVyVmFsdWVzJiYoYS5wYXJhbWV0ZXJWYWx1ZXM9SlNPTi5zdHJpbmdpZnkoaS5wYXJhbWV0ZXJWYWx1ZXMpKSxpLnJhbmdlVmFsdWVzJiYoYS5yYW5nZVZhbHVlcz1KU09OLnN0cmluZ2lmeShpLnJhbmdlVmFsdWVzKSksaS5keW5hbWljRGF0YVNvdXJjZSYmKGEubGF5ZXI9SlNPTi5zdHJpbmdpZnkoe3NvdXJjZTppLmR5bmFtaWNEYXRhU291cmNlfSksZGVsZXRlIGkuZHluYW1pY0RhdGFTb3VyY2UpLGkudGltZUV4dGVudCl7Y29uc3QgdD1pLnRpbWVFeHRlbnQse3N0YXJ0OmUsZW5kOm59PXQ7bnVsbD09ZSYmbnVsbD09bnx8KGEudGltZT1lPT09bj9lOmAke2U/P1wibnVsbFwifSwke24/P1wibnVsbFwifWApLGRlbGV0ZSBpLnRpbWVFeHRlbnR9cmV0dXJuIHQuZGVmYXVsdFNwYXRpYWxSZWZlcmVuY2VFbmFibGVkJiZudWxsIT11JiZudWxsIT1vJiZ1LmVxdWFscyhvKSYmKGEuZGVmYXVsdFNSPWEuaW5TUixkZWxldGUgYS5pblNSLGRlbGV0ZSBhLm91dFNSKSxhfWFzeW5jIGZ1bmN0aW9uIG0odCxlLG4scil7Y29uc3QgaT1udWxsIT1lLnRpbWVFeHRlbnQmJmUudGltZUV4dGVudC5pc0VtcHR5P3tkYXRhOntmZWF0dXJlczpbXX19OmF3YWl0IHgodCxlLFwianNvblwiLHIpO3JldHVybiB1KGUsbixpLmRhdGEpLGl9YXN5bmMgZnVuY3Rpb24gYyh0LGUsbixyKXtpZihudWxsIT1lLnRpbWVFeHRlbnQmJmUudGltZUV4dGVudC5pc0VtcHR5KXJldHVybntkYXRhOm4uY3JlYXRlRmVhdHVyZVJlc3VsdCgpfTtjb25zdCBpPWF3YWl0IGYodCxlLHIpLGE9aTtyZXR1cm4gYS5kYXRhPW8oaS5kYXRhLG4pLGF9ZnVuY3Rpb24gZih0LGUsbil7cmV0dXJuIHgodCxlLFwicGJmXCIsbil9ZnVuY3Rpb24gZCh0LGUsbil7cmV0dXJuIG51bGwhPWUudGltZUV4dGVudCYmZS50aW1lRXh0ZW50LmlzRW1wdHk/UHJvbWlzZS5yZXNvbHZlKHtkYXRhOntvYmplY3RJZHM6W119fSk6eCh0LGUsXCJqc29uXCIsbix7cmV0dXJuSWRzT25seTohMH0pfWZ1bmN0aW9uIHAodCxlLG4pe3JldHVybiBudWxsIT1lLnRpbWVFeHRlbnQmJmUudGltZUV4dGVudC5pc0VtcHR5P1Byb21pc2UucmVzb2x2ZSh7ZGF0YTp7Y291bnQ6MH19KTp4KHQsZSxcImpzb25cIixuLHtyZXR1cm5JZHNPbmx5OiEwLHJldHVybkNvdW50T25seTohMH0pfWFzeW5jIGZ1bmN0aW9uIFModCxlLG4pe2lmKG51bGwhPWUudGltZUV4dGVudCYmZS50aW1lRXh0ZW50LmlzRW1wdHkpcmV0dXJue2RhdGE6e2NvdW50OjAsZXh0ZW50Om51bGx9fTtjb25zdCByPWF3YWl0IHgodCxlLFwianNvblwiLG4se3JldHVybkV4dGVudE9ubHk6ITAscmV0dXJuQ291bnRPbmx5OiEwfSksaT1yLmRhdGE7aWYoaS5oYXNPd25Qcm9wZXJ0eShcImV4dGVudFwiKSlyZXR1cm4gcjtpZihpLmZlYXR1cmVzKXRocm93IG5ldyBFcnJvcihsKTtpZihpLmhhc093blByb3BlcnR5KFwiY291bnRcIikpdGhyb3cgbmV3IEVycm9yKGwpO3JldHVybiByfWFzeW5jIGZ1bmN0aW9uIHgocixvLHUsbD17fSxzPXt9KXtjb25zdCBtPVwic3RyaW5nXCI9PXR5cGVvZiByP2Uocik6cixjPW8uZ2VvbWV0cnk/W28uZ2VvbWV0cnldOltdO2wucmVzcG9uc2VUeXBlPVwicGJmXCI9PT11P1wiYXJyYXktYnVmZmVyXCI6XCJqc29uXCI7Y29uc3QgZj1hd2FpdCBpKGMsbnVsbCxsKSxkPWYmJmZbMF07bnVsbCE9ZCYmKChvPW8uY2xvbmUoKSkuZ2VvbWV0cnk9ZCk7Y29uc3QgcD1hKHsuLi5tLnF1ZXJ5LGY6dSwuLi5zLC4uLnkobyxzKX0pO3JldHVybiB0KG4obS5wYXRoLEUobyxzKT9cInF1ZXJ5M2RcIjpcInF1ZXJ5XCIpLHsuLi5sLHF1ZXJ5OnsuLi5wLC4uLmwucXVlcnl9fSl9ZnVuY3Rpb24gRSh0LGUpe3JldHVybiBudWxsIT10LmZvcm1hdE9mM0RPYmplY3RzJiYhKGUucmV0dXJuQ291bnRPbmx5fHxlLnJldHVybkV4dGVudE9ubHl8fGUucmV0dXJuSWRzT25seSl9ZXhwb3J0e3MgYXMgZW5jb2RlR2VvbWV0cnksbSBhcyBleGVjdXRlUXVlcnkscCBhcyBleGVjdXRlUXVlcnlGb3JDb3VudCxTIGFzIGV4ZWN1dGVRdWVyeUZvckV4dGVudCxkIGFzIGV4ZWN1dGVRdWVyeUZvcklkcyxjIGFzIGV4ZWN1dGVRdWVyeVBCRixmIGFzIGV4ZWN1dGVRdWVyeVBCRkJ1ZmZlcix5IGFzIHF1ZXJ5VG9RdWVyeVN0cmluZ1BhcmFtZXRlcnMseCBhcyBydW5RdWVyeX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2dldEdlb21ldHJ5WlNjYWxlciBhcyBlfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvenNjYWxlLmpzXCI7ZnVuY3Rpb24gdCh0LG8scil7aWYoIXJ8fCFyLmZlYXR1cmVzfHwhci5oYXNaKXJldHVybjtjb25zdCBmPWUoci5nZW9tZXRyeVR5cGUsbyx0Lm91dFNwYXRpYWxSZWZlcmVuY2UpO2lmKG51bGwhPWYpZm9yKGNvbnN0IGUgb2Ygci5mZWF0dXJlcylmKGUuZ2VvbWV0cnkpfWV4cG9ydHt0IGFzIGFwcGx5RmVhdHVyZVNldFpVbml0U2NhbGluZ307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=