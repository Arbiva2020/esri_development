{"version":3,"names":["slope","p0","p1","p2","dx","dx1","dy","dy1","m","m1","p","Math","sign","min","abs","slopeSingle","bezier","m0","t","x0","y0","x1","y1","h1","join","h2","translate","width","height","max","rangeX","rangeY","point","x","y","range","data","startX","startY","reduce","area","length","minX","minY","maxX","commands","acc","i","undefined","command","last","end","graphCss","Graph","this","graphId","guid","resizeObserver","createObserver","forceUpdate","connectedCallback","observe","el","disconnectedCallback","disconnect","render","colorStops","highlightMax","highlightMin","id","clientHeight","clientWidth","h","class","preserveAspectRatio","viewBox","rangeMin","rangeMax","currentMin","currentMax","hMinX","hMaxX","areaPath","fill","x2","y2","map","offset","color","opacity","d","mask","CSS","handleLabel","handleLabelMinValue","handleLabelValue","tickMin","tickMax","maxTickElementThreshold","sliderCss","isRange","value","Array","isArray","Slider","activeProp","dragUpdate","event","disabled","preventDefault","dragProp","clientX","pageX","minValueDragRange","maxValueDragRange","minMaxValueRange","newMinValue","newMaxValue","setValue","minValue","clamp","maxValue","pointerUpDragEnd","isPrimaryPointerButton","dragEnd","removeDragListeners","focusActiveHandle","lastDragPropValue","emitChange","storeTrackRef","node","trackEl","determineGroupSeparator","numberStringFormatter","numberFormatOptions","locale","effectiveLocale","numberingSystem","useGrouping","groupSeparator","localize","toString","histogramWatcher","newHistogram","hasHistogram","ticksWatcher","tickValues","generateTickValues","valueHandler","setMinMaxFromValue","minMaxValueHandler","setValueFromMinMax","connectInteractive","connectLocalized","connectLabel","connectForm","disconnectInteractive","disconnectLabel","disconnectForm","disconnectLocalized","componentWillLoad","setUpLoadableComponent","snap","getClosestStep","histogram","afterConnectDefaultValueSet","componentDidLoad","setComponentLoaded","componentDidRender","labelHandles","adjustHostObscuredHandleLabel","precise","hyphenateCollidingRangeHandleLabels","hideObscuredBoundingTickLabels","updateHostInteraction","maxProp","displayedValue","displayedMinValue","useMinValue","shouldUseMinValue","minInterval","getUnitInterval","maxInterval","mirror","shouldMirror","leftThumbOffset","rightThumbOffset","valueIsRange","handleLabelMinValueClasses","handleLabelValueClasses","handle","maxLabel","minLabel","thumb","lastDragProp","onBlur","onFocus","onPointerDown","pointerDownDragStart","role","style","right","tabIndex","ref","maxHandle","labeledHandle","histogramLabeledHandle","preciseHandle","histogramPreciseHandle","labeledPreciseHandle","histogramLabeledPreciseHandle","minHandle","left","minLabeledHandle","minHistogramLabeledHandle","minPreciseHandle","minLabeledPreciseHandle","Host","onTouchStart","handleTouchStart","getLabelText","scale","renderGraph","tick","tickOffset","activeTicks","renderTickLabel","HiddenFormInputSlot","component","histogramStops","isMinTickLabel","isMaxTickLabel","displayedTickValue","tickLabel","tick__label","labelTicks","keyDownHandler","pageStep","step","key","isActivationKey","adjustment","directionFactor","isNaN","fixedDecimalAdjustment","Number","toFixed","decimalPlaces","pointerDownHandler","position","prop","inRange","closerToMax","dragStart","isThumbActive","shadowRoot","querySelector","setFocus","componentFocusable","focus","onLabelClick","mirrored","getTickDensity","density","ticks","tickInterval","current","push","includes","window","addEventListener","valueX","getClosestHandle","emitInput","calciteSliderInput","emit","calciteSliderChange","removeEventListener","values","valueChanged","Object","keys","forEach","propName","newValue","oldValue","dragging","getBoundingClientRect","percent","clampedValue","num","round","getDistanceX","getFontSizeForElement","element","getComputedStyle","getPropertyValue","match","name","label","labelStatic","labelTransformed","labelStaticBounds","labelStaticOffset","getHostOffset","transform","leftModifier","rightModifier","leftValueLabel","leftValueLabelStatic","leftValueLabelTransformed","leftValueLabelStaticHostOffset","rightValueLabel","rightValueLabelStatic","rightValueLabelTransformed","rightValueLabelStaticHostOffset","labelFontSize","labelTransformedOverlap","getRangeLabelOverlap","hyphenLabel","labelOffset","classList","add","leftValueLabelTranslate","leftValueLabelTransformedHostOffset","rightValueLabelTranslate","rightValueLabelTransformedHostOffset","remove","minTickLabel","maxTickLabel","isMinTickLabelObscured","isMaxTickLabelObscured","leftBounds","rightBounds","hostBounds","buffer","leftLabel","rightLabel","leftLabelBounds","rightLabelBounds","leftLabelFontSize","rangeLabelOverlap","minLabelBounds","handleBounds","intersects","maxLabelBounds"],"sources":["src/components/graph/util.ts","src/components/graph/graph.scss?tag=calcite-graph&encapsulation=shadow","src/components/graph/graph.tsx","src/components/slider/resources.ts","src/components/slider/slider.scss?tag=calcite-slider&encapsulation=shadow","src/components/slider/slider.tsx"],"sourcesContent":["import { DataSeries, Extent, Graph, Point, TranslateOptions, Translator } from \"../graph/interfaces\";\n\n/**\n * Calculate slope of the tangents\n * uses Steffen interpolation as it's monotonic\n * http://jrwalsh1.github.io/posts/interpolations/\n *\n * @param p0\n * @param p1\n * @param p2\n */\nfunction slope(p0: Point, p1: Point, p2: Point): number {\n  const dx = p1[0] - p0[0];\n  const dx1 = p2[0] - p1[0];\n  const dy = p1[1] - p0[1];\n  const dy1 = p2[1] - p1[1];\n  const m = dy / (dx || (dx1 < 0 && 0));\n  const m1 = dy1 / (dx1 || (dx < 0 && 0));\n  const p = (m * dx1 + m1 * dx) / (dx + dx1);\n  return (Math.sign(m) + Math.sign(m1)) * Math.min(Math.abs(m), Math.abs(m1), 0.5 * Math.abs(p)) || 0;\n}\n\n/**\n * Calculate slope for just one tangent (single-sided)\n *\n * @param p0\n * @param p1\n * @param m\n */\nfunction slopeSingle(p0: Point, p1: Point, m: number): number {\n  const dx = p1[0] - p0[0];\n  const dy = p1[1] - p0[1];\n  return dx ? ((3 * dy) / dx - m) / 2 : m;\n}\n\n/**\n * Given two points and their tangent slopes,\n * calculate the bezier handle coordinates and return draw command.\n *\n * Translates Hermite Spline to BÃ©zier curve:\n * https://stackoverflow.com/questions/42574940/\n *\n * @param p0\n * @param p1\n * @param m0\n * @param m1\n * @param t\n */\nfunction bezier(p0: Point, p1: Point, m0: number, m1: number, t: Translator): string {\n  const [x0, y0] = p0;\n  const [x1, y1] = p1;\n  const dx = (x1 - x0) / 3;\n  const h1 = t([x0 + dx, y0 + dx * m0]).join(\",\");\n  const h2 = t([x1 - dx, y1 - dx * m1]).join(\",\");\n  const p = t([x1, y1]).join(\",\");\n  return `C ${h1} ${h2} ${p}`;\n}\n\n/**\n * Generate a function which will translate a point\n * from the data coordinate space to svg viewbox oriented pixels\n *\n * @param root0\n * @param root0.width\n * @param root0.height\n * @param root0.min\n * @param root0.max\n */\nexport function translate({ width, height, min, max }: TranslateOptions): Translator {\n  const rangeX = max[0] - min[0];\n  const rangeY = max[1] - min[1];\n  return (point) => {\n    const x = ((point[0] - min[0]) / rangeX) * width;\n    const y = height - (point[1] / rangeY) * height;\n    return [x, y];\n  };\n}\n\n/**\n * Get the min and max values from the dataset\n *\n * @param data\n */\nexport function range(data: DataSeries): Extent {\n  const [startX, startY] = data[0];\n  const min: Point = [startX, startY];\n  const max: Point = [startX, startY];\n  return data.reduce(\n    ({ min, max }, [x, y]) => ({\n      min: [Math.min(min[0], x), Math.min(min[1], y)],\n      max: [Math.max(max[0], x), Math.max(max[1], y)],\n    }),\n    { min, max }\n  );\n}\n\n/**\n * Generate drawing commands for an area graph\n * returns a string can can be passed directly to a path element's `d` attribute\n *\n * @param root0\n * @param root0.data\n * @param root0.min\n * @param root0.max\n * @param root0.t\n */\nexport function area({ data, min, max, t }: Graph): string {\n  if (data.length === 0) {\n    return \"\";\n  }\n\n  // important points for beginning and ending the path\n  const [startX, startY] = t(data[0]);\n  const [minX, minY] = t(min);\n  const [maxX] = t(max);\n\n  // keep track of previous slope/points\n  let m: number;\n  let p0: Point;\n  let p1: Point;\n\n  // iterate over data points, calculating command for each\n  const commands = data.reduce((acc, point, i) => {\n    p0 = data[i - 2];\n    p1 = data[i - 1];\n    if (i > 1) {\n      const m1 = slope(p0, p1, point);\n      const m0 = m === undefined ? slopeSingle(p0, p1, m1) : m;\n      const command = bezier(p0, p1, m0, m1, t);\n      m = m1;\n      return `${acc} ${command}`;\n    }\n    return acc;\n  }, `M ${minX},${minY} L ${minX},${startY} L ${startX},${startY}`);\n\n  // close the path\n  const last = data[data.length - 1];\n  const end = bezier(p1, last, m, slopeSingle(p1, last, m), t);\n  return `${commands} ${end} L ${maxX},${minY} Z`;\n}\n",":host {\n  @apply block;\n  block-size: 100%;\n}\n\n.svg {\n  fill: currentColor;\n  stroke: transparent;\n  @apply m-0 block h-full w-full p-0;\n\n  .graph-path--highlight {\n    fill: var(--calcite-color-brand);\n    @apply opacity-50;\n  }\n}\n\n@include base-component();\n","import { Component, Element, forceUpdate, h, Prop, VNode } from \"@stencil/core\";\nimport { guid } from \"../../utils/guid\";\nimport { createObserver } from \"../../utils/observers\";\nimport { ColorStop, DataSeries, Point } from \"./interfaces\";\nimport { area, range, translate } from \"./util\";\n\n@Component({\n  tag: \"calcite-graph\",\n  styleUrl: \"graph.scss\",\n  shadow: true,\n})\nexport class Graph {\n  //--------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Array of tuples describing a single data point ([x, y])\n   * These data points should be sorted by x-axis value\n   */\n  @Prop() data: DataSeries = [];\n\n  /**\n   * Array of values describing a single color stop ([offset, color, opacity])\n   * These color stops should be sorted by offset value\n   */\n  @Prop() colorStops: ColorStop[];\n\n  /** Start of highlight color if highlighting range */\n  @Prop() highlightMin: number;\n\n  /** End of highlight color if highlighting range */\n  @Prop() highlightMax: number;\n\n  /** Lowest point of the range */\n  @Prop({ reflect: true }) min!: number;\n\n  /** Highest point of the range */\n  @Prop({ reflect: true }) max!: number;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    this.resizeObserver?.observe(this.el);\n  }\n\n  disconnectedCallback(): void {\n    this.resizeObserver?.disconnect();\n  }\n\n  render(): VNode {\n    const { data, colorStops, el, highlightMax, highlightMin, min, max } = this;\n    const id = this.graphId;\n    const { clientHeight: height, clientWidth: width } = el;\n\n    // if we have no data, return empty svg\n    if (!data || data.length === 0) {\n      return (\n        <svg\n          aria-hidden=\"true\"\n          class=\"svg\"\n          height={height}\n          preserveAspectRatio=\"none\"\n          viewBox={`0 0 ${width} ${height}`}\n          width={width}\n        />\n      );\n    }\n\n    const { min: rangeMin, max: rangeMax } = range(data);\n\n    let currentMin: Point = rangeMin;\n    let currentMax: Point = rangeMax;\n\n    if (min < rangeMin[0] || min > rangeMin[0]) {\n      currentMin = [min, 0];\n    }\n\n    if (max > rangeMax[0] || max < rangeMax[0]) {\n      currentMax = [max, rangeMax[1]];\n    }\n\n    const t = translate({ min: currentMin, max: currentMax, width, height });\n    const [hMinX] = t([highlightMin, currentMax[1]]);\n    const [hMaxX] = t([highlightMax, currentMax[1]]);\n    const areaPath = area({ data, min: rangeMin, max: rangeMax, t });\n    const fill = colorStops ? `url(#linear-gradient-${id})` : undefined;\n    return (\n      <svg\n        aria-hidden=\"true\"\n        class=\"svg\"\n        height={height}\n        preserveAspectRatio=\"none\"\n        viewBox={`0 0 ${width} ${height}`}\n        width={width}\n      >\n        {colorStops ? (\n          <defs>\n            <linearGradient id={`linear-gradient-${id}`} x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n              {colorStops.map(({ offset, color, opacity }) => (\n                <stop offset={`${offset * 100}%`} stop-color={color} stop-opacity={opacity} />\n              ))}\n            </linearGradient>\n          </defs>\n        ) : null}\n\n        {highlightMin !== undefined ? (\n          [\n            <mask height=\"100%\" id={`${id}1`} width=\"100%\" x=\"0%\" y=\"0%\">\n              <path\n                d={`\n            M 0,0\n            L ${hMinX - 1},0\n            L ${hMinX - 1},${height}\n            L 0,${height}\n            Z\n          `}\n                fill=\"white\"\n              />\n            </mask>,\n\n            <mask height=\"100%\" id={`${id}2`} width=\"100%\" x=\"0%\" y=\"0%\">\n              <path\n                d={`\n            M ${hMinX + 1},0\n            L ${hMaxX - 1},0\n            L ${hMaxX - 1},${height}\n            L ${hMinX + 1}, ${height}\n            Z\n          `}\n                fill=\"white\"\n              />\n            </mask>,\n\n            <mask height=\"100%\" id={`${id}3`} width=\"100%\" x=\"0%\" y=\"0%\">\n              <path\n                d={`\n                M ${hMaxX + 1},0\n                L ${width},0\n                L ${width},${height}\n                L ${hMaxX + 1}, ${height}\n                Z\n              `}\n                fill=\"white\"\n              />\n            </mask>,\n\n            <path class=\"graph-path\" d={areaPath} fill={fill} mask={`url(#${id}1)`} />,\n            <path class=\"graph-path--highlight\" d={areaPath} fill={fill} mask={`url(#${id}2)`} />,\n            <path class=\"graph-path\" d={areaPath} fill={fill} mask={`url(#${id}3)`} />,\n          ]\n        ) : (\n          <path class=\"graph-path\" d={areaPath} fill={fill} />\n        )}\n      </svg>\n    );\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteGraphElement;\n\n  private graphId = `calcite-graph-${guid()}`;\n\n  private resizeObserver = createObserver(\"resize\", () => forceUpdate(this));\n}\n","export const CSS = {\n  handleLabel: \"handle__label\",\n  handleLabelMinValue: \"handle__label--minValue\",\n  handleLabelValue: \"handle__label--value\",\n  tickMin: \"tick__label--min\",\n  tickMax: \"tick__label--max\",\n};\n\nexport const maxTickElementThreshold = 250;\n",".scale--s {\n  --calcite-slider-handle-size: theme(\"spacing[2.5]\");\n  --calcite-slider-handle-extension-height: 0.4rem;\n  --calcite-slider-container-font-size: var(--calcite-font-size--3);\n  .handle__label,\n  .tick__label {\n    @apply leading-3;\n  }\n}\n\n.scale--m {\n  --calcite-slider-handle-size: theme(\"spacing[3.5]\");\n  --calcite-slider-handle-extension-height: 0.5rem;\n  --calcite-slider-container-font-size: var(--calcite-font-size--2);\n  .handle__label,\n  .tick__label {\n    @apply leading-4;\n  }\n}\n\n.scale--l {\n  --calcite-slider-handle-size: 1rem;\n  --calcite-slider-handle-extension-height: 0.65rem;\n  --calcite-slider-container-font-size: var(--calcite-font-size--1);\n  .handle__label,\n  .tick__label {\n    @apply leading-4;\n  }\n}\n\n.handle__label,\n.tick__label {\n  @apply text-color-2 font-medium;\n  font-size: var(--calcite-slider-container-font-size);\n}\n\n:host {\n  @apply block;\n}\n\n.container {\n  @apply relative block break-normal;\n  padding-inline: calc(var(--calcite-slider-handle-size) * 0.5);\n  padding-block: calc(var(--calcite-slider-handle-size) * 0.5);\n  margin-block: calc(var(--calcite-slider-handle-size) * 0.5);\n  margin-inline: 0;\n  --calcite-slider-full-handle-height: calc(\n    var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height)\n  );\n  touch-action: none;\n  // disable browser swipe navigation to prevent interference with the slide thumb following a touch gesture\n}\n\n@include disabled() {\n  .track__range,\n  .tick--active {\n    background-color: var(--calcite-color-text-3);\n  }\n}\n\n.scale--s {\n  .thumb:not(.thumb--precise) {\n    --calcite-slider-thumb-y-offset: -0.375rem;\n  }\n}\n.scale--m {\n  .thumb:not(.thumb--precise) {\n    --calcite-slider-thumb-y-offset: -0.5rem;\n  }\n}\n.scale--l {\n  .thumb:not(.thumb--precise) {\n    --calcite-slider-thumb-y-offset: -0.55rem;\n  }\n}\n\n:host([precise]:not([has-histogram])) {\n  .container .thumb--value {\n    --calcite-slider-thumb-y-offset: calc(var(--calcite-slider-full-handle-height) * -1);\n  }\n}\n\n.thumb-container {\n  @apply relative max-w-full;\n}\n\n.thumb {\n  --calcite-slider-thumb-x-offset: calc(var(--calcite-slider-handle-size) * 0.5);\n  @apply font-inherit\n    absolute\n    m-0\n    flex\n    cursor-pointer\n    flex-col\n    items-center\n    border-none\n    bg-transparent\n    p-0\n    outline-none;\n  transform: translate(var(--calcite-slider-thumb-x-offset), var(--calcite-slider-thumb-y-offset));\n\n  .handle__label {\n    &.static,\n    &.transformed {\n      @apply absolute\n        top-0\n        bottom-0\n        opacity-0;\n    }\n    &.hyphen::after {\n      content: \"\\2014\";\n      display: inline-block;\n      inline-size: 1em;\n    }\n    &.hyphen--wrap {\n      display: flex;\n    }\n  }\n\n  .handle {\n    @apply focus-base\n      bg-foreground-1\n      box-border\n      rounded-full;\n    block-size: var(--calcite-slider-handle-size);\n    inline-size: var(--calcite-slider-handle-size);\n    box-shadow: 0 0 0 2px var(--calcite-color-text-3) inset;\n    transition: border var(--calcite-internal-animation-timing-medium) ease,\n      background-color var(--calcite-internal-animation-timing-medium) ease,\n      box-shadow var(--calcite-animation-timing) ease;\n  }\n\n  .handle-extension {\n    @apply w-0.5;\n    block-size: var(--calcite-slider-handle-extension-height);\n    background-color: var(--calcite-color-text-3);\n  }\n\n  &:hover {\n    .handle {\n      box-shadow: 0 0 0 3px var(--calcite-color-brand) inset;\n    }\n    .handle-extension {\n      @apply bg-brand;\n    }\n  }\n\n  &:focus {\n    .handle {\n      @apply focus-outset;\n    }\n    .handle-extension {\n      @apply bg-brand;\n    }\n  }\n\n  &.thumb--minValue {\n    transform: translate(calc(var(--calcite-slider-thumb-x-offset) * -1), var(--calcite-slider-thumb-y-offset));\n  }\n\n  &.thumb--precise {\n    --calcite-slider-thumb-y-offset: -0.125rem;\n  }\n}\n\n:host([label-handles]) {\n  .thumb {\n    --calcite-slider-thumb-x-offset: 50%;\n  }\n  &:host(:not([has-histogram])) {\n    .scale--s {\n      .thumb:not(.thumb--precise) {\n        --calcite-slider-thumb-y-offset: -1.4375rem;\n      }\n    }\n    .scale--m {\n      .thumb:not(.thumb--precise) {\n        --calcite-slider-thumb-y-offset: -1.875rem;\n      }\n    }\n    .scale--l {\n      .thumb:not(.thumb--precise) {\n        --calcite-slider-thumb-y-offset: -2rem;\n      }\n    }\n  }\n}\n\n:host([has-histogram][label-handles]),\n:host([label-handles]:not([has-histogram])) .thumb--minValue.thumb--precise {\n  .handle__label {\n    margin-block-start: 0.5em;\n  }\n}\n:host(:not([has-histogram]):not([precise])),\n:host([label-handles]:not([has-histogram])) .thumb--value {\n  .handle__label {\n    margin-block-end: 0.5em;\n  }\n}\n\n:host([label-handles][precise]) {\n  &:host(:not([has-histogram])) .scale--s .thumb--value {\n    --calcite-slider-thumb-y-offset: -2.075rem;\n  }\n  &:host(:not([has-histogram])) .scale--m .thumb--value {\n    --calcite-slider-thumb-y-offset: -2.75rem;\n  }\n  &:host(:not([has-histogram])) .scale--l .thumb--value {\n    --calcite-slider-thumb-y-offset: -3.0625rem;\n  }\n}\n\n.thumb:focus,\n.thumb--active {\n  .handle {\n    @apply bg-brand;\n    box-shadow: 0 0 8px 0 rgb(0 0 0 / 16%); // shadow 1 press\n  }\n}\n\n.thumb:hover.thumb--precise:after,\n.thumb:focus.thumb--precise:after,\n.thumb--active.thumb--precise:after {\n  @apply bg-brand;\n}\n\n.track {\n  @apply relative h-0.5 rounded-none;\n  background-color: var(--calcite-color-border-2);\n  transition: all var(--calcite-internal-animation-timing-medium) ease-in;\n}\n\n.track__range {\n  @apply bg-brand\n  absolute\n  top-0\n  h-0.5;\n}\n.container--range {\n  .track__range {\n    &:hover {\n      cursor: ew-resize;\n    }\n    &:after {\n      @apply absolute w-full;\n      content: \"\";\n      inset-block-start: calc(calc(var(--calcite-slider-full-handle-height) * 0.5) * -1);\n      block-size: calc(var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height));\n    }\n  }\n}\n\n@media (forced-colors: active) {\n  .thumb {\n    outline-width: 0;\n    outline-offset: 0;\n  }\n  .handle {\n    @apply outline-none;\n  }\n  .thumb:focus .handle,\n  .thumb .handle-extension,\n  .thumb:hover .handle-extension,\n  .thumb:focus .handle-extension,\n  .thumb:active .handle-extension {\n    background-color: canvasText;\n  }\n  .track {\n    background-color: canvasText;\n  }\n  .track__range {\n    background-color: highlight;\n  }\n}\n\n.tick {\n  @apply absolute\n    h-1\n    w-0.5\n    border\n    border-solid;\n  background-color: var(--calcite-color-border-input);\n  border-color: var(--calcite-color-foreground-1);\n  inset-block-start: -2px;\n  pointer-events: none;\n  margin-inline-start: calc(-1 * theme(\"margin[0.5]\"));\n}\n\n.tick--active {\n  @apply bg-brand;\n}\n\n.tick__label {\n  @apply pointer-events-none\n    mt-3.5\n    flex\n    justify-center;\n}\n\n.tick__label--min {\n  transition: opacity var(--calcite-animation-timing);\n}\n\n.tick__label--max {\n  transition: opacity var(--calcite-internal-animation-timing-fast);\n}\n\n:host([has-histogram][label-handles]),\n:host([has-histogram][precise]) {\n  .tick__label--min,\n  .tick__label--max {\n    @apply text-color-3 font-normal;\n  }\n}\n\n.graph {\n  color: var(--calcite-color-foreground-3);\n  block-size: 48px;\n}\n\n// Ensure we have enough space on variants with text elements to prevent overlap\n:host([label-ticks][ticks]) {\n  .container {\n    // match tick__label top margin + font-size\n    padding-block-end: calc(theme(\"margin[3.5]\") + var(--calcite-slider-container-font-size));\n  }\n}\n:host([has-histogram]) {\n  &:host([precise][label-handles]) {\n    .container {\n      padding-block-end: calc(var(--calcite-slider-full-handle-height) + 1em);\n    }\n  }\n  &:host([label-handles]:not([precise])) {\n    .container {\n      padding-block-end: calc(calc(var(--calcite-slider-handle-size) * 0.5) + 1em);\n    }\n  }\n  &:host([precise]:not([label-handles])) {\n    .container {\n      padding-block-end: var(--calcite-slider-full-handle-height);\n    }\n  }\n}\n:host(:not([has-histogram])) {\n  &:host([precise]:not([label-handles])) {\n    .container {\n      padding-block-start: var(--calcite-slider-full-handle-height);\n    }\n    .container--range {\n      padding-block-end: var(--calcite-slider-full-handle-height);\n    }\n  }\n  &:host([label-handles]:not([precise])) {\n    .container {\n      padding-block-start: calc(var(--calcite-slider-full-handle-height) + 4px);\n    }\n  }\n  &:host([label-handles][precise]) {\n    .container {\n      padding-block-start: calc(\n        var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px\n      );\n    }\n    .container--range {\n      padding-block-end: calc(\n        var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px\n      );\n    }\n  }\n}\n\n@include hidden-form-input();\n@include base-component();\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Method,\n  Prop,\n  State,\n  VNode,\n  Watch,\n} from \"@stencil/core\";\nimport { guid } from \"../../utils/guid\";\n\nimport { intersects, isPrimaryPointerButton } from \"../../utils/dom\";\nimport {\n  afterConnectDefaultValueSet,\n  connectForm,\n  disconnectForm,\n  FormComponent,\n  HiddenFormInputSlot,\n} from \"../../utils/form\";\nimport {\n  connectInteractive,\n  disconnectInteractive,\n  InteractiveComponent,\n  updateHostInteraction,\n} from \"../../utils/interactive\";\nimport { isActivationKey } from \"../../utils/key\";\nimport { connectLabel, disconnectLabel, getLabelText, LabelableComponent } from \"../../utils/label\";\nimport {\n  componentFocusable,\n  LoadableComponent,\n  setComponentLoaded,\n  setUpLoadableComponent,\n} from \"../../utils/loadable\";\nimport {\n  connectLocalized,\n  disconnectLocalized,\n  LocalizedComponent,\n  NumberingSystem,\n  numberStringFormatter,\n} from \"../../utils/locale\";\nimport { clamp, decimalPlaces } from \"../../utils/math\";\nimport { ColorStop, DataSeries } from \"../graph/interfaces\";\nimport { Scale } from \"../interfaces\";\nimport { CSS, maxTickElementThreshold } from \"./resources\";\n\ntype ActiveSliderProperty = \"minValue\" | \"maxValue\" | \"value\" | \"minMaxValue\";\ntype SetValueProperty = Exclude<ActiveSliderProperty, \"minMaxValue\">;\n\nfunction isRange(value: number | number[]): value is number[] {\n  return Array.isArray(value);\n}\n\n@Component({\n  tag: \"calcite-slider\",\n  styleUrl: \"slider.scss\",\n  shadow: {\n    delegatesFocus: true,\n  },\n})\nexport class Slider\n  implements\n    LabelableComponent,\n    FormComponent,\n    InteractiveComponent,\n    LocalizedComponent,\n    LoadableComponent\n{\n  //--------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /** When `true`, interaction is prevented and the component is displayed with lower opacity. */\n  @Prop({ reflect: true }) disabled = false;\n\n  /**\n   * The ID of the form that will be associated with the component.\n   *\n   * When not set, the component will be associated with its ancestor form element, if any.\n   */\n  @Prop({ reflect: true })\n  form: string;\n\n  /**\n   * When `true`, number values are displayed with a group separator corresponding to the language and country format.\n   */\n  @Prop({ reflect: true }) groupSeparator = false;\n\n  /** When `true`, indicates a histogram is present. */\n  @Prop({ reflect: true, mutable: true }) hasHistogram = false;\n\n  /**\n   * A list of the histogram's x,y coordinates within the component's `min` and `max`. Displays above the component's track.\n   *\n   * @see [DataSeries](https://github.com/Esri/calcite-design-system/blob/main/src/components/graph/interfaces.ts#L5)\n   */\n  @Prop() histogram: DataSeries;\n\n  @Watch(\"histogram\")\n  histogramWatcher(newHistogram: DataSeries): void {\n    this.hasHistogram = !!newHistogram;\n  }\n\n  /**\n   * A set of single color stops for a histogram, sorted by offset ascending.\n   */\n  @Prop() histogramStops: ColorStop[];\n\n  /** When `true`, displays label handles with their numeric value. */\n  @Prop({ reflect: true }) labelHandles = false;\n\n  /** When `true` and `ticks` is specified, displays label tick marks with their numeric value. */\n  @Prop({ reflect: true }) labelTicks = false;\n\n  /** The component's maximum selectable value. */\n  @Prop({ reflect: true }) max = 100;\n\n  /** For multiple selections, the accessible name for the second handle, such as `\"Temperature, upper bound\"`. */\n  @Prop() maxLabel: string;\n\n  /** For multiple selections, the component's upper value. */\n  @Prop({ mutable: true }) maxValue: number;\n\n  /** The component's minimum selectable value. */\n  @Prop({ reflect: true }) min = 0;\n\n  /** Accessible name for first (or only) handle, such as `\"Temperature, lower bound\"`. */\n  @Prop() minLabel: string;\n\n  /** For multiple selections, the component's lower value. */\n  @Prop({ mutable: true }) minValue: number;\n\n  /**\n   * When `true`, the slider will display values from high to low.\n   *\n   * Note that this value will be ignored if the slider has an associated histogram.\n   */\n  @Prop({ reflect: true }) mirrored = false;\n\n  /**\n   * Specifies the name of the component.\n   *\n   * Required to pass the component's `value` on form submission.\n   */\n  @Prop({ reflect: true }) name: string;\n\n  /**\n   * Specifies the Unicode numeral system used by the component for localization.\n   */\n  @Prop() numberingSystem: NumberingSystem;\n\n  /** Specifies the interval to move with the page up, or page down keys. */\n  @Prop({ reflect: true }) pageStep: number;\n\n  /** When `true`, sets a finer point for handles. */\n  @Prop({ reflect: true }) precise = false;\n\n  /**\n   * When `true`, the component must have a value in order for the form to submit.\n   */\n  @Prop({ reflect: true }) required = false;\n\n  /** When `true`, enables snap selection in coordination with `step` via a mouse. */\n  @Prop({ reflect: true }) snap = false;\n\n  /** Specifies the interval to move with the up, or down keys. */\n  @Prop({ reflect: true }) step = 1;\n\n  /** Displays tick marks on the number line at a specified interval. */\n  @Prop({ reflect: true }) ticks: number;\n\n  @Watch(\"ticks\")\n  ticksWatcher(): void {\n    this.tickValues = this.generateTickValues();\n  }\n\n  /** The component's value. */\n  @Prop({ reflect: true, mutable: true }) value: null | number | number[] = 0;\n\n  @Watch(\"value\")\n  valueHandler(): void {\n    this.setMinMaxFromValue();\n  }\n\n  @Watch(\"minValue\")\n  @Watch(\"maxValue\")\n  minMaxValueHandler(): void {\n    this.setValueFromMinMax();\n  }\n\n  /**\n   *  Specifies the size of the component.\n   */\n  @Prop({ reflect: true }) scale: Scale = \"m\";\n\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    connectInteractive(this);\n    connectLocalized(this);\n    this.setMinMaxFromValue();\n    this.setValueFromMinMax();\n    connectLabel(this);\n    connectForm(this);\n  }\n\n  disconnectedCallback(): void {\n    disconnectInteractive(this);\n    disconnectLabel(this);\n    disconnectForm(this);\n    disconnectLocalized(this);\n    this.removeDragListeners();\n  }\n\n  componentWillLoad(): void {\n    setUpLoadableComponent(this);\n    if (!isRange(this.value)) {\n      this.value = this.snap ? this.getClosestStep(this.value) : this.clamp(this.value);\n    }\n    this.ticksWatcher();\n    this.histogramWatcher(this.histogram);\n    afterConnectDefaultValueSet(this, this.value);\n  }\n\n  componentDidLoad(): void {\n    setComponentLoaded(this);\n  }\n\n  componentDidRender(): void {\n    if (this.labelHandles) {\n      this.adjustHostObscuredHandleLabel(\"value\");\n      if (isRange(this.value)) {\n        this.adjustHostObscuredHandleLabel(\"minValue\");\n        if (!(this.precise && !this.hasHistogram)) {\n          this.hyphenateCollidingRangeHandleLabels();\n        }\n      }\n    }\n    this.hideObscuredBoundingTickLabels();\n    updateHostInteraction(this);\n  }\n\n  render(): VNode {\n    const id = this.el.id || this.guid;\n    const maxProp = isRange(this.value) ? \"maxValue\" : \"value\";\n    const value = isRange(this.value) ? this.maxValue : this.value;\n    const displayedValue = this.determineGroupSeparator(value);\n    const displayedMinValue = this.determineGroupSeparator(this.minValue);\n    const min = this.minValue || this.min;\n    const useMinValue = this.shouldUseMinValue();\n    const minInterval = this.getUnitInterval(useMinValue ? this.minValue : min) * 100;\n    const maxInterval = this.getUnitInterval(value) * 100;\n    const mirror = this.shouldMirror();\n    const leftThumbOffset = `${mirror ? 100 - minInterval : minInterval}%`;\n    const rightThumbOffset = `${mirror ? maxInterval : 100 - maxInterval}%`;\n    const valueIsRange = isRange(this.value);\n    const handleLabelMinValueClasses = `${CSS.handleLabel} ${CSS.handleLabelMinValue}`;\n    const handleLabelValueClasses = `${CSS.handleLabel} ${CSS.handleLabelValue}`;\n\n    const handle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={valueIsRange ? this.maxLabel : this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={value}\n        class={{\n          thumb: true,\n          \"thumb--value\": true,\n          \"thumb--active\": this.lastDragProp !== \"minMaxValue\" && this.dragProp === maxProp,\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = maxProp)}\n        onPointerDown={(event) => this.pointerDownDragStart(event, maxProp)}\n        role=\"slider\"\n        style={{ right: rightThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.maxHandle = el as HTMLDivElement)}\n      >\n        <div class=\"handle\" />\n      </div>\n    );\n\n    const labeledHandle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={valueIsRange ? this.maxLabel : this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={value}\n        class={{\n          thumb: true,\n          \"thumb--value\": true,\n          \"thumb--active\": this.lastDragProp !== \"minMaxValue\" && this.dragProp === maxProp,\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = maxProp)}\n        onPointerDown={(event) => this.pointerDownDragStart(event, maxProp)}\n        role=\"slider\"\n        style={{ right: rightThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.maxHandle = el as HTMLDivElement)}\n      >\n        <span aria-hidden=\"true\" class={handleLabelValueClasses}>\n          {displayedValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelValueClasses} static`}>\n          {displayedValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelValueClasses} transformed`}>\n          {displayedValue}\n        </span>\n        <div class=\"handle\" />\n      </div>\n    );\n\n    const histogramLabeledHandle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={valueIsRange ? this.maxLabel : this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={value}\n        class={{\n          thumb: true,\n          \"thumb--value\": true,\n          \"thumb--active\": this.lastDragProp !== \"minMaxValue\" && this.dragProp === maxProp,\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = maxProp)}\n        onPointerDown={(event) => this.pointerDownDragStart(event, maxProp)}\n        role=\"slider\"\n        style={{ right: rightThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.maxHandle = el as HTMLDivElement)}\n      >\n        <div class=\"handle\" />\n        <span aria-hidden=\"true\" class={handleLabelValueClasses}>\n          {displayedValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelValueClasses} static`}>\n          {displayedValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelValueClasses} transformed`}>\n          {displayedValue}\n        </span>\n      </div>\n    );\n\n    const preciseHandle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={valueIsRange ? this.maxLabel : this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={value}\n        class={{\n          thumb: true,\n          \"thumb--value\": true,\n          \"thumb--active\": this.lastDragProp !== \"minMaxValue\" && this.dragProp === maxProp,\n          \"thumb--precise\": true,\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = maxProp)}\n        onPointerDown={(event) => this.pointerDownDragStart(event, maxProp)}\n        role=\"slider\"\n        style={{ right: rightThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.maxHandle = el as HTMLDivElement)}\n      >\n        <div class=\"handle\" />\n        <div class=\"handle-extension\" />\n      </div>\n    );\n\n    const histogramPreciseHandle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={valueIsRange ? this.maxLabel : this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={value}\n        class={{\n          thumb: true,\n          \"thumb--value\": true,\n          \"thumb--active\": this.lastDragProp !== \"minMaxValue\" && this.dragProp === maxProp,\n          \"thumb--precise\": true,\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = maxProp)}\n        onPointerDown={(event) => this.pointerDownDragStart(event, maxProp)}\n        role=\"slider\"\n        style={{ right: rightThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.maxHandle = el as HTMLDivElement)}\n      >\n        <div class=\"handle-extension\" />\n        <div class=\"handle\" />\n      </div>\n    );\n\n    const labeledPreciseHandle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={valueIsRange ? this.maxLabel : this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={value}\n        class={{\n          thumb: true,\n          \"thumb--value\": true,\n          \"thumb--active\": this.lastDragProp !== \"minMaxValue\" && this.dragProp === maxProp,\n          \"thumb--precise\": true,\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = maxProp)}\n        onPointerDown={(event) => this.pointerDownDragStart(event, maxProp)}\n        role=\"slider\"\n        style={{ right: rightThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.maxHandle = el as HTMLDivElement)}\n      >\n        <span aria-hidden=\"true\" class={handleLabelValueClasses}>\n          {displayedValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelValueClasses} static`}>\n          {displayedValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelValueClasses} transformed`}>\n          {displayedValue}\n        </span>\n        <div class=\"handle\" />\n        <div class=\"handle-extension\" />\n      </div>\n    );\n\n    const histogramLabeledPreciseHandle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={valueIsRange ? this.maxLabel : this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={value}\n        class={{\n          thumb: true,\n          \"thumb--value\": true,\n          \"thumb--active\": this.lastDragProp !== \"minMaxValue\" && this.dragProp === maxProp,\n          \"thumb--precise\": true,\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = maxProp)}\n        onPointerDown={(event) => this.pointerDownDragStart(event, maxProp)}\n        role=\"slider\"\n        style={{ right: rightThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.maxHandle = el as HTMLDivElement)}\n      >\n        <div class=\"handle-extension\" />\n        <div class=\"handle\" />\n        <span aria-hidden=\"true\" class={handleLabelValueClasses}>\n          {displayedValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelValueClasses} static`}>\n          {displayedValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelValueClasses} transformed`}>\n          {displayedValue}\n        </span>\n      </div>\n    );\n\n    const minHandle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={this.minValue}\n        class={{\n          thumb: true,\n          \"thumb--minValue\": true,\n          \"thumb--active\": this.dragProp === \"minValue\",\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = \"minValue\")}\n        onPointerDown={(event) => this.pointerDownDragStart(event, \"minValue\")}\n        role=\"slider\"\n        style={{ left: leftThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.minHandle = el as HTMLDivElement)}\n      >\n        <div class=\"handle\" />\n      </div>\n    );\n\n    const minLabeledHandle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={this.minValue}\n        class={{\n          thumb: true,\n          \"thumb--minValue\": true,\n          \"thumb--active\": this.dragProp === \"minValue\",\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = \"minValue\")}\n        onPointerDown={(event) => this.pointerDownDragStart(event, \"minValue\")}\n        role=\"slider\"\n        style={{ left: leftThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.minHandle = el as HTMLDivElement)}\n      >\n        <span aria-hidden=\"true\" class={handleLabelMinValueClasses}>\n          {displayedMinValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelMinValueClasses} static`}>\n          {displayedMinValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelMinValueClasses} transformed`}>\n          {displayedMinValue}\n        </span>\n        <div class=\"handle\" />\n      </div>\n    );\n\n    const minHistogramLabeledHandle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={this.minValue}\n        class={{\n          thumb: true,\n          \"thumb--minValue\": true,\n          \"thumb--active\": this.dragProp === \"minValue\",\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = \"minValue\")}\n        onPointerDown={(event) => this.pointerDownDragStart(event, \"minValue\")}\n        role=\"slider\"\n        style={{ left: leftThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.minHandle = el as HTMLDivElement)}\n      >\n        <div class=\"handle\" />\n        <span aria-hidden=\"true\" class={handleLabelMinValueClasses}>\n          {displayedMinValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelMinValueClasses} static`}>\n          {displayedMinValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelMinValueClasses} transformed`}>\n          {displayedMinValue}\n        </span>\n      </div>\n    );\n\n    const minPreciseHandle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={this.minValue}\n        class={{\n          thumb: true,\n          \"thumb--minValue\": true,\n          \"thumb--active\": this.dragProp === \"minValue\",\n          \"thumb--precise\": true,\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = \"minValue\")}\n        onPointerDown={(event) => this.pointerDownDragStart(event, \"minValue\")}\n        role=\"slider\"\n        style={{ left: leftThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.minHandle = el as HTMLDivElement)}\n      >\n        <div class=\"handle-extension\" />\n        <div class=\"handle\" />\n      </div>\n    );\n\n    const minLabeledPreciseHandle = (\n      <div\n        aria-disabled={this.disabled}\n        aria-label={this.minLabel}\n        aria-orientation=\"horizontal\"\n        aria-valuemax={this.max}\n        aria-valuemin={this.min}\n        aria-valuenow={this.minValue}\n        class={{\n          thumb: true,\n          \"thumb--minValue\": true,\n          \"thumb--active\": this.dragProp === \"minValue\",\n          \"thumb--precise\": true,\n        }}\n        onBlur={() => (this.activeProp = null)}\n        onFocus={() => (this.activeProp = \"minValue\")}\n        onPointerDown={(event) => this.pointerDownDragStart(event, \"minValue\")}\n        role=\"slider\"\n        style={{ left: leftThumbOffset }}\n        tabIndex={0}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={(el) => (this.minHandle = el as HTMLDivElement)}\n      >\n        <div class=\"handle-extension\" />\n        <div class=\"handle\" />\n        <span aria-hidden=\"true\" class={handleLabelMinValueClasses}>\n          {displayedMinValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelMinValueClasses} static`}>\n          {displayedMinValue}\n        </span>\n        <span aria-hidden=\"true\" class={`${handleLabelMinValueClasses} transformed`}>\n          {displayedMinValue}\n        </span>\n      </div>\n    );\n\n    return (\n      <Host id={id} onTouchStart={this.handleTouchStart}>\n        <div\n          aria-label={getLabelText(this)}\n          class={{\n            [\"container\"]: true,\n            [\"container--range\"]: valueIsRange,\n            [`scale--${this.scale}`]: true,\n          }}\n        >\n          {this.renderGraph()}\n          <div\n            class=\"track\"\n            // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n            ref={this.storeTrackRef}\n          >\n            <div\n              class=\"track__range\"\n              onPointerDown={(event) => this.pointerDownDragStart(event, \"minMaxValue\")}\n              style={{\n                left: `${mirror ? 100 - maxInterval : minInterval}%`,\n                right: `${mirror ? minInterval : 100 - maxInterval}%`,\n              }}\n            />\n            <div class=\"ticks\">\n              {this.tickValues.map((tick) => {\n                const tickOffset = `${this.getUnitInterval(tick) * 100}%`;\n                let activeTicks = tick >= min && tick <= value;\n                if (useMinValue) {\n                  activeTicks = tick >= this.minValue && tick <= this.maxValue;\n                }\n\n                return (\n                  <span\n                    class={{\n                      tick: true,\n                      \"tick--active\": activeTicks,\n                    }}\n                    style={{\n                      left: mirror ? \"\" : tickOffset,\n                      right: mirror ? tickOffset : \"\",\n                    }}\n                  >\n                    {this.renderTickLabel(tick)}\n                  </span>\n                );\n              })}\n            </div>\n          </div>\n          <div class=\"thumb-container\">\n            {!this.precise && !this.labelHandles && valueIsRange && minHandle}\n            {!this.hasHistogram &&\n              !this.precise &&\n              this.labelHandles &&\n              valueIsRange &&\n              minLabeledHandle}\n            {this.precise && !this.labelHandles && valueIsRange && minPreciseHandle}\n            {this.precise && this.labelHandles && valueIsRange && minLabeledPreciseHandle}\n            {this.hasHistogram &&\n              !this.precise &&\n              this.labelHandles &&\n              valueIsRange &&\n              minHistogramLabeledHandle}\n\n            {!this.precise && !this.labelHandles && handle}\n            {!this.hasHistogram && !this.precise && this.labelHandles && labeledHandle}\n            {!this.hasHistogram && this.precise && !this.labelHandles && preciseHandle}\n            {this.hasHistogram && this.precise && !this.labelHandles && histogramPreciseHandle}\n            {!this.hasHistogram && this.precise && this.labelHandles && labeledPreciseHandle}\n            {this.hasHistogram && !this.precise && this.labelHandles && histogramLabeledHandle}\n            {this.hasHistogram &&\n              this.precise &&\n              this.labelHandles &&\n              histogramLabeledPreciseHandle}\n            <HiddenFormInputSlot component={this} />\n          </div>\n        </div>\n      </Host>\n    );\n  }\n\n  private renderGraph(): VNode {\n    return this.histogram ? (\n      <calcite-graph\n        class=\"graph\"\n        colorStops={this.histogramStops}\n        data={this.histogram}\n        highlightMax={isRange(this.value) ? this.maxValue : this.value}\n        highlightMin={isRange(this.value) ? this.minValue : this.min}\n        max={this.max}\n        min={this.min}\n      />\n    ) : null;\n  }\n\n  private renderTickLabel(tick: number): VNode {\n    const valueIsRange = isRange(this.value);\n    const isMinTickLabel = tick === this.min;\n    const isMaxTickLabel = tick === this.max;\n    const displayedTickValue = this.determineGroupSeparator(tick);\n    const tickLabel = (\n      <span\n        class={{\n          tick__label: true,\n          [CSS.tickMin]: isMinTickLabel,\n          [CSS.tickMax]: isMaxTickLabel,\n        }}\n      >\n        {displayedTickValue}\n      </span>\n    );\n    if (this.labelTicks && !this.hasHistogram && !valueIsRange) {\n      return tickLabel;\n    }\n    if (\n      this.labelTicks &&\n      !this.hasHistogram &&\n      valueIsRange &&\n      !this.precise &&\n      !this.labelHandles\n    ) {\n      return tickLabel;\n    }\n    if (\n      this.labelTicks &&\n      !this.hasHistogram &&\n      valueIsRange &&\n      !this.precise &&\n      this.labelHandles\n    ) {\n      return tickLabel;\n    }\n    if (\n      this.labelTicks &&\n      !this.hasHistogram &&\n      valueIsRange &&\n      this.precise &&\n      (isMinTickLabel || isMaxTickLabel)\n    ) {\n      return tickLabel;\n    }\n    if (this.labelTicks && this.hasHistogram && !this.precise && !this.labelHandles) {\n      return tickLabel;\n    }\n    if (\n      this.labelTicks &&\n      this.hasHistogram &&\n      this.precise &&\n      !this.labelHandles &&\n      (isMinTickLabel || isMaxTickLabel)\n    ) {\n      return tickLabel;\n    }\n    if (\n      this.labelTicks &&\n      this.hasHistogram &&\n      !this.precise &&\n      this.labelHandles &&\n      (isMinTickLabel || isMaxTickLabel)\n    ) {\n      return tickLabel;\n    }\n    if (\n      this.labelTicks &&\n      this.hasHistogram &&\n      this.precise &&\n      this.labelHandles &&\n      (isMinTickLabel || isMaxTickLabel)\n    ) {\n      return tickLabel;\n    }\n    return null;\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n\n  @Listen(\"keydown\")\n  keyDownHandler(event: KeyboardEvent): void {\n    const mirror = this.shouldMirror();\n    const { activeProp, max, min, pageStep, step } = this;\n    const value = this[activeProp];\n    const { key } = event;\n\n    if (isActivationKey(key)) {\n      event.preventDefault();\n      return;\n    }\n\n    let adjustment: number;\n\n    if (key === \"ArrowUp\" || key === \"ArrowRight\") {\n      const directionFactor = mirror && key === \"ArrowRight\" ? -1 : 1;\n      adjustment = value + step * directionFactor;\n    } else if (key === \"ArrowDown\" || key === \"ArrowLeft\") {\n      const directionFactor = mirror && key === \"ArrowLeft\" ? -1 : 1;\n      adjustment = value - step * directionFactor;\n    } else if (key === \"PageUp\") {\n      if (pageStep) {\n        adjustment = value + pageStep;\n      }\n    } else if (key === \"PageDown\") {\n      if (pageStep) {\n        adjustment = value - pageStep;\n      }\n    } else if (key === \"Home\") {\n      adjustment = min;\n    } else if (key === \"End\") {\n      adjustment = max;\n    }\n    if (isNaN(adjustment)) {\n      return;\n    }\n    event.preventDefault();\n    const fixedDecimalAdjustment = Number(adjustment.toFixed(decimalPlaces(step)));\n    this.setValue({\n      [activeProp as SetValueProperty]: this.clamp(fixedDecimalAdjustment, activeProp),\n    });\n  }\n\n  @Listen(\"pointerdown\")\n  pointerDownHandler(event: PointerEvent): void {\n    if (this.disabled || !isPrimaryPointerButton(event)) {\n      return;\n    }\n\n    const x = event.clientX || event.pageX;\n    const position = this.translate(x);\n    let prop: ActiveSliderProperty = \"value\";\n    if (isRange(this.value)) {\n      const inRange = position >= this.minValue && position <= this.maxValue;\n      if (inRange && this.lastDragProp === \"minMaxValue\") {\n        prop = \"minMaxValue\";\n      } else {\n        const closerToMax = Math.abs(this.maxValue - position) < Math.abs(this.minValue - position);\n        prop = closerToMax || position > this.maxValue ? \"maxValue\" : \"minValue\";\n      }\n    }\n    this.lastDragPropValue = this[prop];\n    this.dragStart(prop);\n    const isThumbActive = this.el.shadowRoot.querySelector(\".thumb:active\");\n    if (!isThumbActive) {\n      this.setValue({ [prop as SetValueProperty]: this.clamp(position, prop) });\n    }\n    this.focusActiveHandle(x);\n  }\n\n  handleTouchStart(event: TouchEvent): void {\n    // needed to prevent extra click at the end of a handle drag\n    event.preventDefault();\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  //--------------------------------------------------------------------------\n  /**\n   * Fires on all updates to the component.\n   *\n   * **Note:** Will be fired frequently during drag. If you are performing any\n   * expensive operations consider using a debounce or throttle to avoid\n   * locking up the main thread.\n   */\n  @Event({ cancelable: false }) calciteSliderInput: EventEmitter<void>;\n\n  /**\n   * Fires when the thumb is released on the component.\n   *\n   * **Note:** If you need to constantly listen to the drag event,\n   * use `calciteSliderInput` instead.\n   */\n  @Event({ cancelable: false }) calciteSliderChange: EventEmitter<void>;\n\n  //--------------------------------------------------------------------------\n  //\n  //  Public Methods\n  //\n  //--------------------------------------------------------------------------\n\n  /** Sets focus on the component. */\n  @Method()\n  async setFocus(): Promise<void> {\n    await componentFocusable(this);\n\n    const handle = this.minHandle ? this.minHandle : this.maxHandle;\n    handle?.focus();\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteSliderElement;\n\n  labelEl: HTMLCalciteLabelElement;\n\n  formEl: HTMLFormElement;\n\n  defaultValue: Slider[\"value\"];\n\n  private activeProp: ActiveSliderProperty = \"value\";\n\n  private guid = `calcite-slider-${guid()}`;\n\n  private dragProp: ActiveSliderProperty;\n\n  private lastDragProp: ActiveSliderProperty;\n\n  private lastDragPropValue: number;\n\n  private minHandle: HTMLDivElement;\n\n  private maxHandle: HTMLDivElement;\n\n  private trackEl: HTMLDivElement;\n\n  @State() effectiveLocale = \"\";\n\n  @State() private minMaxValueRange: number = null;\n\n  @State() private minValueDragRange: number = null;\n\n  @State() private maxValueDragRange: number = null;\n\n  @State() private tickValues: number[] = [];\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n\n  setValueFromMinMax(): void {\n    const { minValue, maxValue } = this;\n\n    if (typeof minValue === \"number\" && typeof maxValue === \"number\") {\n      this.value = [minValue, maxValue];\n    }\n  }\n\n  setMinMaxFromValue(): void {\n    const { value } = this;\n\n    if (isRange(value)) {\n      this.minValue = value[0];\n      this.maxValue = value[1];\n    }\n  }\n\n  onLabelClick(): void {\n    this.setFocus();\n  }\n\n  private shouldMirror(): boolean {\n    return this.mirrored && !this.hasHistogram;\n  }\n\n  private shouldUseMinValue(): boolean {\n    if (!isRange(this.value)) {\n      return false;\n    }\n    return (\n      (this.hasHistogram && this.maxValue === 0) || (!this.hasHistogram && this.minValue === 0)\n    );\n  }\n\n  private getTickDensity(): number {\n    const density = (this.max - this.min) / this.ticks / maxTickElementThreshold;\n\n    return density < 1 ? 1 : density;\n  }\n\n  private generateTickValues(): number[] {\n    const tickInterval = this.ticks ?? 0;\n\n    if (tickInterval <= 0) {\n      return [];\n    }\n\n    const ticks: number[] = [this.min];\n    const density = this.getTickDensity();\n    const tickOffset = tickInterval * density;\n    let current = this.min;\n\n    while (current < this.max) {\n      current += tickOffset;\n      ticks.push(Math.min(current, this.max));\n    }\n\n    if (!ticks.includes(this.max)) {\n      ticks.push(this.max);\n    }\n\n    return ticks;\n  }\n\n  private pointerDownDragStart(event: PointerEvent, prop: ActiveSliderProperty): void {\n    if (!isPrimaryPointerButton(event)) {\n      return;\n    }\n\n    this.dragStart(prop);\n  }\n\n  private dragStart(prop: ActiveSliderProperty): void {\n    this.dragProp = prop;\n    this.lastDragProp = this.dragProp;\n    this.activeProp = prop;\n    window.addEventListener(\"pointermove\", this.dragUpdate);\n    window.addEventListener(\"pointerup\", this.pointerUpDragEnd);\n    window.addEventListener(\"pointercancel\", this.dragEnd);\n  }\n\n  private focusActiveHandle(valueX: number): void {\n    switch (this.dragProp) {\n      case \"minValue\":\n        this.minHandle.focus();\n        break;\n      case \"maxValue\":\n      case \"value\":\n        this.maxHandle.focus();\n        break;\n      case \"minMaxValue\":\n        this.getClosestHandle(valueX).focus();\n        break;\n      default:\n        break;\n    }\n  }\n\n  private dragUpdate = (event: PointerEvent): void => {\n    if (this.disabled) {\n      return;\n    }\n\n    event.preventDefault();\n    if (this.dragProp) {\n      const value = this.translate(event.clientX || event.pageX);\n      if (isRange(this.value) && this.dragProp === \"minMaxValue\") {\n        if (this.minValueDragRange && this.maxValueDragRange && this.minMaxValueRange) {\n          const newMinValue = value - this.minValueDragRange;\n          const newMaxValue = value + this.maxValueDragRange;\n          if (\n            newMaxValue <= this.max &&\n            newMinValue >= this.min &&\n            newMaxValue - newMinValue === this.minMaxValueRange\n          ) {\n            this.setValue({\n              minValue: this.clamp(newMinValue, \"minValue\"),\n              maxValue: this.clamp(newMaxValue, \"maxValue\"),\n            });\n          }\n        } else {\n          this.minValueDragRange = value - this.minValue;\n          this.maxValueDragRange = this.maxValue - value;\n          this.minMaxValueRange = this.maxValue - this.minValue;\n        }\n      } else {\n        this.setValue({ [this.dragProp as SetValueProperty]: this.clamp(value, this.dragProp) });\n      }\n    }\n  };\n\n  private emitInput(): void {\n    this.calciteSliderInput.emit();\n  }\n\n  private emitChange(): void {\n    this.calciteSliderChange.emit();\n  }\n\n  private pointerUpDragEnd = (event: PointerEvent): void => {\n    if (this.disabled || !isPrimaryPointerButton(event)) {\n      return;\n    }\n\n    this.dragEnd(event);\n  };\n\n  private dragEnd = (event: PointerEvent): void => {\n    if (this.disabled) {\n      return;\n    }\n\n    this.removeDragListeners();\n    this.focusActiveHandle(event.clientX);\n    if (this.lastDragPropValue != this[this.dragProp]) {\n      this.emitChange();\n    }\n    this.dragProp = null;\n    this.lastDragPropValue = null;\n    this.minValueDragRange = null;\n    this.maxValueDragRange = null;\n    this.minMaxValueRange = null;\n  };\n\n  private removeDragListeners() {\n    window.removeEventListener(\"pointermove\", this.dragUpdate);\n    window.removeEventListener(\"pointerup\", this.pointerUpDragEnd);\n    window.removeEventListener(\"pointercancel\", this.dragEnd);\n  }\n\n  /**\n   * Set prop value(s) if changed at the component level\n   *\n   * @param {object} values - a set of key/value pairs delineating what properties in the component to update\n   */\n  private setValue(\n    values: Partial<{\n      [Property in keyof Pick<Slider, \"maxValue\" | \"minValue\" | \"value\">]: number;\n    }>\n  ): void {\n    let valueChanged: boolean;\n\n    Object.keys(values).forEach((propName) => {\n      const newValue = values[propName];\n\n      if (!valueChanged) {\n        const oldValue = this[propName];\n        valueChanged = oldValue !== newValue;\n      }\n\n      this[propName] = newValue;\n    });\n\n    if (!valueChanged) {\n      return;\n    }\n\n    const dragging = this.dragProp;\n    if (!dragging) {\n      this.emitChange();\n    }\n    this.emitInput();\n  }\n\n  /**\n   * Set the reference of the track Element\n   *\n   * @internal\n   * @param node\n   */\n  private storeTrackRef = (node: HTMLDivElement): void => {\n    this.trackEl = node;\n  };\n\n  /**\n   * If number is outside range, constrain to min or max\n   *\n   * @param value\n   * @param prop\n   * @internal\n   */\n  private clamp(value: number, prop?: ActiveSliderProperty): number {\n    value = clamp(value, this.min, this.max);\n\n    // ensure that maxValue and minValue don't swap positions\n    if (prop === \"maxValue\") {\n      value = Math.max(value, this.minValue);\n    }\n    if (prop === \"minValue\") {\n      value = Math.min(value, this.maxValue);\n    }\n    return value;\n  }\n\n  /**\n   * Translate a pixel position to value along the range\n   *\n   * @param x\n   * @internal\n   */\n  private translate(x: number): number {\n    const range = this.max - this.min;\n    const { left, width } = this.trackEl.getBoundingClientRect();\n    const percent = (x - left) / width;\n    const mirror = this.shouldMirror();\n    const clampedValue = this.clamp(this.min + range * (mirror ? 1 - percent : percent));\n    let value = Number(clampedValue.toFixed(decimalPlaces(this.step)));\n    if (this.snap && this.step) {\n      value = this.getClosestStep(value);\n    }\n    return value;\n  }\n\n  /**\n   * Get closest allowed value along stepped values\n   *\n   * @param num\n   * @internal\n   */\n  private getClosestStep(num: number): number {\n    num = Number(this.clamp(num).toFixed(decimalPlaces(this.step)));\n    if (this.step) {\n      const step = Math.round(num / this.step) * this.step;\n      num = Number(this.clamp(step).toFixed(decimalPlaces(this.step)));\n    }\n    return num;\n  }\n\n  private getClosestHandle(valueX: number): HTMLDivElement {\n    return this.getDistanceX(this.maxHandle, valueX) > this.getDistanceX(this.minHandle, valueX)\n      ? this.minHandle\n      : this.maxHandle;\n  }\n\n  private getDistanceX(el: HTMLDivElement, valueX: number): number {\n    return Math.abs(el.getBoundingClientRect().left - valueX);\n  }\n\n  private getFontSizeForElement(element: HTMLElement): number {\n    return Number(window.getComputedStyle(element).getPropertyValue(\"font-size\").match(/\\d+/)[0]);\n  }\n\n  /**\n   * Get position of value along range as fractional value\n   *\n   * @param num\n   * @return {number} number in the unit interval [0,1]\n   * @internal\n   */\n  private getUnitInterval(num: number): number {\n    num = this.clamp(num);\n    const range = this.max - this.min;\n    return (num - this.min) / range;\n  }\n\n  private adjustHostObscuredHandleLabel(name: \"value\" | \"minValue\"): void {\n    const label: HTMLSpanElement = this.el.shadowRoot.querySelector(`.handle__label--${name}`);\n    const labelStatic: HTMLSpanElement = this.el.shadowRoot.querySelector(\n      `.handle__label--${name}.static`\n    );\n    const labelTransformed: HTMLSpanElement = this.el.shadowRoot.querySelector(\n      `.handle__label--${name}.transformed`\n    );\n    const labelStaticBounds = labelStatic.getBoundingClientRect();\n    const labelStaticOffset = this.getHostOffset(labelStaticBounds.left, labelStaticBounds.right);\n    label.style.transform = `translateX(${labelStaticOffset}px)`;\n    labelTransformed.style.transform = `translateX(${labelStaticOffset}px)`;\n  }\n\n  private hyphenateCollidingRangeHandleLabels(): void {\n    const { shadowRoot } = this.el;\n\n    const mirror = this.shouldMirror();\n    const leftModifier = mirror ? \"value\" : \"minValue\";\n    const rightModifier = mirror ? \"minValue\" : \"value\";\n\n    const leftValueLabel: HTMLSpanElement = shadowRoot.querySelector(\n      `.handle__label--${leftModifier}`\n    );\n    const leftValueLabelStatic: HTMLSpanElement = shadowRoot.querySelector(\n      `.handle__label--${leftModifier}.static`\n    );\n    const leftValueLabelTransformed: HTMLSpanElement = shadowRoot.querySelector(\n      `.handle__label--${leftModifier}.transformed`\n    );\n    const leftValueLabelStaticHostOffset = this.getHostOffset(\n      leftValueLabelStatic.getBoundingClientRect().left,\n      leftValueLabelStatic.getBoundingClientRect().right\n    );\n\n    const rightValueLabel: HTMLSpanElement = shadowRoot.querySelector(\n      `.handle__label--${rightModifier}`\n    );\n    const rightValueLabelStatic: HTMLSpanElement = shadowRoot.querySelector(\n      `.handle__label--${rightModifier}.static`\n    );\n    const rightValueLabelTransformed: HTMLSpanElement = shadowRoot.querySelector(\n      `.handle__label--${rightModifier}.transformed`\n    );\n    const rightValueLabelStaticHostOffset = this.getHostOffset(\n      rightValueLabelStatic.getBoundingClientRect().left,\n      rightValueLabelStatic.getBoundingClientRect().right\n    );\n\n    const labelFontSize = this.getFontSizeForElement(leftValueLabel);\n    const labelTransformedOverlap = this.getRangeLabelOverlap(\n      leftValueLabelTransformed,\n      rightValueLabelTransformed\n    );\n\n    const hyphenLabel = leftValueLabel;\n    const labelOffset = labelFontSize / 2;\n\n    if (labelTransformedOverlap > 0) {\n      hyphenLabel.classList.add(\"hyphen\", \"hyphen--wrap\");\n      if (rightValueLabelStaticHostOffset === 0 && leftValueLabelStaticHostOffset === 0) {\n        // Neither handle overlaps the host boundary\n        let leftValueLabelTranslate = labelTransformedOverlap / 2 - labelOffset;\n        leftValueLabelTranslate =\n          Math.sign(leftValueLabelTranslate) === -1\n            ? Math.abs(leftValueLabelTranslate)\n            : -leftValueLabelTranslate;\n\n        const leftValueLabelTransformedHostOffset = this.getHostOffset(\n          leftValueLabelTransformed.getBoundingClientRect().left +\n            leftValueLabelTranslate -\n            labelOffset,\n          leftValueLabelTransformed.getBoundingClientRect().right +\n            leftValueLabelTranslate -\n            labelOffset\n        );\n\n        let rightValueLabelTranslate = labelTransformedOverlap / 2;\n        const rightValueLabelTransformedHostOffset = this.getHostOffset(\n          rightValueLabelTransformed.getBoundingClientRect().left + rightValueLabelTranslate,\n          rightValueLabelTransformed.getBoundingClientRect().right + rightValueLabelTranslate\n        );\n\n        if (leftValueLabelTransformedHostOffset !== 0) {\n          leftValueLabelTranslate += leftValueLabelTransformedHostOffset;\n          rightValueLabelTranslate += leftValueLabelTransformedHostOffset;\n        }\n\n        if (rightValueLabelTransformedHostOffset !== 0) {\n          leftValueLabelTranslate += rightValueLabelTransformedHostOffset;\n          rightValueLabelTranslate += rightValueLabelTransformedHostOffset;\n        }\n\n        leftValueLabel.style.transform = `translateX(${leftValueLabelTranslate}px)`;\n        leftValueLabelTransformed.style.transform = `translateX(${\n          leftValueLabelTranslate - labelOffset\n        }px)`;\n        rightValueLabel.style.transform = `translateX(${rightValueLabelTranslate}px)`;\n        rightValueLabelTransformed.style.transform = `translateX(${rightValueLabelTranslate}px)`;\n      } else if (leftValueLabelStaticHostOffset > 0 || rightValueLabelStaticHostOffset > 0) {\n        // labels overlap host boundary on the left side\n        leftValueLabel.style.transform = `translateX(${\n          leftValueLabelStaticHostOffset + labelOffset\n        }px)`;\n        rightValueLabel.style.transform = `translateX(${\n          labelTransformedOverlap + rightValueLabelStaticHostOffset\n        }px)`;\n        rightValueLabelTransformed.style.transform = `translateX(${\n          labelTransformedOverlap + rightValueLabelStaticHostOffset\n        }px)`;\n      } else if (leftValueLabelStaticHostOffset < 0 || rightValueLabelStaticHostOffset < 0) {\n        // labels overlap host boundary on the right side\n        let leftValueLabelTranslate =\n          Math.abs(leftValueLabelStaticHostOffset) + labelTransformedOverlap - labelOffset;\n        leftValueLabelTranslate =\n          Math.sign(leftValueLabelTranslate) === -1\n            ? Math.abs(leftValueLabelTranslate)\n            : -leftValueLabelTranslate;\n        leftValueLabel.style.transform = `translateX(${leftValueLabelTranslate}px)`;\n        leftValueLabelTransformed.style.transform = `translateX(${\n          leftValueLabelTranslate - labelOffset\n        }px)`;\n      }\n    } else {\n      hyphenLabel.classList.remove(\"hyphen\", \"hyphen--wrap\");\n      leftValueLabel.style.transform = `translateX(${leftValueLabelStaticHostOffset}px)`;\n      leftValueLabelTransformed.style.transform = `translateX(${leftValueLabelStaticHostOffset}px)`;\n      rightValueLabel.style.transform = `translateX(${rightValueLabelStaticHostOffset}px)`;\n      rightValueLabelTransformed.style.transform = `translateX(${rightValueLabelStaticHostOffset}px)`;\n    }\n  }\n\n  /**\n   * Hides bounding tick labels that are obscured by either handle.\n   */\n  private hideObscuredBoundingTickLabels(): void {\n    const valueIsRange = isRange(this.value);\n    if (!this.hasHistogram && !valueIsRange && !this.labelHandles && !this.precise) {\n      return;\n    }\n    if (!this.hasHistogram && !valueIsRange && this.labelHandles && !this.precise) {\n      return;\n    }\n    if (!this.hasHistogram && !valueIsRange && !this.labelHandles && this.precise) {\n      return;\n    }\n    if (!this.hasHistogram && !valueIsRange && this.labelHandles && this.precise) {\n      return;\n    }\n    if (!this.hasHistogram && valueIsRange && !this.precise) {\n      return;\n    }\n    if (this.hasHistogram && !this.precise && !this.labelHandles) {\n      return;\n    }\n\n    const minHandle: HTMLDivElement | null = this.el.shadowRoot.querySelector(\".thumb--minValue\");\n    const maxHandle: HTMLDivElement | null = this.el.shadowRoot.querySelector(\".thumb--value\");\n\n    const minTickLabel: HTMLSpanElement | null =\n      this.el.shadowRoot.querySelector(\".tick__label--min\");\n    const maxTickLabel: HTMLSpanElement | null =\n      this.el.shadowRoot.querySelector(\".tick__label--max\");\n\n    if (!minHandle && maxHandle && minTickLabel && maxTickLabel) {\n      minTickLabel.style.opacity = this.isMinTickLabelObscured(minTickLabel, maxHandle) ? \"0\" : \"1\";\n      maxTickLabel.style.opacity = this.isMaxTickLabelObscured(maxTickLabel, maxHandle) ? \"0\" : \"1\";\n    }\n\n    if (minHandle && maxHandle && minTickLabel && maxTickLabel) {\n      minTickLabel.style.opacity =\n        this.isMinTickLabelObscured(minTickLabel, minHandle) ||\n        this.isMinTickLabelObscured(minTickLabel, maxHandle)\n          ? \"0\"\n          : \"1\";\n      maxTickLabel.style.opacity =\n        this.isMaxTickLabelObscured(maxTickLabel, minHandle) ||\n        (this.isMaxTickLabelObscured(maxTickLabel, maxHandle) && this.hasHistogram)\n          ? \"0\"\n          : \"1\";\n    }\n  }\n\n  /**\n   * Returns an integer representing the number of pixels to offset on the left or right side based on desired position behavior.\n   *\n   * @param leftBounds\n   * @param rightBounds\n   * @internal\n   */\n  private getHostOffset(leftBounds: number, rightBounds: number): number {\n    const hostBounds = this.el.getBoundingClientRect();\n    const buffer = 7;\n\n    if (leftBounds + buffer < hostBounds.left) {\n      return hostBounds.left - leftBounds - buffer;\n    }\n\n    if (rightBounds - buffer > hostBounds.right) {\n      return -(rightBounds - hostBounds.right) + buffer;\n    }\n\n    return 0;\n  }\n\n  /**\n   * Returns an integer representing the number of pixels that the two given span elements are overlapping, taking into account\n   * a space in between the two spans equal to the font-size set on them to account for the space needed to render a hyphen.\n   *\n   * @param leftLabel\n   * @param rightLabel\n   */\n  private getRangeLabelOverlap(leftLabel: HTMLSpanElement, rightLabel: HTMLSpanElement): number {\n    const leftLabelBounds = leftLabel.getBoundingClientRect();\n    const rightLabelBounds = rightLabel.getBoundingClientRect();\n    const leftLabelFontSize = this.getFontSizeForElement(leftLabel);\n    const rangeLabelOverlap = leftLabelBounds.right + leftLabelFontSize - rightLabelBounds.left;\n\n    return Math.max(rangeLabelOverlap, 0);\n  }\n\n  /**\n   * Returns a boolean value representing if the minLabel span element is obscured (being overlapped) by the given handle div element.\n   *\n   * @param minLabel\n   * @param handle\n   */\n  private isMinTickLabelObscured(minLabel: HTMLSpanElement, handle: HTMLDivElement): boolean {\n    const minLabelBounds = minLabel.getBoundingClientRect();\n    const handleBounds = handle.getBoundingClientRect();\n    return intersects(minLabelBounds, handleBounds);\n  }\n\n  /**\n   * Returns a boolean value representing if the maxLabel span element is obscured (being overlapped) by the given handle div element.\n   *\n   * @param maxLabel\n   * @param handle\n   */\n  private isMaxTickLabelObscured(maxLabel: HTMLSpanElement, handle: HTMLDivElement): boolean {\n    const maxLabelBounds = maxLabel.getBoundingClientRect();\n    const handleBounds = handle.getBoundingClientRect();\n    return intersects(maxLabelBounds, handleBounds);\n  }\n\n  /**\n   * Returns a string representing the localized label value based if the groupSeparator prop is parsed.\n   *\n   * @param value\n   */\n  private determineGroupSeparator = (value: number): string => {\n    if (typeof value === \"number\") {\n      numberStringFormatter.numberFormatOptions = {\n        locale: this.effectiveLocale,\n        numberingSystem: this.numberingSystem,\n        useGrouping: this.groupSeparator,\n      };\n\n      return numberStringFormatter.localize(value.toString());\n    }\n  };\n}\n"],"mappings":"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"}