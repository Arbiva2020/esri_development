{"version":3,"names":["ComboboxItem","ComboboxItemGroup","ComboboxChildSelector","CSS","chipInvisible","selectionDisplayFit","selectionDisplaySingle","listContainer","getAncestors","element","parent","parentElement","closest","grandparent","filter","el","getItemAncestors","item","ancestors","nodeName","getItemChildren","nodeListToArray","querySelectorAll","hasActiveChildren","node","items","selected","length","getDepth","result","document","evaluate","XPathResult","UNORDERED_NODE_SNAPSHOT_TYPE","snapshotLength","isSingleLike","selectionMode","includes","button","XButton","disabled","key","label","onClick","ref","scale","h","class","tabIndex","type","icon","getIconScale","calciteSize48","comboboxCss","isGroup","tagName","itemUidPrefix","chipUidPrefix","labelUidPrefix","listboxUidPrefix","inputUidPrefix","Combobox","this","placement","defaultMenuPlacement","internalValueChangeFlag","textInput","mutationObserver","createObserver","updateItems","resizeObserver","setMaxScrollerHeight","refreshSelectionDisplay","guid","inputHeight","ignoreSelectedEventsFlag","openTransitionProp","setFilteredPlacements","flipPlacements","filteredFlipPlacements","filterComputedPlacements","getValue","selectedItems","map","value","toString","onLabelClick","setFocus","keyDownHandler","event","activeChipIndex","activeItemIndex","allowCustomValues","text","addCustomChip","preventDefault","open","clearInputValue","filterItems","updateActiveItemIndex","previousChip","nextChip","shiftActiveItemIndex","comboboxInViewport","scrollIntoView","ensureRecentSelectedItemIsActive","scrollToActiveItem","filteredItems","clearDisabled","clearValue","toggleSelection","removeActiveChip","defaultPrevented","submitForm","isMulti","removeLastChip","toggleCloseEnd","removeEventListener","toggleOpenEnd","async","listContainerEl","referenceEl","reposition","maxScrollerHeight","getMaxScrollerHeight","style","maxHeight","minWidth","clientWidth","calciteChipCloseHandler","comboboxItem","selection","find","calciteComboboxChipClose","emit","clickHandler","composedPath","some","classList","contains","XButtonCSS","componentLoaded","allSelectedIndicatorChipEl","chipContainerEl","selectionDisplay","placeholder","selectedIndicatorChipEl","chipContainerElGap","parseInt","getComputedStyle","gap","replace","chipContainerElWidth","getElementWidth","fontSize","fontFamily","inputTextWidth","getTextWidth","inputWidth","allSelectedIndicatorChipElWidth","selectedIndicatorChipElWidth","largestSelectedIndicatorChipWidth","Math","max","setCompactSelectionDisplay","chipEls","Array","from","shadowRoot","chipEl","closable","availableHorizontalChipElSpace","round","selectedHiddenChipsCount","refreshChipDisplay","setVisibleAndHiddenChips","setFloatingEl","floatingEl","connectFloatingUI","setContainerEl","observe","transitionEl","setChipContainerEl","setReferenceEl","setAllSelectedIndicatorChipEl","setSelectedIndicatorChipEl","inputHandler","target","filteredData","textLabel","debounce","data","itemsAndGroups","getItemsAndGroups","forEach","hidden","ancestor","getFilteredItems","calciteComboboxFilterChange","internalComboboxChangeEvent","calciteComboboxChange","emitComboboxChange","getSelectedItems","match","sort","a","b","aIdx","indexOf","bIdx","getItems","groupItems","getGroupItems","getData","needsIcon","getNeedsIcon","groupItem","index","afterEmptyGroup","nextGroupItem","children","activeItem","height","calculateSingleItemHeight","offsetHeight","scrollTop","offsetTop","comboboxFocusHandler","focus","openHandler","onToggleOpenCloseComponent","handleDisabledChange","maxItemsHandler","overlayPositioningHandler","handlePropsChange","valueHandler","isArray","onMessagesChange","flipPlacementsHandler","selectedItemsHandler","documentClickHandler","isPrimaryPointerButton","trim","calciteComboboxItemChangeHandler","newIndex","delayed","overlayPositioning","componentFocusable","connectedCallback","connectInteractive","connectLocalized","connectMessages","connectLabel","connectForm","childList","subtree","componentWillLoad","setUpLoadableComponent","setUpMessages","componentDidLoad","afterConnectDefaultValueSet","setComponentLoaded","componentDidRender","updateHostInteraction","componentDidUpdate","disconnectedCallback","disconnect","disconnectInteractive","disconnectLabel","disconnectForm","disconnectFloatingUI","disconnectLocalized","disconnectMessages","textHandler","effectiveLocaleChange","updateMessages","effectiveLocale","resetText","bounding","getBoundingClientRect","top","left","right","window","innerWidth","documentElement","bottom","innerHeight","clientHeight","onBeforeOpen","calciteComboboxBeforeOpen","onOpen","calciteComboboxOpen","onBeforeClose","calciteComboboxBeforeClose","onClose","calciteComboboxClose","targetIndex","hideChip","add","showChip","remove","chipElWidth","newCompactBreakpoint","maxCompactBreakpoint","compactSelectionDisplay","newSelectedVisibleChipsCount","selectedVisibleChipsCount","newSelectedHiddenChipsCount","maxItems","itemsToProcess","child","updateAncestors","filterDisabled","existingItem","createElement","appendChild","active","focusChip","last","chip","querySelector","delta","activeDescendant","i","isAllSelected","renderChips","messages","chipClasses","reverse","pathLabel","join","iconFlipRtl","id","messageOverrides","dismissLabel","removeTag","onCalciteChipClose","title","renderAllSelectedIndicatorChip","allSelected","renderAllSelectedIndicatorChipCompact","all","renderSelectedIndicatorChip","selectedItemsCount","renderSelectedIndicatorChipCompact","renderInput","single","selectedItem","showLabel","getLabelText","input","placeholderIcon","onFocus","onInput","renderListBoxOptions","toAriaBoolean","role","tabindex","renderFloatingUIContainer","classes","FloatingCSS","animation","animationActive","list","renderIconStart","placeholderIconFlipRtl","selectedIcon","singleSelectionMode","iconAtStart","flipRtl","renderIconEnd","render","allSelectionDisplay","singleSelectionDisplay","fitSelectionDisplay","isClearable","Host","wrapper","onKeyDown","htmlFor","clear","HiddenFormInputSlot","component","validationMessage","Validation","validationIcon","message","status","iconActive","iconIndent","custom","dot","textContainer","comboboxItemCss","itemClickHandler","toggleSelected","selectedWatchHandler","calciteComboboxItemChange","connectConditionalSlotComponent","disconnectConditionalSlotComponent","isSinglePersistSelect","renderIcon","iconPath","renderSelectIndicator","showDot","renderChildren","getSlotted","isSingleSelect","defaultIcon","depth","comboboxItemGroupCss"],"sources":["src/components/combobox/resources.ts","src/components/combobox/utils.ts","src/components/functional/XButton.tsx","../calcite-design-tokens/dist/es6/core.js","src/components/combobox/combobox.scss?tag=calcite-combobox&encapsulation=shadow","src/components/combobox/combobox.tsx","src/components/combobox-item/resources.ts","src/components/combobox-item/combobox-item.scss?tag=calcite-combobox-item&encapsulation=shadow","src/components/combobox-item/combobox-item.tsx","src/components/combobox-item-group/resources.ts","src/components/combobox-item-group/combobox-item-group.scss?tag=calcite-combobox-item-group&encapsulation=shadow","src/components/combobox-item-group/combobox-item-group.tsx"],"sourcesContent":["export const ComboboxItem = \"CALCITE-COMBOBOX-ITEM\";\nexport const ComboboxItemGroup = \"CALCITE-COMBOBOX-ITEM-GROUP\";\nexport const ComboboxChildSelector = `${ComboboxItem}, ${ComboboxItemGroup}`;\n\nexport const CSS = {\n  chipInvisible: \"chip--invisible\",\n  selectionDisplayFit: \"selection-display-fit\",\n  selectionDisplaySingle: \"selection-display-single\",\n  listContainer: \"list-container\",\n};\n","import { nodeListToArray } from \"../../utils/dom\";\nimport { ComboboxChildElement } from \"./interfaces\";\nimport { ComboboxChildSelector } from \"./resources\";\nimport { Build } from \"@stencil/core\";\nimport { Combobox } from \"./combobox\";\n\nexport function getAncestors(element: HTMLElement): ComboboxChildElement[] {\n  const parent: ComboboxChildElement = element.parentElement?.closest(ComboboxChildSelector);\n  const grandparent: ComboboxChildElement = parent?.parentElement?.closest(ComboboxChildSelector);\n  return [parent, grandparent].filter((el) => el);\n}\n\nexport function getItemAncestors(item: HTMLCalciteComboboxItemElement): HTMLCalciteComboboxItemElement[] {\n  return (\n    (item.ancestors?.filter((el) => el.nodeName === \"CALCITE-COMBOBOX-ITEM\") as HTMLCalciteComboboxItemElement[]) || []\n  );\n}\n\nexport function getItemChildren(item: HTMLCalciteComboboxItemElement): HTMLCalciteComboboxItemElement[] {\n  return nodeListToArray(item.querySelectorAll(\"calcite-combobox-item\"));\n}\n\nexport function hasActiveChildren(node: HTMLCalciteComboboxItemElement): boolean {\n  const items = nodeListToArray(node.querySelectorAll(\"calcite-combobox-item\"));\n  return items.filter((item) => item.selected).length > 0;\n}\n\nexport function getDepth(element: HTMLElement): number {\n  if (!Build.isBrowser) {\n    return 0;\n  }\n\n  const result = document.evaluate(\n    \"ancestor::calcite-combobox-item | ancestor::calcite-combobox-item-group\",\n    element,\n    null,\n    XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,\n    null\n  );\n\n  return result.snapshotLength;\n}\n\nexport function isSingleLike(selectionMode: Combobox[\"selectionMode\"]): boolean {\n  return selectionMode.includes(\"single\");\n}\n","import { FunctionalComponent, h } from \"@stencil/core\";\nimport { JSXAttributes, JSXBase } from \"@stencil/core/internal\";\nimport { Scale } from \"../interfaces\";\nimport { getIconScale } from \"../../utils/component\";\n\nexport interface XButtonOptions extends JSXAttributes {\n  disabled: boolean;\n  label: string;\n  scale: Scale;\n  onClick?: JSXBase.DOMAttributes<HTMLElement>[\"onClick\"];\n}\n\nexport const CSS = {\n  button: \"x-button\",\n};\n\nexport function XButton({\n  disabled,\n  key,\n  label,\n  onClick,\n  ref,\n  scale,\n}: XButtonOptions): FunctionalComponent {\n  return (\n    <button\n      aria-label={label}\n      class={CSS.button}\n      disabled={disabled}\n      key={key}\n      onClick={onClick}\n      tabIndex={-1}\n      type=\"button\"\n      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n      ref={ref}\n    >\n      <calcite-icon icon=\"x\" scale={getIconScale(scale)} />\n    </button>\n  );\n}\n","/**\n * Do not edit directly\n * Generated on Tue, 19 Dec 2023 06:48:46 GMT\n */\n\nexport const calciteColorNeutralBlk000 = \"#ffffff\";\nexport const calciteColorNeutralBlk005 = \"#f8f8f8\";\nexport const calciteColorNeutralBlk010 = \"#f3f3f3\";\nexport const calciteColorNeutralBlk020 = \"#eaeaea\";\nexport const calciteColorNeutralBlk030 = \"#dfdfdf\";\nexport const calciteColorNeutralBlk040 = \"#d4d4d4\";\nexport const calciteColorNeutralBlk050 = \"#cacaca\";\nexport const calciteColorNeutralBlk060 = \"#bfbfbf\";\nexport const calciteColorNeutralBlk070 = \"#b5b5b5\";\nexport const calciteColorNeutralBlk080 = \"#aaaaaa\";\nexport const calciteColorNeutralBlk090 = \"#9f9f9f\";\nexport const calciteColorNeutralBlk100 = \"#949494\";\nexport const calciteColorNeutralBlk110 = \"#8a8a8a\";\nexport const calciteColorNeutralBlk120 = \"#808080\";\nexport const calciteColorNeutralBlk130 = \"#757575\";\nexport const calciteColorNeutralBlk140 = \"#6a6a6a\";\nexport const calciteColorNeutralBlk150 = \"#606060\";\nexport const calciteColorNeutralBlk160 = \"#555555\";\nexport const calciteColorNeutralBlk170 = \"#4a4a4a\";\nexport const calciteColorNeutralBlk180 = \"#404040\";\nexport const calciteColorNeutralBlk190 = \"#353535\";\nexport const calciteColorNeutralBlk200 = \"#2b2b2b\";\nexport const calciteColorNeutralBlk210 = \"#202020\";\nexport const calciteColorNeutralBlk220 = \"#151515\";\nexport const calciteColorNeutralBlk230 = \"#0b0b0b\";\nexport const calciteColorNeutralBlk235 = \"#060606\";\nexport const calciteColorNeutralBlk240 = \"#000000\";\nexport const calciteColorHighSaturationBlueHBb010 = \"#c7eaff\";\nexport const calciteColorHighSaturationBlueHBb020 = \"#9fd4f3\";\nexport const calciteColorHighSaturationBlueHBb030 = \"#77bde7\";\nexport const calciteColorHighSaturationBlueHBb040 = \"#50a7da\";\nexport const calciteColorHighSaturationBlueHBb050 = \"#2890ce\";\nexport const calciteColorHighSaturationBlueHBb060 = \"#007ac2\";\nexport const calciteColorHighSaturationBlueHBb070 = \"#00619b\";\nexport const calciteColorHighSaturationBlueHBb080 = \"#004874\";\nexport const calciteColorHighSaturationBlueHBb090 = \"#00304d\";\nexport const calciteColorHighSaturationBlueHBb100 = \"#001726\";\nexport const calciteColorHighSaturationGreenBlueHGb010 = \"#cef5f4\";\nexport const calciteColorHighSaturationGreenBlueHGb020 = \"#afedec\";\nexport const calciteColorHighSaturationGreenBlueHGb030 = \"#8fe6e5\";\nexport const calciteColorHighSaturationGreenBlueHGb040 = \"#5ae0de\";\nexport const calciteColorHighSaturationGreenBlueHGb050 = \"#28cecb\";\nexport const calciteColorHighSaturationGreenBlueHGb060 = \"#00bab5\";\nexport const calciteColorHighSaturationGreenBlueHGb070 = \"#009b98\";\nexport const calciteColorHighSaturationGreenBlueHGb080 = \"#007472\";\nexport const calciteColorHighSaturationGreenBlueHGb090 = \"#004d4c\";\nexport const calciteColorHighSaturationGreenBlueHGb100 = \"#002625\";\nexport const calciteColorHighSaturationGreenHGg010 = \"#bdf2c4\";\nexport const calciteColorHighSaturationGreenHGg020 = \"#a2e4ab\";\nexport const calciteColorHighSaturationGreenHGg030 = \"#87d692\";\nexport const calciteColorHighSaturationGreenHGg040 = \"#6bc878\";\nexport const calciteColorHighSaturationGreenHGg050 = \"#50ba5f\";\nexport const calciteColorHighSaturationGreenHGg060 = \"#35ac46\";\nexport const calciteColorHighSaturationGreenHGg070 = \"#288835\";\nexport const calciteColorHighSaturationGreenHGg080 = \"#1a6324\";\nexport const calciteColorHighSaturationGreenHGg090 = \"#0d3f14\";\nexport const calciteColorHighSaturationGreenHGg100 = \"#001a03\";\nexport const calciteColorHighSaturationYellowGreenHYg010 = \"#e5f7b4\";\nexport const calciteColorHighSaturationYellowGreenHYg020 = \"#d9ef9f\";\nexport const calciteColorHighSaturationYellowGreenHYg030 = \"#cde78a\";\nexport const calciteColorHighSaturationYellowGreenHYg040 = \"#c2e075\";\nexport const calciteColorHighSaturationYellowGreenHYg050 = \"#b6d860\";\nexport const calciteColorHighSaturationYellowGreenHYg060 = \"#aad04b\";\nexport const calciteColorHighSaturationYellowGreenHYg070 = \"#84a338\";\nexport const calciteColorHighSaturationYellowGreenHYg080 = \"#5e7526\";\nexport const calciteColorHighSaturationYellowGreenHYg090 = \"#384813\";\nexport const calciteColorHighSaturationYellowGreenHYg100 = \"#121a00\";\nexport const calciteColorHighSaturationYellowHYy010 = \"#fff7cc\";\nexport const calciteColorHighSaturationYellowHYy020 = \"#fef3ad\";\nexport const calciteColorHighSaturationYellowHYy030 = \"#fcee8d\";\nexport const calciteColorHighSaturationYellowHYy040 = \"#fbea6e\";\nexport const calciteColorHighSaturationYellowHYy050 = \"#f9e54e\";\nexport const calciteColorHighSaturationYellowHYy060 = \"#edd317\";\nexport const calciteColorHighSaturationYellowHYy070 = \"#d9bc00\";\nexport const calciteColorHighSaturationYellowHYy080 = \"#bfa200\";\nexport const calciteColorHighSaturationYellowHYy090 = \"#8c7500\";\nexport const calciteColorHighSaturationYellowHYy100 = \"#5c4e00\";\nexport const calciteColorHighSaturationOrangeYellowHOy010 = \"#ffe2bf\";\nexport const calciteColorHighSaturationOrangeYellowHOy020 = \"#fed3a1\";\nexport const calciteColorHighSaturationOrangeYellowHOy030 = \"#fcc582\";\nexport const calciteColorHighSaturationOrangeYellowHOy040 = \"#fbb664\";\nexport const calciteColorHighSaturationOrangeYellowHOy050 = \"#f9a845\";\nexport const calciteColorHighSaturationOrangeYellowHOy060 = \"#f89927\";\nexport const calciteColorHighSaturationOrangeYellowHOy070 = \"#c67718\";\nexport const calciteColorHighSaturationOrangeYellowHOy080 = \"#9a5b10\";\nexport const calciteColorHighSaturationOrangeYellowHOy090 = \"#6d3f08\";\nexport const calciteColorHighSaturationOrangeYellowHOy100 = \"#402300\";\nexport const calciteColorHighSaturationOrangeHOo010 = \"#ffd8bf\";\nexport const calciteColorHighSaturationOrangeHOo020 = \"#fdc39f\";\nexport const calciteColorHighSaturationOrangeHOo030 = \"#faae7f\";\nexport const calciteColorHighSaturationOrangeHOo040 = \"#f89960\";\nexport const calciteColorHighSaturationOrangeHOo050 = \"#f58440\";\nexport const calciteColorHighSaturationOrangeHOo060 = \"#f36f20\";\nexport const calciteColorHighSaturationOrangeHOo070 = \"#c65a18\";\nexport const calciteColorHighSaturationOrangeHOo080 = \"#9a4410\";\nexport const calciteColorHighSaturationOrangeHOo090 = \"#6d2f08\";\nexport const calciteColorHighSaturationOrangeHOo100 = \"#401900\";\nexport const calciteColorHighSaturationRedOrangeHRo010 = \"#ffc7b3\";\nexport const calciteColorHighSaturationRedOrangeHRo020 = \"#f8af95\";\nexport const calciteColorHighSaturationRedOrangeHRo030 = \"#f09677\";\nexport const calciteColorHighSaturationRedOrangeHRo040 = \"#e97e5a\";\nexport const calciteColorHighSaturationRedOrangeHRo050 = \"#e1653c\";\nexport const calciteColorHighSaturationRedOrangeHRo060 = \"#da4d1e\";\nexport const calciteColorHighSaturationRedOrangeHRo070 = \"#ad3c16\";\nexport const calciteColorHighSaturationRedOrangeHRo080 = \"#802c0f\";\nexport const calciteColorHighSaturationRedOrangeHRo090 = \"#531b07\";\nexport const calciteColorHighSaturationRedOrangeHRo100 = \"#260a00\";\nexport const calciteColorHighSaturationRedHRr010 = \"#ffc6bf\";\nexport const calciteColorHighSaturationRedHRr020 = \"#ffaaa1\";\nexport const calciteColorHighSaturationRedHRr030 = \"#f2877b\";\nexport const calciteColorHighSaturationRedHRr040 = \"#f07062\";\nexport const calciteColorHighSaturationRedHRr050 = \"#e65240\";\nexport const calciteColorHighSaturationRedHRr060 = \"#d83020\";\nexport const calciteColorHighSaturationRedHRr070 = \"#a82b1e\";\nexport const calciteColorHighSaturationRedHRr080 = \"#7c1d13\";\nexport const calciteColorHighSaturationRedHRr090 = \"#4f0e08\";\nexport const calciteColorHighSaturationRedHRr100 = \"#210300\";\nexport const calciteColorHighSaturationPinkHPk010 = \"#ffd1ef\";\nexport const calciteColorHighSaturationPinkHPk020 = \"#fabee4\";\nexport const calciteColorHighSaturationPinkHPk030 = \"#f2a5d6\";\nexport const calciteColorHighSaturationPinkHPk040 = \"#eb8dc9\";\nexport const calciteColorHighSaturationPinkHPk050 = \"#e673bb\";\nexport const calciteColorHighSaturationPinkHPk060 = \"#e04ea6\";\nexport const calciteColorHighSaturationPinkHPk070 = \"#ba2f7e\";\nexport const calciteColorHighSaturationPinkHPk080 = \"#851b52\";\nexport const calciteColorHighSaturationPinkHPk090 = \"#590b32\";\nexport const calciteColorHighSaturationPinkHPk100 = \"#260404\";\nexport const calciteColorHighSaturationVioletRedHVr010 = \"#fadbff\";\nexport const calciteColorHighSaturationVioletRedHVr020 = \"#e4beeb\";\nexport const calciteColorHighSaturationVioletRedHVr030 = \"#cfa1d7\";\nexport const calciteColorHighSaturationVioletRedHVr040 = \"#b983c3\";\nexport const calciteColorHighSaturationVioletRedHVr050 = \"#a466af\";\nexport const calciteColorHighSaturationVioletRedHVr060 = \"#8e499b\";\nexport const calciteColorHighSaturationVioletRedHVr070 = \"#73377e\";\nexport const calciteColorHighSaturationVioletRedHVr080 = \"#572561\";\nexport const calciteColorHighSaturationVioletRedHVr090 = \"#3c1243\";\nexport const calciteColorHighSaturationVioletRedHVr100 = \"#200026\";\nexport const calciteColorHighSaturationVioletHVv010 = \"#e8d9ff\";\nexport const calciteColorHighSaturationVioletHVv020 = \"#cdb9eb\";\nexport const calciteColorHighSaturationVioletHVv030 = \"#b39ad7\";\nexport const calciteColorHighSaturationVioletHVv040 = \"#987ac3\";\nexport const calciteColorHighSaturationVioletHVv050 = \"#7e5baf\";\nexport const calciteColorHighSaturationVioletHVv060 = \"#633b9b\";\nexport const calciteColorHighSaturationVioletHVv070 = \"#4e2c7e\";\nexport const calciteColorHighSaturationVioletHVv080 = \"#3a1e61\";\nexport const calciteColorHighSaturationVioletHVv090 = \"#250f43\";\nexport const calciteColorHighSaturationVioletHVv100 = \"#100026\";\nexport const calciteColorVibrantBlueVBb120 = \"#59d6ff\";\nexport const calciteColorVibrantBlueVBb140 = \"#3db8ff\";\nexport const calciteColorVibrantBlueVBb160 = \"#009af2\";\nexport const calciteColorVibrantBlueVBb180 = \"#009af2\";\nexport const calciteColorVibrantGreenBlueVGb120 = \"#59fffc\";\nexport const calciteColorVibrantGreenBlueVGb140 = \"#00f7f3\";\nexport const calciteColorVibrantGreenBlueVGb160 = \"#00e6e2\";\nexport const calciteColorVibrantGreenBlueVGb180 = \"#00cfca\";\nexport const calciteColorVibrantGreenVGg120 = \"#73ff84\";\nexport const calciteColorVibrantGreenVGg140 = \"#3bed52\";\nexport const calciteColorVibrantGreenVGg160 = \"#00b81b\";\nexport const calciteColorVibrantGreenVGg180 = \"#00a118\";\nexport const calciteColorVibrantYellowGreenVYg120 = \"#d7ff73\";\nexport const calciteColorVibrantYellowGreenVYg140 = \"#bbed3b\";\nexport const calciteColorVibrantYellowGreenVYg160 = \"#96cc00\";\nexport const calciteColorVibrantYellowGreenVYg180 = \"#7fab00\";\nexport const calciteColorVibrantYellowVYy120 = \"#fff766\";\nexport const calciteColorVibrantYellowVYy140 = \"#ffee33\";\nexport const calciteColorVibrantYellowVYy160 = \"#f5d000\";\nexport const calciteColorVibrantYellowVYy180 = \"#ebba17\";\nexport const calciteColorVibrantOrangeYellowVOy120 = \"#ffb54d\";\nexport const calciteColorVibrantOrangeYellowVOy140 = \"#ff9500\";\nexport const calciteColorVibrantOrangeYellowVOy160 = \"#e68600\";\nexport const calciteColorVibrantOrangeYellowVOy180 = \"#d17300\";\nexport const calciteColorVibrantRedOrangeVRo120 = \"#ff824d\";\nexport const calciteColorVibrantRedOrangeVRo140 = \"#ff4d00\";\nexport const calciteColorVibrantRedOrangeVRo160 = \"#de4300\";\nexport const calciteColorVibrantRedOrangeVRo180 = \"#c93b00\";\nexport const calciteColorVibrantRedVRr120 = \"#ff624d\";\nexport const calciteColorVibrantRedVRr140 = \"#ff0015\";\nexport const calciteColorVibrantRedVRr160 = \"#d90012\";\nexport const calciteColorVibrantRedVRr180 = \"#b3000f\";\nexport const calciteColorVibrantPinkVPk120 = \"#ff66c2\";\nexport const calciteColorVibrantPinkVPk140 = \"#ff19a4\";\nexport const calciteColorVibrantPinkVPk160 = \"#d11486\";\nexport const calciteColorVibrantPinkVPk180 = \"#c00073\";\nexport const calciteColorVibrantVioletRedVVr120 = \"#ea80ff\";\nexport const calciteColorVibrantVioletRedVVr140 = \"#dd33ff\";\nexport const calciteColorVibrantVioletRedVVr160 = \"#ac08cc\";\nexport const calciteColorVibrantVioletRedVVr180 = \"#83009e\";\nexport const calciteColorVibrantVioletVVv120 = \"#b580ff\";\nexport const calciteColorVibrantVioletVVv140 = \"#974dff\";\nexport const calciteColorVibrantVioletVVv160 = \"#8129ff\";\nexport const calciteColorVibrantVioletVVv180 = \"#6a0be6\";\nexport const calciteColorDarkGreenDGg410 = \"#44ed51\";\nexport const calciteColorDarkGreenDGg420 = \"#36da43\";\nexport const calciteColorDarkGreenDGg430 = \"#36da43\";\nexport const calciteColorDarkYellowDYy410 = \"#ffe24d\";\nexport const calciteColorDarkYellowDYy420 = \"#ffc900\";\nexport const calciteColorDarkYellowDYy430 = \"#f4b000\";\nexport const calciteColorDarkRedDRr410 = \"#ff7465\";\nexport const calciteColorDarkRedDRr420 = \"#fe583e\";\nexport const calciteColorDarkRedDRr430 = \"#f3381b\";\nexport const calciteColorDarkBlueDBb410 = \"#47bbff\";\nexport const calciteColorDarkBlueDBb420 = \"#00a0ff\";\nexport const calciteColorDarkBlueDBb430 = \"#0087d7\";\nexport const calciteContainerSize0 = \"0\";\nexport const calciteContainerSize154 = \"154px\";\nexport const calciteContainerSize320 = \"320px\";\nexport const calciteContainerSize328 = \"328px\";\nexport const calciteContainerSize476 = \"476px\";\nexport const calciteContainerSize504 = \"504px\";\nexport const calciteContainerSize678 = \"678px\";\nexport const calciteContainerSize768 = \"768px\";\nexport const calciteContainerSize854 = \"854px\";\nexport const calciteContainerSize1152 = \"1152px\";\nexport const calciteContainerSize1440 = \"1440px\";\nexport const calciteFontFamilyAndaleMono = \"Andale Mono\"; // Fallback for Monaco\nexport const calciteFontFamilyAvenirNextPro = \"Avenir Next LT Pro\";\nexport const calciteFontFamilyAvenirNextWorld = \"Avenir Next World\";\nexport const calciteFontFamilyAvenir = \"Avenir\"; // Fallback for Avenir Next\nexport const calciteFontFamilyConsolas = \"Consolas\"; // Fallback for Monaco\nexport const calciteFontFamilyHelveticaNeue = \"Helvetica Neue\"; // Fallback for Avenir Next\nexport const calciteFontFamilyLucidaConsole = \"Lucida Console\"; // Fallback for Monaco\nexport const calciteFontFamilyMonaco = \"Monaco\";\nexport const calciteFontFamilyMonospace = \"monospace\"; // Fallback for Monaco\nexport const calciteFontFamilySansSerif = \"sans-serif\"; // Fallback for Avenir Next\nexport const calciteFontStyleItalic = \"italic\"; // used in ratings\nexport const calciteFontWeightUltralight = \"200\"; // only for Avenir Next World (secondary font family)\nexport const calciteFontWeightThin = \"100\";\nexport const calciteFontWeightLight = \"300\"; // only for Avenir Next World (secondary font family)\nexport const calciteFontWeightRegular = \"400\";\nexport const calciteFontWeightMedium = \"500\";\nexport const calciteFontWeightMediumItalic = \"Medium Italic\";\nexport const calciteFontWeightDemi = \"600\";\nexport const calciteFontWeightBold = \"700\";\nexport const calciteFontWeightExtrabold = \"800\"; // only for Avenir Next World (secondary font family)\nexport const calciteFontWeightBlack = \"900\"; // only for Avenir Next World (secondary font family)\nexport const calciteFontWeightHeavy = \"900\";\nexport const calciteFontTextDecorationNone = \"none\";\nexport const calciteFontTextDecorationUnderline = \"underline\";\nexport const calciteFontTextCaseNone = \"none\";\nexport const calciteFontTextCaseUppercase = \"uppercase\";\nexport const calciteFontTextCaseLowercase = \"lowercase\";\nexport const calciteFontTextCaseCapitalize = \"capitalize\";\nexport const calciteOpacity0 = \"0\";\nexport const calciteOpacity4 = \"0.04\";\nexport const calciteOpacity8 = \"0.08\";\nexport const calciteOpacity10 = \"0.1\";\nexport const calciteOpacity20 = \"0.2\";\nexport const calciteOpacity30 = \"0.3\";\nexport const calciteOpacity40 = \"0.4\";\nexport const calciteOpacity50 = \"0.5\";\nexport const calciteOpacity60 = \"0.6\";\nexport const calciteOpacity70 = \"0.7\";\nexport const calciteOpacity80 = \"0.8\";\nexport const calciteOpacity85 = \"0.85\";\nexport const calciteOpacity90 = \"0.9\";\nexport const calciteOpacity92 = \"0.92\";\nexport const calciteOpacity96 = \"0.96\";\nexport const calciteOpacity100 = \"1\";\nexport const calciteShadow0 = {\"x\":\"0\",\"y\":\"0\",\"blur\":\"0\",\"spread\":\"0\",\"color\":\"rgba(#000000, 0)\"};\nexport const calciteShadow1 = {\"x\":\"0\",\"y\":\"2\",\"blur\":\"8\",\"spread\":\"0\",\"color\":\"rgba(#000000, 0.04)\"};\nexport const calciteShadow2 = {\"x\":\"0\",\"y\":\"4\",\"blur\":\"16\",\"spread\":\"0\",\"color\":\"rgba(#000000, 0.08)\"};\nexport const calciteShadow3 = {\"x\":\"0\",\"y\":\"4\",\"blur\":\"20\",\"spread\":\"0\",\"color\":\"rgba(#000000, 0.08)\"};\nexport const calciteShadow4 = {\"x\":\"0\",\"y\":\"12\",\"blur\":\"32\",\"spread\":\"-2\",\"color\":\"rgba(#000000, 0.1)\"};\nexport const calciteSize1 = \"1px\";\nexport const calciteSize2 = \"2px\";\nexport const calciteSize4 = \"4px\";\nexport const calciteSize6 = \"6px\";\nexport const calciteSize8 = \"8px\";\nexport const calciteSize10 = \"10px\";\nexport const calciteSize12 = \"12px\";\nexport const calciteSize14 = \"14px\";\nexport const calciteSize16 = \"16px\";\nexport const calciteSize20 = \"20px\";\nexport const calciteSize24 = \"24px\";\nexport const calciteSize28 = \"28px\";\nexport const calciteSize32 = \"32px\";\nexport const calciteSize36 = \"36px\";\nexport const calciteSize40 = \"40px\";\nexport const calciteSize44 = \"44px\";\nexport const calciteSize48 = \"48px\";\nexport const calciteSize56 = \"56px\";\nexport const calciteSize64 = \"64px\";\nexport const calciteSize72 = \"72px\";\nexport const calciteSize80 = \"80px\";\nexport const calciteSize96 = \"96px\";\nexport const calciteSize112 = \"112px\";\nexport const calciteSize128 = \"128px\";\nexport const calciteSize144 = \"144px\";\nexport const calciteSize160 = \"160px\";\nexport const calciteSize192 = \"192px\";\nexport const calciteSize224 = \"224px\";\nexport const calciteSize256 = \"256px\";\nexport const calciteSize288 = \"288px\";\nexport const calciteSizeNone = \"0\";\nexport const calciteSizeRelative50 = \"50%\";\nexport const calciteSizeRelative100 = \"100%\";\nexport const calciteSizeRelative125 = \"125%\";\nexport const calciteSizeRelative137 = \"137.5%\";\nexport const calciteSizeRelative150 = \"150%\";\nexport const calciteSizeRelative162 = \"162.5%\";\nexport const calciteSizeRelative200 = \"200%\";\nexport const calciteSizeRelativeAuto = \"auto\";\nexport const calciteZIndex0 = \"-999999\";\nexport const calciteZIndex1 = \"1\";\nexport const calciteZIndex3 = \"300\";\nexport const calciteZIndex4 = \"400\";\nexport const calciteZIndex5 = \"500\";\nexport const calciteZIndex6 = \"600\";\nexport const calciteZIndex7 = \"700\";\nexport const calciteZIndex8 = \"800\";\nexport const calciteZIndex9 = \"900\";\n","/**\n * CSS Custom Properties\n *\n * These properties can be overridden using the component's tag as selector.\n *\n * @prop --calcite-combobox-input-height: Specifies the height of the component's input.\n */\n\n:host {\n  @apply relative block;\n}\n\n@include disabled();\n@include xButton();\n\n:host([scale=\"s\"]) {\n  @apply text-n2;\n  --calcite-combobox-item-spacing-unit-l: theme(\"spacing.2\");\n  --calcite-combobox-item-spacing-unit-s: theme(\"spacing.1\");\n  --calcite-combobox-input-height: theme(\"spacing.4\");\n  --calcite-internal-combobox-input-margin-block: calc(theme(\"spacing.1\") - theme(\"borderWidth.DEFAULT\"));\n\n  .x-button {\n    margin-inline: theme(\"spacing.2\");\n  }\n}\n\n:host([scale=\"m\"]) {\n  @apply text-n1;\n  --calcite-combobox-item-spacing-unit-l: theme(\"spacing.3\");\n  --calcite-combobox-item-spacing-unit-s: theme(\"spacing.2\");\n  --calcite-combobox-input-height: theme(\"spacing.4\");\n  --calcite-internal-combobox-input-margin-block: calc(theme(\"spacing.2\") - theme(\"borderWidth.DEFAULT\"));\n\n  .x-button {\n    margin-inline-end: theme(\"spacing.3\");\n  }\n}\n\n:host([scale=\"l\"]) {\n  @apply text-0;\n  --calcite-combobox-item-spacing-unit-l: theme(\"spacing.4\");\n  --calcite-combobox-item-spacing-unit-s: theme(\"spacing.3\");\n  --calcite-combobox-input-height: theme(\"spacing.6\");\n  --calcite-internal-combobox-input-margin-block: calc(theme(\"spacing[2.5]\") - theme(\"borderWidth.DEFAULT\"));\n\n  .x-button {\n    margin-inline-end: theme(\"spacing.4\");\n  }\n}\n\n.wrapper {\n  @apply bg-foreground-1\n    text-color-1\n    focus-base\n    flex\n    border-color-input\n    border\n    border-solid;\n  padding-block: calc(var(--calcite-combobox-item-spacing-unit-s) / 4);\n  padding-inline: var(--calcite-combobox-item-spacing-unit-l);\n}\n\n:host(:focus-within) .wrapper,\n.wrapper--active {\n  @apply focus-inset;\n}\n\n:host([status=\"invalid\"]) .wrapper {\n  @apply border-color-danger;\n}\n\n:host([status=\"invalid\"]:focus-within) .wrapper {\n  @apply focus-inset-danger;\n}\n\n.wrapper--single {\n  padding-block: 0;\n  padding-inline: var(--calcite-combobox-item-spacing-unit-l);\n  @apply cursor-pointer flex-nowrap;\n}\n\n.grid-input {\n  @apply flex\n    flex-grow\n    flex-wrap\n    items-center\n    relative\n    truncate\n    p-0;\n\n  gap: var(--calcite-combobox-item-spacing-unit-s);\n\n  &.selection-display-fit,\n  &.selection-display-single {\n    @apply flex-nowrap overflow-hidden;\n  }\n}\n\n.input {\n  @apply appearance-none\n  bg-transparent\n  border-none\n  flex-grow\n  font-inherit\n  text-color-1\n  text-ellipsis\n  p-0;\n  font-size: inherit;\n  block-size: var(--calcite-combobox-input-height);\n  line-height: var(--calcite-combobox-input-height);\n  inline-size: 100%;\n  margin-block-end: var(--calcite-combobox-item-spacing-unit-s);\n  min-inline-size: 4.8125rem;\n  &:focus {\n    @apply outline-none;\n  }\n  &:placeholder-shown {\n    @apply text-ellipsis;\n  }\n}\n\n.input--transparent {\n  @apply opacity-0;\n}\n\n.input--single {\n  @apply p-0;\n  margin-block: var(--calcite-internal-combobox-input-margin-block);\n}\n\n.wrapper--active .input-single {\n  @apply cursor-text;\n}\n\n.input--hidden {\n  @apply pointer-events-none\n  w-0\n  min-w-0\n  opacity-0;\n}\n\n.input--icon {\n  padding-block: 0;\n  padding-inline: var(--calcite-combobox-item-spacing-unit-s);\n}\n\n:host([scale=\"m\"]) .input--icon,\n:host([scale=\"l\"]) .input--icon {\n  padding-inline: 0.25rem;\n}\n\n.input-wrap {\n  @apply flex flex-grow items-center;\n}\n\n.input-wrap--single {\n  @apply flex-1 overflow-hidden;\n}\n\n.label {\n  @apply pointer-events-none\n    flex\n    max-w-full\n    flex-auto\n    truncate\n    p-0\n    font-normal;\n  block-size: var(--calcite-combobox-input-height);\n  line-height: var(--calcite-combobox-input-height);\n}\n\n.label--icon {\n  padding-inline: var(--calcite-combobox-item-spacing-unit-l);\n}\n\n.icon-end,\n.icon-start {\n  @apply flex cursor-pointer items-center;\n}\n\n.icon-end {\n  @apply flex-none;\n}\n\n.floating-ui-container {\n  --calcite-floating-ui-z-index: theme(\"zIndex.dropdown\");\n  @include floatingUIContainer();\n  @include floatingUIWrapper();\n}\n\n@include floatingUIElemAnim(\".floating-ui-container\");\n\n.floating-ui-container--active {\n  @include floatingUIWrapperActive();\n}\n\n@media (forced-colors: active) {\n  .wrapper,\n  .floating-ui-container--active {\n    border: 1px solid canvasText;\n  }\n}\n\n.screen-readers-only {\n  @apply sr-only;\n}\n\n.list-container {\n  @apply bg-foreground-1\n    max-h-menu\n    overflow-y-auto;\n  inline-size: var(--calcite-dropdown-width);\n}\n\n.list {\n  @apply m-0 block p-0;\n}\n\n.list--hide {\n  @apply h-0 overflow-hidden;\n}\n\ncalcite-chip {\n  --calcite-animation-timing: 0;\n}\n\n.chip {\n  margin-block: calc(var(--calcite-combobox-item-spacing-unit-s) / 4);\n  max-inline-size: 100%;\n}\n\n.chip--active {\n  @apply bg-foreground-3;\n}\n\n.chip--invisible {\n  @apply absolute invisible;\n}\n\n.item {\n  @apply block;\n}\n\n@include form-validation-message();\n@include hidden-form-input();\n@include base-component();\n\n::slotted(calcite-combobox-item-group:not(:first-child)) {\n  padding-block-start: var(--calcite-combobox-item-spacing-unit-l);\n}\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Method,\n  Prop,\n  State,\n  VNode,\n  Watch,\n} from \"@stencil/core\";\nimport { debounce } from \"lodash-es\";\nimport { filter } from \"../../utils/filter\";\n\nimport {\n  getElementWidth,\n  getTextWidth,\n  isPrimaryPointerButton,\n  toAriaBoolean,\n} from \"../../utils/dom\";\nimport {\n  connectFloatingUI,\n  defaultMenuPlacement,\n  disconnectFloatingUI,\n  EffectivePlacement,\n  filterComputedPlacements,\n  FloatingCSS,\n  FloatingUIComponent,\n  LogicalPlacement,\n  OverlayPositioning,\n  reposition,\n} from \"../../utils/floating-ui\";\nimport {\n  afterConnectDefaultValueSet,\n  connectForm,\n  disconnectForm,\n  FormComponent,\n  HiddenFormInputSlot,\n  submitForm,\n} from \"../../utils/form\";\nimport { guid } from \"../../utils/guid\";\nimport {\n  connectInteractive,\n  disconnectInteractive,\n  InteractiveComponent,\n  updateHostInteraction,\n} from \"../../utils/interactive\";\nimport { connectLabel, disconnectLabel, getLabelText, LabelableComponent } from \"../../utils/label\";\nimport {\n  componentFocusable,\n  componentLoaded,\n  LoadableComponent,\n  setComponentLoaded,\n  setUpLoadableComponent,\n} from \"../../utils/loadable\";\nimport { connectLocalized, disconnectLocalized } from \"../../utils/locale\";\nimport { createObserver } from \"../../utils/observers\";\nimport { onToggleOpenCloseComponent, OpenCloseComponent } from \"../../utils/openCloseComponent\";\nimport {\n  connectMessages,\n  disconnectMessages,\n  setUpMessages,\n  T9nComponent,\n  updateMessages,\n} from \"../../utils/t9n\";\nimport { Scale, SelectionMode, Status } from \"../interfaces\";\nimport { ComboboxMessages } from \"./assets/combobox/t9n\";\nimport { ComboboxChildElement, SelectionDisplay } from \"./interfaces\";\nimport { ComboboxChildSelector, ComboboxItem, ComboboxItemGroup, CSS } from \"./resources\";\nimport { getItemAncestors, getItemChildren, hasActiveChildren, isSingleLike } from \"./utils\";\nimport { XButton, CSS as XButtonCSS } from \"../functional/XButton\";\nimport { getIconScale } from \"../../utils/component\";\nimport { calciteSize48 } from \"@esri/calcite-design-tokens/dist/es6/core.js\";\nimport { Validation } from \"../functional/Validation\";\n\ninterface ItemData {\n  label: string;\n  value: string;\n}\n\nconst isGroup = (el: ComboboxChildElement): el is HTMLCalciteComboboxItemGroupElement =>\n  el.tagName === ComboboxItemGroup;\n\nconst itemUidPrefix = \"combobox-item-\";\nconst chipUidPrefix = \"combobox-chip-\";\nconst labelUidPrefix = \"combobox-label-\";\nconst listboxUidPrefix = \"combobox-listbox-\";\nconst inputUidPrefix = \"combobox-input-\";\n\n/**\n * @slot - A slot for adding `calcite-combobox-item`s.\n */\n@Component({\n  tag: \"calcite-combobox\",\n  styleUrl: \"combobox.scss\",\n  shadow: true,\n  assetsDirs: [\"assets\"],\n})\nexport class Combobox\n  implements\n    LabelableComponent,\n    FormComponent,\n    InteractiveComponent,\n    OpenCloseComponent,\n    FloatingUIComponent,\n    T9nComponent,\n    LoadableComponent\n{\n  //--------------------------------------------------------------------------\n  //\n  //  Public Properties\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * When `true`, the value-clearing will be disabled.\n   */\n  @Prop({ reflect: true }) clearDisabled = false;\n\n  /**\n   * When `selectionMode` is `\"ancestors\"` or `\"multiple\"`, specifies the display of multiple `calcite-combobox-item` selections\n   * - `\"all\"` (displays all selections with individual `calcite-chip`s), `\"fit\"` (displays individual `calcite-chip`s that scale to the component's size, including a non-closable `calcite-chip`, which provides the number of additional `calcite-combobox-item` selections not visually displayed), or `\"single\"` (display one `calcite-chip` with the total number of selections).\n   */\n  @Prop({ reflect: true }) selectionDisplay: SelectionDisplay = \"all\";\n\n  /**When `true`, displays and positions the component. */\n  @Prop({ reflect: true, mutable: true }) open = false;\n\n  @Watch(\"open\")\n  openHandler(): void {\n    onToggleOpenCloseComponent(this);\n\n    if (this.disabled) {\n      this.open = false;\n      return;\n    }\n\n    this.setMaxScrollerHeight();\n  }\n\n  /** When `true`, interaction is prevented and the component is displayed with lower opacity. */\n  @Prop({ reflect: true }) disabled = false;\n\n  @Watch(\"disabled\")\n  handleDisabledChange(value: boolean): void {\n    if (!value) {\n      this.open = false;\n    }\n  }\n\n  /**\n   * The ID of the form that will be associated with the component.\n   *\n   * When not set, the component will be associated with its ancestor form element, if any.\n   */\n  @Prop({ reflect: true }) form: string;\n\n  /** Accessible name for the component. */\n  @Prop() label!: string;\n\n  /** Specifies the placeholder text for the input. */\n  @Prop() placeholder: string;\n\n  /** Specifies the placeholder icon for the input. */\n  @Prop({ reflect: true }) placeholderIcon: string;\n\n  /** When `true`, the icon will be flipped when the element direction is right-to-left (`\"rtl\"`). */\n  @Prop({ reflect: true }) placeholderIconFlipRtl = false;\n\n  /** Specifies the maximum number of `calcite-combobox-item`s (including nested children) to display before displaying a scrollbar. */\n  @Prop({ reflect: true }) maxItems = 0;\n\n  @Watch(\"maxItems\")\n  maxItemsHandler(): void {\n    this.setMaxScrollerHeight();\n  }\n\n  /** Specifies the validation message to display under the component. */\n  @Prop() validationMessage: string;\n\n  /** Specifies the validation icon to display under the component. */\n  @Prop() validationIcon: string | boolean;\n\n  /**\n   * Specifies the name of the component.\n   *\n   * Required to pass the component's `value` on form submission.\n   */\n  @Prop({ reflect: true }) name: string;\n\n  /** When `true`, allows entry of custom values, which are not in the original set of items. */\n  @Prop({ reflect: true }) allowCustomValues: boolean;\n\n  /**\n   * Determines the type of positioning to use for the overlaid content.\n   *\n   * Using `\"absolute\"` will work for most cases. The component will be positioned inside of overflowing parent containers and will affect the container's layout.\n   *\n   * `\"fixed\"` should be used to escape an overflowing parent container, or when the reference element's `position` CSS property is `\"fixed\"`.\n   *\n   */\n  @Prop({ reflect: true }) overlayPositioning: OverlayPositioning = \"absolute\";\n\n  @Watch(\"overlayPositioning\")\n  overlayPositioningHandler(): void {\n    this.reposition(true);\n  }\n\n  /**\n   * When `true`, the component must have a value in order for the form to submit.\n   *\n   * @internal\n   */\n  @Prop({ reflect: true }) required = false;\n\n  /**\n   * Specifies the selection mode:\n   * - \"multiple\" allows any number of selected items (default),\n   * - \"single\" allows only one selection,\n   * - \"single-persist\" allow and require one open item,\n   * - \"ancestors\" is like multiple, but shows ancestors of selected items as selected, with only deepest children shown in chips.\n   */\n  @Prop({ reflect: true }) selectionMode: Extract<\n    \"single\" | \"single-persist\" | \"ancestors\" | \"multiple\",\n    SelectionMode\n  > = \"multiple\";\n\n  /** Specifies the size of the component. */\n  @Prop({ reflect: true }) scale: Scale = \"m\";\n\n  /** Specifies the status of the input field, which determines message and icons. */\n  @Prop({ reflect: true }) status: Status = \"idle\";\n\n  @Watch(\"selectionMode\")\n  @Watch(\"scale\")\n  handlePropsChange(): void {\n    this.updateItems();\n  }\n\n  /** The component's value(s) from the selected `calcite-combobox-item`(s). */\n  @Prop({ mutable: true }) value: string | string[] = null;\n\n  @Watch(\"value\")\n  valueHandler(value: string | string[]): void {\n    if (!this.internalValueChangeFlag) {\n      const items = this.getItems();\n      if (Array.isArray(value)) {\n        items.forEach((item) => (item.selected = value.includes(item.value)));\n      } else if (value) {\n        items.forEach((item) => (item.selected = value === item.value));\n      } else {\n        items.forEach((item) => (item.selected = false));\n      }\n      this.updateItems();\n    }\n  }\n\n  /**\n   * Defines the available placements that can be used when a flip occurs.\n   */\n  @Prop() flipPlacements: EffectivePlacement[];\n\n  /**\n   * Made into a prop for testing purposes only\n   *\n   * @internal\n   */\n  // eslint-disable-next-line @stencil-community/strict-mutable -- updated by t9n module\n  @Prop({ mutable: true }) messages: ComboboxMessages;\n\n  /**\n   * Use this property to override individual strings used by the component.\n   */\n  // eslint-disable-next-line @stencil-community/strict-mutable -- updated by t9n module\n  @Prop({ mutable: true }) messageOverrides: Partial<ComboboxMessages>;\n\n  @Watch(\"messageOverrides\")\n  onMessagesChange(): void {\n    /*  wired up by t9n util */\n  }\n\n  @Watch(\"flipPlacements\")\n  flipPlacementsHandler(): void {\n    this.setFilteredPlacements();\n    this.reposition(true);\n  }\n\n  /**\n   * Specifies the component's selected items.\n   *\n   * @readonly\n   */\n  @Prop({ mutable: true }) selectedItems: HTMLCalciteComboboxItemElement[] = [];\n\n  @Watch(\"selectedItems\")\n  selectedItemsHandler(): void {\n    this.internalValueChangeFlag = true;\n    this.value = this.getValue();\n    this.internalValueChangeFlag = false;\n  }\n\n  /**\n   * Specifies the component's filtered items.\n   *\n   * @readonly\n   */\n  @Prop({ mutable: true }) filteredItems: HTMLCalciteComboboxItemElement[] = [];\n\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n\n  @Listen(\"pointerdown\", { target: \"document\" })\n  documentClickHandler(event: PointerEvent): void {\n    if (this.disabled || !isPrimaryPointerButton(event)) {\n      return;\n    }\n\n    const composedPath = event.composedPath();\n\n    if (composedPath.includes(this.el) || composedPath.includes(this.referenceEl)) {\n      return;\n    }\n\n    if (!this.allowCustomValues && this.textInput.value) {\n      this.clearInputValue();\n      this.filterItems(\"\");\n      this.updateActiveItemIndex(-1);\n    }\n\n    if (this.allowCustomValues && this.text.trim().length) {\n      this.addCustomChip(this.text);\n    }\n\n    this.open = false;\n  }\n\n  @Listen(\"calciteComboboxItemChange\")\n  calciteComboboxItemChangeHandler(event: CustomEvent<HTMLCalciteComboboxItemElement>): void {\n    if (this.ignoreSelectedEventsFlag) {\n      return;\n    }\n\n    const target = event.target as HTMLCalciteComboboxItemElement;\n    const newIndex = this.filteredItems.indexOf(target);\n    this.updateActiveItemIndex(newIndex);\n    this.toggleSelection(target, target.selected);\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Public Methods\n  //\n  //--------------------------------------------------------------------------\n\n  /**\n   * Updates the position of the component.\n   *\n   * @param delayed Reposition the component after a delay\n   * @returns Promise\n   */\n  @Method()\n  async reposition(delayed = false): Promise<void> {\n    const { floatingEl, referenceEl, placement, overlayPositioning, filteredFlipPlacements } = this;\n\n    return reposition(\n      this,\n      {\n        floatingEl,\n        referenceEl,\n        overlayPositioning,\n        placement,\n        flipPlacements: filteredFlipPlacements,\n        type: \"menu\",\n      },\n      delayed\n    );\n  }\n\n  /** Sets focus on the component. */\n  @Method()\n  async setFocus(): Promise<void> {\n    await componentFocusable(this);\n\n    this.textInput?.focus();\n    this.activeChipIndex = -1;\n    this.activeItemIndex = -1;\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  // --------------------------------------------------------------------------\n\n  /**\n   * Fires when the selected item(s) changes.\n   */\n  @Event({ cancelable: false }) calciteComboboxChange: EventEmitter<void>;\n\n  /** Fires when text is added to filter the options list. */\n  @Event({ cancelable: false }) calciteComboboxFilterChange: EventEmitter<void>;\n\n  /**\n   * Fires when a selected item in the component is closed via its `calcite-chip`.\n   */\n  @Event({ cancelable: false }) calciteComboboxChipClose: EventEmitter<void>;\n\n  /** Fires when the component is requested to be closed, and before the closing transition begins. */\n  @Event({ cancelable: false }) calciteComboboxBeforeClose: EventEmitter<void>;\n\n  /** Fires when the component is closed and animation is complete. */\n  @Event({ cancelable: false }) calciteComboboxClose: EventEmitter<void>;\n\n  /** Fires when the component is added to the DOM but not rendered, and before the opening transition begins. */\n  @Event({ cancelable: false }) calciteComboboxBeforeOpen: EventEmitter<void>;\n\n  /** Fires when the component is open and animation is complete. */\n  @Event({ cancelable: false }) calciteComboboxOpen: EventEmitter<void>;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  // --------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    connectInteractive(this);\n    connectLocalized(this);\n    connectMessages(this);\n    connectLabel(this);\n    connectForm(this);\n\n    this.internalValueChangeFlag = true;\n    this.value = this.getValue();\n    this.internalValueChangeFlag = false;\n    this.mutationObserver?.observe(this.el, { childList: true, subtree: true });\n\n    this.updateItems();\n    this.setFilteredPlacements();\n    this.reposition(true);\n\n    if (this.open) {\n      this.openHandler();\n      onToggleOpenCloseComponent(this);\n    }\n    connectFloatingUI(this, this.referenceEl, this.floatingEl);\n  }\n\n  async componentWillLoad(): Promise<void> {\n    setUpLoadableComponent(this);\n    this.updateItems();\n    await setUpMessages(this);\n  }\n\n  componentDidLoad(): void {\n    afterConnectDefaultValueSet(this, this.getValue());\n    this.reposition(true);\n    setComponentLoaded(this);\n  }\n\n  componentDidRender(): void {\n    if (this.el.offsetHeight !== this.inputHeight) {\n      this.reposition(true);\n      this.inputHeight = this.el.offsetHeight;\n    }\n\n    updateHostInteraction(this);\n  }\n\n  componentDidUpdate(): void {\n    this.refreshSelectionDisplay();\n  }\n\n  disconnectedCallback(): void {\n    this.mutationObserver?.disconnect();\n    this.resizeObserver?.disconnect();\n    disconnectInteractive(this);\n    disconnectLabel(this);\n    disconnectForm(this);\n    disconnectFloatingUI(this, this.referenceEl, this.floatingEl);\n    disconnectLocalized(this);\n    disconnectMessages(this);\n  }\n\n  //--------------------------------------------------------------------------\n  //\n  //  Private State/Props\n  //\n  //--------------------------------------------------------------------------\n\n  private allSelectedIndicatorChipEl: HTMLCalciteChipElement;\n\n  @Element() el: HTMLCalciteComboboxElement;\n\n  placement: LogicalPlacement = defaultMenuPlacement;\n\n  filteredFlipPlacements: EffectivePlacement[];\n\n  internalValueChangeFlag = false;\n\n  labelEl: HTMLCalciteLabelElement;\n\n  formEl: HTMLFormElement;\n\n  defaultValue: Combobox[\"value\"];\n\n  @State() items: HTMLCalciteComboboxItemElement[] = [];\n\n  @State() groupItems: HTMLCalciteComboboxItemGroupElement[] = [];\n\n  @State() needsIcon: boolean;\n\n  @State() activeItemIndex = -1;\n\n  @State() activeChipIndex = -1;\n\n  @State() activeDescendant = \"\";\n\n  @State() compactSelectionDisplay = false;\n\n  @State() selectedHiddenChipsCount = 0;\n\n  @State() selectedVisibleChipsCount = 0;\n\n  @State() text = \"\";\n\n  /** when search text is cleared, reset active to  */\n  @Watch(\"text\")\n  textHandler(): void {\n    this.updateActiveItemIndex(-1);\n  }\n\n  @State() effectiveLocale: string;\n\n  @Watch(\"effectiveLocale\")\n  effectiveLocaleChange(): void {\n    updateMessages(this, this.effectiveLocale);\n  }\n\n  @State() defaultMessages: ComboboxMessages;\n\n  textInput: HTMLInputElement = null;\n\n  data: ItemData[];\n\n  mutationObserver = createObserver(\"mutation\", () => this.updateItems());\n\n  private resizeObserver = createObserver(\"resize\", () => {\n    this.setMaxScrollerHeight();\n    this.refreshSelectionDisplay();\n  });\n\n  private guid = guid();\n\n  private inputHeight = 0;\n\n  private floatingEl: HTMLDivElement;\n\n  private referenceEl: HTMLDivElement;\n\n  private chipContainerEl: HTMLDivElement;\n\n  private listContainerEl: HTMLDivElement;\n\n  private ignoreSelectedEventsFlag = false;\n\n  private maxCompactBreakpoint: number;\n\n  openTransitionProp = \"opacity\";\n\n  private selectedIndicatorChipEl: HTMLCalciteChipElement;\n\n  transitionEl: HTMLDivElement;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  // --------------------------------------------------------------------------\n\n  private clearValue(): void {\n    this.ignoreSelectedEventsFlag = true;\n    this.items.forEach((el) => (el.selected = false));\n    this.ignoreSelectedEventsFlag = false;\n    this.selectedItems = [];\n    this.emitComboboxChange();\n    this.open = false;\n    this.updateActiveItemIndex(-1);\n    this.resetText();\n    this.filterItems(\"\");\n    this.setFocus();\n  }\n\n  private clearInputValue(): void {\n    this.textInput.value = \"\";\n    this.text = \"\";\n  }\n\n  setFilteredPlacements = (): void => {\n    const { el, flipPlacements } = this;\n\n    this.filteredFlipPlacements = flipPlacements\n      ? filterComputedPlacements(flipPlacements, el)\n      : null;\n  };\n\n  getValue = (): string | string[] => {\n    const items = this.selectedItems.map((item) => item?.value?.toString());\n    return items?.length ? (items.length > 1 ? items : items[0]) : \"\";\n  };\n\n  onLabelClick = (): void => {\n    this.setFocus();\n  };\n\n  private comboboxInViewport(): boolean {\n    const bounding = this.el.getBoundingClientRect();\n    return (\n      bounding.top >= 0 &&\n      bounding.left >= 0 &&\n      bounding.right <= (window.innerWidth || document.documentElement.clientWidth) &&\n      bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight)\n    );\n  }\n\n  private keyDownHandler = (event: KeyboardEvent): void => {\n    const { key } = event;\n\n    switch (key) {\n      case \"Tab\":\n        this.activeChipIndex = -1;\n        this.activeItemIndex = -1;\n        if (this.allowCustomValues && this.text) {\n          this.addCustomChip(this.text, true);\n          event.preventDefault();\n        } else if (this.open) {\n          this.open = false;\n          event.preventDefault();\n        } else if (!this.allowCustomValues && this.text) {\n          this.clearInputValue();\n          this.filterItems(\"\");\n          this.updateActiveItemIndex(-1);\n        }\n        break;\n      case \"ArrowLeft\":\n        this.previousChip();\n        event.preventDefault();\n        break;\n      case \"ArrowRight\":\n        this.nextChip();\n        event.preventDefault();\n        break;\n      case \"ArrowUp\":\n        event.preventDefault();\n        if (this.open) {\n          this.shiftActiveItemIndex(-1);\n        }\n\n        if (!this.comboboxInViewport()) {\n          this.el.scrollIntoView();\n        }\n        break;\n      case \"ArrowDown\":\n        event.preventDefault();\n        if (this.open) {\n          this.shiftActiveItemIndex(1);\n        } else {\n          this.open = true;\n          this.ensureRecentSelectedItemIsActive();\n        }\n\n        if (!this.comboboxInViewport()) {\n          this.el.scrollIntoView();\n        }\n        break;\n      case \" \":\n        if (!this.textInput.value) {\n          if (!this.open) {\n            this.open = true;\n            this.shiftActiveItemIndex(1);\n          }\n          event.preventDefault();\n        }\n        break;\n      case \"Home\":\n        if (!this.open) {\n          return;\n        }\n        event.preventDefault();\n        this.updateActiveItemIndex(0);\n        this.scrollToActiveItem();\n        if (!this.comboboxInViewport()) {\n          this.el.scrollIntoView();\n        }\n        break;\n      case \"End\":\n        if (!this.open) {\n          return;\n        }\n        event.preventDefault();\n        this.updateActiveItemIndex(this.filteredItems.length - 1);\n        this.scrollToActiveItem();\n        if (!this.comboboxInViewport()) {\n          this.el.scrollIntoView();\n        }\n        break;\n      case \"Escape\":\n        if (!this.clearDisabled && !this.open) {\n          this.clearValue();\n        }\n\n        this.open = false;\n        event.preventDefault();\n        break;\n      case \"Enter\":\n        if (this.activeItemIndex > -1) {\n          this.toggleSelection(this.filteredItems[this.activeItemIndex]);\n          event.preventDefault();\n        } else if (this.activeChipIndex > -1) {\n          this.removeActiveChip();\n          event.preventDefault();\n        } else if (this.allowCustomValues && this.text) {\n          this.addCustomChip(this.text, true);\n          event.preventDefault();\n        } else if (!event.defaultPrevented) {\n          if (submitForm(this)) {\n            event.preventDefault();\n          }\n        }\n        break;\n      case \"Delete\":\n      case \"Backspace\":\n        if (this.activeChipIndex > -1) {\n          event.preventDefault();\n          this.removeActiveChip();\n        } else if (!this.text && this.isMulti()) {\n          event.preventDefault();\n          this.removeLastChip();\n        }\n        break;\n    }\n  };\n\n  private toggleCloseEnd = (): void => {\n    this.open = false;\n    this.el.removeEventListener(\"calciteComboboxClose\", this.toggleCloseEnd);\n  };\n\n  private toggleOpenEnd = (): void => {\n    this.open = false;\n    this.el.removeEventListener(\"calciteComboboxOpen\", this.toggleOpenEnd);\n  };\n\n  onBeforeOpen(): void {\n    this.scrollToActiveItem();\n    this.calciteComboboxBeforeOpen.emit();\n  }\n\n  onOpen(): void {\n    this.calciteComboboxOpen.emit();\n  }\n\n  onBeforeClose(): void {\n    this.calciteComboboxBeforeClose.emit();\n  }\n\n  onClose(): void {\n    this.calciteComboboxClose.emit();\n  }\n\n  setMaxScrollerHeight = async (): Promise<void> => {\n    const { listContainerEl, open, referenceEl } = this;\n\n    if (!listContainerEl || !open) {\n      return;\n    }\n\n    await this.reposition(true);\n    const maxScrollerHeight = this.getMaxScrollerHeight();\n    listContainerEl.style.maxHeight = maxScrollerHeight > 0 ? `${maxScrollerHeight}px` : \"\";\n    listContainerEl.style.minWidth = `${referenceEl.clientWidth}px`;\n    await this.reposition(true);\n  };\n\n  calciteChipCloseHandler = (comboboxItem: HTMLCalciteComboboxItemElement): void => {\n    this.open = false;\n\n    const selection = this.items.find((item) => item === comboboxItem);\n\n    if (selection) {\n      this.toggleSelection(selection, false);\n    }\n\n    this.calciteComboboxChipClose.emit();\n  };\n\n  clickHandler = (event: MouseEvent): void => {\n    const composedPath = event.composedPath();\n\n    if (composedPath.some((node: HTMLElement) => node.tagName === \"CALCITE-CHIP\")) {\n      this.open = false;\n      event.preventDefault();\n      return;\n    }\n\n    if (composedPath.some((node: HTMLElement) => node.classList?.contains(XButtonCSS.button))) {\n      this.clearValue();\n      event.preventDefault();\n      return;\n    }\n\n    this.open = !this.open;\n    this.ensureRecentSelectedItemIsActive();\n  };\n\n  private ensureRecentSelectedItemIsActive(): void {\n    const { selectedItems } = this;\n    const targetIndex =\n      selectedItems.length === 0 ? 0 : this.items.indexOf(selectedItems[selectedItems.length - 1]);\n\n    this.updateActiveItemIndex(targetIndex);\n  }\n\n  private hideChip(chipEl: HTMLCalciteChipElement): void {\n    chipEl.classList.add(CSS.chipInvisible);\n  }\n\n  private showChip(chipEl: HTMLCalciteChipElement): void {\n    chipEl.classList.remove(CSS.chipInvisible);\n  }\n\n  private refreshChipDisplay({\n    chipEls,\n    availableHorizontalChipElSpace,\n    chipContainerElGap,\n  }): void {\n    chipEls.forEach((chipEl: HTMLCalciteChipElement) => {\n      if (!chipEl.selected) {\n        this.hideChip(chipEl);\n      } else {\n        const chipElWidth = getElementWidth(chipEl);\n        if (chipElWidth && chipElWidth < availableHorizontalChipElSpace) {\n          availableHorizontalChipElSpace -= chipElWidth + chipContainerElGap;\n          this.showChip(chipEl);\n          return;\n        }\n      }\n      this.hideChip(chipEl);\n    });\n  }\n\n  private refreshSelectionDisplay = async () => {\n    await componentLoaded(this);\n\n    if (isSingleLike(this.selectionMode)) {\n      return;\n    }\n\n    if (!this.textInput) {\n      return;\n    }\n\n    const {\n      allSelectedIndicatorChipEl,\n      chipContainerEl,\n      selectionDisplay,\n      placeholder,\n      selectedIndicatorChipEl,\n      textInput,\n    } = this;\n\n    const chipContainerElGap = parseInt(getComputedStyle(chipContainerEl).gap.replace(\"px\", \"\"));\n    const chipContainerElWidth = getElementWidth(chipContainerEl);\n    const { fontSize, fontFamily } = getComputedStyle(textInput);\n    const inputTextWidth = getTextWidth(placeholder, `${fontSize} ${fontFamily}`);\n    const inputWidth = (inputTextWidth || parseInt(calciteSize48)) + chipContainerElGap;\n    const allSelectedIndicatorChipElWidth = getElementWidth(allSelectedIndicatorChipEl);\n    const selectedIndicatorChipElWidth = getElementWidth(selectedIndicatorChipEl);\n    const largestSelectedIndicatorChipWidth = Math.max(\n      allSelectedIndicatorChipElWidth,\n      selectedIndicatorChipElWidth\n    );\n\n    this.setCompactSelectionDisplay({\n      chipContainerElGap,\n      chipContainerElWidth,\n      inputWidth,\n      largestSelectedIndicatorChipWidth,\n    });\n\n    if (selectionDisplay === \"fit\") {\n      const chipEls = Array.from(this.el.shadowRoot.querySelectorAll(\"calcite-chip\")).filter(\n        (chipEl) => chipEl.closable\n      );\n\n      const availableHorizontalChipElSpace = Math.round(\n        chipContainerElWidth -\n          ((this.selectedHiddenChipsCount > 0 ? selectedIndicatorChipElWidth : 0) +\n            chipContainerElGap +\n            inputWidth +\n            chipContainerElGap)\n      );\n\n      this.refreshChipDisplay({ availableHorizontalChipElSpace, chipContainerElGap, chipEls });\n      this.setVisibleAndHiddenChips(chipEls);\n    }\n  };\n\n  setFloatingEl = (el: HTMLDivElement): void => {\n    this.floatingEl = el;\n    connectFloatingUI(this, this.referenceEl, this.floatingEl);\n  };\n\n  private setCompactSelectionDisplay({\n    chipContainerElGap,\n    chipContainerElWidth,\n    inputWidth,\n    largestSelectedIndicatorChipWidth,\n  }): void {\n    const newCompactBreakpoint = Math.round(\n      largestSelectedIndicatorChipWidth + chipContainerElGap + inputWidth\n    );\n    if (!this.maxCompactBreakpoint || this.maxCompactBreakpoint < newCompactBreakpoint) {\n      this.maxCompactBreakpoint = newCompactBreakpoint;\n    }\n    this.compactSelectionDisplay = chipContainerElWidth < this.maxCompactBreakpoint;\n  }\n\n  setContainerEl = (el: HTMLDivElement): void => {\n    this.resizeObserver.observe(el);\n    this.listContainerEl = el;\n    this.transitionEl = el;\n  };\n\n  setChipContainerEl = (el: HTMLDivElement): void => {\n    this.resizeObserver.observe(el);\n    this.chipContainerEl = el;\n  };\n\n  setReferenceEl = (el: HTMLDivElement): void => {\n    this.referenceEl = el;\n    connectFloatingUI(this, this.referenceEl, this.floatingEl);\n  };\n\n  setAllSelectedIndicatorChipEl = (el: HTMLCalciteChipElement): void => {\n    this.allSelectedIndicatorChipEl = el;\n  };\n\n  setSelectedIndicatorChipEl = (el: HTMLCalciteChipElement): void => {\n    this.selectedIndicatorChipEl = el;\n  };\n\n  private setVisibleAndHiddenChips(chipEls: HTMLCalciteChipElement[]): void {\n    let newSelectedVisibleChipsCount = 0;\n    chipEls.forEach((chipEl) => {\n      if (chipEl.selected && !chipEl.classList.contains(CSS.chipInvisible)) {\n        newSelectedVisibleChipsCount++;\n      }\n    });\n    if (newSelectedVisibleChipsCount !== this.selectedVisibleChipsCount) {\n      this.selectedVisibleChipsCount = newSelectedVisibleChipsCount;\n    }\n    const newSelectedHiddenChipsCount =\n      this.getSelectedItems().length - newSelectedVisibleChipsCount;\n    if (newSelectedHiddenChipsCount !== this.selectedHiddenChipsCount) {\n      this.selectedHiddenChipsCount = newSelectedHiddenChipsCount;\n    }\n  }\n\n  private getMaxScrollerHeight(): number {\n    const items = this.getItemsAndGroups().filter((item) => !item.hidden);\n\n    const { maxItems } = this;\n\n    let itemsToProcess = 0;\n    let maxScrollerHeight = 0;\n\n    if (items.length > maxItems) {\n      items.forEach((item) => {\n        if (itemsToProcess < maxItems && maxItems > 0) {\n          const height = this.calculateSingleItemHeight(item);\n          if (height > 0) {\n            maxScrollerHeight += height;\n            itemsToProcess++;\n          }\n        }\n      });\n    }\n\n    return maxScrollerHeight;\n  }\n\n  private calculateSingleItemHeight(item: ComboboxChildElement): number {\n    if (!item) {\n      return;\n    }\n\n    let height = item.offsetHeight;\n    // if item has children items, don't count their height twice\n    const children = Array.from(item.querySelectorAll<ComboboxChildElement>(ComboboxChildSelector));\n    children\n      .map((child) => child?.offsetHeight)\n      .forEach((offsetHeight) => {\n        height -= offsetHeight;\n      });\n    return height;\n  }\n\n  inputHandler = (event: Event): void => {\n    const value = (event.target as HTMLInputElement).value;\n    this.text = value;\n    this.filterItems(value);\n    if (value) {\n      this.activeChipIndex = -1;\n    }\n  };\n\n  getItemsAndGroups(): ComboboxChildElement[] {\n    return [...this.groupItems, ...this.items];\n  }\n\n  private filterItems = (() => {\n    const find = (item: ComboboxChildElement, filteredData: ItemData[]) =>\n      item &&\n      filteredData.some(({ label, value }) =>\n        isGroup(item) ? label === item.label : value === item.value && label === item.textLabel\n      );\n\n    return debounce((text: string): void => {\n      const filteredData = filter(this.data, text);\n      const itemsAndGroups = this.getItemsAndGroups();\n\n      itemsAndGroups.forEach((item) => {\n        const hidden = !find(item, filteredData);\n        item.hidden = hidden;\n        const [parent, grandparent] = item.ancestors;\n\n        if (find(parent, filteredData) || find(grandparent, filteredData)) {\n          item.hidden = false;\n        }\n\n        if (!hidden) {\n          item.ancestors.forEach((ancestor) => (ancestor.hidden = false));\n        }\n      });\n\n      this.filteredItems = this.getFilteredItems();\n      this.calciteComboboxFilterChange.emit();\n    }, 100);\n  })();\n\n  internalComboboxChangeEvent = (): void => {\n    this.calciteComboboxChange.emit();\n  };\n\n  private emitComboboxChange = debounce(this.internalComboboxChangeEvent, 0);\n\n  toggleSelection(item: HTMLCalciteComboboxItemElement, value = !item.selected): void {\n    if (\n      !item ||\n      (this.selectionMode === \"single-persist\" && item.selected && item.value === this.value)\n    ) {\n      return;\n    }\n\n    if (this.isMulti()) {\n      item.selected = value;\n      this.updateAncestors(item);\n      this.selectedItems = this.getSelectedItems();\n      this.emitComboboxChange();\n      this.resetText();\n      this.filterItems(\"\");\n    } else {\n      this.ignoreSelectedEventsFlag = true;\n      this.items.forEach((el) => (el.selected = el === item ? value : false));\n      this.ignoreSelectedEventsFlag = false;\n      this.selectedItems = this.getSelectedItems();\n      this.emitComboboxChange();\n\n      if (this.textInput) {\n        this.textInput.value = item.textLabel;\n      }\n      this.open = false;\n      this.updateActiveItemIndex(-1);\n      this.resetText();\n      this.filterItems(\"\");\n    }\n  }\n\n  updateAncestors(item: HTMLCalciteComboboxItemElement): void {\n    if (this.selectionMode !== \"ancestors\") {\n      return;\n    }\n    const ancestors = getItemAncestors(item);\n    const children = getItemChildren(item);\n    if (item.selected) {\n      ancestors.forEach((el) => {\n        (el as HTMLCalciteComboboxItemElement).selected = true;\n      });\n    } else {\n      children.forEach((el) => (el.selected = false));\n      [...ancestors].forEach((el) => {\n        if (!hasActiveChildren(el)) {\n          el.selected = false;\n        }\n      });\n    }\n  }\n\n  getFilteredItems(): HTMLCalciteComboboxItemElement[] {\n    return this.items.filter((item) => !item.hidden);\n  }\n\n  private getSelectedItems = (): HTMLCalciteComboboxItemElement[] => {\n    if (!this.isMulti()) {\n      const match = this.items.find(({ selected }) => selected);\n      return match ? [match] : [];\n    }\n\n    return (\n      this.items\n        .filter(\n          (item) =>\n            item.selected && (this.selectionMode !== \"ancestors\" || !hasActiveChildren(item))\n        )\n        /** Preserve order of entered tags */\n        .sort((a, b) => {\n          const aIdx = this.selectedItems.indexOf(a);\n          const bIdx = this.selectedItems.indexOf(b);\n          if (aIdx > -1 && bIdx > -1) {\n            return aIdx - bIdx;\n          }\n          return bIdx - aIdx;\n        })\n    );\n  };\n\n  private updateItems = (): void => {\n    this.items = this.getItems();\n    this.groupItems = this.getGroupItems();\n    this.data = this.getData();\n    this.selectedItems = this.getSelectedItems();\n    this.filteredItems = this.getFilteredItems();\n    this.needsIcon = this.getNeedsIcon();\n\n    this.items.forEach((item) => {\n      item.selectionMode = this.selectionMode;\n      item.scale = this.scale;\n    });\n\n    if (!this.allowCustomValues) {\n      this.setMaxScrollerHeight();\n    }\n\n    this.groupItems.forEach((groupItem, index, items) => {\n      if (index === 0) {\n        groupItem.afterEmptyGroup = false;\n      }\n\n      const nextGroupItem = items[index + 1];\n\n      if (nextGroupItem) {\n        nextGroupItem.afterEmptyGroup = groupItem.children.length === 0;\n      }\n    });\n  };\n\n  getData(): ItemData[] {\n    return this.items.map((item) => ({\n      filterDisabled: item.filterDisabled,\n      value: item.value,\n      label: item.textLabel,\n    }));\n  }\n\n  getNeedsIcon(): boolean {\n    return isSingleLike(this.selectionMode) && this.items.some((item) => item.icon);\n  }\n\n  resetText(): void {\n    if (this.textInput) {\n      this.textInput.value = \"\";\n    }\n    this.text = \"\";\n  }\n\n  getItems(): HTMLCalciteComboboxItemElement[] {\n    const items: HTMLCalciteComboboxItemElement[] = Array.from(\n      this.el.querySelectorAll(ComboboxItem)\n    );\n    return items.filter((item) => !item.disabled);\n  }\n\n  getGroupItems(): HTMLCalciteComboboxItemGroupElement[] {\n    return Array.from(this.el.querySelectorAll(ComboboxItemGroup));\n  }\n\n  addCustomChip(value: string, focus?: boolean): void {\n    const existingItem = this.items.find((el) => el.textLabel === value);\n    if (existingItem) {\n      this.toggleSelection(existingItem, true);\n    } else {\n      if (!this.isMulti()) {\n        this.toggleSelection(this.selectedItems[this.selectedItems.length - 1], false);\n      }\n      const item = document.createElement(ComboboxItem) as HTMLCalciteComboboxItemElement;\n      item.value = value;\n      item.textLabel = value;\n      item.selected = true;\n      this.el.appendChild(item);\n      this.resetText();\n      if (focus) {\n        this.setFocus();\n      }\n      this.updateItems();\n      this.filterItems(\"\");\n      this.emitComboboxChange();\n    }\n  }\n\n  removeActiveChip(): void {\n    this.toggleSelection(this.selectedItems[this.activeChipIndex], false);\n    this.setFocus();\n  }\n\n  removeLastChip(): void {\n    this.toggleSelection(this.selectedItems[this.selectedItems.length - 1], false);\n    this.setFocus();\n  }\n\n  previousChip(): void {\n    if (this.text) {\n      return;\n    }\n    const length = this.selectedItems.length - 1;\n    const active = this.activeChipIndex;\n    this.activeChipIndex = active === -1 ? length : Math.max(active - 1, 0);\n    this.updateActiveItemIndex(-1);\n    this.focusChip();\n  }\n\n  nextChip(): void {\n    if (this.text || this.activeChipIndex === -1) {\n      return;\n    }\n    const last = this.selectedItems.length - 1;\n    const newIndex = this.activeChipIndex + 1;\n    if (newIndex > last) {\n      this.activeChipIndex = -1;\n      this.setFocus();\n    } else {\n      this.activeChipIndex = newIndex;\n      this.focusChip();\n    }\n    this.updateActiveItemIndex(-1);\n  }\n\n  focusChip(): void {\n    const guid = this.selectedItems[this.activeChipIndex]?.guid;\n\n    const chip = guid\n      ? this.referenceEl.querySelector<HTMLCalciteChipElement>(`#${chipUidPrefix}${guid}`)\n      : null;\n    chip?.setFocus();\n  }\n\n  private scrollToActiveItem = (): void => {\n    const activeItem = this.filteredItems[this.activeItemIndex];\n\n    if (!activeItem) {\n      return;\n    }\n\n    const height = this.calculateSingleItemHeight(activeItem);\n    const { offsetHeight, scrollTop } = this.listContainerEl;\n    if (offsetHeight + scrollTop < activeItem.offsetTop + height) {\n      this.listContainerEl.scrollTop = activeItem.offsetTop - offsetHeight + height;\n    } else if (activeItem.offsetTop < scrollTop) {\n      this.listContainerEl.scrollTop = activeItem.offsetTop;\n    }\n  };\n\n  shiftActiveItemIndex(delta: number): void {\n    const { length } = this.filteredItems;\n    const newIndex = (this.activeItemIndex + length + delta) % length;\n    this.updateActiveItemIndex(newIndex);\n    this.scrollToActiveItem();\n  }\n\n  updateActiveItemIndex(index: number): void {\n    this.activeItemIndex = index;\n    let activeDescendant: string = null;\n    this.filteredItems.forEach((el, i) => {\n      if (i === index) {\n        el.active = true;\n        activeDescendant = `${itemUidPrefix}${el.guid}`;\n      } else {\n        el.active = false;\n      }\n    });\n    this.activeDescendant = activeDescendant;\n    if (this.activeItemIndex > -1) {\n      this.activeChipIndex = -1;\n    }\n  }\n\n  private isAllSelected(): boolean {\n    return this.getItems().length === this.getSelectedItems().length;\n  }\n\n  isMulti(): boolean {\n    return !isSingleLike(this.selectionMode);\n  }\n\n  comboboxFocusHandler = (): void => {\n    if (this.disabled) {\n      return;\n    }\n\n    this.textInput?.focus();\n  };\n\n  //--------------------------------------------------------------------------\n  //\n  //  Render Methods\n  //\n  //--------------------------------------------------------------------------\n\n  renderChips(): VNode[] {\n    const { activeChipIndex, scale, selectionMode, messages } = this;\n    return this.selectedItems.map((item, i) => {\n      const chipClasses = {\n        chip: true,\n        \"chip--active\": activeChipIndex === i,\n      };\n      const ancestors = [...getItemAncestors(item)].reverse();\n      const pathLabel = [...ancestors, item].map((el) => el.textLabel);\n      const label = selectionMode !== \"ancestors\" ? item.textLabel : pathLabel.join(\" / \");\n      return (\n        <calcite-chip\n          class={chipClasses}\n          closable\n          icon={item.icon}\n          iconFlipRtl={item.iconFlipRtl}\n          id={item.guid ? `${chipUidPrefix}${item.guid}` : null}\n          key={item.textLabel}\n          messageOverrides={{ dismissLabel: messages.removeTag }}\n          onCalciteChipClose={() => this.calciteChipCloseHandler(item)}\n          scale={scale}\n          selected={item.selected}\n          title={label}\n          value={item.value}\n        >\n          {label}\n        </calcite-chip>\n      );\n    });\n  }\n\n  renderAllSelectedIndicatorChip(): VNode {\n    const {\n      compactSelectionDisplay,\n      scale,\n      selectedVisibleChipsCount,\n      setAllSelectedIndicatorChipEl,\n    } = this;\n    const label = this.messages.allSelected;\n    return (\n      <calcite-chip\n        class={{\n          chip: true,\n          [CSS.chipInvisible]: !(\n            this.isAllSelected() &&\n            !selectedVisibleChipsCount &&\n            !compactSelectionDisplay\n          ),\n        }}\n        scale={scale}\n        title={label}\n        value=\"\"\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={setAllSelectedIndicatorChipEl}\n      >\n        {label}\n      </calcite-chip>\n    );\n  }\n\n  renderAllSelectedIndicatorChipCompact(): VNode {\n    const { compactSelectionDisplay, scale, selectedVisibleChipsCount } = this;\n    const label = this.messages.all || \"All\";\n    return (\n      <calcite-chip\n        class={{\n          chip: true,\n          [CSS.chipInvisible]: !(\n            this.isAllSelected() &&\n            !selectedVisibleChipsCount &&\n            compactSelectionDisplay\n          ),\n        }}\n        scale={scale}\n        title={label}\n        value=\"\"\n      >\n        {label}\n      </calcite-chip>\n    );\n  }\n\n  renderSelectedIndicatorChip(): VNode {\n    const {\n      compactSelectionDisplay,\n      selectionDisplay,\n      getSelectedItems,\n      scale,\n      selectedHiddenChipsCount,\n      selectedVisibleChipsCount,\n      setSelectedIndicatorChipEl,\n    } = this;\n    let chipInvisible: boolean;\n    let label: string;\n\n    if (compactSelectionDisplay) {\n      chipInvisible = true;\n    } else {\n      if (selectionDisplay === \"single\") {\n        const selectedItemsCount = getSelectedItems().length;\n        if (this.isAllSelected()) {\n          chipInvisible = true;\n        } else if (selectedItemsCount > 0) {\n          chipInvisible = false;\n        } else {\n          chipInvisible = true;\n        }\n        label = `${selectedItemsCount} ${this.messages.selected}`;\n      } else if (selectionDisplay === \"fit\") {\n        chipInvisible = !!(\n          (this.isAllSelected() && selectedVisibleChipsCount === 0) ||\n          selectedHiddenChipsCount === 0\n        );\n        label =\n          selectedVisibleChipsCount > 0\n            ? `+${selectedHiddenChipsCount}`\n            : `${selectedHiddenChipsCount} ${this.messages.selected}`;\n      }\n    }\n    return (\n      <calcite-chip\n        class={{\n          chip: true,\n          [CSS.chipInvisible]: chipInvisible,\n        }}\n        scale={scale}\n        title={label}\n        value=\"\"\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={setSelectedIndicatorChipEl}\n      >\n        {label}\n      </calcite-chip>\n    );\n  }\n\n  renderSelectedIndicatorChipCompact(): VNode {\n    const {\n      compactSelectionDisplay,\n      selectionDisplay,\n      getSelectedItems,\n      scale,\n      selectedHiddenChipsCount,\n    } = this;\n    let chipInvisible: boolean;\n    let label: string;\n\n    if (compactSelectionDisplay) {\n      const selectedItemsCount = getSelectedItems().length;\n      if (this.isAllSelected()) {\n        chipInvisible = true;\n      } else if (selectionDisplay === \"fit\") {\n        chipInvisible = !(selectedHiddenChipsCount > 0);\n        label = `${selectedHiddenChipsCount || 0}`;\n      } else if (selectionDisplay === \"single\") {\n        chipInvisible = !(selectedItemsCount > 0);\n        label = `${selectedItemsCount}`;\n      }\n    } else {\n      chipInvisible = true;\n    }\n    return (\n      <calcite-chip\n        class={{\n          chip: true,\n          [CSS.chipInvisible]: chipInvisible,\n        }}\n        scale={scale}\n        title={label}\n        value=\"\"\n      >\n        {label}\n      </calcite-chip>\n    );\n  }\n\n  renderInput(): VNode {\n    const { guid, disabled, placeholder, selectionMode, selectedItems, open } = this;\n    const single = isSingleLike(selectionMode);\n    const selectedItem = selectedItems[0];\n    const showLabel = !open && single && !!selectedItem;\n\n    return (\n      <span\n        class={{\n          \"input-wrap\": true,\n          \"input-wrap--single\": single,\n        }}\n      >\n        {showLabel && (\n          <span\n            class={{\n              label: true,\n              \"label--icon\": !!selectedItem?.icon,\n            }}\n            key=\"label\"\n          >\n            {selectedItem.textLabel}\n          </span>\n        )}\n        <input\n          aria-activedescendant={this.activeDescendant}\n          aria-autocomplete=\"list\"\n          aria-controls={`${listboxUidPrefix}${guid}`}\n          aria-label={getLabelText(this)}\n          class={{\n            input: true,\n            \"input--single\": true,\n            \"input--transparent\": this.activeChipIndex > -1,\n            \"input--hidden\": showLabel,\n            \"input--icon\": !!this.placeholderIcon,\n          }}\n          disabled={disabled}\n          id={`${inputUidPrefix}${guid}`}\n          key=\"input\"\n          onFocus={this.comboboxFocusHandler}\n          onInput={this.inputHandler}\n          placeholder={placeholder}\n          type=\"text\"\n          // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n          ref={(el) => (this.textInput = el as HTMLInputElement)}\n        />\n      </span>\n    );\n  }\n\n  renderListBoxOptions(): VNode[] {\n    return this.filteredItems.map((item) => (\n      <li\n        aria-selected={toAriaBoolean(item.selected)}\n        id={item.guid ? `${itemUidPrefix}${item.guid}` : null}\n        role=\"option\"\n        tabindex=\"-1\"\n      >\n        {item.textLabel}\n      </li>\n    ));\n  }\n\n  renderFloatingUIContainer(): VNode {\n    const { setFloatingEl, setContainerEl, open } = this;\n    const classes = {\n      [CSS.listContainer]: true,\n      [FloatingCSS.animation]: true,\n      [FloatingCSS.animationActive]: open,\n    };\n\n    return (\n      <div\n        aria-hidden=\"true\"\n        class={{\n          \"floating-ui-container\": true,\n          \"floating-ui-container--active\": open,\n        }}\n        // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n        ref={setFloatingEl}\n      >\n        <div\n          class={classes}\n          // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n          ref={setContainerEl}\n        >\n          <ul class={{ list: true, \"list--hide\": !open }}>\n            <slot />\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  renderIconStart(): VNode {\n    const { selectedItems, placeholderIcon, selectionMode, placeholderIconFlipRtl } = this;\n    const selectedItem = selectedItems[0];\n    const selectedIcon = selectedItem?.icon;\n    const singleSelectionMode = isSingleLike(selectionMode);\n\n    const iconAtStart =\n      !this.open && selectedItem\n        ? !!selectedIcon && singleSelectionMode\n        : !!this.placeholderIcon && (!selectedItem || singleSelectionMode);\n\n    return (\n      iconAtStart && (\n        <span class=\"icon-start\">\n          <calcite-icon\n            class=\"selected-icon\"\n            flipRtl={this.open && selectedItem ? selectedItem.iconFlipRtl : placeholderIconFlipRtl}\n            icon={!this.open && selectedItem ? selectedIcon : placeholderIcon}\n            scale={getIconScale(this.scale)}\n          />\n        </span>\n      )\n    );\n  }\n\n  renderIconEnd(): VNode {\n    const { open } = this;\n    return (\n      <span class=\"icon-end\">\n        <calcite-icon\n          icon={open ? \"chevron-up\" : \"chevron-down\"}\n          scale={getIconScale(this.scale)}\n        />\n      </span>\n    );\n  }\n\n  render(): VNode {\n    const { selectionDisplay, guid, label, open } = this;\n    const singleSelectionMode = isSingleLike(this.selectionMode);\n    const allSelectionDisplay = selectionDisplay === \"all\";\n    const singleSelectionDisplay = selectionDisplay === \"single\";\n    const fitSelectionDisplay = !singleSelectionMode && selectionDisplay === \"fit\";\n    const isClearable = !this.clearDisabled && this.value?.length > 0;\n    return (\n      <Host onClick={this.comboboxFocusHandler}>\n        <div\n          aria-autocomplete=\"list\"\n          aria-controls={`${listboxUidPrefix}${guid}`}\n          aria-expanded={toAriaBoolean(open)}\n          aria-haspopup=\"listbox\"\n          aria-label={getLabelText(this)}\n          aria-live=\"polite\"\n          aria-owns={`${listboxUidPrefix}${guid}`}\n          class={{\n            wrapper: true,\n            \"wrapper--single\": singleSelectionMode || !this.selectedItems.length,\n            \"wrapper--active\": open,\n          }}\n          onClick={this.clickHandler}\n          onKeyDown={this.keyDownHandler}\n          role=\"combobox\"\n          // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)\n          ref={this.setReferenceEl}\n        >\n          <div\n            class={{\n              \"grid-input\": true,\n              [CSS.selectionDisplayFit]: fitSelectionDisplay,\n              [CSS.selectionDisplaySingle]: singleSelectionDisplay,\n            }}\n            ref={this.setChipContainerEl}\n          >\n            {this.renderIconStart()}\n            {!singleSelectionMode && !singleSelectionDisplay && this.renderChips()}\n            {!singleSelectionMode &&\n              !allSelectionDisplay && [\n                this.renderSelectedIndicatorChip(),\n                this.renderSelectedIndicatorChipCompact(),\n                this.renderAllSelectedIndicatorChip(),\n                this.renderAllSelectedIndicatorChipCompact(),\n              ]}\n            <label\n              class=\"screen-readers-only\"\n              htmlFor={`${inputUidPrefix}${guid}`}\n              id={`${labelUidPrefix}${guid}`}\n            >\n              {label}\n            </label>\n            {this.renderInput()}\n          </div>\n          {isClearable ? (\n            <XButton\n              disabled={this.disabled}\n              key=\"close-button\"\n              label={this.messages.clear}\n              scale={this.scale}\n            />\n          ) : null}\n          {this.renderIconEnd()}\n        </div>\n        <ul\n          aria-labelledby={`${labelUidPrefix}${guid}`}\n          aria-multiselectable=\"true\"\n          class=\"screen-readers-only\"\n          id={`${listboxUidPrefix}${guid}`}\n          role=\"listbox\"\n          tabIndex={-1}\n        >\n          {this.renderListBoxOptions()}\n        </ul>\n        {this.renderFloatingUIContainer()}\n        <HiddenFormInputSlot component={this} />\n        {this.validationMessage ? (\n          <Validation\n            icon={this.validationIcon}\n            message={this.validationMessage}\n            scale={this.scale}\n            status={this.status}\n          />\n        ) : null}\n      </Host>\n    );\n  }\n}\n","export const CSS = {\n  icon: \"icon\",\n  iconActive: \"icon--active\",\n  iconIndent: \"icon--indent\",\n  custom: \"icon--custom\",\n  dot: \"icon--dot\",\n  single: \"label--single\",\n  label: \"label\",\n  active: \"label--active\",\n  selected: \"label--selected\",\n  title: \"title\",\n  textContainer: \"text-container\",\n};\n","@include base-component();\n\n.scale--s {\n  @apply text-n2h;\n  --calcite-combobox-item-spacing-unit-l: theme(\"spacing.2\");\n  --calcite-combobox-item-spacing-unit-s: theme(\"spacing.1\");\n  --calcite-combobox-item-spacing-indent: theme(\"spacing.2\");\n  --calcite-combobox-item-selector-icon-size: theme(\"spacing.4\");\n}\n\n.scale--m {\n  @apply text-n1h;\n  --calcite-combobox-item-spacing-unit-l: theme(\"spacing.3\");\n  --calcite-combobox-item-spacing-unit-s: theme(\"spacing.2\");\n  --calcite-combobox-item-spacing-indent: theme(\"spacing.3\");\n  --calcite-combobox-item-selector-icon-size: theme(\"spacing.4\");\n}\n\n.scale--l {\n  @apply text-0h;\n  --calcite-combobox-item-spacing-unit-l: theme(\"spacing.4\");\n  --calcite-combobox-item-spacing-unit-s: theme(\"spacing[2.5]\");\n  --calcite-combobox-item-spacing-indent: theme(\"spacing.4\");\n  --calcite-combobox-item-selector-icon-size: theme(\"spacing.6\");\n}\n\n.container {\n  --calcite-combobox-item-indent-value: calc(\n    var(--calcite-combobox-item-spacing-indent) * var(--calcite-combobox-item-spacing-indent-multiplier)\n  );\n}\n\n:host(:focus) {\n  @apply shadow-none;\n}\n\n@include disabled();\n\n:host,\nul {\n  @apply m-0 flex flex-col p-0;\n}\n\n:host(:focus),\nul:focus {\n  @apply outline-none;\n}\n\n.label {\n  @apply text-color-3\n    focus-base\n    relative\n    box-border\n    flex\n    w-full\n    min-w-full\n    cursor-pointer\n    items-center\n    no-underline\n    duration-150\n    ease-in-out;\n  @include word-break();\n  padding-block: var(--calcite-combobox-item-spacing-unit-s);\n  padding-inline: var(--calcite-combobox-item-spacing-unit-l);\n}\n\n:host([disabled]) .label {\n  @apply cursor-default;\n}\n\n// selected state\n.label--selected {\n  @apply text-color-1 font-medium;\n}\n\n.label--active {\n  @apply focus-inset;\n}\n\n.label:hover,\n.label:active {\n  @apply text-color-1\n    bg-foreground-2\n    no-underline\n    shadow-none;\n}\n\n.title {\n  padding-block: 0;\n  padding-inline: var(--calcite-combobox-item-spacing-unit-l);\n}\n\n.icon {\n  @apply inline-flex\n    opacity-0\n    duration-150\n    ease-in-out;\n  color: theme(\"borderColor.color.1\");\n}\n\n.icon--indent {\n  padding-inline-start: var(--calcite-combobox-item-indent-value);\n}\n\n.icon--custom {\n  margin-block-start: -1px;\n  padding-inline-start: var(--calcite-combobox-item-spacing-unit-l);\n  @apply text-color-3;\n}\n\n.icon--active {\n  @apply text-color-1;\n}\n\n.icon--dot {\n  @apply flex justify-center;\n  min-inline-size: var(--calcite-combobox-item-selector-icon-size);\n}\n\n.icon--dot:before {\n  text-align: start;\n  content: \"\\2022\";\n}\n\n.label--active .icon {\n  @apply opacity-100;\n}\n\n.label--selected .icon {\n  @apply opacity-100;\n  color: theme(\"backgroundColor.brand\");\n}\n\n:host(:hover[disabled]) .icon {\n  @apply opacity-100;\n}\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Prop,\n  VNode,\n  Watch,\n} from \"@stencil/core\";\nimport {\n  ConditionalSlotComponent,\n  connectConditionalSlotComponent,\n  disconnectConditionalSlotComponent,\n} from \"../../utils/conditionalSlot\";\nimport { getSlotted } from \"../../utils/dom\";\nimport { guid } from \"../../utils/guid\";\nimport {\n  connectInteractive,\n  disconnectInteractive,\n  InteractiveComponent,\n  updateHostInteraction,\n} from \"../../utils/interactive\";\nimport { ComboboxChildElement } from \"../combobox/interfaces\";\nimport { getAncestors, getDepth, isSingleLike } from \"../combobox/utils\";\nimport { Scale, SelectionMode } from \"../interfaces\";\nimport { CSS } from \"./resources\";\nimport { getIconScale } from \"../../utils/component\";\n\n/**\n * @slot - A slot for adding nested `calcite-combobox-item`s.\n */\n@Component({\n  tag: \"calcite-combobox-item\",\n  styleUrl: \"combobox-item.scss\",\n  shadow: true,\n})\nexport class ComboboxItem implements ConditionalSlotComponent, InteractiveComponent {\n  // --------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  // --------------------------------------------------------------------------\n\n  /** When `true`, interaction is prevented and the component is displayed with lower opacity. */\n  @Prop({ reflect: true }) disabled = false;\n\n  /**\n   * When `true`, the component is selected.\n   */\n  @Prop({ reflect: true, mutable: true }) selected = false;\n\n  /** When `true`, the component is active. */\n  @Prop({ reflect: true }) active = false;\n\n  /** Specifies the parent and grandparent items, which are set on `calcite-combobox`. */\n  @Prop({ mutable: true }) ancestors: ComboboxChildElement[];\n\n  /** The `id` attribute of the component. When omitted, a globally unique identifier is used. */\n  @Prop({ reflect: true }) guid = guid();\n\n  /** Specifies an icon to display. */\n  @Prop({ reflect: true }) icon: string;\n\n  /** When `true`, the icon will be flipped when the element direction is right-to-left (`\"rtl\"`). */\n  @Prop({ reflect: true }) iconFlipRtl = false;\n\n  @Watch(\"selected\")\n  selectedWatchHandler(): void {\n    this.calciteComboboxItemChange.emit();\n  }\n\n  /** The component's text. */\n  @Prop({ reflect: true }) textLabel!: string;\n\n  /** The component's value. */\n  @Prop() value!: any;\n\n  /**\n   * When `true`, omits the component from the `calcite-combobox` filtered search results.\n   */\n  @Prop({ reflect: true }) filterDisabled: boolean;\n\n  /**\n   * Specifies the selection mode:\n   * - \"multiple\" allows any number of selected items (default),\n   * - \"single\" allows only one selection,\n   * - \"single-persist\" allow and require one open item,\n   * - \"ancestors\" is like multiple, but shows ancestors of selected items as selected, with only deepest children shown in chips.\n   *\n   * @internal\n   */\n  @Prop({ reflect: true }) selectionMode: Extract<\n    \"single\" | \"single-persist\" | \"ancestors\" | \"multiple\",\n    SelectionMode\n  > = \"multiple\";\n\n  /**\n   * Specifies the size of the component inherited from the `calcite-combobox`, defaults to `m`.\n   *\n   * @internal\n   */\n  @Prop() scale: Scale = \"m\";\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Properties\n  //\n  // --------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteComboboxItemElement;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  // --------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    this.ancestors = getAncestors(this.el);\n    connectConditionalSlotComponent(this);\n    connectInteractive(this);\n  }\n\n  disconnectedCallback(): void {\n    disconnectConditionalSlotComponent(this);\n    disconnectInteractive(this);\n  }\n\n  componentDidRender(): void {\n    updateHostInteraction(this);\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  // --------------------------------------------------------------------------\n\n  /**\n   * Emits whenever the component is selected or unselected.\n   *\n   */\n  @Event({ cancelable: false }) calciteComboboxItemChange: EventEmitter<void>;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  // --------------------------------------------------------------------------\n\n  toggleSelected(): Promise<void> {\n    const isSinglePersistSelect = this.selectionMode === \"single-persist\";\n\n    if (this.disabled || (isSinglePersistSelect && this.selected)) {\n      return;\n    }\n\n    this.selected = !this.selected;\n  }\n\n  private itemClickHandler = (): void => {\n    this.toggleSelected();\n  };\n\n  // --------------------------------------------------------------------------\n  //\n  //  Render Methods\n  //\n  // --------------------------------------------------------------------------\n\n  renderIcon(iconPath: string): VNode {\n    return this.icon ? (\n      <calcite-icon\n        class={{\n          [CSS.custom]: !!this.icon,\n          [CSS.iconActive]: this.icon && this.selected,\n          [CSS.iconIndent]: true,\n        }}\n        flipRtl={this.iconFlipRtl}\n        icon={this.icon || iconPath}\n        key=\"icon\"\n        scale={getIconScale(this.scale)}\n      />\n    ) : null;\n  }\n\n  renderSelectIndicator(showDot: boolean, iconPath: string): VNode {\n    return showDot ? (\n      <span\n        class={{\n          [CSS.icon]: true,\n          [CSS.dot]: true,\n          [CSS.iconIndent]: true,\n        }}\n      />\n    ) : (\n      <calcite-icon\n        class={{\n          [CSS.icon]: true,\n          [CSS.iconActive]: this.selected,\n          [CSS.iconIndent]: true,\n        }}\n        flipRtl={this.iconFlipRtl}\n        icon={iconPath}\n        key=\"indicator\"\n        scale={getIconScale(this.scale)}\n      />\n    );\n  }\n\n  renderChildren(): VNode {\n    if (getSlotted(this.el)) {\n      return (\n        <ul key=\"default-slot-container\">\n          <slot />\n        </ul>\n      );\n    }\n\n    return null;\n  }\n\n  render(): VNode {\n    const isSingleSelect = isSingleLike(this.selectionMode);\n    const showDot = isSingleSelect && !this.disabled;\n    const defaultIcon = isSingleSelect ? \"dot\" : \"check\";\n    const iconPath = this.disabled ? \"\" : defaultIcon;\n\n    const classes = {\n      [CSS.label]: true,\n      [CSS.selected]: this.selected,\n      [CSS.active]: this.active,\n      [CSS.single]: isSingleSelect,\n    };\n    const depth = getDepth(this.el);\n\n    return (\n      <Host aria-hidden=\"true\">\n        <div\n          class={`container scale--${this.scale}`}\n          style={{ \"--calcite-combobox-item-spacing-indent-multiplier\": `${depth}` }}\n        >\n          <li class={classes} id={this.guid} onClick={this.itemClickHandler}>\n            {this.renderSelectIndicator(showDot, iconPath)}\n            {this.renderIcon(iconPath)}\n            <span class=\"title\">{this.textLabel}</span>\n          </li>\n          {this.renderChildren()}\n        </div>\n      </Host>\n    );\n  }\n}\n","export const CSS = {\n  list: \"list\",\n  label: \"label\",\n  title: \"title\",\n};\n",".scale--s {\n  @apply text-n2h;\n  --calcite-combobox-item-spacing-unit-l: theme(\"spacing.2\");\n  --calcite-combobox-item-spacing-unit-s: theme(\"spacing.1\");\n  --calcite-combobox-item-spacing-indent: theme(\"spacing.2\");\n}\n\n.scale--m {\n  @apply text-n1h;\n  --calcite-combobox-item-spacing-unit-l: theme(\"spacing.3\");\n  --calcite-combobox-item-spacing-unit-s: theme(\"spacing.2\");\n  --calcite-combobox-item-spacing-indent: theme(\"spacing.3\");\n}\n\n.scale--l {\n  @apply text-0h;\n  --calcite-combobox-item-spacing-unit-l: theme(\"spacing.4\");\n  --calcite-combobox-item-spacing-unit-s: theme(\"spacing.3\");\n  --calcite-combobox-item-spacing-indent: theme(\"spacing.4\");\n}\n\n:host,\n.list {\n  @apply m-0 flex flex-col p-0;\n}\n\n:host(:focus),\n.list:focus {\n  @apply outline-none;\n}\n\n.label {\n  @apply text-color-3 box-border flex w-full min-w-0 max-w-full;\n}\n\n.title {\n  --calcite-combobox-item-indent-value: calc(\n    var(--calcite-combobox-item-spacing-indent) * var(--calcite-combobox-item-spacing-indent-multiplier)\n  );\n  border: 0 solid;\n  @apply border-b-color-3\n    text-color-2\n    word-break\n    block\n    flex-1\n    border-b\n    font-bold;\n  padding-block: var(--calcite-combobox-item-spacing-unit-l);\n  padding-inline: var(--calcite-combobox-item-spacing-unit-s);\n  margin-inline-start: var(--calcite-combobox-item-indent-value);\n}\n\n::slotted(calcite-combobox-item-group:not([after-empty-group])) {\n  padding-block-start: var(--calcite-combobox-item-spacing-unit-l);\n}\n\n@include base-component();\n","import { Component, Element, h, Prop, VNode } from \"@stencil/core\";\nimport { guid } from \"../../utils/guid\";\nimport { ComboboxChildElement } from \"../combobox/interfaces\";\nimport { getAncestors, getDepth } from \"../combobox/utils\";\nimport { Scale } from \"../interfaces\";\nimport { CSS } from \"./resources\";\n\n/**\n * @slot - A slot for adding `calcite-combobox-item`s.\n */\n@Component({\n  tag: \"calcite-combobox-item-group\",\n  styleUrl: \"combobox-item-group.scss\",\n  shadow: true,\n})\nexport class ComboboxItemGroup {\n  // --------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  // --------------------------------------------------------------------------\n\n  /**\n   * When `true`, signifies that the group comes after another group without any children (items or sub-groups), otherwise indicates that the group comes after another group that has children. Used for styling.\n   *\n   * @internal\n   */\n  @Prop({ reflect: true }) afterEmptyGroup = false;\n\n  /** Specifies the parent and grandparent `calcite-combobox-item`s, which are set on `calcite-combobox`. */\n  @Prop({ mutable: true }) ancestors: ComboboxChildElement[];\n\n  /** Specifies the title of the component. */\n  @Prop() label!: string;\n\n  /**\n   * Specifies the size of the component inherited from the `calcite-combobox`, defaults to `m`.\n   *\n   * @internal\n   */\n  @Prop() scale: Scale = \"m\";\n\n  // --------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  // --------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    this.ancestors = getAncestors(this.el);\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Properties\n  //\n  // --------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteComboboxItemGroupElement;\n\n  guid: string = guid();\n\n  // --------------------------------------------------------------------------\n  //\n  //  Render Methods\n  //\n  // --------------------------------------------------------------------------\n\n  render(): VNode {\n    const { el, scale } = this;\n    const depth = getDepth(el);\n\n    return (\n      <ul\n        aria-labelledby={this.guid}\n        class={{ [CSS.list]: true, [`scale--${scale}`]: true }}\n        role=\"group\"\n      >\n        <li\n          class={{ [CSS.label]: true }}\n          id={this.guid}\n          role=\"presentation\"\n          style={{ \"--calcite-combobox-item-spacing-indent-multiplier\": `${depth}` }}\n        >\n          <span class={CSS.title}>{this.label}</span>\n        </li>\n        <slot />\n      </ul>\n    );\n  }\n}\n"],"mappings":"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"}