/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.1.0
 */
import{g as t}from"./p-aa659bfc.js";import{d as s,e as i,t as e}from"./p-5a8a5fa9.js";import{d as n}from"./p-d6eaa970.js";import{h as o,H as a}from"./p-6814fe4e.js";const c={heading:"heading",container:"container",indented:"container--indented"};const r={parentItem:"parent-item"};function l(){this.setUpItems();this.setUpFilter();this.deselectRemovedItems()}const f=["ArrowUp","ArrowDown"];function h(){this.setUpItems();this.setUpFilter();this.emitCalciteListChange=n(k.bind(this),0);this.emitCalciteListFilter=n(F.bind(this),0)}function u(){this.mutationObserver?.observe(this.el,{childList:true,subtree:true})}function d(){this.mutationObserver?.disconnect()}function m(t){const{selectedValues:i}=this;const{item:e,value:n,selected:o,shiftPressed:a}=t.detail;if(o){if(this.multiple&&a){this.selectSiblings(e)}if(!this.multiple){this.deselectSiblingItems(e)}i.set(n,e)}else{i.delete(n);if(this.multiple&&a){this.selectSiblings(e,true)}}if(!this.multiple){E(e,o);if(o){s(e)}}this.lastSelectedItem=e;this.emitCalciteListChange()}function p(t){const s=t.detail.oldValue;const i=this.selectedValues;if(i.has(s)){const e=i.get(s);i.delete(s);i.set(t.detail.newValue,e)}t.stopPropagation()}function g(t){return!!f.find((s=>s===t))}function v(t){const{el:s,items:i,multiple:e,selectedValues:n}=this;if(e){return}const o=s.contains(t.relatedTarget);if(o){return}x(i).forEach((s=>{E(s,n.size===0?s.contains(t.target)||t.target===s:s.selected)}))}function b(t){const{key:i,target:e}=t;if(!g(i)){return}const{items:n,multiple:o,selectionFollowsFocus:a}=this;const{length:c}=n;const r=n.indexOf(e);if(!c||r===-1){return}t.preventDefault();const l=w(this,e,i==="ArrowUp"?"up":"down");const f=n[l];n.forEach((t=>E(t,t===f)));if(!o&&a){f.selected=true}s(f)}function w(s,i,e){const{items:n}=s;const{length:o}=n;const a=n.indexOf(i);const c=e==="up"?-1:1;let r=1;let l=t(a+c*r++,o);const f=l;while(n[l].disabled){l=t(a+c*r++,o);if(l===f){break}}return l}function A(t,s){const{items:i}=t;return i.indexOf(s)}function x(t){return t.filter((t=>!t.disabled))}function F(){this.calciteListFilter.emit()}function k(){this.calciteListChange.emit(this.selectedValues)}function y(t){if(t.defaultPrevented){return}const s=t.target;const i=this.selectedValues;if(s.parentElement.tagName==="CALCITE-PICK-LIST-GROUP"&&s.slot===r.parentItem){s.parentElement.remove();Array.from(s.parentElement.children).forEach((t=>i.delete(t.value)))}else{s.remove();i.delete(s.value)}this.emitCalciteListChange()}function E(t,s){if(t.disabled){return}if(s){t.removeAttribute("tabindex")}else{t.setAttribute("tabindex","-1")}}async function C(t){if(this.filterEnabled&&t==="filter"){await s(this.filterEl);return}const{items:i,multiple:e,selectionFollowsFocus:n}=this;if(i.length===0){return}if(e){return x(i)[0]?.setFocus()}const o=x(i);const a=o.find((t=>t.selected))||o[0];if(n&&a){a.selected=true}return a.setFocus()}function I(t){this.items=Array.from(this.el.querySelectorAll(t));let s=false;const{items:i}=this;i.forEach((t=>{t.icon=this.getIconType();if(!this.multiple){t.deselectDisabled=true;E(t,false)}if(t.selected){s=true;E(t,true);this.selectedValues.set(t.value,t)}}));const[e]=i;if(!s&&e&&!e.disabled){E(e,true)}}function j(){const t=this.selectedValues;const s=this.items.map((({value:t})=>t));t.forEach((t=>{if(!s.includes(t.value)){this.selectedValues.delete(t.value)}}))}function S(t){this.items.forEach((s=>{if(s.value!==t.value){s.toggleSelected(false);if(this.selectedValues.has(s.value)){this.selectedValues.delete(s.value)}}}))}function L(t,s=false){if(!this.lastSelectedItem){return}const{items:i}=this;const e=i.findIndex((t=>t.value===this.lastSelectedItem.value));const n=i.findIndex((s=>s.value===t.value));i.slice(Math.min(e,n),Math.max(e,n)).forEach((t=>{t.toggleSelected(!s);if(!s){this.selectedValues.set(t.value,t)}else{this.selectedValues.delete(t.value)}}))}let P;function T(t=false){const{filteredData:s,filterText:e}=this;const n=s.map((t=>t.value));let o=false;if(!P){P=new Set}const a=this.items?.filter((t=>{const s=t.parentElement;const i=s.matches("calcite-pick-list-group");if(i){P.add(s)}const a=e?n.includes(t.value):true;t.hidden=!a;if(!o){o=a&&t.selected}return a}))||[];P.forEach((t=>{const s=a.some((s=>t.contains(s)));t.hidden=!s;if(!s){return}const e=i(t,"parent-item");if(e){e.hidden=false;if(a.includes(e)){Array.from(t.children).forEach((t=>t.hidden=false))}}}));P.clear();if(a.length>0&&!o&&!this.multiple){E(a[0],true)}this.setFilteredItems(a);if(t){this.emitCalciteListFilter()}}function D(){const t=this.filterEl?.filteredItems;if(t){this.filteredData=t}this.handleFilter()}function U(t){t.stopPropagation();const{filteredItems:s,value:i}=t.currentTarget;this.filterText=i;this.filteredData=s;this.handleFilter(true)}function q(){return this.items.map((t=>({label:t.label,description:t.description,metadata:t.metadata,value:t.value})))}const M={sticky:"sticky-pos"};var V;(function(t){t["circle"]="circle";t["square"]="square";t["grip"]="grip"})(V||(V={}));const G={menuActions:"menu-actions"};const H=({props:{disabled:t,loading:s,filterEnabled:i,dataForFilter:n,handleFilterEvent:c,filterPlaceholder:r,filterText:l,setFilterEl:f,dragEnabled:h,storeAssistiveEl:u},...d})=>{const m=o("slot",null);return o(a,{"aria-busy":e(s),role:"menu",...d},o("section",null,h?o("span",{"aria-live":"assertive",class:"assistive-text",ref:u}):null,o("header",{class:{[M.sticky]:true}},i?o("calcite-filter",{"aria-label":r,disabled:t,items:n,onCalciteFilterChange:c,placeholder:r,value:l,ref:f}):null,o("slot",{name:G.menuActions})),s?o("calcite-scrim",{loading:s}):null,m))};const K={actions:"actions",actionsEnd:"actions--end",actionsStart:"actions--start",description:"description",handle:"handle",handleActivated:"handle--activated",highlight:"highlight",icon:"icon",iconDot:"icon-dot",label:"label",remove:"remove",title:"title",textContainer:"text-container"};const O={checked:"check",remove:"x"};const R={actionsEnd:"actions-end",actionsStart:"actions-start"};export{K as C,V as I,H as L,R as S,S as a,U as b,q as c,j as d,w as e,u as f,A as g,T as h,h as i,D as j,b as k,d as l,l as m,v as n,m as o,p,I as q,y as r,L as s,C as t,r as u,c as v,O as w};
//# sourceMappingURL=p-fadab4e8.js.map